<!-- Modal backdrop -->
@if (isModalOpen) {
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
>
  <!-- Modal container -->
  <div
    class="bg-primary w-full sm:max-w-md mx-auto p-6 rounded-lg shadow-lg relative"
  >
    <!-- Close button -->
    <button
      (click)="closeModal()"
      class="absolute top-2 right-2 text-gray-400 hover:text-gray-600"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>

    <!-- Formulaire à l'intérieur du modal -->
    <h1
      class="text-xl sm:text-2xl md:text-3xl font-bold text-quinary text-center mb-6"
    >
      Donnez votre avis
    </h1>

    @if (successMessage){
    <div
      class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4"
      role="alert"
    >
      <p class="font-bold">Merci pour votre avis !</p>
      <p>{{ successMessage }}</p>
    </div>
    } @if (errorMessage){
    <div
      class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4"
      role="alert"
    >
      <p class="font-bold">Erreur !</p>
      <p>{{ errorMessage }}</p>
    </div>
    }

    <form
      (ngSubmit)="addReview()"
      #reviewForm="ngForm"
      class="w-full bg-secondary rounded-lg shadow-md space-y-6 px-2 pb-2 pt-2"
    >
      <!-- Nom et Date côte à côte -->
      <div class="flex flex-col sm:flex-row sm:space-x-4 mb-4">
        <div class="w-full sm:w-1/2">
          <label
            for="name"
            class="block mb-2 text-lg font-medium text-gray-900"
          >
            Votre nom :
          </label>
          <input
            type="text"
            id="name"
            [(ngModel)]="name"
            name="name"
            class="w-full rounded-lg bg-gray-50 border border-gray-300 text-gray-900 focus:ring-green-500 focus:border-green-500 block text-sm p-2.5"
            placeholder="Votre nom"
            required
          />
        </div>

        <div class="w-full sm:w-1/2">
          <label
            for="date"
            class="block mb-2 text-lg font-medium text-gray-900"
          >
            Date de visite :
          </label>
          <input
            type="date"
            id="date"
            [(ngModel)]="date"
            name="date"
            class="w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block p-2.5"
            placeholder="Sélectionner une date"
            required
          />
        </div>
      </div>

      <!-- Champ Commentaire -->
      <div class="mb-4">
        <label
          for="message"
          class="block mb-2 text-lg font-medium text-gray-900"
        >
          Votre commentaire :
        </label>
        <textarea
          id="message"
          [(ngModel)]="message"
          name="message"
          rows="4"
          class="w-full block p-2.5 text-sm text-quinary bg-gray-50 rounded-lg border border-gray-300 focus:ring-green-500 focus:border-green-500"
          placeholder="Votre message"
          required
        ></textarea>
      </div>

      <!-- Note du Zoo -->
      <div class="mb-4">
        <label class="block mb-2 text-lg font-medium text-quinary">
          Notez le Zoo (sur 5) :
        </label>
        <app-rate [(rating)]="rating" [stars]="stars"></app-rate>
      </div>

      <!-- Case à cocher -->
      <div class="flex items-start mb-4">
        <input
          id="checkbox"
          type="checkbox"
          [(ngModel)]="accepted"
          name="accepted"
          class="w-4 h-4 border-gray-300 rounded focus:ring-secondary"
        />
        <label for="checkbox" class="ml-2 text-sm font-medium text-gray-900">
          En cochant cette case, vous acceptez la publication de votre nom et
          commentaire sur le site.
        </label>
      </div>

      <!-- Bouton d'envoi -->
      <div class="w-full px-4">
        <app-button
          [text]="'Envoyer'"
          [type]="'submit'"
          [color]="'tertiary'"
          [rounded]="true"
        ></app-button>
      </div>
    </form>
  </div>
</div>
}
