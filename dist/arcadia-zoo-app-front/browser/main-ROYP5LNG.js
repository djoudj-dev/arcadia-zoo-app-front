import{a as fi}from"./chunk-YGKCW7CY.js";import{a as We}from"./chunk-DAXAPV7R.js";import{a as ai,b as N}from"./chunk-F5P4C6ZM.js";import{a as si,b as Ge}from"./chunk-ZGZVMIRH.js";import{a as Je,b as Ye}from"./chunk-OLXAPHNS.js";import{a as de}from"./chunk-5VXZOEXZ.js";import{a as R}from"./chunk-3PZTUIRH.js";import{a as vi}from"./chunk-AJHSUSCG.js";import{a as Pe,b as Se}from"./chunk-AZP7S37A.js";import{a as Ze}from"./chunk-4RXGQP6I.js";import{a as gi}from"./chunk-2HCL64IG.js";import{a as oi}from"./chunk-VK6HYJ5R.js";import{b as li,c as K,d as _,e as X,f as ae,g as mi,i as ge,j as pi,k as se,l as di,m as ci,n as le,o as Ce,p as qe,q as Be,r as ze,u as me,v as ui,w as pe}from"./chunk-XTDWMBHN.js";import{a as ii,b as $e,c as ni,d as re,e as oe,f as ri}from"./chunk-63Q2HYMA.js";import{a as U}from"./chunk-D7JCWFOM.js";import{$ as O,$a as Gt,A as Nt,Ab as D,B as jt,Bb as Q,Cb as je,Db as z,E as Y,Ea as L,Eb as Le,Fa as qt,Fb as ve,Gb as Zt,Ha as Bt,Ja as a,Ka as u,Nb as Jt,Ob as Yt,Pa as f,Q as ee,R as ye,S as G,Sb as V,Ua as y,V as te,Xa as zt,Ya as m,Za as A,_ as W,_a as fe,_b as Kt,a as $,ab as v,ac as Ue,b as P,ba as b,bb as Re,bc as Xt,c as be,cb as Me,cc as Qt,d as Ft,da as Lt,db as w,dc as ne,eb as E,f as Dt,fa as Ut,fb as n,fc as k,gb as r,hb as p,i as Tt,ib as F,ja as $t,jb as c,ka as Ve,kb as d,l as Te,la as C,lc as _e,ma as S,mc as ei,n as At,na as j,nc as ti,o as xe,oa as Z,oc as B,qb as s,r as Ae,rb as q,s as Ie,sa as ie,sb as h,tb as Ne,ua as J,ub as Wt,va as Pt,vb as wt,wb as Et,x as Vt,xb as Ht,y as St,z as Rt,zb as x}from"./chunk-OS3QXM5S.js";function Ti(i){let t=i,e=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length,l=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:l===0&&e!==0&&e%1e6===0&&o===0||!(l>=0&&l<=5)?4:5}var hi=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Ti];var Ai=(i,t)=>t.id;function Vi(i,t){if(i&1&&(n(0,"div",2),s(1),r()),i&2){let e=t.$implicit;fe(e.type==="success"?"bg-green-600":"bg-red-600"),a(),h(" ",e.message," ")}}var Ke=class i{constructor(t){this.notificationService=t}static \u0275fac=function(e){return new(e||i)(u(oi))};static \u0275cmp=b({type:i,selectors:[["app-notification"]],standalone:!0,features:[x],decls:4,vars:2,consts:[[1,"fixed","top-4","right-4","z-50","space-y-2"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out",3,"class"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out"]],template:function(e,o){e&1&&(n(0,"div",0),w(1,Vi,2,3,"div",1,Ai),z(3,"async"),r()),e&2&&(a(),E(Le(3,0,o.notificationService.notifications$)))},dependencies:[k,Xt],encapsulation:2})};var Ri=(i,t)=>t.id;function Ni(i,t){if(i&1&&(n(0,"a",1),p(1,"i"),r()),i&2){let e=t.$implicit;m("href",e.url,L)("title",e.name),a(),fe(e.icon+" text-2xl")}}var Qe=class i{socialLinks=[{id:1,icon:"fab fa-facebook",url:"#",name:"Facebook"},{id:2,icon:"fab fa-instagram",url:"#",name:"Instagram"},{id:3,icon:"fab fa-tiktok",url:"#",name:"TikTok"},{id:4,icon:"fab fa-linkedin",url:"#",name:"LinkedIn"}];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-social-links"]],standalone:!0,features:[x],decls:3,vars:0,consts:[[1,"flex","justify-center","gap-4"],["target","_blank","rel","noopener noreferrer",1,"text-tertiary","hover:text-primary","transition-colors","duration-300",3,"href","title"]],template:function(e,o){e&1&&(n(0,"div",0),w(1,Ni,2,4,"a",1,Ri),r()),e&2&&(a(),E(o.socialLinks))},encapsulation:2})};var we=class i{constructor(t){this.http=t;this.loadOpeningHours()}apiUrl=`${B.apiUrl}/api/opening-hours`;openingHours=f([]);parkStatus=f({isOpen:!0,message:""});loadOpeningHours(){this.getCurrentOpeningHours().pipe(Y(t=>(console.error("Erreur lors du chargement des horaires:",t),Te))).subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage}))}})}getCurrentOpeningHours(){return this.http.get(`${this.apiUrl}/current`).pipe(Y(t=>t.status===401?At({openingHours:[],parkStatus:!0,statusMessage:"",isCurrent:!0}):this.handleError("r\xE9cup\xE9ration des horaires actuels",t)))}updateOpeningHours(t,e){let o={openingHours:[{days:"Lundi - Vendredi",hours:e.weekdayHours,isOpen:e.isWeekdayOpen},{days:"Samedi - Dimanche",hours:e.weekendHours,isOpen:e.isWeekendOpen}],parkStatus:e.parkStatus,statusMessage:e.statusMessage??""};return this.http.put(`${this.apiUrl}/${t}`,o).pipe(G(l=>{this.openingHours.set([l])}),Y(l=>this.handleError("mise \xE0 jour des horaires",l)))}updateParkStatus(t){return t.isOpen===void 0?xe(()=>new Error("Le statut isOpen est requis")):this.http.put(`${this.apiUrl}/status`,t).pipe(G(e=>{this.parkStatus.set(e)}),Y(e=>this.handleError("mise \xE0 jour du statut",e)))}isParkOpen(){if(!this.parkStatus().isOpen)return!1;let t=new Date,e=t.getDay(),o=t.getHours()*100+t.getMinutes(),l=this.openingHours()[0]?.openingHours.find(I=>e>=1&&e<=5?I.days.includes("Lundi - Vendredi"):I.days.includes("Samedi - Dimanche"));if(!l?.isOpen)return!1;let[g,T]=l.hours.split(" - ").map(I=>parseInt(I.replace("h","")));return o>=g*100&&o<=T*100}getOpeningHoursId(){return be(this,null,function*(){let t=this.openingHours();if(t&&t.length>0&&t[0]._id)return t[0]._id;throw new Error("Aucun ID trouv\xE9 pour les horaires")})}handleError(t,e){return console.error(`Erreur lors de ${t}:`,e),xe(()=>new Error(`Erreur lors de ${t}`))}static \u0275fac=function(e){return new(e||i)(W(_e))};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};var ji=(i,t)=>t.days;function Li(i,t){if(i&1&&(n(0,"li",27)(1,"span",28),s(2),r(),n(3,"span",29),s(4),r()()),i&2){let e=t.$implicit;a(2),q(e.days),a(2),q(e.hours)}}function Ui(i,t){if(i&1&&w(0,Li,5,2,"li",27,ji),i&2){let e=d();E(e.openingHours()[0].openingHours)}}var et=class i{constructor(t){this.openingHoursService=t}currentYear=new Date().getFullYear();isParkOpen=V(()=>this.openingHoursService.isParkOpen());openingHours=V(()=>this.openingHoursService.openingHours());parkStatus=V(()=>this.openingHoursService.parkStatus());static \u0275fac=function(e){return new(e||i)(u(we))};static \u0275cmp=b({type:i,selectors:[["app-footer"]],standalone:!0,features:[x],decls:47,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-3"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","justify-center","items-start","gap-16","mb-4"],[1,"flex","flex-col","items-center","space-y-3","w-full","md:w-auto"],[1,"w-full","max-w-[280px]","text-center"],[1,"text-lg","font-serif","font-bold","text-tertiary","mb-1"],[1,"fas","fa-info-circle","mr-2"],[1,"text-sm","text-quinary/80","leading-relaxed"],[1,"w-full","max-w-[280px]"],[1,"text-lg","font-serif","font-bold","text-tertiary","text-center","mb-1"],[1,"far","fa-clock","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5"],[1,"divide-y","divide-tertiary/10"],[1,"fas","fa-map-marker-alt","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5","space-y-1"],[1,"not-italic","space-y-1","text-sm","text-quinary/80"],[1,"flex","items-center","justify-center","gap-2"],[1,"fas","fa-home","text-tertiary"],[1,"fas","fa-city","text-tertiary"],[1,"fas","fa-globe-europe","text-tertiary"],[1,"rounded-lg","overflow-hidden","shadow-md","h-[70px]","mt-1"],["src",qt`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2668.735021438556!2d-2.1739626!3d48.018829!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x480faceab3587495%3A0xcdc883e818be2eb2!2sFor%C3%AAt%20de%20Broc%C3%A9liande!5e0!3m2!1sfr!2sfr!4v1728318223640!5m2!1sfr!2sfr`,"width","100%","height","100%","loading","lazy","referrerpolicy","no-referrer-when-downgrade",1,"w-full","h-full",2,"border","0"],[1,"border-t","border-tertiary/20","pt-2","space-y-1"],[1,"text-xs","font-medium","text-quinary/70","text-center"],[1,"flex","flex-col","items-center","space-y-1"],[1,"text-sm","font-serif","font-bold","text-tertiary"],[1,"fas","fa-share-alt","mr-2"],[1,"flex","justify-between","items-center","text-sm","text-quinary/80","px-2","py-1"],[1,"pr-2"],[1,"bg-tertiary/10","px-2","py-0.5","rounded-md"]],template:function(e,o){e&1&&(n(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),p(6,"i",6),s(7,"Zoo Arcadia "),r(),n(8,"p",7),s(9," Un lieu magique o\xF9 la nature et l'\xE9merveillement se rencontrent, situ\xE9 au c\u0153ur de la l\xE9gendaire for\xEAt de Broc\xE9liande. "),r()()(),n(10,"div",3)(11,"div",8)(12,"h3",9),p(13,"i",10),s(14,"Horaires d'ouverture "),r(),n(15,"div",11)(16,"ul",12),y(17,Ui,2,0),r()()()(),n(18,"div",3)(19,"div",8)(20,"h3",9),p(21,"i",13),s(22,"Nous trouver "),r(),n(23,"div",14)(24,"address",15)(25,"div",16),p(26,"i",17),n(27,"span"),s(28,"666 chemin de l'\xE9trange"),r()(),n(29,"div",16),p(30,"i",18),n(31,"span"),s(32,"35380 Paimpont"),r()(),n(33,"div",16),p(34,"i",19),n(35,"span"),s(36,"France"),r()()(),n(37,"div",20),p(38,"iframe",21),r()()()()(),n(39,"div",22)(40,"p",23),s(41),r(),n(42,"div",24)(43,"h3",25),p(44,"i",26),s(45,"Suivez-nous "),r(),p(46,"app-social-links"),r()()()()),e&2&&(a(17),v(o.openingHours()&&o.openingHours().length>0?17:-1),a(24),h(" Copyright \xA9 ",o.currentYear," N\xE9dellec Julien. Tous droits r\xE9serv\xE9s. "))},dependencies:[Qe],encapsulation:2})};function $i(i,t){if(i&1&&(n(0,"div",1)(1,"div",2),s(2),r()()),i&2){let e=d();A("opacity-0",!e.visible),a(2),h(" ",e.currentMessage," ")}}var tt=class i{constructor(t){this.toastService=t}visible=!1;currentMessage="";isLogoutMessage=!1;subscription=new Ft;ngOnInit(){this.subscription.add(this.toastService.toast$.subscribe(t=>{this.currentMessage=t.message,this.isLogoutMessage=t.message.toLowerCase().includes("d\xE9connexion"),this.isLogoutMessage&&(this.visible=!0)})),this.subscription.add(this.toastService.hideToast$.subscribe(()=>{this.visible=!1}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)(u(R))};static \u0275cmp=b({type:i,selectors:[["app-logout-toast"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["role","alert",1,"fixed","top-4","right-4","z-50","transition-opacity","duration-300",3,"opacity-0"],["role","alert",1,"fixed","top-4","right-4","z-50","transition-opacity","duration-300"],[1,"p-4","rounded-lg","shadow-lg","min-w-[300px]","bg-red-100","text-red-800","border-l-4","border-red-500"]],template:function(e,o){e&1&&y(0,$i,3,3,"div",0),e&2&&v(o.visible&&o.isLogoutMessage?0:-1)},dependencies:[k],encapsulation:2})};var it=class i{constructor(t){this.authService=t}isAuthenticated(){return this.authService.isAuthenticated()}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||i)(u(N))};static \u0275cmp=b({type:i,selectors:[["app-banner"]],standalone:!0,features:[x],decls:3,vars:0,consts:[[1,"w-full","pt-14"],["src","images/banner.webp","alt","Banni\xE8re Zoo Arcadia.",1,"w-full","md:h-[30rem]"]],template:function(e,o){e&1&&(n(0,"div",0),p(1,"img",1)(2,"app-logout-toast"),r())},dependencies:[k,tt],encapsulation:2})};var Ot=()=>["/"],yi=()=>["/services"],_i=()=>["/habitats"],Ci=()=>["/contact"],wi=()=>["/veterinaire"],kt=()=>["/update-password"],Ei=()=>["/employe"],Hi=()=>["/admin"];function Pi(i,t){i&1&&p(0,"img",4)}function qi(i,t){i&1&&p(0,"img",5)}function Bi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){C(e);let l=d();return S(l.toggleDropdown("vet"))}),s(2," V\xE9t\xE9rinaire "),j(),n(3,"svg",13),p(4,"path",14),r()(),Z(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),r(),n(8,"button",17),s(9," Modifier mot de passe "),r()()()}if(i&2){let e=d();a(3),A("rotate-180",e.activeDropdown==="vet"),a(2),A("scale-0",e.activeDropdown!=="vet")("scale-100",e.activeDropdown==="vet"),a(),m("routerLink",D(8,wi)),a(2),m("routerLink",D(9,kt))}}function zi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){C(e);let l=d();return S(l.toggleDropdown("employe"))}),s(2," Employ\xE9 "),j(),n(3,"svg",13),p(4,"path",14),r()(),Z(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),r(),n(8,"button",17),s(9," Modifier mot de passe "),r()()()}if(i&2){let e=d();a(3),A("rotate-180",e.activeDropdown==="employe"),a(2),A("scale-0",e.activeDropdown!=="employe")("scale-100",e.activeDropdown==="employe"),a(),m("routerLink",D(8,Ei)),a(2),m("routerLink",D(9,kt))}}function Gi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){C(e);let l=d();return S(l.toggleDropdown("admin"))}),s(2," Admin "),j(),n(3,"svg",13),p(4,"path",14),r()(),Z(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),r(),n(8,"button",17),s(9," Modifier mot de passe "),r()()()}if(i&2){let e=d();a(3),A("rotate-180",e.activeDropdown==="admin"),a(2),A("scale-0",e.activeDropdown!=="admin")("scale-100",e.activeDropdown==="admin"),a(),m("routerLink",D(8,Hi)),a(2),m("routerLink",D(9,kt))}}function Wi(i,t){if(i&1){let e=F();n(0,"li",7)(1,"a",18),c("click",function(){C(e);let l=d();return S(l.logout())}),s(2," D\xE9connexion "),r()()}}function Zi(i,t){i&1&&(n(0,"li",11)(1,"a",8),s(2," V\xE9t\xE9rinaire "),r()()),i&2&&(a(),m("routerLink",D(1,wi)))}function Ji(i,t){i&1&&(n(0,"li",7)(1,"a",8),s(2," Employe "),r()()),i&2&&(a(),m("routerLink",D(1,Ei)))}function Yi(i,t){i&1&&(n(0,"li",11)(1,"a",8),s(2," Admin "),r()()),i&2&&(a(),m("routerLink",D(1,Hi)))}function Ki(i,t){if(i&1){let e=F();n(0,"li",11)(1,"a",18),c("click",function(){C(e);let l=d();return S(l.logout())}),s(2," D\xE9connexion "),r()()}}var rt=class i{constructor(t,e){this.authService=t;this.router=e}isMenuOpen=!1;activeDropdown=null;isPasswordModalOpen=!1;userAuthenticated=V(()=>!!this.authService.currentUserSignal());userRoles=V(()=>{let t=this.authService.currentUserSignal();return{admin:!!(t&&t.role&&t.role.name==="Admin"),veterinaire:!!(t&&t.role&&t.role.name==="Veterinaire"),employe:!!(t&&t.role&&t.role.name==="Employe")}});ngOnInit(){}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDropdown(t){this.activeDropdown=this.activeDropdown===t?null:t}openPasswordModal(){this.router.navigate(["/update-password"]),this.activeDropdown=null}closePasswordModal(){this.isPasswordModalOpen=!1}logout(){this.authService.logout(),this.router.navigate(["/"])}onDocumentClick(t){t.target.closest(".relative")||(this.activeDropdown=null)}static \u0275fac=function(e){return new(e||i)(u(N),u(re))};static \u0275cmp=b({type:i,selectors:[["app-nav"]],hostBindings:function(e,o){e&1&&c("click",function(g){return o.onDocumentClick(g)},!1,Bt)},standalone:!0,features:[x],decls:42,vars:31,consts:[[1,"bg-secondary","z-50","fixed","top-0","w-full","shadow"],["id","main-nav",1,"bg-secondary","w-full","mx-auto","p-4","flex","items-center","justify-between","flex-wrap","md:p-5"],["aria-label","Accueil du portfolio",1,"text-lg","lg:text-xl","text-primary","font-bold",3,"routerLink"],["aria-controls","main-navlist","id","menu-toggler",1,"cursor-pointer","w-7","md:hidden",3,"click"],["width","28","height","28","src","images/menu.svg","alt","Ouvrir le menu"],["width","28","height","28","src","images/cross.svg","alt","Fermer le menu"],["id","main-navlist",1,"hidden","md:flex","items-center","w-full","md:w-auto","pt-4","md:pt-0","text-primary"],[1,"block","py-3","md:inline","md:py-0","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"routerLink"],[1,"block","py-3","md:inline","md:py-0","md:mr-6","relative","group"],["id","main-navlist-mobile",1,"bg-secondary","text-center","w-full","pt-4","text-primary","md:hidden"],[1,"block","py-3","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","flex","items-center","gap-2","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","py-2","w-48","bg-white","rounded-lg","shadow-xl","transition-all","duration-200","ease-in-out","transform","origin-top-right"],[1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"click"]],template:function(e,o){e&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),s(3," Zoo Arcadia "),r(),n(4,"button",3),c("click",function(){return o.toggleMenu()}),y(5,Pi,1,0,"img",4)(6,qi,1,0,"img",5),r(),n(7,"ul",6)(8,"li",7)(9,"a",8),s(10," Accueil "),r()(),n(11,"li",7)(12,"a",8),s(13," Services "),r()(),n(14,"li",7)(15,"a",8),s(16," Habitats "),r()(),n(17,"li",7)(18,"a",8),s(19," Contact "),r()(),y(20,Bi,10,10,"li",9)(21,zi,10,10,"li",9)(22,Gi,10,10,"li",9)(23,Wi,3,0,"li",7),r()(),n(24,"ul",10)(25,"li",11)(26,"a",8),s(27," Accueil "),r()(),n(28,"li",11)(29,"a",8),s(30," Services "),r()(),n(31,"li",11)(32,"a",8),s(33," Habitats "),r()(),n(34,"li",11)(35,"a",8),s(36," Contact "),r()(),y(37,Zi,3,2,"li",11)(38,Ji,3,2,"li",7)(39,Yi,3,2,"li",11)(40,Ki,3,0,"li",11),r()(),p(41,"app-banner")),e&2&&(a(2),m("routerLink",D(22,Ot)),a(2),zt("aria-expanded",o.isMenuOpen),a(),v(o.isMenuOpen?-1:5),a(),v(o.isMenuOpen?6:-1),a(3),m("routerLink",D(23,Ot)),a(3),m("routerLink",D(24,yi)),a(3),m("routerLink",D(25,_i)),a(3),m("routerLink",D(26,Ci)),a(2),v(o.userRoles().veterinaire?20:-1),a(),v(o.userRoles().employe?21:-1),a(),v(o.userRoles().admin?22:-1),a(),v(o.userAuthenticated()?23:-1),a(),A("hidden",!o.isMenuOpen),a(2),m("routerLink",D(27,Ot)),a(3),m("routerLink",D(28,yi)),a(3),m("routerLink",D(29,_i)),a(3),m("routerLink",D(30,Ci)),a(2),v(o.userRoles().veterinaire?37:-1),a(),v(o.userRoles().employe?38:-1),a(),v(o.userRoles().admin?39:-1),a(),v(o.userAuthenticated()?40:-1))},dependencies:[oe,it],encapsulation:2})};var He=class i{constructor(t,e,o,l){this.authService=t;this.router=e;this.ngZone=o;this.toastService=l}timeoutDuration=3e5;inactivitySubscription;startMonitoring(){this.inactivitySubscription=this.ngZone.runOutsideAngular(()=>jt(St(window,"mousemove"),St(window,"keydown")).pipe(G(()=>console.log("Activit\xE9 d\xE9tect\xE9e, r\xE9initialisation du timer")),ee(()=>Rt(this.timeoutDuration))).subscribe(()=>{this.ngZone.run(()=>{console.log("Inactivit\xE9 d\xE9tect\xE9e, d\xE9connexion de l'utilisateur"),this.authService.logout(),this.toastService.showError("Vous avez \xE9t\xE9 d\xE9connect\xE9 en raison de l'inactivit\xE9."),this.router.navigate(["/login"])})}))}stopMonitoring(){this.inactivitySubscription&&(this.inactivitySubscription.unsubscribe(),console.log("Surveillance d'inactivit\xE9 arr\xEAt\xE9e."))}static \u0275fac=function(e){return new(e||i)(W(N),W(re),W(Pt),W(R))};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};var ot=class i{constructor(t,e,o,l){this.tokenService=t;this.authService=e;this.inactivityService=o;this.toastService=l}inactivitySubscription;ngOnInit(){this.tokenService.getToken()&&(this.tokenService.isTokenExpired()?(this.authService.logout(),this.toastService.showError("Votre session a expir\xE9, vous avez \xE9t\xE9 d\xE9connect\xE9.")):this.inactivityService.startMonitoring())}ngOnDestroy(){this.inactivityService.stopMonitoring()}static \u0275fac=function(e){return new(e||i)(u(Pe),u(N),u(He),u(R))};static \u0275cmp=b({type:i,selectors:[["app-root"]],standalone:!0,features:[x],decls:4,vars:0,template:function(e,o){e&1&&p(0,"app-nav")(1,"router-outlet")(2,"app-footer")(3,"app-notification")},dependencies:[rt,et,ni,Ke],encapsulation:2})};var Fe=(i,t)=>{let e=O(N),o=O(ai),l=O(re);return o.getToken()?!0:(console.warn("Aucun token trouv\xE9"),e.logout(),l.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)};var at=class i{constructor(t,e,o){this.fb=t;this.openingHoursService=e;this.toastService=o;this.initForm()}openingHours=f([]);parkStatus=f({isOpen:!0,message:""});hoursForm=new mi({weekdayHours:new ge("",_.required),weekendHours:new ge("",_.required),isWeekdayOpen:new ge(!0),isWeekendOpen:new ge(!0),parkStatus:new ge(!0),statusMessage:new ge("")});openingHoursId=f("1");ngOnInit(){this.openingHoursService.getCurrentOpeningHours().subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage||""}),t._id&&this.openingHoursId.set(t._id),this.loadCurrentHours())},error:t=>{console.error("Erreur lors du chargement des horaires:",t),this.toastService.showError("Erreur lors du chargement des horaires")}})}initForm(){this.hoursForm=this.fb.group({weekdayHours:["",_.required],weekendHours:["",_.required],isWeekdayOpen:[!0],isWeekendOpen:[!0],parkStatus:[!0],statusMessage:[""]})}loadCurrentHours(){console.log("D\xE9but de loadCurrentHours");let t=this.openingHoursService.openingHours();if(console.log("Horaires actuels r\xE9cup\xE9r\xE9s:",t),t&&t.length>0){let e=t[0],o=e.openingHours.find(g=>g.days.includes("Lundi")),l=e.openingHours.find(g=>g.days.includes("Samedi"));this.hoursForm.patchValue({weekdayHours:o?.hours||"",weekendHours:l?.hours||"",isWeekdayOpen:o?.isOpen??!0,isWeekendOpen:l?.isOpen??!0,parkStatus:e.parkStatus,statusMessage:e.statusMessage||""})}}updateHours(){return be(this,null,function*(){console.log("D\xE9but de updateHours");try{let t;try{t=yield this.openingHoursService.getOpeningHoursId(),console.log("ID r\xE9cup\xE9r\xE9:",t)}catch{t="1",console.log("Utilisation de l'ID par d\xE9faut:",t)}let e={weekdayHours:this.hoursForm.get("weekdayHours")?.value??"",weekendHours:this.hoursForm.get("weekendHours")?.value??"",isWeekdayOpen:this.hoursForm.get("isWeekdayOpen")?.value??!0,isWeekendOpen:this.hoursForm.get("isWeekendOpen")?.value??!0,parkStatus:this.hoursForm.get("parkStatus")?.value??!0,statusMessage:this.hoursForm.get("statusMessage")?.value??""};console.log("FormData pr\xE9par\xE9:",e);let o=yield Ae(this.openingHoursService.updateOpeningHours(t,e));if(console.log("R\xE9sultat de la mise \xE0 jour:",o),o){let l=Array.isArray(o)?o:[o];this.openingHours.set(l),this.loadCurrentHours(),this.toastService.showSuccess("Horaires mis \xE0 jour avec succ\xE8s")}}catch(t){console.error("Erreur compl\xE8te lors de la mise \xE0 jour:",t),this.toastService.showError("Erreur lors de la mise \xE0 jour des horaires")}})}saveChanges(){if(console.log("M\xE9thode saveChanges() appel\xE9e"),console.log("\xC9tat du formulaire:",this.hoursForm.value),console.log("ID des horaires:",this.openingHoursId()),!this.openingHoursId()){this.toastService.showError("ID des horaires non d\xE9fini");return}if(this.hoursForm.valid){let t={weekdayHours:this.hoursForm.get("weekdayHours")?.value??"",weekendHours:this.hoursForm.get("weekendHours")?.value??"",isWeekdayOpen:this.hoursForm.get("isWeekdayOpen")?.value??!0,isWeekendOpen:this.hoursForm.get("isWeekendOpen")?.value??!0,parkStatus:this.hoursForm.get("parkStatus")?.value??!0,statusMessage:this.hoursForm.get("statusMessage")?.value??""};this.openingHoursService.updateOpeningHours(this.openingHoursId(),t).pipe(G(()=>console.log("Mise \xE0 jour des horaires r\xE9ussie")),Y(e=>(console.error("Erreur d\xE9taill\xE9e:",e),this.toastService.showError(`Erreur lors de la mise \xE0 jour des horaires: ${e.message}`),Te)),ee(()=>{let e={isOpen:t.parkStatus,message:t.statusMessage||""};return this.openingHoursService.updateParkStatus(e)})).subscribe({next:()=>{this.toastService.showSuccess("Modifications enregistr\xE9es avec succ\xE8s"),this.loadCurrentHours()},error:e=>{console.error("Erreur lors de la sauvegarde:",e),this.toastService.showError("Erreur lors de la sauvegarde des modifications")}})}else console.log("Formulaire invalide:",this.hoursForm.errors),this.toastService.showError("Veuillez corriger les erreurs du formulaire")}static \u0275fac=function(e){return new(e||i)(u(me),u(we),u(R))};static \u0275cmp=b({type:i,selectors:[["app-opening-hours-management"]],standalone:!0,features:[x],decls:43,vars:1,consts:[[1,"bg-white","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"far","fa-clock","mr-3"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-secondary/10","rounded-lg","p-4","space-y-4"],[1,"text-lg","font-serif","font-semibold","text-tertiary"],[1,"space-y-4"],[1,"flex","flex-col","space-y-2"],["type","text","formControlName","weekdayHours","placeholder","ex: 9h00 - 18h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","items-center"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isWeekdayOpen",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-tertiary/30","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-tertiary"],[1,"ms-3","text-sm","font-medium","text-quinary"],["type","text","formControlName","weekendHours","placeholder","ex: 10h00 - 19h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],["type","checkbox","formControlName","isWeekendOpen",1,"sr-only","peer"],["type","checkbox","formControlName","parkStatus",1,"sr-only","peer"],["type","text","formControlName","statusMessage","placeholder","Message de statut (optionnel)",1,"w-full","p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-2","bg-tertiary","text-white","rounded-lg","hover:bg-tertiary/90","transition"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),p(2,"i",2),s(3," Gestion des horaires d'ouverture "),r(),n(4,"form",3),c("ngSubmit",function(){return o.updateHours()}),n(5,"div",4)(6,"h3",5),s(7," Horaires en semaine "),r(),n(8,"div",6)(9,"div",7),p(10,"input",8),n(11,"div",9)(12,"label",10),p(13,"input",11)(14,"div",12),n(15,"span",13),s(16,"Ouvert"),r()()()()()(),n(17,"div",4)(18,"h3",5),s(19," Horaires weekend "),r(),n(20,"div",6)(21,"div",7),p(22,"input",14),n(23,"div",9)(24,"label",10),p(25,"input",15)(26,"div",12),n(27,"span",13),s(28,"Ouvert"),r()()()()()(),n(29,"div",4)(30,"h3",5),s(31," Statut du parc "),r(),n(32,"div",6)(33,"div",9)(34,"label",10),p(35,"input",16)(36,"div",12),n(37,"span",13),s(38,"Parc ouvert"),r()()(),p(39,"input",17),r()(),n(40,"div",18)(41,"button",19),s(42," Enregistrer les modifications "),r()()()()),e&2&&(a(4),m("formGroup",o.hoursForm))},dependencies:[pe,se,K,li,X,ae,le,Ce],encapsulation:2})};function he(i){i||($t(he),i=O(ie));let t=new Dt(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(ye(t))}var Qi=(i,t)=>t.id_feeding;function en(i,t){i&1&&(n(0,"div",1)(1,"p",3),s(2," Aucun historique disponible pour cet animal. "),r(),n(3,"p",4),s(4," Les repas enregistr\xE9s appara\xEEtront ici. "),r()())}function tn(i,t){if(i&1&&(n(0,"div",17)(1,"p",18)(2,"span",19),j(),n(3,"svg",14),p(4,"path",20),r()(),s(5),r()()),i&2){let e=d().$implicit;a(5),h(' "',e.notes,'" ')}}function nn(i,t){if(i&1&&(n(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),s(5),z(6,"titlecase"),r(),n(7,"span",10),s(8),r()(),n(9,"div",11)(10,"p",12)(11,"span",13),j(),n(12,"svg",14),p(13,"path",15),r()(),s(14),z(15,"date"),r(),Z(),n(16,"p",12)(17,"span",13),j(),n(18,"svg",14),p(19,"path",16),r()(),s(20),r()()()(),y(21,tn,6,1,"div",17),r()),i&2){let e=t.$implicit;a(5),h(" ",Le(6,6,e.food_type)," "),a(3),Ne(" ",e.quantity," ",e.unit," "),a(6),h(" ",ve(15,8,e.feeding_date,"dd/MM/yyyy HH:mm")," "),a(6),h(" ",e.user_name," "),a(),v(e.notes?21:-1)}}function rn(i,t){if(i&1&&(n(0,"div",2),w(1,nn,22,11,"div",5,Qi),r()),i&2){let e=d();a(),E(e.feedingHistory())}}var lt=class i{animalId;feedingService=O(We);destroyRef=O(ie);feedingHistory=f([]);ngOnInit(){this.loadHistory()}ngOnChanges(t){t.animalId&&!t.animalId.firstChange&&this.loadHistory()}loadHistory(){return be(this,null,function*(){try{this.feedingHistory.set([]);let t=yield Ae(this.feedingService.getFeedingHistory(this.animalId).pipe(he(this.destroyRef)));this.feedingHistory.set(t)}catch(t){console.error("Erreur lors du chargement de l'historique:",t),this.feedingHistory.set([])}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-feeding-history-vet"]],inputs:{animalId:"animalId"},standalone:!0,features:[Ve,x],decls:3,vars:1,consts:[[1,"pr-3","custom-scrollbar","max-h-[70vh]","overflow-y-auto"],[1,"flex","flex-col","items-center","justify-center","py-8","bg-white/80","rounded-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"text-gray-600","text-lg","font-medium"],[1,"text-gray-500","text-sm","mt-2"],[1,"bg-white/90","rounded-xl","p-4","shadow-md","border-l-4","border-l-tertiary","border","border-secondary/10","transition-all","duration-200","hover:shadow-lg"],[1,"flex","flex-col","gap-3"],[1,"flex-1","space-y-2"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"font-medium","text-quinary","text-lg"],[1,"bg-tertiary/10","text-tertiary","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"space-y-1"],[1,"text-sm","text-gray-600","flex","items-center","gap-2"],[1,"w-4","h-4","inline-block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"text-sm","text-gray-600","italic","flex","items-start","gap-2"],[1,"w-4","h-4","inline-block","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"]],template:function(e,o){e&1&&(n(0,"div",0),y(1,en,5,0,"div",1)(2,rn,3,0,"div",2),r()),e&2&&(a(),v(o.feedingHistory().length===0?1:2))},dependencies:[k,Qt,ne],styles:["[_nghost-%COMP%]{display:block}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#557a46 #e2e8f0}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#557a46;border-radius:10px}"]})};var ce=class i{constructor(t){this.http=t}apiUrl=`${B.apiUrl}/api/habitat-comment`;getCommentsByHabitatId(t){return console.log("R\xE9cup\xE9ration des commentaires pour habitat:",t),this.http.get(`${this.apiUrl}/${t}`).pipe(G(e=>console.log("Commentaires re\xE7us:",e)))}createHabitatComment(t){return console.log("Cr\xE9ation du commentaire:",t),this.http.post(this.apiUrl,t).pipe(G(e=>console.log("R\xE9ponse cr\xE9ation:",e)))}getAllComments(){return this.http.get(`${this.apiUrl}`).pipe(G(t=>console.log("All comments loaded:",t)))}static \u0275fac=function(e){return new(e||i)(W(_e))};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};var on=(i,t)=>t.id_habitat,Oi=(i,t,e)=>({"bg-green-500":i,"bg-yellow-500":t,"bg-red-500":e}),an=(i,t,e)=>({"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e});function sn(i,t){i&1&&(n(0,"p",6),s(1," Aucun commentaire pour cet habitat. "),r())}function ln(i,t){i&1&&(n(0,"div",17),j(),n(1,"svg",24),p(2,"path",25),r(),Z(),n(3,"span"),s(4,"R\xE9gl\xE9"),r()())}function mn(i,t){i&1&&(n(0,"div",18),j(),n(1,"svg",24),p(2,"path",26),r(),Z(),n(3,"span"),s(4,"En attente"),r()())}function pn(i,t){if(i&1&&(n(0,"div",23),s(1),z(2,"date"),r()),i&2){let e=d().$implicit;a(),Ne(" R\xE9solu par ",e.resolved_by," le ",ve(2,2,e.resolved_at,"dd/MM/yyyy")," ")}}function dn(i,t){if(i&1&&(n(0,"div",9),p(1,"div",10),n(2,"div",11)(3,"div",12)(4,"div",13),s(5),z(6,"date"),r()(),n(7,"div",14)(8,"div",15),p(9,"span",16),s(10),r(),y(11,ln,5,0,"div",17)(12,mn,5,0,"div",18),r()(),n(13,"p",19),s(14),r(),n(15,"div",20)(16,"div",21),s(17," Par: "),n(18,"span",22),s(19),r()(),y(20,pn,3,5,"div",23),r()()),i&2){let e=t.$implicit;a(),m("ngClass",je(12,Oi,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(4),h(" ",ve(6,9,e.createdAt,"dd/MM/yyyy \xE0 HH:mm")," "),a(3),m("ngClass",je(16,an,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(),m("ngClass",je(20,Oi,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(),h(" ",e.habitat_status," "),a(),v(e.is_resolved?11:12),a(3),h(" ",e.comment," "),a(5),q(e.user_name),a(),v(e.is_resolved?20:-1)}}function cn(i,t){if(i&1&&w(0,dn,21,24,"div",9,on),i&2){let e=d();E(e.comments())}}var mt=class i{constructor(t){this.habitatCommentService=t}habitatId;habitatImage;habitatName;close=new J;comments=f([]);ngOnInit(){this.loadComments()}onClose(){this.close.emit()}loadComments(){this.habitatCommentService.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{this.comments.set(t)},error:t=>{console.error("Erreur lors du chargement des commentaires:",t)}})}static \u0275fac=function(e){return new(e||i)(u(ce))};static \u0275cmp=b({type:i,selectors:[["app-habitat-comment-history"]],inputs:{habitatId:"habitatId",habitatImage:"habitatImage",habitatName:"habitatName"},outputs:{close:"close"},standalone:!0,features:[x],decls:13,vars:8,consts:[[1,"w-full","max-w-6xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"flex","items-center","gap-4","mb-8"],[1,"w-24","h-24","rounded-xl","object-cover","shadow-md",3,"src","alt"],[1,"text-2xl","sm:text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-quinary/70","font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"col-span-full","text-center","text-tertiary/70","py-8"],[1,"flex","justify-center","mt-8"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[1,"bg-white","rounded-xl","shadow-md","hover:shadow-lg","transition-all","duration-300","p-4","relative","overflow-hidden"],[1,"absolute","top-0","left-0","right-0","h-1",3,"ngClass"],[1,"flex","justify-between","items-start","mt-2"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-tertiary/80","font-medium"],[1,"flex","flex-col","items-end","gap-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","flex","items-center","gap-1",3,"ngClass"],[1,"w-1.5","h-1.5","rounded-full",3,"ngClass"],[1,"flex","items-center","gap-1.5","bg-green-50","text-green-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-1.5","bg-red-50","text-red-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-quinary/80","my-4","line-clamp-3"],[1,"flex","justify-between","items-end"],[1,"text-sm","text-tertiary/70"],[1,"font-medium"],[1,"text-xs","text-gray-500","italic"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3.5","w-3.5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zm-1 8a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1),p(2,"img",2),n(3,"div")(4,"h2",3),s(5," Historique des commentaires sur les habitats "),r(),n(6,"p",4),s(7),r()()(),n(8,"div",5),y(9,sn,2,0,"p",6)(10,cn,2,0),r(),n(11,"div",7)(12,"app-button",8),c("click",function(){return o.onClose()}),r()()()),e&2&&(a(2),m("src",o.habitatImage,L)("alt",o.habitatName),a(5),h(" ",o.habitatName," "),a(2),v(o.comments().length===0?9:10),a(3),m("text","Fermer")("type","button")("color","secondary")("rounded",!0))},dependencies:[k,Ue,ne,U],encapsulation:2})};function un(i,t){if(i&1&&(n(0,"option",6),s(1),r()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}function fn(i,t){if(i&1&&p(0,"app-toast",9),i&2){let e=d();m("message",e.toastMessage())("type",e.toastType())}}var pt=class i{constructor(t){this.habitatComments=t}habitatId;commentAdded=new J;habitatsComments=f([]);isToastVisible=f(!1);toastMessage=f("");toastType=f("success");newHabitatCommentData={habitat_status:"Optimal",comment:"",id_habitat:0};statusOptions=["Optimal","Acceptable","N\xE9cessite des am\xE9liorations"];commentStatusService=O(fi);statusSubscription;ngOnInit(){this.habitatId&&(this.newHabitatCommentData.id_habitat=this.habitatId,this.loadHabitatsComments()),this.statusSubscription=this.commentStatusService.commentStatusChanged$.subscribe(t=>{console.log("Mise \xE0 jour du commentaire re\xE7ue dans le composant v\xE9t\xE9rinaire:",t),this.loadHabitatsComments(),this.showToast(`Commentaire ${t.is_resolved?"marqu\xE9 comme r\xE9gl\xE9":"r\xE9ouvert"}`,"success")})}ngOnDestroy(){this.statusSubscription&&this.statusSubscription.unsubscribe()}loadHabitatsComments(){console.log("Chargement des commentaires pour l'habitat:",this.habitatId),this.habitatComments.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{console.log("Commentaires re\xE7us pour l'habitat:",t);let e=[...t].sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime());this.habitatsComments.set(e)},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",t)})}submitComment(){if(console.log("Donn\xE9es \xE0 envoyer:",this.newHabitatCommentData),!this.newHabitatCommentData.comment||!this.newHabitatCommentData.id_habitat){this.showToast("Veuillez remplir tous les champs","error");return}this.habitatComments.createHabitatComment(this.newHabitatCommentData).subscribe({next:t=>{console.log("Commentaire cr\xE9\xE9:",t),this.loadHabitatsComments(),this.newHabitatCommentData={id_habitat:this.habitatId,habitat_status:"Optimal",comment:""},this.showToast("Commentaire ajout\xE9 avec succ\xE8s","success")},error:t=>{console.error("Erreur lors de l'ajout du commentaire:",t),this.showToast("Erreur lors de l'ajout du commentaire","error")}})}showToast(t,e){this.toastMessage.set(t),this.toastType.set(e),this.isToastVisible.set(!0),setTimeout(e==="success"?()=>{this.isToastVisible.set(!1),this.commentAdded.emit()}:()=>{this.isToastVisible.set(!1)},3e3)}static \u0275fac=function(e){return new(e||i)(u(ce))};static \u0275cmp=b({type:i,selectors:[["app-habitat-comment"]],inputs:{habitatId:"habitatId"},outputs:{commentAdded:"commentAdded"},standalone:!0,features:[x],decls:17,vars:6,consts:[[1,"bg-white","rounded-lg","shadow-lg","p-6"],[1,"mb-8"],[1,"text-xl","font-semibold","mb-4","text-tertiary"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"value"],["rows","3",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"click","color","text","rounded"],[3,"message","type"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),s(3," Ajouter un commentaire "),r(),n(4,"div",3)(5,"div")(6,"label",4),s(7,"\xC9tat de l'habitat"),r(),n(8,"select",5),Ht("ngModelChange",function(g){return Et(o.newHabitatCommentData.habitat_status,g)||(o.newHabitatCommentData.habitat_status=g),g}),w(9,un,2,2,"option",6,Me),r()(),n(11,"div")(12,"label",4),s(13,"Commentaire"),r(),n(14,"textarea",7),Ht("ngModelChange",function(g){return Et(o.newHabitatCommentData.comment,g)||(o.newHabitatCommentData.comment=g),g}),r()(),n(15,"app-button",8),c("click",function(){return o.submitComment()}),r()()(),y(16,fn,1,2,"app-toast",9),r()),e&2&&(a(8),wt("ngModel",o.newHabitatCommentData.habitat_status),a(),E(o.statusOptions),a(5),wt("ngModel",o.newHabitatCommentData.comment),a(),m("color","tertiary")("text","Ajouter le commentaire")("rounded",!0),a(),v(o.isToastVisible()?16:-1))},dependencies:[k,ui,Be,ze,K,qe,X,pi,U,de],encapsulation:2})};var Mt=(o=>(o.GOOD_HEALTH="Bonne sant\xE9",o.INJURED="Bless\xE9",o.SICK="Malade",o))(Mt||{});function vn(i,t){if(i&1&&(n(0,"option",14),s(1),r()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}function gn(i,t){if(i&1&&(n(0,"option",14),s(1),r()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}var dt=class i{constructor(t,e,o,l){this.fb=t;this.veterinaryReportsService=e;this.authService=o;this.toastService=l}animalId;close=new J;reportForm;isModalOpen=!0;animalStates=Object.values(Mt);foodUnits=["kg","g"];ngOnInit(){console.log("VeterinaryReportsComponent initialized"),console.log("Modal state:",this.isModalOpen),this.initForm(),this.animalId&&this.loadAnimalDetails()}initForm(){this.reportForm=this.fb.group({id_animal:["",_.required],animal_name:["",_.required],visit_date:["",_.required],animal_state:["",_.required],recommended_food_type:["",_.required],recommended_food_quantity:["",[_.required,_.min(0)]],food_unit:["",_.required],additional_details:[""]})}loadAnimalDetails(){this.veterinaryReportsService.fetchAnimalDetails(this.animalId).subscribe({next:t=>{t&&this.reportForm.patchValue({id_animal:t.id_animal,animal_name:t.name,animal_photo:t.images})},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'animal:",t)})}closeModal(){this.close.emit()}onSubmit(){if(this.reportForm.valid){let t=this.authService.currentUserSignal();if(!t?.id){console.error("Utilisateur non connect\xE9");return}let e=P($({},this.reportForm.value),{id_user:t.id,user_name:t.name,animal_state:this.reportForm.value.animal_state});this.veterinaryReportsService.createReport(e).subscribe({next:o=>{console.log("Rapport cr\xE9\xE9 avec succ\xE8s",o),new Promise(g=>{this.toastService.showSuccess("Rapport v\xE9t\xE9rinaire enregistr\xE9 avec succ\xE8s"),setTimeout(g,3e3)}).then(()=>{this.closeModal()})},error:()=>{this.toastService.showError("Erreur lors de l'enregistrement du rapport")}})}}static \u0275fac=function(e){return new(e||i)(u(me),u(Se),u(N),u(R))};static \u0275cmp=b({type:i,selectors:[["app-veterinary-reports"]],inputs:{animalId:"animalId"},outputs:{close:"close"},standalone:!0,features:[x],decls:53,vars:17,consts:[[1,"w-full","max-w-2xl","mx-auto","bg-white","p-6","rounded-xl"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-2xl","font-serif","text-tertiary"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-quinary/60","mb-2"],["type","text","readonly","",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","text-lg","text-tertiary","font-medium","focus:outline-none",3,"formControl"],[1,"grid","grid-cols-2","gap-6","mb-6"],["type","date",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],[1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none","appearance-none","cursor-pointer",3,"formControl"],["value","","disabled","","selected",""],[3,"value"],[1,"space-y-6"],[1,"text-lg","font-medium","text-tertiary"],["type","text","placeholder","Ex: Croquettes premium",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],[1,"grid","grid-cols-2","gap-6"],["type","number","placeholder","Ex: 250",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],["rows","4","placeholder","Ajoutez des observations compl\xE9mentaires...",1,"w-full","p-4","bg-tertiary/5","rounded-lg","focus:outline-none","focus:ring-1","focus:ring-tertiary/30","transition-all","resize-none",3,"formControl"],[1,"flex","justify-end","gap-4","pt-6"],[3,"click","text","type","color","customClass"],[3,"text","type","color","disabled","customClass"]],template:function(e,o){e&1&&(n(0,"div",0),p(1,"app-toast"),n(2,"div",1)(3,"h2",2),s(4,"Nouveau Rapport"),r(),n(5,"button",3),c("click",function(){return o.closeModal()}),j(),n(6,"svg",4),p(7,"path",5),r()()(),Z(),n(8,"form",6),c("ngSubmit",function(){return o.onSubmit()}),n(9,"div",7)(10,"label",8),s(11,"Animal"),r(),p(12,"input",9),r(),n(13,"div",10)(14,"div")(15,"label",8),s(16,"Date de visite"),r(),p(17,"input",11),r(),n(18,"div")(19,"label",8),s(20,"\xC9tat de sant\xE9"),r(),n(21,"select",12)(22,"option",13),s(23,"Choisir un \xE9tat"),r(),w(24,vn,2,2,"option",14,Me),r()()(),n(26,"div",15)(27,"h3",16),s(28," Recommandations alimentaires "),r(),n(29,"div")(30,"label",8),s(31,"Type d'alimentation"),r(),p(32,"input",17),r(),n(33,"div",18)(34,"div")(35,"label",8),s(36,"Quantit\xE9"),r(),p(37,"input",19),r(),n(38,"div")(39,"label",8),s(40,"Unit\xE9"),r(),n(41,"select",12)(42,"option",13),s(43,"Choisir une unit\xE9"),r(),w(44,gn,2,2,"option",14,Me),r()()()(),n(46,"div")(47,"label",8),s(48,"Observations"),r(),p(49,"textarea",20),r(),n(50,"div",21)(51,"app-button",22),c("click",function(){return o.closeModal()}),r(),p(52,"app-button",23),r()()()),e&2&&(a(8),m("formGroup",o.reportForm),a(4),m("formControl",o.reportForm.get("animal_name")),a(5),m("formControl",o.reportForm.get("visit_date")),a(4),m("formControl",o.reportForm.get("animal_state")),a(3),E(o.animalStates),a(8),m("formControl",o.reportForm.get("recommended_food_type")),a(5),m("formControl",o.reportForm.get("recommended_food_quantity")),a(4),m("formControl",o.reportForm.get("food_unit")),a(3),E(o.foodUnits),a(5),m("formControl",o.reportForm.get("additional_details")),a(2),m("text","Annuler")("type","button")("color","secondary")("customClass","px-6 py-2 rounded-lg hover:bg-gray-100"),a(),m("text","Enregistrer")("type","submit")("color","tertiary")("disabled",!o.reportForm.valid)("customClass","px-6 py-2 rounded-lg"))},dependencies:[k,pe,se,Be,ze,K,di,qe,X,ae,ci,le,de,U],styles:[`input[_ngcontent-%COMP%]::placeholder, 
   textarea[_ngcontent-%COMP%]::placeholder {
    color: rgba(85, 122, 70, 0.4);
  }

  input[_ngcontent-%COMP%]:focus::placeholder, 
   textarea[_ngcontent-%COMP%]:focus::placeholder {
    color: rgba(85, 122, 70, 0.6);
  }

  select[_ngcontent-%COMP%] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23557A46'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }`]})};function hn(i,t){if(i&1&&(n(0,"p",10)(1,"span",11),s(2,"D\xE9tails suppl\xE9mentaires:"),r(),s(3),r()),i&2){let e=d().$implicit;a(3),h(" ",e.additional_details," ")}}function bn(i,t){if(i&1&&(n(0,"div",3)(1,"div",4)(2,"div",5),p(3,"img",6),n(4,"div")(5,"h3",7),s(6),r(),n(7,"p",8),s(8),z(9,"date"),r(),n(10,"div",9)(11,"p",10)(12,"span",11),s(13,"Alimentation recommand\xE9e:"),r(),s(14),r(),y(15,hn,4,1,"p",10),n(16,"p",12)(17,"span",11),s(18,"V\xE9t\xE9rinaire:"),r(),s(19),r()()()(),n(20,"div",13)(21,"span",14),p(22,"i"),s(23),r(),n(24,"span",15),s(25),r()()()()),i&2){let e,o=t.$implicit,l=d(2);a(3),m("src",o.animal_photo,L)("alt",o.animal_name),a(3),h(" ",o.animal_name," "),a(2),h(" ",ve(9,18,o.visit_date,"dd/MM/yyyy")," "),a(6),Wt(" ",o.recommended_food_quantity,"",o.food_unit," de ",o.recommended_food_type," "),a(),v(o.additional_details?15:-1),a(4),h(" ",o.user_name," "),a(2),fe(l.getStateClass(o.animal_state)),a(),Gt("fas fa-",l.getStateIcon(o.animal_state),""),a(),h(" ",o.animal_state," "),a(),fe(l.getStatusButtonClass((e=o.is_processed)!==null&&e!==void 0?e:!1)),a(),h(" ",o.is_processed?"Trait\xE9":"Non trait\xE9"," ")}}function xn(i,t){if(i&1&&(n(0,"div",1)(1,"h2",2),s(2,"Rapports v\xE9t\xE9rinaires"),r()(),w(3,bn,26,21,"div",3,Re)),i&2){let e=d();a(3),E(e.reports)}}function yn(i,t){if(i&1){let e=F();n(0,"app-veterinary-reports",16),c("close",function(){C(e);let l=d();return S(l.closeReportForm())}),r()}}var ct=class i{constructor(t){this.veterinaryReportsService=t}animalId;showReportForm=!1;reportStatus;reports=[];ngOnInit(){this.loadReports()}ngOnChanges(t){t.reportStatus&&this.loadReports()}loadReports(){this.veterinaryReportsService.getAllReports().pipe(Ie(t=>t.map(e=>P($({},e),{is_processed:e.is_treated||!1}))),ee(t=>{let e=t.filter(o=>o.id_animal===this.animalId);return Vt(e.map(o=>this.veterinaryReportsService.fetchAnimalDetails(o.id_animal).pipe(Ie(l=>P($({},o),{animal_photo:l.images||"",animal_name:l.name})))))})).subscribe({next:t=>{this.reports=t},error:t=>{console.error("Erreur lors du chargement des rapports:",t)}})}openNewReportForm(){this.showReportForm=!0}closeReportForm(){this.showReportForm=!1,this.loadReports()}getStateClass(t){let e="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium whitespace-nowrap min-w-[140px] justify-center";switch(t.toLowerCase()){case"bonne sant\xE9":return`${e} bg-green-100 text-green-700`;case"malade":return`${e} bg-red-100 text-red-700`;case"en traitement":return`${e} bg-yellow-100 text-yellow-700`;case"en observation":return`${e} bg-blue-100 text-blue-700`;default:return`${e} bg-gray-100 text-gray-700`}}getStateIcon(t){switch(t.toLowerCase()){case"bonne sant\xE9":return"check-circle";case"malade":return"exclamation-circle";case"en traitement":return"clock";case"en observation":return"eye";default:return"information-circle"}}getStatusButtonClass(t){return t?"bg-green-100 text-green-700 hover:bg-green-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}toggleReportStatus(t){let e=t._id||t.id_veterinary_reports;if(!e){console.error("ID du rapport non d\xE9fini:",t);return}let o=!t.is_processed;this.veterinaryReportsService.updateReportStatus(e,o).subscribe({next:()=>{t.is_processed=o,t.is_treated=o,console.log("Statut du rapport mis \xE0 jour avec succ\xE8s")},error:l=>{console.error("Erreur lors de la mise \xE0 jour du statut:",l),t.is_processed=!o,t.is_treated=!o}})}static \u0275fac=function(e){return new(e||i)(u(Se))};static \u0275cmp=b({type:i,selectors:[["app-veterinary-reports-list"]],inputs:{animalId:"animalId",showReportForm:"showReportForm",reportStatus:"reportStatus"},standalone:!0,features:[Ve,x],decls:3,vars:2,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-serif","text-tertiary"],[1,"bg-white","p-6","rounded-lg","shadow-sm"],[1,"flex","justify-between","items-start"],[1,"flex","items-start","gap-4"],[1,"w-16","h-16","rounded-full","object-cover",3,"src","alt"],[1,"text-lg","font-medium","text-tertiary"],[1,"text-sm","text-quinary/60"],[1,"mt-2","space-y-1"],[1,"text-sm"],[1,"font-medium"],[1,"text-sm","mt-2","text-quinary/80"],[1,"flex","flex-col","items-end","gap-2"],[1,"ml-2"],[1,"px-3","py-1","rounded-full","text-sm","font-medium"],[3,"close"]],template:function(e,o){e&1&&(n(0,"div",0),y(1,xn,5,0)(2,yn,1,0,"app-veterinary-reports"),r()),e&2&&(a(),v(o.showReportForm?-1:1),a(),v(o.showReportForm?2:-1))},dependencies:[k,ne,dt],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};var Cn=(i,t)=>t.id_animal,Sn=(i,t)=>t.id_habitat;function wn(i,t){if(i&1){let e=F();n(0,"div",13)(1,"div",25),p(2,"img",26)(3,"div",27),n(4,"h3",28),s(5),r()(),n(6,"div",29)(7,"table",30)(8,"tbody")(9,"tr")(10,"td",31),s(11,"Esp\xE8ce:"),r(),n(12,"td",32),s(13),r()(),n(14,"tr")(15,"td",31),s(16,"R\xE9gime:"),r(),n(17,"td",32),s(18),r()(),n(19,"tr")(20,"td",31),s(21,"Habitat:"),r(),n(22,"td",33),s(23),r()()()(),n(24,"div",34)(25,"app-button",35),c("click",function(){let l=C(e).$implicit,g=d(2);return S(g.openVetReportsHistory(l.id_animal))}),r(),n(26,"app-button",35),c("click",function(){let l=C(e).$implicit,g=d(2);return S(g.openFeedingHistory(l.id_animal))}),r()()()()}if(i&2){let e=t.$implicit,o=d(2);a(2),m("src",e.images,L)("alt",e.name),a(3),h(" ",e.name," "),a(8),q(e.species),a(5),q(e.diet),a(5),h(" ",o.getHabitatName(e.habitat_id)," "),a(2),m("text","Rapports")("color","tertiary")("rounded",!0),a(),m("text","Historique")("color","secondary")("rounded",!0)}}function En(i,t){if(i&1){let e=F();n(0,"div",16)(1,"div",36),p(2,"img",26)(3,"div",27),n(4,"h3",28),s(5),r()(),n(6,"div",37)(7,"app-button",35),c("click",function(){let l=C(e).$implicit,g=d(2);return S(g.selectHabitat(l.id_habitat))}),r(),n(8,"app-button",35),c("click",function(){let l=C(e).$implicit,g=d(2);return S(g.viewHabitatComments(l.id_habitat))}),r()()()}if(i&2){let e=t.$implicit;a(2),m("src",e.images,L)("alt",e.name),a(3),h(" ",e.name," "),a(2),m("text","Commentaire")("color","tertiary")("rounded",!0),a(),m("text","Historique")("color","secondary")("rounded",!0)}}function Hn(i,t){if(i&1&&(n(0,"div",44),p(1,"app-feeding-history-vet",46),r()),i&2){let e=d(3);a(),m("animalId",e.selectedAnimalId())}}function On(i,t){if(i&1&&(n(0,"div",45),p(1,"app-veterinary-reports-list",24),r()),i&2){let e=d(3);a(),m("animalId",e.selectedAnimalId())("showReportForm",!1)}}function kn(i,t){if(i&1){let e=F();n(0,"div",38)(1,"div",39)(2,"app-button",40),c("click",function(){C(e);let l=d(2);return S(l.toggleHistoryView(!1))}),r(),n(3,"app-button",40),c("click",function(){C(e);let l=d(2);return S(l.toggleHistoryView(!0))}),r()(),n(4,"button",41),c("click",function(){C(e);let l=d(2);return S(l.closeHistoryModal())}),j(),n(5,"svg",42),p(6,"path",43),r()()(),y(7,Hn,2,1,"div",44)(8,On,2,2,"div",45)}if(i&2){let e=d(2);a(2),m("text","Historique des repas")("color",e.showVetReports()?"secondary":"tertiary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),a(),m("text","Rapports v\xE9t\xE9rinaires")("color",e.showVetReports()?"tertiary":"secondary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),a(4),v(e.showVetReports()?8:7)}}function In(i,t){if(i&1){let e=F();n(0,"app-habitat-comment",47),c("commentAdded",function(){C(e);let l=d(2);return S(l.closeHabitatModal())}),r()}if(i&2){let e=d(2);m("habitatId",e.selectedHabitatId())}}function Mn(i,t){if(i&1){let e=F();n(0,"app-habitat-comment-history",48),c("close",function(){C(e);let l=d(2);return S(l.closeHabitatHistoryModal())}),r()}if(i&2){let e,o=d(2);m("habitatId",o.selectedHabitatId())("habitatImage",(e=(e=o.getSelectedHabitat())==null?null:e.images)!==null&&e!==void 0?e:"")("habitatName",o.getHabitatName(o.selectedHabitatId()))}}function Fn(i,t){if(i&1&&p(0,"app-veterinary-reports-list",24),i&2){let e=d(2);m("animalId",e.selectedAnimalId())("showReportForm",!1)}}function Dn(i,t){if(i&1){let e=F();n(0,"div",7)(1,"div",8)(2,"h2",9),p(3,"i",10),s(4,"Animaux "),r(),p(5,"div",11),r(),n(6,"div",12),w(7,wn,27,12,"div",13,Cn),r()(),n(9,"div",7)(10,"div",8)(11,"h2",9),p(12,"i",14),s(13,"Habitats "),r()(),n(14,"div",15),w(15,En,9,9,"div",16,Sn),r()(),n(17,"app-modal",17),c("close",function(){C(e);let l=d();return S(l.closeHistoryModal())}),n(18,"div",18),y(19,kn,9,9),r()(),n(20,"app-modal",17),c("close",function(){C(e);let l=d();return S(l.closeHabitatModal())}),n(21,"div",19),y(22,In,1,1,"app-habitat-comment",20),n(23,"div",21)(24,"app-button",22),c("click",function(){C(e);let l=d();return S(l.closeHabitatModal())}),r()()()(),n(25,"app-modal",17),c("close",function(){C(e);let l=d();return S(l.closeHabitatHistoryModal())}),y(26,Mn,1,3,"app-habitat-comment-history",23),r(),n(27,"app-modal",17),c("close",function(){C(e);let l=d();return S(l.closeReportModal())}),n(28,"div",19),y(29,Fn,1,2,"app-veterinary-reports-list",24),n(30,"div",21)(31,"app-button",22),c("click",function(){C(e);let l=d();return S(l.closeReportModal())}),r()()()()}if(i&2){let e=d();a(7),E(e.animals()),a(8),E(e.habitats()),a(2),m("isOpen",e.isHistoryModalOpen()),a(2),v(e.selectedAnimalId()?19:-1),a(),m("isOpen",e.isHabitatModalOpen()),a(2),v(e.selectedHabitatId()?22:-1),a(2),m("text","Fermer")("type","button")("color","secondary")("rounded",!0),a(),m("isOpen",e.isHabitatHistoryModalOpen()),a(),v(e.selectedHabitatId()?26:-1),a(),m("isOpen",e.isReportModalOpen()),a(2),v(e.selectedAnimalId()?29:-1),a(2),m("text","Fermer")("type","button")("color","secondary")("rounded",!0)}}var Oe=class i{constructor(t,e,o,l,g){this.habitatService=t;this.animalService=e;this.habitatCommentService=o;this.reportsService=l;this.animalFeedingService=g}habitats=f([]);animals=f([]);activeTab=f("overview");selectedAnimalId=f(null);selectedHabitatId=f(null);_isHistoryModalOpen=f(!1);_isHabitatModalOpen=f(!1);_isHabitatHistoryModalOpen=f(!1);habitatComments=f([]);activeHistoryTab="meals";habitatCommentsMap=f(new Map);_isReportModalOpen=f(!1);_showVetReports=f(!1);showVetReports=V(()=>this._showVetReports());hasHistory=f(!1);ngOnInit(){this.loadHabitats(),this.loadAnimals()}setActiveTab(t){this.activeTab.set(t)}loadHabitats(){this.habitatService.getHabitats().subscribe({next:t=>this.habitats.set(t),error:t=>console.error("Erreur lors du chargement des habitats:",t)})}loadAnimals(){this.animalService.getAnimals().subscribe({next:t=>this.animals.set(t),error:t=>console.error("Erreur lors du chargement des animaux:",t)})}selectAnimal(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}selectHabitat(t){this.selectedHabitatId.set(t),this._isHabitatModalOpen.set(!0)}closeHistoryModal(){this._isHistoryModalOpen.set(!1),this.selectedAnimalId.set(null),this._showVetReports.set(!1)}closeHabitatModal(){this._isHabitatModalOpen.set(!1),this.selectedHabitatId.set(null)}viewHabitatComments(t){this.selectedHabitatId.set(t),this.loadHabitatComments(t),this._isHabitatHistoryModalOpen.set(!0)}loadHabitatComments(t){this.habitatCommentService.getCommentsByHabitatId(t).subscribe({next:e=>{let o=new Map(this.habitatCommentsMap());o.set(t,e),this.habitatCommentsMap.set(o)},error:e=>{console.error("Erreur lors du chargement des commentaires:",e)}})}closeHabitatHistoryModal(){this._isHabitatHistoryModalOpen.set(!1),this.selectedHabitatId.set(null),this.habitatComments.set([])}openReportForm(t){this.selectedAnimalId.set(t),this._isReportModalOpen.set(!0)}closeReportModal(){this._isReportModalOpen.set(!1),this.selectedAnimalId.set(null)}getHabitatName(t){let e=this.habitats().find(o=>o.id_habitat===t);return e?e.name:"Non assign\xE9"}openFeedingHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}isHistoryModalOpen=V(()=>this._isHistoryModalOpen());isHabitatModalOpen=V(()=>this._isHabitatModalOpen());isHabitatHistoryModalOpen=V(()=>this._isHabitatHistoryModalOpen());isReportModalOpen=V(()=>this._isReportModalOpen());getSelectedHabitat(){return this.habitats().find(t=>t.id_habitat===this.selectedHabitatId())}setActiveHistoryTab(t){this.activeHistoryTab=t,t==="habitats"&&this.habitats().forEach(e=>{this.loadHabitatComments(e.id_habitat)})}viewConsultations(t){console.log("Voir les consultations pour l'animal:",t)}getHabitatComments(t){return this.habitatCommentsMap().get(t)||[]}toggleHistoryView(t){this._showVetReports.set(t)}openVetReportsHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0),this._showVetReports.set(!0)}loadFeedingHistory(t){this.animalFeedingService.getFeedingHistory(t).subscribe({next:e=>{this.hasHistory.set(e.length>0)},error:e=>{console.error("Erreur lors du chargement de l'historique:",e)}})}getAnimals(){return this.animalService.getAnimals()}static \u0275fac=function(e){return new(e||i)(u(Ze),u(vi),u(ce),u(Se),u(We))};static \u0275cmp=b({type:i,selectors:[["app-veterinary-dashboard"]],standalone:!0,features:[x],decls:9,vars:1,consts:[[1,"relative","bg-gradient-to-r","from-secondary","to-tertiary/90","shadow-lg"],[1,"absolute","inset-0","bg-[url('/assets/patterns/subtle-dots.png')]","opacity-10"],[1,"container","mx-auto","px-4","py-12"],[1,"relative","z-10"],[1,"flex","flex-col","items-center","justify-center","space-y-4"],[1,"text-4xl","md:text-6xl","font-serif","text-white","font-bold","tracking-tight"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-16"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-serif","text-tertiary","font-bold"],[1,"fas","fa-paw","mr-2"],[1,"flex","space-x-2"],[1,"grid","grid-cols-1","sm:grid-cols-4","lg:grid-cols-4","gap-6","md:gap-8"],[1,"group","relative","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"fas","fa-home","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6","md:gap-8"],[1,"group","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[3,"close","isOpen"],[1,"w-full","max-w-3xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"w-full","max-w-4xl","mx-auto","bg-white/95","backdrop-blur-sm","p-4","sm:p-6","rounded-xl","shadow-xl"],[3,"habitatId"],[1,"flex","justify-center","mt-6"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[3,"habitatId","habitatImage","habitatName"],[3,"animalId","showReportForm"],[1,"relative","h-56","overflow-hidden"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-300",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/60","to-transparent"],[1,"absolute","bottom-4","left-4","text-2xl","font-serif","text-white","font-bold"],[1,"p-6"],[1,"w-full","text-sm"],[1,"text-tertiary","font-medium","pr-2"],[1,"text-quinary/80"],[1,"text-quinary/80","line-clamp-2"],[1,"grid","grid-cols-2","gap-2","mt-4"],[1,"transform","hover:-translate-y-0.5","transition-all","duration-300",3,"click","text","color","rounded"],[1,"relative","h-48","overflow-hidden"],[1,"grid","grid-cols-2","gap-2","p-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","gap-4"],[3,"click","text","color","rounded","customClass"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"min-h-[400px]","flex","flex-col"],[1,"min-h-[400px]"],[3,"animalId"],[3,"commentAdded","habitatId"],[3,"close","habitatId","habitatImage","habitatName"]],template:function(e,o){e&1&&(n(0,"section",0),p(1,"div",1),n(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),s(6," Tableau de Bord V\xE9t\xE9rinaire "),r()()()()(),n(7,"div",6),y(8,Dn,32,16),r()),e&2&&(a(8),v(o.activeTab()==="overview"?8:-1))},dependencies:[k,Ge,lt,pt,U,mt,ct],encapsulation:2})};var ut=class i{animals=[];count=4;updateAnimals=new J;intervalSubscription;ngOnInit(){this.updateDisplayedAnimals(),this.intervalSubscription=Nt(5e3).subscribe(()=>{this.updateDisplayedAnimals()})}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}updateDisplayedAnimals(){let e=[...this.animals].sort(()=>.5-Math.random()).slice(0,this.count);this.updateAnimals.emit(e)}static \u0275fac=function(e){return new(e||i)};static \u0275dir=Lt({type:i,selectors:[["","appRandomAnimals",""]],inputs:{animals:"animals",count:"count"},outputs:{updateAnimals:"updateAnimals"},standalone:!0})};var ft=class i{constructor(t){this.http=t}apiUrl=`${B.apiUrl}/api/animals`;uploadsUrl=`${B.apiUrl}/api`;getAnimals(){return this.http.get(this.apiUrl).pipe(Ie(t=>t.map(e=>P($({},e),{images:e.images?`${this.uploadsUrl}/${e.images}`:""}))))}static \u0275fac=function(e){return new(e||i)(W(_e))};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};var An=(i,t)=>t.id_animal,Vn=i=>["/animal",i];function Rn(i,t){if(i&1&&(n(0,"div",7)(1,"a",8)(2,"div",9),p(3,"img",10),r(),n(4,"div",11)(5,"h3",12),s(6),r(),n(7,"span",13),s(8," Cliquez pour d\xE9couvrir "),r()(),n(9,"div",14)(10,"h3",15),s(11),r()()()()),i&2){let e=t.$implicit;a(),m("routerLink",Q(5,Vn,e.id_animal)),a(2),m("src",e.images,L)("alt",e.name),a(3),h(" ",e.name," "),a(5),h(" ",e.name," ")}}var vt=class i{constructor(t,e){this.animalOverviewService=t;this.route=e}animal=f(void 0);animals=f([]);displayedAnimals=f([]);imageBaseUrl=`${B.apiUrl}`;ngOnInit(){this.loadAnimals()}loadAnimals(){this.animalOverviewService.getAnimals().subscribe({next:t=>{this.animals.set(t),this.displayedAnimals.set(this.getRandomAnimals(this.animals(),3))},error:t=>console.error("Erreur lors du chargement des animaux:",t)})}getRandomAnimals(t,e){return[...t].sort(()=>.5-Math.random()).slice(0,e)}onUpdateDisplayedAnimals(t){this.displayedAnimals.set(t)}static \u0275fac=function(e){return new(e||i)(u(ft),u($e))};static \u0275cmp=b({type:i,selectors:[["app-animals-overview"]],standalone:!0,features:[x],decls:11,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],["appRandomAnimals","",1,"max-w-7xl","mx-auto",3,"updateAnimals","animals","count"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group",3,"routerLink"],[1,"aspect-square","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,o){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Animaux "),r(),n(5,"p",4),s(6," D\xE9couvrez nos animaux fascinants qui peuplent nos trois habitats uniques : la jungle luxuriante, les marais myst\xE9rieux et la savane aride. Chaque animal r\xE9v\xE8le un aper\xE7u captivant de son habitat naturel. "),r()(),n(7,"div",5),c("updateAnimals",function(g){return o.onUpdateDisplayedAnimals(g)}),n(8,"div",6),w(9,Rn,12,7,"div",7,An),r()()()()),e&2&&(a(7),m("animals",o.animals())("count",3),a(2),E(o.displayedAnimals()))},dependencies:[oe,ut],encapsulation:2})};var Nn=(i,t)=>t.id_habitat,jn=i=>["/habitat",i];function Ln(i,t){if(i&1&&(n(0,"div",6)(1,"a",7),p(2,"img",8),n(3,"div",9)(4,"h3",10),s(5),r(),n(6,"p",11),s(7),r()(),n(8,"div",12)(9,"h3",13),s(10),r()()()()),i&2){let e=t.$implicit;a(),m("routerLink",Q(6,jn,e.id_habitat)),a(),m("src",e.images,L)("alt",e.name),a(3),h(" ",e.name," "),a(2),h(" ",e.description," "),a(3),h(" ",e.name," ")}}var gt=class i{constructor(t){this.habitatService=t}destroyRef=O(ie);habitats=f([]);ngOnInit(){this.loadHabitats()}loadHabitats(){this.habitatService.getHabitats().pipe(he(this.destroyRef)).subscribe({next:t=>{this.habitats.set(t.map(this.formatHabitatImage))},error:t=>console.error("Erreur lors du chargement des habitats:",t)})}formatHabitatImage(t){let e="";return t.images&&(e=t.images.startsWith("http")?t.images:`${B.apiUrl}/uploads/${t.images}`),P($({},t),{images:e})}static \u0275fac=function(e){return new(e||i)(u(Ze))};static \u0275cmp=b({type:i,selectors:[["app-habitats-overview"]],standalone:!0,features:[x],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,o){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Habitats "),r(),n(5,"p",4),s(6," Explorez la beaut\xE9 sauvage et la diversit\xE9 fascinante de trois \xE9cosyst\xE8mes uniques : la savane, la jungle et les marais. Chaque habitat vous d\xE9voile la richesse de la vie sous ses formes les plus \xE9tonnantes. "),r()(),n(7,"div",5),w(8,Ln,11,8,"div",6,Nn),r()()()),e&2&&(a(8),E(o.habitats()))},dependencies:[oe],encapsulation:2})};var Un=(i,t)=>t.id_service,$n=i=>["/service",i];function Pn(i,t){if(i&1&&(n(0,"div",6)(1,"a",7),p(2,"img",8),n(3,"div",9)(4,"h3",10),s(5),r(),n(6,"p",11),s(7),r()(),n(8,"div",12)(9,"h3",13),s(10),r()()()()),i&2){let e=t.$implicit;a(),m("routerLink",Q(6,$n,e.id_service)),a(),m("src",e.images,L)("alt",e.name),a(3),h(" ",e.name," "),a(2),h(" ",e.description," "),a(3),h(" ",e.name," ")}}var ht=class i{constructor(t){this.serviceService=t}destroyRef=O(ie);services=f([]);ngOnInit(){this.loadServices()}loadServices(){this.serviceService.getServices().pipe(he(this.destroyRef)).subscribe({next:t=>{this.services.set(t.map(this.formatServiceImage))},error:t=>console.error("Erreur lors du chargement des services:",t)})}formatServiceImage(t){return P($({},t),{images:t.images?.startsWith("http")?t.images:`${B.apiUrl}/api/${t.images}`})}static \u0275fac=function(e){return new(e||i)(u(gi))};static \u0275cmp=b({type:i,selectors:[["app-services-overview"]],standalone:!0,features:[x],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,o){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Services "),r(),n(5,"p",4),s(6," D\xE9couvrez nos services pour une exp\xE9rience enrichissante au zoo ! Profitez de nos diff\xE9rentes options pour rendre votre visite inoubliable. "),r()(),n(7,"div",5),w(8,Pn,11,8,"div",6,Un),r()()()),e&2&&(a(8),E(o.services()))},dependencies:[oe],encapsulation:2})};function Bn(i,t){i&1&&(n(0,"span"),s(1,"Le nom est requis"),r())}function zn(i,t){i&1&&(n(0,"span"),s(1,"Le nom doit contenir au moins 2 caract\xE8res"),r())}function Gn(i,t){i&1&&(n(0,"span"),s(1,"Le nom contient des caract\xE8res non autoris\xE9s"),r())}function Wn(i,t){if(i&1&&(n(0,"div",11),y(1,Bn,2,0,"span")(2,zn,2,0,"span")(3,Gn,2,0,"span"),r()),i&2){let e,o=d();a(),v(!((e=o.opinionForm.get("name"))==null||e.errors==null)&&e.errors.required?1:!((e=o.opinionForm.get("name"))==null||e.errors==null)&&e.errors.minlength?2:!((e=o.opinionForm.get("name"))==null||e.errors==null)&&e.errors.pattern?3:-1)}}function Zn(i,t){i&1&&(n(0,"span"),s(1,"L'avis est requis"),r())}function Jn(i,t){i&1&&(n(0,"span"),s(1,"L'avis doit contenir au moins 10 caract\xE8res"),r())}function Yn(i,t){i&1&&(n(0,"span"),s(1,"L'avis ne doit pas d\xE9passer 500 caract\xE8res"),r())}function Kn(i,t){if(i&1&&(n(0,"div",11),y(1,Zn,2,0,"span")(2,Jn,2,0,"span")(3,Yn,2,0,"span"),r()),i&2){let e,o=d();a(),v(!((e=o.opinionForm.get("message"))==null||e.errors==null)&&e.errors.required?1:!((e=o.opinionForm.get("message"))==null||e.errors==null)&&e.errors.minlength?2:!((e=o.opinionForm.get("message"))==null||e.errors==null)&&e.errors.maxlength?3:-1)}}function Xn(i,t){i&1&&(n(0,"div",11),s(1,"Veuillez attribuer une note"),r())}function Qn(i,t){i&1&&(n(0,"span"),s(1,"La date est requise"),r())}function er(i,t){i&1&&(n(0,"span"),s(1,"La date ne peut pas \xEAtre dans le futur"),r())}function tr(i,t){if(i&1&&(n(0,"div",11),y(1,Qn,2,0,"span")(2,er,2,0,"span"),r()),i&2){let e,o=d();a(),v(!((e=o.opinionForm.get("date"))==null||e.errors==null)&&e.errors.required?1:!((e=o.opinionForm.get("date"))==null||e.errors==null)&&e.errors.futureDate?2:-1)}}var bt=class i{constructor(t,e,o){this.fb=t;this.userOpinionsService=e;this.toastService=o;this.currentDate=new Date().toISOString().split("T")[0],this.opinionForm=this.fb.group({})}opinionForm;currentDate;isOpen=!1;opinionAdded=new J;closeModal=new J;ngOnInit(){this.initForm()}initForm(){this.opinionForm=this.fb.group({name:["",[_.required,_.minLength(2),_.maxLength(50),_.pattern(/^[a-zA-ZÀ-ÿ\s'-]*$/)]],message:["",[_.required,_.minLength(10),_.maxLength(500),_.pattern(/^[a-zA-ZÀ-ÿ0-9\s.,!?'"()-]*$/)]],rating:[0,[_.required,_.min(1),_.max(5)]],date:["",[_.required,this.futureDateValidator]]})}futureDateValidator(t){if(!t.value)return null;let e=new Date(t.value),o=new Date,l=new Date(e.toDateString()),g=new Date(o.toDateString());return l>g?{futureDate:!0}:null}onSubmit(){if(this.opinionForm.valid){let t=P($({},this.opinionForm.value),{date:new Date().toISOString().split("T")[0]});this.userOpinionsService.addUserOpinions(t).subscribe({next:()=>{this.toastService.showSuccess("Votre avis a \xE9t\xE9 envoy\xE9 avec succ\xE8s ! Merci de votre contribution.",2500),this.opinionForm.reset(),this.opinionAdded.emit(),setTimeout(()=>this.closeModal.emit(),2500)},error:e=>{console.error("Erreur lors de l'envoi de l'avis",e),this.toastService.showError("Une erreur est survenue lors de l'envoi de votre avis. Veuillez r\xE9essayer.")}})}}onClose(){this.closeModal.emit()}static \u0275fac=function(e){return new(e||i)(u(me),u(Ye),u(R))};static \u0275cmp=b({type:i,selectors:[["app-add-user-opinions"]],inputs:{isOpen:"isOpen"},outputs:{opinionAdded:"opinionAdded",closeModal:"closeModal"},standalone:!0,features:[x],decls:33,vars:17,consts:[[1,"max-w-2xl","mx-auto","bg-white/95","rounded-2xl","shadow-xl","relative","overflow-hidden"],[1,"bg-tertiary/10","px-8","py-6","border-b","border-tertiary/20","flex","justify-between","items-center"],[1,"text-2xl","font-serif","text-tertiary","font-bold"],[1,"p-2","hover:bg-tertiary/10","rounded-full","transition-all","duration-300",3,"click"],[1,"fas","fa-times","text-tertiary"],[1,"relative"],[1,"px-8","py-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["for","name",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","text","id","name","formControlName","name","placeholder","Votre nom",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],[1,"mt-1","text-sm","text-red-500"],["for","message",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["id","message","formControlName","message","rows","4","placeholder","Partagez votre exp\xE9rience...",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","resize-none","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],["for","rating",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],[1,"p-3.5","border-2","border-tertiary/20","rounded-xl","bg-white","hover:border-tertiary/50","transition-all","duration-300"],["formControlName","rating",1,"w-full"],["for","date",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","date","id","date","formControlName","date",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50",3,"max"],[1,"bg-tertiary/10","px-8","py-6","border-t","border-tertiary/20","flex","justify-center"],[1,"w-full","sm:w-1/2","md:w-1/3","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"keyup","keyup.enter","click","text","type","disabled","rounded","color"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),s(3," Partagez votre exp\xE9rience "),r(),n(4,"button",3),c("click",function(){return o.onClose()}),p(5,"i",4),r()(),n(6,"div",5),p(7,"app-toast"),r(),n(8,"div",6)(9,"form",7),c("ngSubmit",function(){return o.onSubmit()}),n(10,"div",8)(11,"label",9),s(12," Nom "),r(),p(13,"input",10),y(14,Wn,4,1,"div",11),r(),n(15,"div",8)(16,"label",12),s(17," Votre avis "),r(),p(18,"textarea",13),y(19,Kn,4,1,"div",11),r(),n(20,"div",8)(21,"label",14),s(22," Note "),r(),n(23,"div",15),p(24,"app-rate",16),r(),y(25,Xn,2,0,"div",11),r(),n(26,"div",8)(27,"label",17),s(28," Date de votre visite "),r(),p(29,"input",18),y(30,tr,3,1,"div",11),r()()(),n(31,"div",19)(32,"app-button",20),c("keyup",function(){return o.onSubmit()})("keyup.enter",function(){return o.onSubmit()})("click",function(){return o.onSubmit()}),r()()()),e&2){let l,g,T,I,ue,ke,De;a(9),m("formGroup",o.opinionForm),a(4),A("border-red-500",((l=o.opinionForm.get("name"))==null||l.errors==null?null:l.errors.required)&&((l=o.opinionForm.get("name"))==null?null:l.touched)),a(),v((g=o.opinionForm.get("name"))!=null&&g.errors&&((g=o.opinionForm.get("name"))!=null&&g.touched)?14:-1),a(4),A("border-red-500",((T=o.opinionForm.get("message"))==null||T.errors==null?null:T.errors.required)&&((T=o.opinionForm.get("message"))==null?null:T.touched)),a(),v((I=o.opinionForm.get("message"))!=null&&I.errors&&((I=o.opinionForm.get("message"))!=null&&I.touched)?19:-1),a(6),v(!((ue=o.opinionForm.get("rating"))==null||ue.errors==null)&&ue.errors.required&&((ue=o.opinionForm.get("rating"))!=null&&ue.touched)?25:-1),a(4),A("border-red-500",((ke=o.opinionForm.get("date"))==null||ke.errors==null?null:ke.errors.required)&&((ke=o.opinionForm.get("date"))==null?null:ke.touched)),m("max",o.currentDate),a(),v((De=o.opinionForm.get("date"))!=null&&De.errors&&((De=o.opinionForm.get("date"))!=null&&De.touched)?30:-1),a(2),m("text","Envoyer mon avis")("type","submit")("disabled",!o.opinionForm.valid)("rounded",!0)("color","tertiary")}},dependencies:[k,pe,se,K,X,ae,le,Ce,U,Je,de],encapsulation:2})};function ir(i,t){i&1&&(n(0,"div",6),p(1,"i",14),n(2,"p",15),s(3,"Chargement des avis..."),r()())}function nr(i,t){if(i&1){let e=F();n(0,"div",7)(1,"p",16),s(2," Une erreur est survenue lors du chargement des avis. "),r(),n(3,"app-button",17),c("click",function(){C(e);let l=d();return S(l.loadUserOpinions())}),r()()}i&2&&(a(3),m("text","R\xE9essayer")("type","button")("color","tertiary")("rounded",!0))}function rr(i,t){if(i&1){let e=F();n(0,"button",32),c("click",function(){let l=C(e).$index,g=d(2);return S(g.currentUserOpinionsIndex.set(l))}),r()}if(i&2){let e=t.$index,o=d(2);A("bg-tertiary",e===o.currentUserOpinionsIndex())("bg-tertiary",e!==o.currentUserOpinionsIndex())}}function or(i,t){if(i&1){let e=F();n(0,"div",8)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",21),s(5),r()(),n(6,"div")(7,"h3",22),s(8),r(),n(9,"p",23),s(10),z(11,"date"),r()()(),p(12,"app-rate",24),r(),n(13,"p",25),s(14),r(),n(15,"div",26)(16,"app-button",27),c("click",function(){C(e);let l=d();return S(l.changeUserOpinions("previous"))}),p(17,"i",28),r(),n(18,"div",29),w(19,rr,1,4,"button",30,Re),r(),n(21,"app-button",27),c("click",function(){C(e);let l=d();return S(l.changeUserOpinions("next"))}),p(22,"i",31),r()()()}if(i&2){let e=d();a(5),h(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name.charAt(0)," "),a(3),h(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name," "),a(2),h(" ",Zt(11,18,e.userOpinions()[e.currentUserOpinionsIndex()].date,"dd MMMM yyyy","fr-FR")," "),a(2),m("rating",e.currentRating)("isReadOnly",e.isReadOnly),a(2),h(' "',e.userOpinions()[e.currentUserOpinionsIndex()].message,'" '),a(2),m("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===0)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0 
                           transition-all duration-300 transform hover:-translate-x-1`),a(3),E(e.userOpinions()),a(2),m("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===e.userOpinions().length-1)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0 
                           transition-all duration-300 transform hover:translate-x-1`)}}function ar(i,t){i&1&&(n(0,"p",9),s(1," Aucun avis disponible pour le moment. "),r())}var xt=class i{constructor(t,e){this.userOpinionsService=t;this.toastService=e}isReadOnly=f(!0);userOpinions=f([]);currentUserOpinionsIndex=f(0);currentRating=f(0);isLoading=f(!0);hasError=f(!1);isModalOpen=f(!1);opinionsSubscription;ngOnInit(){this.loadUserOpinions()}loadUserOpinions(){this.isLoading.set(!0),this.hasError.set(!1),this.opinionsSubscription=this.userOpinionsService.getUserOpinions().subscribe({next:t=>{this.userOpinions.set(t),this.updateCurrentRating(),this.isLoading.set(!1)},error:t=>{console.error("Erreur lors du chargement des avis:",t),this.hasError.set(!0),this.isLoading.set(!1),this.toastService.showError("Impossible de charger les avis utilisateurs")}})}ngOnDestroy(){this.opinionsSubscription?.unsubscribe()}updateCurrentRating(){let t=this.userOpinions(),e=this.currentUserOpinionsIndex();t[e]&&this.currentRating.set(t[e].rating)}changeUserOpinions(t){let e=this.currentUserOpinionsIndex(),o=this.userOpinions().length-1;t==="previous"&&e>0?this.currentUserOpinionsIndex.set(e-1):t==="next"&&e<o&&this.currentUserOpinionsIndex.set(e+1),this.updateCurrentRating()}openModal(){this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}static \u0275fac=function(e){return new(e||i)(u(Ye),u(R))};static \u0275cmp=b({type:i,selectors:[["app-user-opinions"]],standalone:!0,features:[x],decls:16,vars:7,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"max-w-3xl","mx-auto"],[1,"text-center","py-8","text-tertiary"],[1,"text-center","py-8"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","mb-8","transition-all","duration-300","border","border-secondary/20"],[1,"text-center","text-tertiary/70"],[1,"text-center","mt-8"],[3,"click","text","type","color","rounded","customClass"],[3,"closed","isOpen"],[3,"closeModal"],[1,"fas","fa-circle-notch","fa-spin","text-3xl"],[1,"mt-4"],[1,"text-red-500","mb-4"],[1,"w-auto","mx-auto","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","text","type","color","rounded"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-tertiary","rounded-full","flex","items-center","justify-center","shadow-md"],[1,"text-primary","text-xl","font-semibold"],[1,"font-serif","font-semibold","text-lg","text-tertiary"],[1,"text-sm","text-tertiary/70"],[3,"rating","isReadOnly"],[1,"text-quinary/80","mb-6","italic","text-lg","leading-relaxed"],[1,"flex","justify-between","items-center"],[3,"click","text","type","color","rounded","disabled","customClass"],[1,"fas","fa-chevron-left"],[1,"flex","gap-2"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"bg-tertiary"],[1,"fas","fa-chevron-right"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"click"]],template:function(e,o){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Avis de nos visiteurs "),r(),n(5,"p",4),s(6," D\xE9couvrez ce que nos visiteurs pensent de leur exp\xE9rience "),r()(),n(7,"div",5),y(8,ir,4,0,"div",6)(9,nr,4,4,"div",7)(10,or,23,22,"div",8)(11,ar,2,0,"p",9),n(12,"div",10)(13,"app-button",11),c("click",function(){return o.openModal()}),r()()()()(),n(14,"app-modal",12),c("closed",function(){return o.closeModal()}),n(15,"app-add-user-opinions",13),c("closeModal",function(){return o.closeModal()}),r()()),e&2&&(a(8),v(o.isLoading()?8:o.hasError()?9:o.userOpinions().length>0?10:11),a(5),m("text","Partagez votre exp\xE9rience")("type","button")("color","tertiary")("rounded",!0)("customClass",`!w-auto !px-8 !py-4 font-bold shadow-md hover:shadow-lg 
                         transition-all duration-300 transform hover:-translate-y-1`),a(),m("isOpen",o.isModalOpen()))},dependencies:[Je,U,ne,Ge,bt],encapsulation:2})};var yt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-zoo-intro"]],standalone:!0,features:[x],decls:17,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"max-w-7xl","mx-auto"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","p-8","shadow-xl","border","border-secondary/20","mb-12","relative"],[1,"absolute","-top-4","left-4","md:-top-6","md:left-6"],[1,"fas","fa-quote-left","text-tertiary/50","text-4xl","md:text-5xl"],[1,"text-base","md:text-xl","text-quinary/90","font-sans","leading-relaxed","text-center","max-w-5xl","mx-auto","pt-6"],[1,"relative","group","rounded-2xl","overflow-hidden","shadow-xl","hover:shadow-2xl","transition-all","duration-300"],["src","images/img_home/img-back.webp","alt","Vue du Zoo Arcadia",1,"w-full","h-[300px]","md:h-[500px]","object-cover","transform","group-hover:scale-105","transition-transform","duration-500"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6","md:p-12"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-6","max-w-4xl"],[1,"text-primary","text-center","text-sm","md:text-xl","font-sans"]],template:function(e,o){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4," Bienvenue au Zoo Arcadia "),r()(),n(5,"div",4)(6,"div",5)(7,"div",6),p(8,"i",7),r(),n(9,"p",8),s(10," Le Zoo Arcadia, fond\xE9 en 1960, est un parc zoologique situ\xE9 pr\xE8s de la l\xE9gendaire for\xEAt de Broc\xE9liande, en Bretagne, France. Ce zoo, reconnu pour son engagement en faveur du bien-\xEAtre animal et de l'\xE9cologie, est un lieu de conservation o\xF9 les animaux sont soigneusement r\xE9partis selon leurs habitats naturels : savane, jungle, et marais. "),r()(),n(11,"div",9),p(12,"img",10),n(13,"div",11)(14,"div",12)(15,"p",13),s(16," Chaque jour, une \xE9quipe de v\xE9t\xE9rinaires effectue des contr\xF4les rigoureux sur chaque animal avant l'ouverture du zoo pour garantir leur bonne sant\xE9. L'alimentation des animaux est minutieusement calcul\xE9e pour r\xE9pondre aux besoins nutritionnels sp\xE9cifiques de chaque esp\xE8ce. "),r()()()()()()())},encapsulation:2})};var _t=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-home"]],standalone:!0,features:[x],decls:5,vars:0,template:function(e,o){e&1&&p(0,"app-zoo-intro")(1,"app-habitats-overview")(2,"app-animals-overview")(3,"app-services-overview")(4,"app-user-opinions")},dependencies:[xt,yt,gt,vt,ht],encapsulation:2})};var Ii=i=>({"border-red-300 ring-red-300":i});function sr(i,t){if(i&1&&(n(0,"p",8),s(1),r()),i&2){let e=d();a(),h(" ",e.getErrorMessage("email")," ")}}function lr(i,t){if(i&1&&(n(0,"p",8),s(1),r()),i&2){let e=d();a(),h(" ",e.getErrorMessage("password")," ")}}var Ct=class i{EMAIL_PATTERN=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;destroy$=new Tt;router=O(re);route=O($e);fb=O(me);authService=O(N);inactivityService=O(He);toastService=O(R);isLoading=f(!1);formErrors=f({email:[],password:[]});loginForm=this.initLoginForm();isFormValid=V(()=>this.loginForm.valid&&!this.isLoading());ngOnInit(){this.handleRedirectMessage(),this.setupFormValidation()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initLoginForm(){return this.fb.group({email:["",[_.required,_.email,_.pattern(this.EMAIL_PATTERN)]],password:["",[_.required,_.minLength(8)]]})}setupFormValidation(){this.loginForm.valueChanges.pipe(ye(this.destroy$)).subscribe(()=>this.updateFormErrors())}updateFormErrors(){let t={email:[],password:[]},e=this.loginForm.get("email"),o=this.loginForm.get("password");e?.errors&&e.touched&&(e.errors.required&&t.email.push("L'email est requis"),(e.errors.email||e.errors.pattern)&&t.email.push("Format d'email invalide")),o?.errors&&o.touched&&(o.errors.required&&t.password.push("Le mot de passe est requis"),o.errors.minlength&&t.password.push("Le mot de passe doit contenir au moins 8 caract\xE8res")),this.formErrors.set(t)}handleRedirectMessage(){this.route.queryParams.pipe(ye(this.destroy$)).subscribe(t=>{t.message&&(this.toastService.showSuccess(t.message),this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0}))})}onSubmit(){if(this.loginForm.valid&&!this.isLoading()){this.isLoading.set(!0);let{email:t,password:e}=this.loginForm.value;this.authService.login(t,e).pipe(ye(this.destroy$)).subscribe({next:()=>{this.inactivityService.startMonitoring(),this.toastService.showSuccess("Connexion r\xE9ussie ! Redirection en cours...",500),setTimeout(()=>{this.router.navigate(["/dashboard"])},500)},error:o=>{console.error("Erreur lors de la connexion:",o),this.toastService.showError("Identifiants incorrects, veuillez r\xE9essayer."),this.isLoading.set(!1)}})}else this.updateFormErrors(),this.toastService.showError("Veuillez corriger les erreurs du formulaire")}getErrorMessage(t){return this.formErrors()[t]||[]}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-login"]],standalone:!0,features:[x],decls:21,vars:15,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-b","from-secondary","to-primary","py-12","px-4","sm:px-6","lg:px-8"],[1,"bg-white/80","backdrop-blur-sm","p-8","rounded-2xl","shadow-xl","w-full","max-w-md","space-y-8"],[1,"text-center","space-y-4"],[1,"text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-gray-600","font-serif","italic"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","email","type","email","formControlName","email","placeholder","exemple@domaine.com",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent","transition-all","duration-300",3,"ngClass"],[1,"mt-2","text-sm","text-red-600"],["for","password",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent","transition-all","duration-300",3,"ngClass"],[1,"pt-6"],[3,"text","type","color","rounded","disabled","customClass"]],template:function(e,o){if(e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"Connexion"),r(),n(5,"p",4),s(6," Acc\xE9dez \xE0 votre espace personnel "),r()(),p(7,"app-toast"),n(8,"form",5),c("ngSubmit",function(){return o.onSubmit()}),n(9,"div")(10,"label",6),s(11," Email "),r(),p(12,"input",7),y(13,sr,2,1,"p",8),r(),n(14,"div")(15,"label",9),s(16," Mot de passe "),r(),p(17,"input",10),y(18,lr,2,1,"p",8),r(),n(19,"div",11),p(20,"app-button",12),r()()()()),e&2){let l,g,T,I;a(8),m("formGroup",o.loginForm),a(4),m("ngClass",Q(11,Ii,((l=o.loginForm.get("email"))==null?null:l.invalid)&&((l=o.loginForm.get("email"))==null?null:l.touched))),a(),v((g=o.loginForm.get("email"))!=null&&g.invalid&&((g=o.loginForm.get("email"))!=null&&g.touched)?13:-1),a(4),m("ngClass",Q(13,Ii,((T=o.loginForm.get("password"))==null?null:T.invalid)&&((T=o.loginForm.get("password"))==null?null:T.touched))),a(),v((I=o.loginForm.get("password"))!=null&&I.invalid&&((I=o.loginForm.get("password"))!=null&&I.touched)?18:-1),a(2),m("text","Se connecter")("type","submit")("color","tertiary")("rounded",!0)("disabled",o.loginForm.invalid)("customClass","w-full font-bold shadow-md hover:shadow-lg transition-all duration-300 py-3")}},dependencies:[pe,se,K,X,ae,le,Ce,U,k,Ue,de],encapsulation:2})};var Mi=[{path:"",component:_t,title:"Accueil"},{path:"animal/:id",loadComponent:()=>import("./chunk-DXDSJRG6.js").then(i=>i.AnimalComponent),title:"Animal"},{path:"habitat/:id",loadComponent:()=>import("./chunk-VMDS4KGJ.js").then(i=>i.HabitatComponent),title:"Habitat"},{path:"habitats",loadComponent:()=>import("./chunk-P37YUZ3H.js").then(i=>i.HabitatsComponent),title:"Habitats"},{path:"services",loadComponent:()=>import("./chunk-MO54SXVV.js").then(i=>i.ServicesComponent),title:"Services"},{path:"service/:id",loadComponent:()=>import("./chunk-VN564WZ4.js").then(i=>i.ServiceComponent),title:"Service"},{path:"contact",loadComponent:()=>import("./chunk-ZFRUTOYC.js").then(i=>i.ContactComponent),title:"Contact"},{path:"login",component:Ct,title:"Connexion"},{path:"admin",loadComponent:()=>import("./chunk-B2PTPB72.js").then(i=>i.AdminDashboardComponent),title:"Admin",canActivate:[Fe],data:{roles:["Admin"]},children:[{path:"account-management",loadComponent:()=>import("./chunk-RSCD5QNB.js").then(i=>i.AccountManagementComponent),title:"Gestion des comptes"},{path:"service-management",loadComponent:()=>import("./chunk-QAYOH73R.js").then(i=>i.ServiceManagementComponent),title:"Modification des services"},{path:"habitat-management",loadComponent:()=>import("./chunk-OCBNBUEF.js").then(i=>i.HabitatManagementComponent),title:"Gestion des habitats"},{path:"animal-management",loadComponent:()=>import("./chunk-K7SWJVRP.js").then(i=>i.AnimalManagementComponent),title:"Gestion des animaux"},{path:"veterinary-reports",loadComponent:()=>import("./chunk-FIGZDQN3.js").then(i=>i.ReportsVeterinaryManagement),title:"Comptes rendus des v\xE9t\xE9rinaires"},{path:"history-management",loadComponent:()=>import("./chunk-NR5SVJMV.js").then(i=>i.HistoryManagementComponent),title:"Consultation des historiques"},{path:"opening-hours-management",component:at,title:"Gestion des horaires d'ouverture"}]},{path:"veterinaire",component:Oe,title:"Dashboard V\xE9t\xE9rinaire",canActivate:[Fe],data:{roles:["Veterinaire"]},children:[{path:"overview",component:Oe},{path:"history",component:Oe}]},{path:"employe",loadComponent:()=>import("./chunk-WT25OSY7.js").then(i=>i.EmployeDashboardComponent),title:"Employ\xE9",canActivate:[Fe],data:{roles:["Employe"]},children:[{path:"pending",loadComponent:()=>import("./chunk-VNINTIKY.js").then(i=>i.UserOpinionManagementComponent)},{path:"validated",loadComponent:()=>import("./chunk-VNINTIKY.js").then(i=>i.UserOpinionManagementComponent)},{path:"rejected",loadComponent:()=>import("./chunk-VNINTIKY.js").then(i=>i.UserOpinionManagementComponent)}]},{path:"update-password",loadComponent:()=>import("./chunk-6AS2NOGV.js").then(i=>i.UpdatePasswordComponent),title:"Modification du mot de passe",canActivate:[Fe],data:{roles:["Admin","Veterinaire","Employe"]}},{path:"**",redirectTo:""}];var Fi=(i,t)=>{let e=O(Pe),o=O(N),l=e.getToken(),g=l?i.clone({setHeaders:{Authorization:`Bearer ${l}`},withCredentials:!0}):i.clone({withCredentials:!0});return t(g).pipe(Y(T=>(console.error("Erreur dans l\u2019intercepteur:",T),T.status===201?(console.warn("Statut 201 ignor\xE9"),t(g)):(T.status===401||T.status===403)&&!i.url.includes("auth/token/refresh")?o.refreshToken().pipe(ee(I=>{console.log("Nouveau token r\xE9cup\xE9r\xE9:",I),e.setToken(I.accessToken);let ue=i.clone({setHeaders:{Authorization:`Bearer ${I.accessToken}`}});return t(ue)}),Y(I=>(console.error("\xC9chec du rafra\xEEchissement:",I),o.logout(),xe(()=>I)))):xe(()=>T))))};var Di={providers:[Jt({eventCoalescing:!0}),ri(Mi),ei(ti([Fi])),{provide:Yt,useValue:"fr-FR"},Ut(si)]};Kt(hi);ii(ot,Di).catch(i=>console.error(i));
