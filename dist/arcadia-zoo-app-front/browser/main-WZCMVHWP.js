import{a as dl}from"./chunk-J3RAU644.js";import{a as sl,b as rl,c as ol,d as Vi,e as Pi,f as Zn}from"./chunk-2L4YC4II.js";import{a as ll,b as cl}from"./chunk-5WQUE5VX.js";import{a as Kn,b as Jn}from"./chunk-AAFKMVCJ.js";import{a as Te}from"./chunk-IER65OKL.js";import{a as zt}from"./chunk-GYUXLAZ6.js";import{a as ml}from"./chunk-TKFMAMM4.js";import{a as Ii,b as Un}from"./chunk-NBXSWBXU.js";import{a as Mt}from"./chunk-2CBPXYGN.js";import{a as Xt}from"./chunk-GMW7M4BS.js";import{a as jn}from"./chunk-WE56B5VH.js";import{a as Jo}from"./chunk-GWUXXP5E.js";import{a as Qn}from"./chunk-AAMRNNEM.js";import{a as Ve}from"./chunk-TTATSR4U.js";import{a as Xo,b as Wo,c as Qo,d as Wn,e as xt,f as $t,g as Zo,h as Ko}from"./chunk-PRIUQE34.js";import{a as Ie}from"./chunk-G3OXHIUX.js";import{b as Yn,c as Be,d as W,e as Ge,f as et,g as el,h as tl,i as il,j as qn,k as tt,l as nl,m as _t,n as vt,o as Di,p as Fi,q as Mi,s as al,t as yt,u as Oi,v as it}from"./chunk-OLGVRGRS.js";import{$b as Ht,Aa as Fs,Ab as Vs,B as $n,Bb as R,Bc as Ho,C as uo,Cb as Lo,Cc as Li,D as po,Db as w,Dc as st,Ea as vo,Ec as Bo,Fa as Ae,Fb as f,Fc as Go,G as pe,Ga as yo,Gb as Do,Gc as $o,Hb as Fo,Hc as Gt,Ia as bo,Ib as Mo,Ic as je,J as zn,Ja as wo,Jb as Ai,Ka as h,Kb as ni,Lb as ai,Lc as zo,Mb as Ei,Na as To,Nb as Ft,Nc as si,Oa as Ms,Ob as ne,Oc as Rs,Pa as A,Pb as Oe,Qb as u,Qc as Yo,Ra as So,Rb as J,Sa as Co,Sb as F,Sc as qo,T as wi,Tb as rn,Tc as ft,Ub as Is,Uc as jo,V as Je,Vb as ut,Vc as Uo,W as Q,Wa as E,Wb as pt,Wc as we,Xa as be,Xb as gt,Y as ge,Ya as sn,Yb as Oo,Z as ye,Za as ko,Zb as Vo,_a as Y,_b as ie,a as Z,aa as de,ac as Io,b as ve,ba as G,bb as N,bc as on,c as lo,cb as ii,cc as qe,d as He,da as go,dc as Xn,ec as Bt,fc as Po,gc as ln,ha as S,ia as C,ib as Ao,ic as Ro,ja as D,jb as Os,jc as No,ka as Ye,kb as K,l as co,la as fo,lb as I,lc as fe,m as mo,ma as xo,mb as P,n as ho,na as Ti,nb as Eo,o as bi,ob as ht,oc as Ps,p as mt,pb as z,q as Me,qa as k,qb as X,rb as x,sa as ke,sb as l,t as Lt,ta as _o,tb as c,u as Gn,ub as y,va as ti,vb as se,wb as re,xb as Dt,yb as Ci,za as Si,zb as ki}from"./chunk-JLM7LPRF.js";function Km(i){let e=i,t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:a===0&&t!==0&&t%1e6===0&&n===0||!(a>=0&&a<=5)?4:5}var hl=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Km];var Jm=(i,e)=>e.id;function eh(i,e){if(i&1&&(se(0,"div",2),u(1),re()),i&2){let t=e.$implicit;Oe(t.type==="success"?"bg-green-600":"bg-red-600"),h(),F(" ",t.message," ")}}var ea=class i{constructor(e){this.notificationService=e}static \u0275fac=function(t){return new(t||i)(A(Jo))};static \u0275cmp=E({type:i,selectors:[["app-notification"]],decls:4,vars:2,consts:[[1,"fixed","top-4","right-4","z-50","space-y-2"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out",3,"class"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out"]],template:function(t,n){t&1&&(se(0,"div",0),z(1,eh,2,3,"div",1,Jm),qe(3,"async"),re()),t&2&&(h(),X(Xn(3,0,n.notificationService.notifications$)))},dependencies:[je,Go],encapsulation:2})};var th=(i,e)=>e.id;function ih(i,e){if(i&1&&(se(0,"a",1),Dt(1,"i"),re()),i&2){let t=e.$implicit;Lo("href",t.url,Ae)("title",t.name),h(),Oe(t.icon+" text-2xl")}}var ia=class i{socialLinks=[{id:1,icon:"fab fa-facebook",url:"#",name:"Facebook"},{id:2,icon:"fab fa-instagram",url:"#",name:"Instagram"},{id:3,icon:"fab fa-tiktok",url:"#",name:"TikTok"},{id:4,icon:"fab fa-linkedin",url:"#",name:"LinkedIn"}];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-social-links"]],decls:3,vars:0,consts:[[1,"flex","justify-center","gap-4"],["target","_blank","rel","noopener noreferrer",1,"text-tertiary","hover:text-primary","transition-colors","duration-300",3,"href","title"]],template:function(t,n){t&1&&(se(0,"div",0),z(1,ih,2,4,"a",1,th),re()),t&2&&(h(),X(n.socialLinks))},encapsulation:2})};var Ri=class i{constructor(e){this.http=e;this.loadOpeningHours()}apiUrl=`${we.apiUrl}/api/opening-hours`;openingHours=k([]);parkStatus=k({isOpen:!0,message:""});loadOpeningHours(){this.getCurrentOpeningHours().pipe(pe(e=>(console.error("Erreur lors du chargement des horaires:",e),mo))).subscribe({next:e=>{e&&(this.openingHours.set([e]),this.parkStatus.set({isOpen:e.parkStatus,message:e.statusMessage}))}})}getCurrentOpeningHours(){return this.http.get(`${this.apiUrl}/current`).pipe(pe(e=>e.status===401?mt({openingHours:[],parkStatus:!0,statusMessage:"",isCurrent:!0}):this.handleError("r\xE9cup\xE9ration des horaires actuels",e)))}createOpeningHours(e){let t={openingHours:[{days:"Lundi - Vendredi",hours:e.weekdayHours,isOpen:e.isWeekdayOpen},{days:"Samedi - Dimanche",hours:e.weekendHours,isOpen:e.isWeekendOpen}],parkStatus:e.parkStatus,statusMessage:e.statusMessage??""};return console.log("Payload envoy\xE9 pour cr\xE9ation:",t),this.http.post(this.apiUrl,t).pipe(Je(n=>console.log("R\xE9ponse de l'API (cr\xE9ation) :",n)),pe(n=>(console.error("Erreur API lors de la cr\xE9ation :",n),n.error&&console.error("D\xE9tails de l'erreur renvoy\xE9e par l'API :",n.error),Me(()=>new Error("Erreur lors de la cr\xE9ation des horaires.")))))}updateOpeningHours(e,t){let n={openingHours:[{days:"Lundi - Vendredi",hours:t.weekdayHours,isOpen:t.isWeekdayOpen},{days:"Samedi - Dimanche",hours:t.weekendHours,isOpen:t.isWeekendOpen}],parkStatus:t.parkStatus,statusMessage:t.statusMessage??""};return this.http.put(`${this.apiUrl}/${e}`,n).pipe(Je(a=>{this.openingHours.set([a])}),pe(a=>this.handleError("mise \xE0 jour des horaires",a)))}updateParkStatus(e){return e.isOpen===void 0?Me(()=>new Error("Le statut isOpen est requis")):this.http.put(`${this.apiUrl}/status`,e).pipe(Je(t=>{this.parkStatus.set(t)}),pe(t=>this.handleError("mise \xE0 jour du statut",t)))}isParkOpen(){if(!this.parkStatus().isOpen)return!1;let e=new Date,t=e.getDay(),n=e.getHours()*100+e.getMinutes(),a=this.openingHours()[0]?.openingHours.find(o=>t>=1&&t<=5?o.days.includes("Lundi - Vendredi"):o.days.includes("Samedi - Dimanche"));if(!a?.isOpen)return!1;let[s,r]=a.hours.split(" - ").map(o=>parseInt(o.replace("h","")));return n>=s*100&&n<=r*100}getOpeningHoursId(){return He(this,null,function*(){let e=this.openingHours();if(e&&e.length>0&&e[0]._id)return e[0]._id;throw new Error("Aucun ID trouv\xE9 pour les horaires")})}handleError(e,t){return console.error(`Erreur lors de ${e}:`,t),Me(()=>new Error(`Erreur lors de ${e}`))}static \u0275fac=function(t){return new(t||i)(de(ft))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var nh=(i,e)=>e.days;function ah(i,e){if(i&1&&(l(0,"li",28)(1,"span",29),u(2),c(),l(3,"span",30),u(4),c()()),i&2){let t=e.$implicit;h(2),J(t.days),h(2),J(t.hours)}}function sh(i,e){if(i&1&&z(0,ah,5,2,"li",28,nh),i&2){let t=f();X(t.openingHours()[0].openingHours)}}function rh(i,e){if(i&1){let t=R();l(0,"iframe",31),w("error",function(){S(t);let a=f();return C(a.mapLoaded.set(!1))}),c()}}function oh(i,e){i&1&&(l(0,"div",22)(1,"a",32),y(2,"i",33),u(3," Voir la localisation sur Google Maps "),c()())}var na=class i{constructor(e){this.openingHoursService=e}currentYear=new Date().getFullYear();mapLoaded=k(!0);ngOnInit(){window.addEventListener("error",e=>e.filename&&(e.filename.includes("maps.googleapis.com")||e.filename.includes("google.com/maps"))||e.message&&(e.message.includes("maps.googleapis.com")||e.message.includes("google.maps")||e.message.includes("gen_204")||e.message.includes("ERR_BLOCKED_BY_CLIENT"))||e.target&&e.target.src&&(e.target.src.includes("maps.googleapis.com")||e.target.src.includes("google.com/maps"))?(console.warn("Google Maps a rencontr\xE9 une erreur, probablement bloqu\xE9 par un bloqueur de publicit\xE9s"),this.mapLoaded.set(!1),e.preventDefault(),!0):!1,!0),window.addEventListener("unhandledrejection",e=>{e.reason&&(String(e.reason).includes("maps.googleapis.com")||String(e.reason).includes("google.maps")||String(e.reason).includes("ERR_BLOCKED_BY_CLIENT"))&&(console.warn("Google Maps promise rejected, probablement bloqu\xE9 par un bloqueur de publicit\xE9s"),this.mapLoaded.set(!1),e.preventDefault())})}isParkOpen=fe(()=>this.openingHoursService.isParkOpen());openingHours=fe(()=>this.openingHoursService.openingHours());parkStatus=fe(()=>this.openingHoursService.parkStatus());static \u0275fac=function(t){return new(t||i)(A(Ri))};static \u0275cmp=E({type:i,selectors:[["app-footer"]],decls:48,vars:3,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-3"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","justify-center","items-start","gap-16","mb-4"],[1,"flex","flex-col","items-center","space-y-3","w-full","md:w-auto"],[1,"w-full","max-w-[280px]","text-center"],[1,"text-lg","font-serif","font-bold","text-tertiary","mb-1"],[1,"fas","fa-info-circle","mr-2"],[1,"text-sm","text-quinary/80","leading-relaxed"],[1,"w-full","max-w-[280px]"],[1,"text-lg","font-serif","font-bold","text-tertiary","text-center","mb-1"],[1,"far","fa-clock","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5"],[1,"divide-y","divide-tertiary/10"],[1,"fas","fa-map-marker-alt","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5","space-y-1"],[1,"not-italic","space-y-1","text-sm","text-quinary/80"],[1,"flex","items-center","justify-center","gap-2"],[1,"fas","fa-home","text-tertiary"],[1,"fas","fa-city","text-tertiary"],[1,"fas","fa-globe-europe","text-tertiary"],[1,"rounded-lg","overflow-hidden","shadow-md","h-[70px]","mt-1"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2668.735021438556!2d-2.1739626!3d48.018829!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x480faceab3587495%3A0xcdc883e818be2eb2!2sFor%C3%AAt%20de%20Broc%C3%A9liande!5e0!3m2!1sfr!2sfr!4v1728318223640!5m2!1sfr!2sfr","width","100%","height","100%","loading","lazy","referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin allow-popups","title","Carte Google Maps de la For\xEAt de Broc\xE9liande",1,"w-full","h-full",2,"border","0"],[1,"w-full","h-full","flex","items-center","justify-center","bg-tertiary/10","p-2"],[1,"border-t","border-tertiary/20","pt-2","space-y-1"],[1,"text-xs","font-medium","text-quinary/70","text-center"],[1,"flex","flex-col","items-center","space-y-1"],[1,"text-sm","font-serif","font-bold","text-tertiary"],[1,"fas","fa-share-alt","mr-2"],[1,"flex","justify-between","items-center","text-sm","text-quinary/80","px-2","py-1"],[1,"pr-2"],[1,"bg-tertiary/10","px-2","py-0.5","rounded-md"],["src",yo`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2668.735021438556!2d-2.1739626!3d48.018829!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x480faceab3587495%3A0xcdc883e818be2eb2!2sFor%C3%AAt%20de%20Broc%C3%A9liande!5e0!3m2!1sfr!2sfr!4v1728318223640!5m2!1sfr!2sfr`,"width","100%","height","100%","loading","lazy","referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin allow-popups","title","Carte Google Maps de la For\xEAt de Broc\xE9liande",1,"w-full","h-full",2,"border","0",3,"error"],["href","https://goo.gl/maps/Nt8UQcXJLXZQNvLz5","target","_blank","rel","noopener noreferrer",1,"text-xs","text-tertiary","hover:underline","text-center"],[1,"fas","fa-map-marker-alt","mr-1"]],template:function(t,n){t&1&&(l(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),y(6,"i",6),u(7,"Zoo Arcadia "),c(),l(8,"p",7),u(9," Un lieu magique o\xF9 la nature et l'\xE9merveillement se rencontrent, situ\xE9 au c\u0153ur de la l\xE9gendaire for\xEAt de Broc\xE9liande. "),c()()(),l(10,"div",3)(11,"div",8)(12,"h3",9),y(13,"i",10),u(14,"Horaires d'ouverture "),c(),l(15,"div",11)(16,"ul",12),I(17,sh,2,0),c()()()(),l(18,"div",3)(19,"div",8)(20,"h3",9),y(21,"i",13),u(22,"Nous trouver "),c(),l(23,"div",14)(24,"address",15)(25,"div",16),y(26,"i",17),l(27,"span"),u(28,"666 chemin de l'\xE9trange"),c()(),l(29,"div",16),y(30,"i",18),l(31,"span"),u(32,"35380 Paimpont"),c()(),l(33,"div",16),y(34,"i",19),l(35,"span"),u(36,"France"),c()()(),l(37,"div",20),I(38,rh,1,0,"iframe",21)(39,oh,4,0,"div",22),c()()()()(),l(40,"div",23)(41,"p",24),u(42),c(),l(43,"div",25)(44,"h3",26),y(45,"i",27),u(46,"Suivez-nous "),c(),y(47,"app-social-links"),c()()()()),t&2&&(h(17),P(n.openingHours()&&n.openingHours().length>0?17:-1),h(21),P(n.mapLoaded()?38:39),h(4),F(" Copyright \xA9 ",n.currentYear," N\xE9dellec Julien. Tous droits r\xE9serv\xE9s. "))},dependencies:[ia],encapsulation:2})};var aa=class i{loginSuccess=new N;forgotPasswordClick=new N;close=new N;showPassword=!1;authService=G(Te);fb=G(yt);loginForm=this.fb.group({email:["",[W.required,W.email]],password:["",[W.required,W.minLength(6)]],remember:[!1]});togglePasswordVisibility(){this.showPassword=!this.showPassword}forgotPassword(){this.forgotPasswordClick.emit()}closeForm(){this.close.emit()}onSubmit(){if(this.loginForm.valid){let{email:e,password:t,remember:n}=this.loginForm.value;n?localStorage.setItem("savedEmail",e):localStorage.removeItem("savedEmail"),this.authService.login(e,t).subscribe({next:()=>{this.loginSuccess.emit()},error:a=>{console.error("Erreur de connexion:",a)}})}}ngOnInit(){let e=localStorage.getItem("savedEmail");e&&this.loginForm.patchValue({email:e,remember:!0})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-login-form"]],outputs:{loginSuccess:"loginSuccess",forgotPasswordClick:"forgotPasswordClick",close:"close"},decls:27,vars:5,consts:[[1,"relative","bg-white/95","backdrop-blur-sm","rounded-xl","shadow-2xl","w-full","max-w-md","mx-auto","border","border-secondary/20"],["type","button","aria-label","Fermer",1,"absolute","top-3","right-3","text-tertiary/60","hover:text-tertiary","transition-colors",3,"click"],[1,"fas","fa-times","fa-lg"],[1,"p-8"],[1,"text-center","text-3xl","font-bold","mb-8","text-tertiary","font-serif"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","email",1,"block","text-sm","font-medium","text-tertiary/80"],[1,"relative"],["id","email","type","email","formControlName","email","placeholder","vous@exemple.com",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["for","password",1,"block","text-sm","font-medium","text-tertiary/80"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-tertiary/60","hover:text-tertiary","transition-colors",3,"click"],["href","#",1,"text-sm","text-tertiary","hover:text-quaternary","transition-colors","float-right",3,"click"],[1,"flex","items-center","mt-4"],["type","checkbox","id","remember","formControlName","remember",1,"w-4","h-4","text-tertiary","border-secondary/30","rounded","focus:ring-tertiary/30"],["for","remember",1,"ml-2","text-sm","text-tertiary/80","cursor-pointer","hover:text-tertiary","transition-colors"],["type","submit",1,"w-full","bg-tertiary","text-white","py-3.5","px-4","rounded-lg","font-medium","hover:bg-quaternary","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-quaternary","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","shadow-lg","hover:shadow-xl","mt-6",3,"disabled"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"button",1),w("click",function(){return n.closeForm()}),y(2,"i",2),c(),l(3,"div",3)(4,"h2",4),u(5," Connectez-vous \xE0 votre compte "),c(),l(6,"form",5),w("ngSubmit",function(){return n.onSubmit()}),l(7,"div",6)(8,"label",7),u(9," Adresse email "),c(),l(10,"div",8),y(11,"input",9),c()(),l(12,"div",6)(13,"label",10),u(14," Mot de passe "),c(),l(15,"div",8),y(16,"input",11),l(17,"button",12),w("click",function(){return n.togglePasswordVisibility()}),y(18,"i"),c()(),l(19,"a",13),w("click",function(s){return s.preventDefault(),n.forgotPassword()}),u(20," Mot de passe oubli\xE9 ? "),c()(),l(21,"div",14),y(22,"input",15),l(23,"label",16),u(24," Se souvenir de moi "),c()(),l(25,"button",17),u(26," Se connecter "),c()()()()),t&2&&(h(6),x("formGroup",n.loginForm),h(10),x("type",n.showPassword?"text":"password"),h(2),Oe(n.showPassword?"fas fa-eye-slash fa-lg":"fas fa-eye fa-lg"),h(7),x("disabled",!n.loginForm.valid))},dependencies:[it,tt,Be,Yn,Ge,et,_t,vt],encapsulation:2})};function lh(i,e){if(i&1){let t=R();l(0,"form",4),w("ngSubmit",function(){S(t);let a=f();return C(a.requestCode())}),l(1,"div",5)(2,"label",6),u(3," Adresse email "),c(),l(4,"div",7),y(5,"input",8),c()(),l(6,"button",9),u(7),c()()}if(i&2){let t=f();x("formGroup",t.emailForm),h(6),x("disabled",!t.emailForm.valid||t.isLoading()),h(),F(" ",t.isLoading()?"Envoi en cours...":"Recevoir le code"," ")}}function ch(i,e){if(i&1){let t=R();l(0,"form",4),w("ngSubmit",function(){S(t);let a=f();return C(a.onSubmit())}),l(1,"div",5)(2,"label",10),u(3," Code de r\xE9initialisation "),c(),l(4,"div",7),y(5,"input",11),c()(),l(6,"div",5)(7,"label",12),u(8," Nouveau mot de passe "),c(),l(9,"div",7),y(10,"input",13),l(11,"button",14),w("click",function(){S(t);let a=f();return C(a.togglePasswordVisibility())}),y(12,"i"),c()()(),l(13,"button",9),u(14),c()()}if(i&2){let t=f();x("formGroup",t.resetForm),h(10),x("type",t.showPassword?"text":"password"),h(2),Oe(t.showPassword?"fas fa-eye-slash fa-lg":"fas fa-eye fa-lg"),h(),x("disabled",!t.resetForm.valid||t.isLoading()),h(),F(" ",t.isLoading()?"R\xE9initialisation...":"R\xE9initialiser le mot de passe"," ")}}var sa=class i{closeModal=new N;authService=G(Te);fb=G(yt);toastService=G(Ve);router=G(xt);showPassword=!1;codeRequested=k(!1);isLoading=k(!1);emailForm=new el({email:new il("",{validators:[W.required,W.email],nonNullable:!0})});resetForm=this.fb.group({code:["",[W.required,W.minLength(6)]],newPassword:["",[W.required,W.minLength(8),W.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]]});togglePasswordVisibility(){this.showPassword=!this.showPassword}requestCode(){this.emailForm.valid&&!this.isLoading()&&(this.isLoading.set(!0),this.authService.initiatePasswordReset(this.emailForm.value.email).subscribe({next:()=>{this.toastService.showSuccess("Code envoy\xE9 avec succ\xE8s. Veuillez v\xE9rifier votre email."),this.codeRequested.set(!0),this.isLoading.set(!1)},error:e=>{this.toastService.showError(e.message||"Erreur lors de l'envoi du code"),this.isLoading.set(!1)}}))}onSubmit(){this.resetForm.valid&&!this.isLoading()&&(this.isLoading.set(!0),this.authService.resetPassword(this.emailForm.value.email,this.resetForm.value.code,this.resetForm.value.newPassword).subscribe({next:()=>{this.toastService.showSuccess("Mot de passe r\xE9initialis\xE9 avec succ\xE8s"),this.resetForm.disable(),this.closeModal.emit(),this.router.navigate(["/login"])},error:e=>{this.toastService.showError(e.message||"Erreur lors de la r\xE9initialisation"),this.isLoading.set(!1)}}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-password-reset"]],outputs:{closeModal:"closeModal"},decls:7,vars:1,consts:[[1,"bg-white/95","backdrop-blur-sm","rounded-xl","shadow-2xl","w-full","max-w-md","mx-auto","border","border-secondary/20"],[1,"p-8"],[1,"text-center","text-3xl","font-bold","mb-8","text-tertiary","font-serif"],[1,"space-y-6",3,"formGroup"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","email",1,"block","text-sm","font-medium","text-tertiary/80"],[1,"relative"],["id","email","type","email","formControlName","email","placeholder","vous@exemple.com",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["type","submit",1,"w-full","bg-tertiary","text-white","py-3.5","px-4","rounded-lg","font-medium","hover:bg-quaternary","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-quaternary","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","shadow-lg","hover:shadow-xl",3,"disabled"],["for","code",1,"block","text-sm","font-medium","text-tertiary/80"],["id","code","type","text","formControlName","code","placeholder","Entrez le code re\xE7u par email",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["for","newPassword",1,"block","text-sm","font-medium","text-tertiary/80"],["id","newPassword","formControlName","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-tertiary/60","hover:text-tertiary","transition-colors",3,"click"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),y(2,"app-toast"),l(3,"h2",2),u(4," R\xE9initialisation du mot de passe "),c(),I(5,lh,8,3,"form",3)(6,ch,15,6,"form",3),c()()),t&2&&(h(5),P(n.codeRequested()?6:5))},dependencies:[it,tt,Be,Ge,et,_t,vt,zt],encapsulation:2})};var ra=class i{constructor(e){this.authService=e}isAuthenticated(){return this.authService.isAuthenticated()}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||i)(A(Te))};static \u0275cmp=E({type:i,selectors:[["app-banner"]],decls:3,vars:1,consts:[[1,"w-full","pt-14","relative"],["src","images/banner.webp","alt","Banni\xE8re Zoo Arcadia.",1,"w-full","md:h-[30rem]"],[3,"customClass"]],template:function(t,n){t&1&&(l(0,"div",0),y(1,"img",1)(2,"app-toast",2),c()),t&2&&(h(2),x("customClass","fixed top-[4.5rem] right-0 z-50 transition-all duration-300 ease-in-out w-80"))},dependencies:[zt],encapsulation:2})};var Hs=()=>["/"],gl=()=>["/services"],fl=()=>["/habitats"],xl=()=>["/contact"],_l=()=>["/veterinaire"],Hi=()=>["/update-password"],vl=()=>["/employe"],yl=()=>["/admin"];function dh(i,e){i&1&&y(0,"img",4)}function mh(i,e){i&1&&y(0,"img",5)}function hh(i,e){if(i&1){let t=R();l(0,"li",7)(1,"a",17),w("click",function(){S(t);let a=f();return C(a.openLoginModal())}),u(2," Connexion "),c()()}}function uh(i,e){if(i&1){let t=R();l(0,"li",9)(1,"button",18),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("vet"))}),u(2," V\xE9t\xE9rinaire "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="vet"),h(2),ne("scale-0",t.activeDropdown!=="vet")("scale-100",t.activeDropdown==="vet"),h(),x("routerLink",ie(8,_l)),h(2),x("routerLink",ie(9,Hi))}}function ph(i,e){if(i&1){let t=R();l(0,"li",9)(1,"button",18),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("employe"))}),u(2," Employ\xE9 "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="employe"),h(2),ne("scale-0",t.activeDropdown!=="employe")("scale-100",t.activeDropdown==="employe"),h(),x("routerLink",ie(8,vl)),h(2),x("routerLink",ie(9,Hi))}}function gh(i,e){if(i&1){let t=R();l(0,"li",9)(1,"button",18),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("admin"))}),u(2," Admin "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="admin"),h(2),ne("scale-0",t.activeDropdown!=="admin")("scale-100",t.activeDropdown==="admin"),h(),x("routerLink",ie(8,yl)),h(2),x("routerLink",ie(9,Hi))}}function fh(i,e){if(i&1){let t=R();l(0,"li",7)(1,"a",24),w("click",function(){S(t);let a=f();return C(a.logout())}),u(2," D\xE9connexion "),c()()}}function xh(i,e){if(i&1){let t=R();l(0,"li",11)(1,"a",17),w("click",function(){S(t);let a=f();return C(a.openLoginModal())}),u(2," Connexion "),c()()}}function _h(i,e){if(i&1){let t=R();l(0,"li",12)(1,"button",25),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("vet-mobile"))}),u(2," V\xE9t\xE9rinaire "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="vet-mobile"),h(2),ne("hidden",t.activeDropdown!=="vet-mobile"),h(),x("routerLink",ie(6,_l)),h(2),x("routerLink",ie(7,Hi))}}function vh(i,e){if(i&1){let t=R();l(0,"li",12)(1,"button",25),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("employe-mobile"))}),u(2," Employ\xE9 "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="employe-mobile"),h(2),ne("hidden",t.activeDropdown!=="employe-mobile"),h(),x("routerLink",ie(6,vl)),h(2),x("routerLink",ie(7,Hi))}}function yh(i,e){if(i&1){let t=R();l(0,"li",12)(1,"button",25),w("click",function(){S(t);let a=f();return C(a.toggleDropdown("admin-mobile"))}),u(2," Admin "),D(),l(3,"svg",19),y(4,"path",20),c()(),Ye(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let t=f();h(3),ne("rotate-180",t.activeDropdown==="admin-mobile"),h(2),ne("hidden",t.activeDropdown!=="admin-mobile"),h(),x("routerLink",ie(6,yl)),h(2),x("routerLink",ie(7,Hi))}}function bh(i,e){if(i&1){let t=R();l(0,"li",11)(1,"a",24),w("click",function(){S(t);let a=f();return C(a.logout())}),u(2," D\xE9connexion "),c()()}}var oa=class i{isMenuOpen=!1;activeDropdown=null;isLoginModalOpen=k(!1);isPasswordResetModalOpen=k(!1);authService=G(Te);router=G(xt);userAuthenticated=fe(()=>!!this.authService.user());userRoles=fe(()=>{let e=this.authService.user();return{admin:e?.role?.name==="Admin",veterinaire:e?.role?.name==="Veterinaire",employe:e?.role?.name==="Employe"}});toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDropdown(e){this.activeDropdown=this.activeDropdown===e?null:e}openLoginModal(){this.isLoginModalOpen.set(!0)}closeLoginModal(){this.isLoginModalOpen.set(!1)}openPasswordResetModal(){this.isLoginModalOpen.set(!1),this.isPasswordResetModalOpen.set(!0)}closePasswordResetModal(){this.isPasswordResetModalOpen.set(!1)}logout(){this.authService.logout(),this.router.navigate(["/"])}onDocumentClick(e){let t=e.target,n=t.closest("#menu-toggler"),a=t.closest('button[class*="hover:text-quaternary"]');if(n||a)return;if(!(t.closest("#main-navlist-mobile")||t.closest("#main-nav"))){this.isMenuOpen=!1,this.activeDropdown=null;return}t.closest("a")&&(this.isMenuOpen=!1,this.activeDropdown=null)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-nav"]],hostBindings:function(t,n){t&1&&w("click",function(s){return n.onDocumentClick(s)},wo)},decls:48,vars:35,consts:[[1,"bg-secondary","z-50","fixed","top-0","w-full","shadow"],["id","main-nav",1,"bg-secondary","w-full","mx-auto","p-4","flex","items-center","justify-between","flex-wrap","md:p-5"],["aria-label","Accueil du portfolio",1,"text-lg","lg:text-xl","text-primary","font-bold",3,"routerLink"],["aria-controls","main-navlist","id","menu-toggler",1,"cursor-pointer","w-7","md:hidden",3,"click"],["width","28","height","28","src","images/menu.svg","alt","Ouvrir le menu"],["width","28","height","28","src","images/cross.svg","alt","Fermer le menu"],["id","main-navlist",1,"hidden","md:flex","items-center","w-full","md:w-auto","pt-4","md:pt-0","text-primary"],[1,"block","py-3","md:inline","md:py-0","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"routerLink"],[1,"block","py-3","md:inline","md:py-0","md:mr-6","relative","group"],["id","main-navlist-mobile",1,"bg-secondary","text-center","w-full","pt-4","text-primary","md:hidden"],[1,"block","py-3","md:mr-6"],[1,"block","py-3","md:mr-6","relative"],["title","Connexion",3,"closeModal","isOpen"],[3,"loginSuccess","forgotPasswordClick","close"],[3,"close","isOpen"],[3,"closeModal"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","cursor-pointer",3,"click"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","flex","items-center","gap-2","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","py-2","w-48","bg-white","rounded-lg","shadow-xl","transition-all","duration-200","ease-in-out","transform","origin-top-right"],[1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"click"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","w-full","flex","items-center","justify-center","gap-2",3,"click"],[1,"py-2","bg-white","w-full","transition-all","duration-200","ease-in-out"],[1,"block","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"]],template:function(t,n){t&1&&(l(0,"nav",0)(1,"div",1)(2,"a",2),u(3," Zoo Arcadia "),c(),l(4,"button",3),w("click",function(){return n.toggleMenu()}),I(5,dh,1,0,"img",4),I(6,mh,1,0,"img",5),c(),l(7,"ul",6)(8,"li",7)(9,"a",8),u(10," Accueil "),c()(),l(11,"li",7)(12,"a",8),u(13," Services "),c()(),l(14,"li",7)(15,"a",8),u(16," Habitats "),c()(),l(17,"li",7)(18,"a",8),u(19," Contact "),c()(),I(20,hh,3,0,"li",7),I(21,uh,10,10,"li",9),I(22,ph,10,10,"li",9),I(23,gh,10,10,"li",9),I(24,fh,3,0,"li",7),c()(),l(25,"ul",10)(26,"li",11)(27,"a",8),u(28," Accueil "),c()(),l(29,"li",11)(30,"a",8),u(31," Services "),c()(),l(32,"li",11)(33,"a",8),u(34," Habitats "),c()(),l(35,"li",11)(36,"a",8),u(37," Contact "),c()(),I(38,xh,3,0,"li",11),I(39,_h,10,8,"li",12),I(40,vh,10,8,"li",12),I(41,yh,10,8,"li",12),I(42,bh,3,0,"li",11),c()(),y(43,"app-banner"),l(44,"app-modal",13),w("closeModal",function(){return n.closeLoginModal()}),l(45,"app-login-form",14),w("loginSuccess",function(){return n.closeLoginModal()})("forgotPasswordClick",function(){return n.openPasswordResetModal()})("close",function(){return n.closeLoginModal()}),c()(),l(46,"app-modal",15),w("close",function(){return n.closePasswordResetModal()}),l(47,"app-password-reset",16),w("closeModal",function(){return n.closePasswordResetModal()}),c()()),t&2&&(h(2),x("routerLink",ie(26,Hs)),h(2),K("aria-expanded",n.isMenuOpen),h(),P(n.isMenuOpen?-1:5),h(),P(n.isMenuOpen?6:-1),h(3),x("routerLink",ie(27,Hs)),h(3),x("routerLink",ie(28,gl)),h(3),x("routerLink",ie(29,fl)),h(3),x("routerLink",ie(30,xl)),h(2),P(n.userAuthenticated()?-1:20),h(),P(n.userRoles().veterinaire?21:-1),h(),P(n.userRoles().employe?22:-1),h(),P(n.userRoles().admin?23:-1),h(),P(n.userAuthenticated()?24:-1),h(),ne("hidden",!n.isMenuOpen),h(2),x("routerLink",ie(31,Hs)),h(3),x("routerLink",ie(32,gl)),h(3),x("routerLink",ie(33,fl)),h(3),x("routerLink",ie(34,xl)),h(2),P(n.userAuthenticated()?-1:38),h(),P(n.userRoles().veterinaire?39:-1),h(),P(n.userRoles().employe?40:-1),h(),P(n.userRoles().admin?41:-1),h(),P(n.userAuthenticated()?42:-1),h(2),x("isOpen",n.isLoginModalOpen()),h(2),x("isOpen",n.isPasswordResetModalOpen()))},dependencies:[$t,Vi,aa,ra,sa],encapsulation:2})};var Bi=class i{constructor(e,t,n,a){this.authService=e;this.router=t;this.ngZone=n;this.toastService=a}activitySubject=new co(1);timeoutDuration=3e5;inactivitySubscription;startMonitoring(){["mousemove","keydown","click","touchstart","scroll"].forEach(t=>{$n(window,t).pipe(zn(1e3)).subscribe(()=>this.activitySubject.next())}),this.activitySubject.pipe(wi(()=>uo(this.timeoutDuration))).subscribe(()=>this.handleInactivity())}handleInactivity(){this.ngZone.run(()=>{this.authService.logout(),this.router.navigate(["/login"])})}stopMonitoring(){this.inactivitySubscription&&(this.inactivitySubscription.unsubscribe(),console.log("Surveillance d'inactivit\xE9 arr\xEAt\xE9e."))}static \u0275fac=function(t){return new(t||i)(de(Te),de(xt),de(ii),de(Ve))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var la=class i{constructor(e,t,n,a){this.tokenService=e;this.authService=t;this.inactivityService=n;this.toastService=a}ngOnInit(){let e=this.tokenService.getToken();e&&(this.tokenService.isTokenExpired(e)?(this.authService.logout(),this.toastService.showError("Votre session a expir\xE9, vous avez \xE9t\xE9 d\xE9connect\xE9.")):this.inactivityService.startMonitoring())}ngOnDestroy(){this.inactivityService.stopMonitoring()}static \u0275fac=function(t){return new(t||i)(A(Mt),A(Te),A(Bi),A(Ve))};static \u0275cmp=E({type:i,selectors:[["app-root"]],decls:4,vars:0,template:function(t,n){t&1&&y(0,"app-nav")(1,"router-outlet")(2,"app-footer")(3,"app-notification")},dependencies:[oa,na,Wn,ea],encapsulation:2})};var B=(function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i})(B||{}),nt="*";function Bs(i,e){return{type:B.Trigger,name:i,definitions:e,options:{}}}function Gs(i,e=null){return{type:B.Animate,styles:e,timings:i}}function wl(i,e=null){return{type:B.Sequence,steps:i,options:e}}function oi(i){return{type:B.Style,styles:i,offset:null}}function $s(i,e,t=null){return{type:B.Transition,expr:i,animation:e,options:t}}var bt=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},ri=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,a=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++t==s&&this._onFinish()}),r.onDestroy(()=>{++n==s&&this._onDestroy()}),r.onStart(()=>{++a==s&&this._onStart()})}),this.totalTime=this.players.reduce((r,o)=>Math.max(r,o.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let a=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(a)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Gi="!";function Tl(i){return new Q(3e3,!1)}function Sh(){return new Q(3100,!1)}function Ch(){return new Q(3101,!1)}function kh(i){return new Q(3001,!1)}function Ah(i){return new Q(3003,!1)}function Eh(i){return new Q(3004,!1)}function Cl(i,e){return new Q(3005,!1)}function kl(){return new Q(3006,!1)}function Al(){return new Q(3007,!1)}function El(i,e){return new Q(3008,!1)}function Ll(i){return new Q(3002,!1)}function Dl(i,e,t,n,a){return new Q(3010,!1)}function Fl(){return new Q(3011,!1)}function Ml(){return new Q(3012,!1)}function Ol(){return new Q(3200,!1)}function Vl(){return new Q(3202,!1)}function Il(){return new Q(3013,!1)}function Pl(i){return new Q(3014,!1)}function Rl(i){return new Q(3015,!1)}function Nl(i){return new Q(3016,!1)}function Hl(i,e){return new Q(3404,!1)}function Lh(i){return new Q(3502,!1)}function Bl(i){return new Q(3503,!1)}function Gl(){return new Q(3300,!1)}function $l(i){return new Q(3504,!1)}function zl(i){return new Q(3301,!1)}function Xl(i,e){return new Q(3302,!1)}function Wl(i){return new Q(3303,!1)}function Yl(i,e){return new Q(3400,!1)}function ql(i){return new Q(3401,!1)}function jl(i){return new Q(3402,!1)}function Ul(i,e){return new Q(3505,!1)}function Ot(i){switch(i.length){case 0:return new bt;case 1:return i[0];default:return new ri(i)}}function Ys(i,e,t=new Map,n=new Map){let a=[],s=[],r=-1,o=null;if(e.forEach(d=>{let m=d.get("offset"),p=m==r,g=p&&o||new Map;d.forEach((_,b)=>{let v=b,T=_;if(b!=="offset")switch(v=i.normalizePropertyName(v,a),T){case Gi:T=t.get(b);break;case nt:T=n.get(b);break;default:T=i.normalizeStyleValue(b,v,T,a);break}g.set(v,T)}),p||s.push(g),o=g,r=m}),a.length)throw Lh(a);return s}function ca(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&zs(t,"start",i)));break;case"done":i.onDone(()=>n(t&&zs(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&zs(t,"destroy",i)));break}}function zs(i,e,t){let n=t.totalTime,a=!!t.disabled,s=da(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,a),r=i._data;return r!=null&&(s._data=r),s}function da(i,e,t,n,a="",s=0,r){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:a,totalTime:s,disabled:!!r}}function $e(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function qs(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var Dh=typeof document>"u"?null:document.documentElement;function ma(i){let e=i.parentNode||i.host||null;return e===Dh?null:e}function Fh(i){return i.substring(1,6)=="ebkit"}var li=null,Sl=!1;function Ql(i){li||(li=Mh()||{},Sl=li.style?"WebkitAppearance"in li.style:!1);let e=!0;return li.style&&!Fh(i)&&(e=i in li.style,!e&&Sl&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in li.style)),e}function Mh(){return typeof document<"u"?document.body:null}function js(i,e){for(;e;){if(e===i)return!0;e=ma(e)}return!1}function Us(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Oh=1e3,Qs="{{",Vh="}}",Zs="ng-enter",ha="ng-leave",dn="ng-trigger",mn=".ng-trigger",Ks="ng-animating",ua=".ng-animating";function wt(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Xs(parseFloat(e[1]),e[2])}function Xs(i,e){switch(e){case"s":return i*Oh;default:return i}}function hn(i,e,t){return i.hasOwnProperty("duration")?i:Ph(i,e,t)}var Ih=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Ph(i,e,t){let n,a=0,s="";if(typeof i=="string"){let r=i.match(Ih);if(r===null)return e.push(Tl(i)),{duration:0,delay:0,easing:""};n=Xs(parseFloat(r[1]),r[2]);let o=r[3];o!=null&&(a=Xs(parseFloat(o),r[4]));let d=r[5];d&&(s=d)}else n=i;if(!t){let r=!1,o=e.length;n<0&&(e.push(Sh()),r=!0),a<0&&(e.push(Ch()),r=!0),r&&e.splice(o,0,Tl(i))}return{duration:n,delay:a,easing:s}}function Zl(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function rt(i,e,t){e.forEach((n,a)=>{let s=pa(a);t&&!t.has(a)&&t.set(a,i.style[s]),i.style[s]=n})}function Wt(i,e){e.forEach((t,n)=>{let a=pa(n);i.style[a]=""})}function $i(i){return Array.isArray(i)?i.length==1?i[0]:wl(i):i}function Kl(i,e,t){let n=e.params||{},a=Js(i);a.length&&a.forEach(s=>{n.hasOwnProperty(s)||t.push(kh(s))})}var Ws=new RegExp(`${Qs}\\s*(.+?)\\s*${Vh}`,"g");function Js(i){let e=[];if(typeof i=="string"){let t;for(;t=Ws.exec(i);)e.push(t[1]);Ws.lastIndex=0}return e}function zi(i,e,t){let n=`${i}`,a=n.replace(Ws,(s,r)=>{let o=e[r];return o==null&&(t.push(Ah(r)),o=""),o.toString()});return a==n?i:a}var Rh=/-+([a-z0-9])/g;function pa(i){return i.replace(Rh,(...e)=>e[1].toUpperCase())}function Jl(i,e){return i===0||e===0}function ec(i,e,t){if(t.size&&e.length){let n=e[0],a=[];if(t.forEach((s,r)=>{n.has(r)||a.push(r),n.set(r,s)}),a.length)for(let s=1;s<e.length;s++){let r=e[s];a.forEach(o=>r.set(o,ga(i,o)))}}return e}function ze(i,e,t){switch(e.type){case B.Trigger:return i.visitTrigger(e,t);case B.State:return i.visitState(e,t);case B.Transition:return i.visitTransition(e,t);case B.Sequence:return i.visitSequence(e,t);case B.Group:return i.visitGroup(e,t);case B.Animate:return i.visitAnimate(e,t);case B.Keyframes:return i.visitKeyframes(e,t);case B.Style:return i.visitStyle(e,t);case B.Reference:return i.visitReference(e,t);case B.AnimateChild:return i.visitAnimateChild(e,t);case B.AnimateRef:return i.visitAnimateRef(e,t);case B.Query:return i.visitQuery(e,t);case B.Stagger:return i.visitStagger(e,t);default:throw Eh(e.type)}}function ga(i,e){return window.getComputedStyle(i)[e]}var fr=(()=>{class i{validateStyleProperty(t){return Ql(t)}containsElement(t,n){return js(t,n)}getParentElement(t){return ma(t)}query(t,n,a){return Us(t,n,a)}computeStyle(t,n,a){return a||""}animate(t,n,a,s,r,o=[],d){return new bt(a,s)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ge({token:i,factory:i.\u0275fac})}return i})(),di=class{static NOOP=new fr},mi=class{};var Nh=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ya=class extends mi{normalizePropertyName(e,t){return pa(e)}normalizeStyleValue(e,t,n,a){let s="",r=n.toString().trim();if(Nh.has(t)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&o[1].length==0&&a.push(Cl(e,n))}return r+s}};var ba="*";function Hh(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>Bh(n,t,e)):t.push(i),t}function Bh(i,e,t){if(i[0]==":"){let d=Gh(i,t);if(typeof d=="function"){e.push(d);return}i=d}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Rl(i)),e;let a=n[1],s=n[2],r=n[3];e.push(tc(a,r));let o=a==ba&&r==ba;s[0]=="<"&&!o&&e.push(tc(r,a))}function Gh(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(Nl(i)),"* => *"}}var fa=new Set(["true","1"]),xa=new Set(["false","0"]);function tc(i,e){let t=fa.has(i)||xa.has(i),n=fa.has(e)||xa.has(e);return(a,s)=>{let r=i==ba||i==a,o=e==ba||e==s;return!r&&t&&typeof a=="boolean"&&(r=a?fa.has(i):xa.has(i)),!o&&n&&typeof s=="boolean"&&(o=s?fa.has(e):xa.has(e)),r&&o}}var mc=":self",$h=new RegExp(`s*${mc}s*,?`,"g");function hc(i,e,t,n){return new sr(i).build(e,t,n)}var ic="",sr=class{_driver;constructor(e){this._driver=e}build(e,t,n){let a=new rr(t);return this._resetContextStyleTimingState(a),ze(this,$i(e),a)}_resetContextStyleTimingState(e){e.currentQuerySelector=ic,e.collectedStyles=new Map,e.collectedStyles.set(ic,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,a=t.depCount=0,s=[],r=[];return e.name.charAt(0)=="@"&&t.errors.push(kl()),e.definitions.forEach(o=>{if(this._resetContextStyleTimingState(t),o.type==B.State){let d=o,m=d.name;m.toString().split(/\s*,\s*/).forEach(p=>{d.name=p,s.push(this.visitState(d,t))}),d.name=m}else if(o.type==B.Transition){let d=this.visitTransition(o,t);n+=d.queryCount,a+=d.depCount,r.push(d)}else t.errors.push(Al())}),{type:B.Trigger,name:e.name,states:s,transitions:r,queryCount:n,depCount:a,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),a=e.options&&e.options.params||null;if(n.containsDynamicStyles){let s=new Set,r=a||{};n.styles.forEach(o=>{o instanceof Map&&o.forEach(d=>{Js(d).forEach(m=>{r.hasOwnProperty(m)||s.add(m)})})}),s.size&&t.errors.push(El(e.name,[...s.values()]))}return{type:B.State,name:e.name,style:n,options:a?{params:a}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=ze(this,$i(e.animation),t),a=Hh(e.expr,t.errors);return{type:B.Transition,matchers:a,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:ci(e.options)}}visitSequence(e,t){return{type:B.Sequence,steps:e.steps.map(n=>ze(this,n,t)),options:ci(e.options)}}visitGroup(e,t){let n=t.currentTime,a=0,s=e.steps.map(r=>{t.currentTime=n;let o=ze(this,r,t);return a=Math.max(a,t.currentTime),o});return t.currentTime=a,{type:B.Group,steps:s,options:ci(e.options)}}visitAnimate(e,t){let n=Yh(e.timings,t.errors);t.currentAnimateTimings=n;let a,s=e.styles?e.styles:oi({});if(s.type==B.Keyframes)a=this.visitKeyframes(s,t);else{let r=e.styles,o=!1;if(!r){o=!0;let m={};n.easing&&(m.easing=n.easing),r=oi(m)}t.currentTime+=n.duration+n.delay;let d=this.visitStyle(r,t);d.isEmptyStep=o,a=d}return t.currentAnimateTimings=null,{type:B.Animate,timings:n,style:a,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],a=Array.isArray(e.styles)?e.styles:[e.styles];for(let o of a)typeof o=="string"?o===nt?n.push(o):t.errors.push(Ll(o)):n.push(new Map(Object.entries(o)));let s=!1,r=null;return n.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(r=o.get("easing"),o.delete("easing")),!s)){for(let d of o.values())if(d.toString().indexOf(Qs)>=0){s=!0;break}}}),{type:B.Style,styles:n,easing:r,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,a=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(r=>{typeof r!="string"&&r.forEach((o,d)=>{let m=t.collectedStyles.get(t.currentQuerySelector),p=m.get(d),g=!0;p&&(s!=a&&s>=p.startTime&&a<=p.endTime&&(t.errors.push(Dl(d,p.startTime,p.endTime,s,a)),g=!1),s=p.startTime),g&&m.set(d,{startTime:s,endTime:a}),t.options&&Kl(o,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:B.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Fl()),n;let a=1,s=0,r=[],o=!1,d=!1,m=0,p=e.steps.map($=>{let ee=this._makeStyleAst($,t),te=ee.offset!=null?ee.offset:Wh(ee.styles),le=0;return te!=null&&(s++,le=ee.offset=te),d=d||le<0||le>1,o=o||le<m,m=le,r.push(le),ee});d&&t.errors.push(Ml()),o&&t.errors.push(Ol());let g=e.steps.length,_=0;s>0&&s<g?t.errors.push(Vl()):s==0&&(_=a/(g-1));let b=g-1,v=t.currentTime,T=t.currentAnimateTimings,O=T.duration;return p.forEach(($,ee)=>{let te=_>0?ee==b?1:_*ee:r[ee],le=te*O;t.currentTime=v+T.delay+le,T.duration=le,this._validateStyleAst($,t),$.offset=te,n.styles.push($)}),n}visitReference(e,t){return{type:B.Reference,animation:ze(this,$i(e.animation),t),options:ci(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:B.AnimateChild,options:ci(e.options)}}visitAnimateRef(e,t){return{type:B.AnimateRef,animation:this.visitReference(e.animation,t),options:ci(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,a=e.options||{};t.queryCount++,t.currentQuery=e;let[s,r]=zh(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,$e(t.collectedStyles,t.currentQuerySelector,new Map);let o=ze(this,$i(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:B.Query,selector:s,limit:a.limit||0,optional:!!a.optional,includeSelf:r,animation:o,originalSelector:e.selector,options:ci(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Il());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:hn(e.timings,t.errors,!0);return{type:B.Stagger,animation:ze(this,$i(e.animation),t),timings:n,options:null}}};function zh(i){let e=!!i.split(/\s*,\s*/).find(t=>t==mc);return e&&(i=i.replace($h,"")),i=i.replace(/@\*/g,mn).replace(/@\w+/g,t=>mn+"-"+t.slice(1)).replace(/:animating/g,ua),[i,e]}function Xh(i){return i?Z({},i):null}var rr=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Wh(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Yh(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=hn(i,e).duration;return er(s,0,"")}let t=i;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=er(0,0,"");return s.dynamic=!0,s.strValue=t,s}let a=hn(t,e);return er(a.duration,a.delay,a.easing)}function ci(i){return i?(i=Z({},i),i.params&&(i.params=Xh(i.params))):i={},i}function er(i,e,t){return{duration:i,delay:e,easing:t}}function xr(i,e,t,n,a,s,r=null,o=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:a,delay:s,totalTime:a+s,easing:r,subTimeline:o}}var pn=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},qh=1,jh=":enter",Uh=new RegExp(jh,"g"),Qh=":leave",Zh=new RegExp(Qh,"g");function uc(i,e,t,n,a,s=new Map,r=new Map,o,d,m=[]){return new or().buildKeyframes(i,e,t,n,a,s,r,o,d,m)}var or=class{buildKeyframes(e,t,n,a,s,r,o,d,m,p=[]){m=m||new pn;let g=new lr(e,t,m,a,s,p,[]);g.options=d;let _=d.delay?wt(d.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([r],null,g.errors,d),ze(this,n,g);let b=g.timelines.filter(v=>v.containsAnimation());if(b.length&&o.size){let v;for(let T=b.length-1;T>=0;T--){let O=b[T];if(O.element===t){v=O;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([o],null,g.errors,d)}return b.length?b.map(v=>v.buildKeyframes()):[xr(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let a=t.createSubContext(e.options),s=t.currentTimeline.currentTime,r=this._visitSubInstructions(n,a,a.options);s!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let a of e){let s=a?.delay;if(s){let r=typeof s=="number"?s:wt(zi(s,a?.params??{},t.errors));n.delayNextStep(r)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime,r=n.duration!=null?wt(n.duration):null,o=n.delay!=null?wt(n.delay):null;return r!==0&&e.forEach(d=>{let m=t.appendInstructionToTimeline(d,r,o);s=Math.max(s,m.duration+m.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ze(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,a=t,s=e.options;if(s&&(s.params||s.delay)&&(a=t.createSubContext(s),a.transformIntoNewTimeline(),s.delay!=null)){a.previousNode.type==B.Style&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=wa);let r=wt(s.delay);a.delayNextStep(r)}e.steps.length&&(e.steps.forEach(r=>ze(this,r,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>n&&a.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],a=t.currentTimeline.currentTime,s=e.options&&e.options.delay?wt(e.options.delay):0;e.steps.forEach(r=>{let o=t.createSubContext(e.options);s&&o.delayNextStep(s),ze(this,r,o),a=Math.max(a,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(r=>t.currentTimeline.mergeTimelineCollectedStyles(r)),t.transformIntoNewTimeline(a),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,a=t.params?zi(n,t.params,t.errors):n;return hn(a,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),a=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),a.snapshotCurrentStyles());let s=e.style;s.type==B.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),a.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,a=t.currentAnimateTimings;!a&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=a&&a.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,a=t.currentTimeline.duration,s=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(d=>{let m=d.offset||0;o.forwardTime(m*s),o.setStyles(d.styles,d.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(a+s),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,a=e.options||{},s=a.delay?wt(a.delay):0;s&&(t.previousNode.type===B.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=wa);let r=n,o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!a.optional,t.errors);t.currentQueryTotal=o.length;let d=null;o.forEach((m,p)=>{t.currentQueryIndex=p;let g=t.createSubContext(e.options,m);s&&g.delayNextStep(s),m===t.element&&(d=g.currentTimeline),ze(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe();let _=g.currentTimeline.currentTime;r=Math.max(r,_)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(r),d&&(t.currentTimeline.mergeTimelineCollectedStyles(d),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,a=t.currentTimeline,s=e.timings,r=Math.abs(s.duration),o=r*(t.currentQueryTotal-1),d=r*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=o-d;break;case"full":d=n.currentStaggerTime;break}let p=t.currentTimeline;d&&p.delayNextStep(d);let g=p.currentTime;ze(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=a.currentTime-g+(a.startTime-n.currentTimeline.startTime)}},wa={},lr=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=wa;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,a,s,r,o,d){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=a,this._leaveClassName=s,this.errors=r,this.timelines=o,this.currentTimeline=d||new Ta(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,a=this.options;n.duration!=null&&(a.duration=wt(n.duration)),n.delay!=null&&(a.delay=wt(n.delay));let s=n.params;if(s){let r=a.params;r||(r=this.options.params={}),Object.keys(s).forEach(o=>{(!t||!r.hasOwnProperty(o))&&(r[o]=zi(s[o],r,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(a=>{n[a]=t[a]})}}return e}createSubContext(e=null,t,n){let a=t||this.element,s=new i(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=wa,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let a={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new cr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,a,e.stretchStartingKeyframe);return this.timelines.push(s),a}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,a,s,r){let o=[];if(a&&o.push(this.element),e.length>0){e=e.replace(Uh,"."+this._enterClassName),e=e.replace(Zh,"."+this._leaveClassName);let d=n!=1,m=this._driver.query(this.element,e,d);n!==0&&(m=n<0?m.slice(m.length+n,m.length):m.slice(0,n)),o.push(...m)}return!s&&o.length==0&&r.push(Pl(t)),o}},Ta=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,a){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=a,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=qh,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||nt),this._currentKeyframe.set(t,nt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,a){t&&this._previousKeyframe.set("easing",t);let s=a&&a.params||{},r=Kh(e,this._globalTimelineStyles);for(let[o,d]of r){let m=zi(d,s,n);this._pendingStyles.set(o,m),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??nt),this._updateStyle(o,m)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let a=this._styleSummary.get(n);(!a||t.time>a.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,a=[];this._keyframes.forEach((o,d)=>{let m=new Map([...this._backFill,...o]);m.forEach((p,g)=>{p===Gi?e.add(g):p===nt&&t.add(g)}),n||m.set("offset",d/this.duration),a.push(m)});let s=[...e.values()],r=[...t.values()];if(n){let o=a[0],d=new Map(o);o.set("offset",0),d.set("offset",1),a=[o,d]}return xr(this.element,a,s,r,this.duration,this.startTime,this.easing,!1)}},cr=class extends Ta{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,a,s,r,o=!1){super(e,t,r.delay),this.keyframes=n,this.preStyleProps=a,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:a}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],r=n+t,o=t/r,d=new Map(e[0]);d.set("offset",0),s.push(d);let m=new Map(e[0]);m.set("offset",nc(o)),s.push(m);let p=e.length-1;for(let g=1;g<=p;g++){let _=new Map(e[g]),b=_.get("offset"),v=t+b*n;_.set("offset",nc(v/r)),s.push(_)}n=r,t=0,a="",e=s}return xr(this.element,e,this.preStyleProps,this.postStyleProps,n,t,a,!0)}};function nc(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function Kh(i,e){let t=new Map,n;return i.forEach(a=>{if(a==="*"){n??=e.keys();for(let s of n)t.set(s,nt)}else for(let[s,r]of a)t.set(s,r)}),t}function ac(i,e,t,n,a,s,r,o,d,m,p,g,_){return{type:0,element:i,triggerName:e,isRemovalTransition:a,fromState:t,fromStyles:s,toState:n,toStyles:r,timelines:o,queriedElements:d,preStyleProps:m,postStyleProps:p,totalTime:g,errors:_}}var tr={},Sa=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,a){return Jh(this.ast.matchers,e,t,n,a)}buildStyles(e,t,n){let a=this._stateStyles.get("*");return e!==void 0&&(a=this._stateStyles.get(e?.toString())||a),a?a.buildStyles(t,n):new Map}build(e,t,n,a,s,r,o,d,m,p){let g=[],_=this.ast.options&&this.ast.options.params||tr,b=o&&o.params||tr,v=this.buildStyles(n,b,g),T=d&&d.params||tr,O=this.buildStyles(a,T,g),$=new Set,ee=new Map,te=new Map,le=a==="void",he={params:pc(T,_),delay:this.ast.options?.delay},Ze=p?[]:uc(e,t,this.ast.animation,s,r,v,O,he,m,g),Se=0;return Ze.forEach(Ce=>{Se=Math.max(Ce.duration+Ce.delay,Se)}),g.length?ac(t,this._triggerName,n,a,le,v,O,[],[],ee,te,Se,g):(Ze.forEach(Ce=>{let kt=Ce.element,At=$e(ee,kt,new Set);Ce.preStyleProps.forEach(Pe=>At.add(Pe));let j=$e(te,kt,new Set);Ce.postStyleProps.forEach(Pe=>j.add(Pe)),kt!==t&&$.add(kt)}),ac(t,this._triggerName,n,a,le,v,O,Ze,[...$.values()],ee,te,Se))}};function Jh(i,e,t,n,a){return i.some(s=>s(e,t,n,a))}function pc(i,e){let t=Z({},e);return Object.entries(i).forEach(([n,a])=>{a!=null&&(t[n]=a)}),t}var dr=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,a=pc(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((r,o)=>{r&&(r=zi(r,a,t));let d=this.normalizer.normalizePropertyName(o,t);r=this.normalizer.normalizeStyleValue(o,d,r,t),n.set(o,r)})}),n}};function eu(i,e,t){return new mr(i,e,t)}var mr=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(a=>{let s=a.options&&a.options.params||{};this.states.set(a.name,new dr(a.style,s,n))}),sc(this.states,"true","1"),sc(this.states,"false","0"),t.transitions.forEach(a=>{this.transitionFactories.push(new Sa(e,a,this.states))}),this.fallbackTransition=tu(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,a){return this.transitionFactories.find(r=>r.match(e,t,n,a))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function tu(i,e,t){let n=[(r,o)=>!0],a={type:B.Sequence,steps:[],options:null},s={type:B.Transition,animation:a,matchers:n,options:null,queryCount:0,depCount:0};return new Sa(i,s,e)}function sc(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var iu=new pn,hr=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],a=[],s=hc(this._driver,t,n,a);if(n.length)throw Bl(n);this._animations.set(e,s)}_buildPlayer(e,t,n){let a=e.element,s=Ys(this._normalizer,e.keyframes,t,n);return this._driver.animate(a,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let a=[],s=this._animations.get(e),r,o=new Map;if(s?(r=uc(this._driver,t,s,Zs,ha,new Map,new Map,n,iu,a),r.forEach(p=>{let g=$e(o,p.element,new Map);p.postStyleProps.forEach(_=>g.set(_,null))})):(a.push(Gl()),r=[]),a.length)throw $l(a);o.forEach((p,g)=>{p.forEach((_,b)=>{p.set(b,this._driver.computeStyle(g,b,nt))})});let d=r.map(p=>{let g=o.get(p.element);return this._buildPlayer(p,new Map,g)}),m=Ot(d);return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw zl(e);return t}listen(e,t,n,a){let s=da(t,"","","");return ca(this._getPlayer(e),n,s,a),()=>{}}command(e,t,n,a){if(n=="register"){this.register(e,a[0]);return}if(n=="create"){let r=a[0]||{};this.create(e,t,r);return}let s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(e);break}}},rc="ng-animate-queued",nu=".ng-animate-queued",ir="ng-animate-disabled",au=".ng-animate-disabled",su="ng-star-inserted",ru=".ng-star-inserted",ou=[],gc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lu={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ot="__ng_removed",gn=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),a=n?e.value:e;if(this.value=du(a),n){let s=e,{value:r}=s,o=lo(s,["value"]);this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(a=>{n[a]==null&&(n[a]=t[a])})}}},un="void",nr=new gn(un),ur=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,at(t,this._hostClassName)}listen(e,t,n,a){if(!this._triggers.has(t))throw Xl(n,t);if(n==null||n.length==0)throw Wl(t);if(!mu(n))throw Yl(n,t);let s=$e(this._elementListeners,e,[]),r={name:t,phase:n,callback:a};s.push(r);let o=$e(this._engine.statesByElement,e,new Map);return o.has(t)||(at(e,dn),at(e,dn+"-"+t),o.set(t,nr)),()=>{this._engine.afterFlush(()=>{let d=s.indexOf(r);d>=0&&s.splice(d,1),this._triggers.has(t)||o.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw ql(e);return t}trigger(e,t,n,a=!0){let s=this._getTrigger(t),r=new fn(this.id,t,e),o=this._engine.statesByElement.get(e);o||(at(e,dn),at(e,dn+"-"+t),this._engine.statesByElement.set(e,o=new Map));let d=o.get(t),m=new gn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&d&&m.absorbOptions(d.options),o.set(t,m),d||(d=nr),!(m.value===un)&&d.value===m.value){if(!pu(d.params,m.params)){let T=[],O=s.matchStyles(d.value,d.params,T),$=s.matchStyles(m.value,m.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Wt(e,O),rt(e,$)})}return}let _=$e(this._engine.playersByElement,e,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let b=s.matchTransition(d.value,m.value,e,m.params),v=!1;if(!b){if(!a)return;b=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:d,toState:m,player:r,isFallbackTransition:v}),v||(at(e,rc),r.onStart(()=>{Xi(e,rc)})),r.onDone(()=>{let T=this.players.indexOf(r);T>=0&&this.players.splice(T,1);let O=this._engine.playersByElement.get(e);if(O){let $=O.indexOf(r);$>=0&&O.splice($,1)}}),this.players.push(r),_.push(r),r}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(a=>a.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,mn,!0);n.forEach(a=>{if(a[ot])return;let s=this._engine.fetchNamespacesByElement(a);s.size?s.forEach(r=>r.triggerLeaveAnimation(a,t,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(e,t,n,a){let s=this._engine.statesByElement.get(e),r=new Map;if(s){let o=[];if(s.forEach((d,m)=>{if(r.set(m,d.value),this._triggers.has(m)){let p=this.trigger(e,m,un,a);p&&o.push(p)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,r),n&&Ot(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let a=new Set;t.forEach(s=>{let r=s.name;if(a.has(r))return;a.add(r);let d=this._triggers.get(r).fallbackTransition,m=n.get(r)||nr,p=new gn(un),g=new fn(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:d,fromState:m,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let a=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)a=!0;else{let r=e;for(;r=r.parentNode;)if(n.statesByElement.get(r)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(e),a)n.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ot];(!s||s===gc)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){at(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let a=n.player;if(a.destroyed)return;let s=n.element,r=this._elementListeners.get(s);r&&r.forEach(o=>{if(o.name==n.triggerName){let d=da(s,n.triggerName,n.fromState.value,n.toState.value);d._data=e,ca(n.player,o.phase,d,o.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):t.push(n)}),this._queue=[],t.sort((n,a)=>{let s=n.transition.ast.depCount,r=a.transition.ast.depCount;return s==0||r==0?s-r:this._engine.driver.containsElement(n.element,a.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},pr=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new ur(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,a=this.namespacesByHostElement;if(n.length-1>=0){let r=!1,o=this.driver.getParentElement(t);for(;o;){let d=a.get(o);if(d){let m=n.indexOf(d);n.splice(m+1,0,e),r=!0;break}o=this.driver.getParentElement(o)}r||n.unshift(e)}else n.push(e);return a.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let a=this._namespaceLookup[e];a&&a.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let a=this._namespaceList.indexOf(n);a>=0&&this._namespaceList.splice(a,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let a of n.values())if(a.namespaceId){let s=this._fetchNamespace(a.namespaceId);s&&t.add(s)}}return t}trigger(e,t,n,a){if(_a(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,n,a),!0}return!1}insertNode(e,t,n,a){if(!_a(t))return;let s=t[ot];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let r=this.collectedLeaveElements.indexOf(t);r>=0&&this.collectedLeaveElements.splice(r,1)}if(e){let r=this._fetchNamespace(e);r&&r.insertNode(t,n)}a&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),at(e,ir)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xi(e,ir))}removeNode(e,t,n){if(_a(t)){let a=e?this._fetchNamespace(e):null;a?a.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,a,s){this.collectedLeaveElements.push(t),t[ot]={namespaceId:e,setForRemoval:a,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,a,s){return _a(t)?this._fetchNamespace(e).listen(t,n,a,s):()=>{}}_buildInstruction(e,t,n,a,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,a,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,mn,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,ua,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ot(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ot];if(t&&t.setForRemoval){if(e[ot]=gc,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ir)&&this.markElementAsDisabled(e,!1),this.driver.query(e,au,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,a)=>this._balanceNamespaceList(n,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let a=this.collectedEnterElements[n];at(a,su)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let a=0;a<n.length;a++)n[a]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let a=this.collectedLeaveElements[n];this.processLeaveNode(a)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?Ot(t).onDone(()=>{n.forEach(a=>a())}):n.forEach(a=>a())}}reportError(e){throw jl(e)}_flushAnimations(e,t){let n=new pn,a=[],s=new Map,r=[],o=new Map,d=new Map,m=new Map,p=new Set;this.disabledNodes.forEach(L=>{p.add(L);let M=this.driver.query(L,nu,!0);for(let V=0;V<M.length;V++)p.add(M[V])});let g=this.bodyNode,_=Array.from(this.statesByElement.keys()),b=cc(_,this.collectedEnterElements),v=new Map,T=0;b.forEach((L,M)=>{let V=Zs+T++;v.set(M,V),L.forEach(H=>at(H,V))});let O=[],$=new Set,ee=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){let M=this.collectedLeaveElements[L],V=M[ot];V&&V.setForRemoval&&(O.push(M),$.add(M),V.hasAnimation?this.driver.query(M,ru,!0).forEach(H=>$.add(H)):ee.add(M))}let te=new Map,le=cc(_,Array.from($));le.forEach((L,M)=>{let V=ha+T++;te.set(M,V),L.forEach(H=>at(H,V))}),e.push(()=>{b.forEach((L,M)=>{let V=v.get(M);L.forEach(H=>Xi(H,V))}),le.forEach((L,M)=>{let V=te.get(M);L.forEach(H=>Xi(H,V))}),O.forEach(L=>{this.processLeaveNode(L)})});let he=[],Ze=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(V=>{let H=V.player,_e=V.element;if(he.push(H),this.collectedEnterElements.length){let Fe=_e[ot];if(Fe&&Fe.setForMove){if(Fe.previousTriggersValues&&Fe.previousTriggersValues.has(V.triggerName)){let ei=Fe.previousTriggersValues.get(V.triggerName),Ke=this.statesByElement.get(V.element);if(Ke&&Ke.has(V.triggerName)){let Bn=Ke.get(V.triggerName);Bn.value=ei,Ke.set(V.triggerName,Bn)}}H.destroy();return}}let dt=!g||!this.driver.containsElement(g,_e),We=te.get(_e),Nt=v.get(_e),ce=this._buildInstruction(V,n,Nt,We,dt);if(ce.errors&&ce.errors.length){Ze.push(ce);return}if(dt){H.onStart(()=>Wt(_e,ce.fromStyles)),H.onDestroy(()=>rt(_e,ce.toStyles)),a.push(H);return}if(V.isFallbackTransition){H.onStart(()=>Wt(_e,ce.fromStyles)),H.onDestroy(()=>rt(_e,ce.toStyles)),a.push(H);return}let oo=[];ce.timelines.forEach(Fe=>{Fe.stretchStartingKeyframe=!0,this.disabledNodes.has(Fe.element)||oo.push(Fe)}),ce.timelines=oo,n.append(_e,ce.timelines);let Zm={instruction:ce,player:H,element:_e};r.push(Zm),ce.queriedElements.forEach(Fe=>$e(o,Fe,[]).push(H)),ce.preStyleProps.forEach((Fe,ei)=>{if(Fe.size){let Ke=d.get(ei);Ke||d.set(ei,Ke=new Set),Fe.forEach((Bn,Ds)=>Ke.add(Ds))}}),ce.postStyleProps.forEach((Fe,ei)=>{let Ke=m.get(ei);Ke||m.set(ei,Ke=new Set),Fe.forEach((Bn,Ds)=>Ke.add(Ds))})});if(Ze.length){let L=[];Ze.forEach(M=>{L.push(Ul(M.triggerName,M.errors))}),he.forEach(M=>M.destroy()),this.reportError(L)}let Se=new Map,Ce=new Map;r.forEach(L=>{let M=L.element;n.has(M)&&(Ce.set(M,M),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,Se))}),a.forEach(L=>{let M=L.element;this._getPreviousPlayers(M,!1,L.namespaceId,L.triggerName,null).forEach(H=>{$e(Se,M,[]).push(H),H.destroy()})});let kt=O.filter(L=>dc(L,d,m)),At=new Map;lc(At,this.driver,ee,m,nt).forEach(L=>{dc(L,d,m)&&kt.push(L)});let Pe=new Map;b.forEach((L,M)=>{lc(Pe,this.driver,new Set(L),d,Gi)}),kt.forEach(L=>{let M=At.get(L),V=Pe.get(L);At.set(L,new Map([...M?.entries()??[],...V?.entries()??[]]))});let De=[],Et=[],an={};r.forEach(L=>{let{element:M,player:V,instruction:H}=L;if(n.has(M)){if(p.has(M)){V.onDestroy(()=>rt(M,H.toStyles)),V.disabled=!0,V.overrideTotalTime(H.totalTime),a.push(V);return}let _e=an;if(Ce.size>1){let We=M,Nt=[];for(;We=We.parentNode;){let ce=Ce.get(We);if(ce){_e=ce;break}Nt.push(We)}Nt.forEach(ce=>Ce.set(ce,_e))}let dt=this._buildAnimation(V.namespaceId,H,Se,s,Pe,At);if(V.setRealPlayer(dt),_e===an)De.push(V);else{let We=this.playersByElement.get(_e);We&&We.length&&(V.parentPlayer=Ot(We)),a.push(V)}}else Wt(M,H.fromStyles),V.onDestroy(()=>rt(M,H.toStyles)),Et.push(V),p.has(M)&&a.push(V)}),Et.forEach(L=>{let M=s.get(L.element);if(M&&M.length){let V=Ot(M);L.setRealPlayer(V)}}),a.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<O.length;L++){let M=O[L],V=M[ot];if(Xi(M,ha),V&&V.hasAnimation)continue;let H=[];if(o.size){let dt=o.get(M);dt&&dt.length&&H.push(...dt);let We=this.driver.query(M,ua,!0);for(let Nt=0;Nt<We.length;Nt++){let ce=o.get(We[Nt]);ce&&ce.length&&H.push(...ce)}}let _e=H.filter(dt=>!dt.destroyed);_e.length?hu(this,M,_e):this.processLeaveNode(M)}return O.length=0,De.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();let M=this.players.indexOf(L);this.players.splice(M,1)}),L.play()}),De}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,a,s){let r=[];if(t){let o=this.playersByQueriedElement.get(e);o&&(r=o)}else{let o=this.playersByElement.get(e);if(o){let d=!s||s==un;o.forEach(m=>{m.queued||!d&&m.triggerName!=a||r.push(m)})}}return(n||a)&&(r=r.filter(o=>!(n&&n!=o.namespaceId||a&&a!=o.triggerName))),r}_beforeAnimationBuild(e,t,n){let a=t.triggerName,s=t.element,r=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:a;for(let d of t.timelines){let m=d.element,p=m!==s,g=$e(n,m,[]);this._getPreviousPlayers(m,p,r,o,t.toState).forEach(b=>{let v=b.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),b.destroy(),g.push(b)})}Wt(s,t.fromStyles)}_buildAnimation(e,t,n,a,s,r){let o=t.triggerName,d=t.element,m=[],p=new Set,g=new Set,_=t.timelines.map(v=>{let T=v.element;p.add(T);let O=T[ot];if(O&&O.removedBeforeQueried)return new bt(v.duration,v.delay);let $=T!==d,ee=uu((n.get(T)||ou).map(Se=>Se.getRealPlayer())).filter(Se=>{let Ce=Se;return Ce.element?Ce.element===T:!1}),te=s.get(T),le=r.get(T),he=Ys(this._normalizer,v.keyframes,te,le),Ze=this._buildPlayer(v,he,ee);if(v.subTimeline&&a&&g.add(T),$){let Se=new fn(e,o,T);Se.setRealPlayer(Ze),m.push(Se)}return Ze});m.forEach(v=>{$e(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>cu(this.playersByQueriedElement,v.element,v))}),p.forEach(v=>at(v,Ks));let b=Ot(_);return b.onDestroy(()=>{p.forEach(v=>Xi(v,Ks)),rt(d,t.toStyles)}),g.forEach(v=>{$e(a,v,[]).push(b)}),b}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new bt(e.duration,e.delay)}},fn=class{namespaceId;triggerName;element;_player=new bt;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(a=>ca(e,n,void 0,a))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$e(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function cu(i,e,t){let n=i.get(e);if(n){if(n.length){let a=n.indexOf(t);n.splice(a,1)}n.length==0&&i.delete(e)}return n}function du(i){return i??null}function _a(i){return i&&i.nodeType===1}function mu(i){return i=="start"||i=="done"}function oc(i,e){let t=i.style.display;return i.style.display=e??"none",t}function lc(i,e,t,n,a){let s=[];t.forEach(d=>s.push(oc(d)));let r=[];n.forEach((d,m)=>{let p=new Map;d.forEach(g=>{let _=e.computeStyle(m,g,a);p.set(g,_),(!_||_.length==0)&&(m[ot]=lu,r.push(m))}),i.set(m,p)});let o=0;return t.forEach(d=>oc(d,s[o++])),r}function cc(i,e){let t=new Map;if(i.forEach(o=>t.set(o,[])),e.length==0)return t;let n=1,a=new Set(e),s=new Map;function r(o){if(!o)return n;let d=s.get(o);if(d)return d;let m=o.parentNode;return t.has(m)?d=m:a.has(m)?d=n:d=r(m),s.set(o,d),d}return e.forEach(o=>{let d=r(o);d!==n&&t.get(d).push(o)}),t}function at(i,e){i.classList?.add(e)}function Xi(i,e){i.classList?.remove(e)}function hu(i,e,t){Ot(t).onDone(()=>i.processLeaveNode(e))}function uu(i){let e=[];return fc(i,e),e}function fc(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof ri?fc(n.players,e):e.push(n)}}function pu(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let a=0;a<t.length;a++){let s=t[a];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}function dc(i,e,t){let n=t.get(i);if(!n)return!1;let a=e.get(i);return a?n.forEach(s=>a.add(s)):e.set(i,n),t.delete(i),!0}var Wi=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new pr(e.body,t,n),this._timelineEngine=new hr(e.body,t,n),this._transitionEngine.onRemovalComplete=(a,s)=>this.onRemovalComplete(a,s)}registerTrigger(e,t,n,a,s){let r=e+"-"+a,o=this._triggerCache[r];if(!o){let d=[],m=[],p=hc(this._driver,s,d,m);if(d.length)throw Hl(a,d);o=eu(a,p,this._normalizer),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(t,a,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,a){this._transitionEngine.insertNode(e,t,n,a)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,a){if(n.charAt(0)=="@"){let[s,r]=qs(n),o=a;this._timelineEngine.command(s,t,r,o)}else this._transitionEngine.trigger(e,t,n,a)}listen(e,t,n,a,s){if(n.charAt(0)=="@"){let[r,o]=qs(n);return this._timelineEngine.listen(r,t,o,s)}return this._transitionEngine.listen(e,t,n,a,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function gu(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=ar(e[0]),e.length>1&&(n=ar(e[e.length-1]))):e instanceof Map&&(t=ar(e)),t||n?new fu(i,t,n):null}var fu=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,a){this._element=t,this._startStyles=n,this._endStyles=a;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&rt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rt(this._element,this._initialStyles),this._endStyles&&(rt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Wt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wt(this._element,this._endStyles),this._endStyles=null),rt(this._element,this._initialStyles),this._state=3)}}return i})();function ar(i){let e=null;return i.forEach((t,n)=>{xu(n)&&(e=e||new Map,e.set(n,t))}),e}function xu(i){return i==="display"||i==="position"}var Ca=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,a){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=a,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,a)=>{a!=="offset"&&e.set(a,this._finished?n:ga(this.element,a))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},ka=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return js(e,t)}getParentElement(e){return ma(e)}query(e,t,n){return Us(e,t,n)}computeStyle(e,t,n){return ga(e,t)}animate(e,t,n,a,s,r=[]){let o=a==0?"both":"forwards",d={duration:n,delay:a,fill:o};s&&(d.easing=s);let m=new Map,p=r.filter(b=>b instanceof Ca);Jl(n,a)&&p.forEach(b=>{b.currentSnapshot.forEach((v,T)=>m.set(T,v))});let g=Zl(t).map(b=>new Map(b));g=ec(e,g,m);let _=gu(e,g);return new Ca(e,g,d,_)}};var va="@",xc="@.disabled",Aa=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,a){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=a}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,a=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,a)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,a){this.delegate.setAttribute(e,t,n,a)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,a){this.delegate.setStyle(e,t,n,a)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==va&&t==xc?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,a){return this.delegate.listen(e,t,n,a)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},gr=class extends Aa{factory;constructor(e,t,n,a,s){super(t,n,a,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==va?t.charAt(1)=="."&&t==xc?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,a){if(t.charAt(0)==va){let s=_u(e),r=t.slice(1),o="";return r.charAt(0)!=va&&([r,o]=vu(r)),this.engine.listen(this.namespaceId,s,r,o,d=>{let m=d._data||-1;this.factory.scheduleListenerCallback(m,n,d)})}return this.delegate.listen(e,t,n,a)}};function _u(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function vu(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var Ea=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(a,s)=>{s?.removeChild(null,a)}}createRenderer(e,t){let a=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let m=this._rendererCache,p=m.get(a);if(!p){let g=()=>m.delete(a);p=new Aa("",a,this.engine,g),m.set(a,p)}return p}let s=t.id,r=t.id+"-"+this._currentId;this._currentId++,this.engine.register(r,e);let o=m=>{Array.isArray(m)?m.forEach(o):this.engine.registerTrigger(s,r,e,m.name,m)};return t.data.animation.forEach(o),new gr(this,r,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let a=this._animationCallbacksBuffer;a.length==0&&queueMicrotask(()=>{this._zone.run(()=>{a.forEach(s=>{let[r,o]=s;r(o)}),this._animationCallbacksBuffer=[]})}),a.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var bu=(()=>{class i extends Wi{constructor(t,n,a){super(t,n,a)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(de(xo),de(di),de(mi))};static \u0275prov=ge({token:i,factory:i.\u0275fac})}return i})();function wu(){return new ya}function Tu(i,e,t){return new Ea(i,e,t)}var _c=[{provide:mi,useFactory:wu},{provide:Wi,useClass:bu},{provide:To,useFactory:Tu,deps:[Xo,Wi,ii]}],Gv=[{provide:di,useClass:fr},{provide:Fs,useValue:"NoopAnimations"},..._c],Su=[{provide:di,useFactory:()=>new ka},{provide:Fs,useFactory:()=>"BrowserAnimations"},..._c];function vc(){return Co("NgEagerAnimations"),[...Su]}var La=(i,e)=>{let t=G(Te),n=G(Mt),a=G(xt),s=G(Bi),r=n.getToken(),o=i.data.roles;return r?n.isTokenExpired(r)?bi(Cu(n,t)).pipe(wi(d=>d?yc(o,t,a):(_r("Session expir\xE9e",a,t,e.url),mt(!1))),pe(()=>(_r("Erreur de validation",a,t,e.url),mt(!1)))):(s.startMonitoring(),yc(o,t,a)):(_r("Aucun token trouv\xE9",a,t,e.url),mt(!1))};function Cu(i,e){return He(this,null,function*(){try{return i.getRefreshToken()?(yield Lt(e.refreshToken()),!0):!1}catch{return!1}})}function yc(i,e,t){if(!i?.length)return mt(!0);let n=e.userRole();return n?i.includes(n)?mt(!0):(console.warn(`Acc\xE8s refus\xE9 - R\xF4le requis: ${i.join(", ")}`),t.navigate(["/unauthorized"]),mt(!1)):(t.navigate(["/unauthorized"]),mt(!1))}function _r(i,e,t,n){console.warn(`Erreur d'authentification: ${i}`),t.logout(),e.navigate(["/login"],{queryParams:{returnUrl:n,error:i}})}var Da="http://www.w3.org/1999/xhtml",vr={svg:"http://www.w3.org/2000/svg",xhtml:Da,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vt(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),vr.hasOwnProperty(e)?{space:vr[e],local:i}:i}function ku(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Da&&e.documentElement.namespaceURI===Da?e.createElement(i):e.createElementNS(t,i)}}function Au(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function Fa(i){var e=Vt(i);return(e.local?Au:ku)(e)}function Eu(){}function hi(i){return i==null?Eu:function(){return this.querySelector(i)}}function bc(i){typeof i!="function"&&(i=hi(i));for(var e=this._groups,t=e.length,n=new Array(t),a=0;a<t;++a)for(var s=e[a],r=s.length,o=n[a]=new Array(r),d,m,p=0;p<r;++p)(d=s[p])&&(m=i.call(d,d.__data__,p,s))&&("__data__"in d&&(m.__data__=d.__data__),o[p]=m);return new ue(n,this._parents)}function yr(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function Lu(){return[]}function xn(i){return i==null?Lu:function(){return this.querySelectorAll(i)}}function Du(i){return function(){return yr(i.apply(this,arguments))}}function wc(i){typeof i=="function"?i=Du(i):i=xn(i);for(var e=this._groups,t=e.length,n=[],a=[],s=0;s<t;++s)for(var r=e[s],o=r.length,d,m=0;m<o;++m)(d=r[m])&&(n.push(i.call(d,d.__data__,m,r)),a.push(d));return new ue(n,a)}function _n(i){return function(){return this.matches(i)}}function Ma(i){return function(e){return e.matches(i)}}var Fu=Array.prototype.find;function Mu(i){return function(){return Fu.call(this.children,i)}}function Ou(){return this.firstElementChild}function Tc(i){return this.select(i==null?Ou:Mu(typeof i=="function"?i:Ma(i)))}var Vu=Array.prototype.filter;function Iu(){return Array.from(this.children)}function Pu(i){return function(){return Vu.call(this.children,i)}}function Sc(i){return this.selectAll(i==null?Iu:Pu(typeof i=="function"?i:Ma(i)))}function Cc(i){typeof i!="function"&&(i=_n(i));for(var e=this._groups,t=e.length,n=new Array(t),a=0;a<t;++a)for(var s=e[a],r=s.length,o=n[a]=[],d,m=0;m<r;++m)(d=s[m])&&i.call(d,d.__data__,m,s)&&o.push(d);return new ue(n,this._parents)}function Oa(i){return new Array(i.length)}function kc(){return new ue(this._enter||this._groups.map(Oa),this._parents)}function vn(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}vn.prototype={constructor:vn,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function Ac(i){return function(){return i}}function Ru(i,e,t,n,a,s){for(var r=0,o,d=e.length,m=s.length;r<m;++r)(o=e[r])?(o.__data__=s[r],n[r]=o):t[r]=new vn(i,s[r]);for(;r<d;++r)(o=e[r])&&(a[r]=o)}function Nu(i,e,t,n,a,s,r){var o,d,m=new Map,p=e.length,g=s.length,_=new Array(p),b;for(o=0;o<p;++o)(d=e[o])&&(_[o]=b=r.call(d,d.__data__,o,e)+"",m.has(b)?a[o]=d:m.set(b,d));for(o=0;o<g;++o)b=r.call(i,s[o],o,s)+"",(d=m.get(b))?(n[o]=d,d.__data__=s[o],m.delete(b)):t[o]=new vn(i,s[o]);for(o=0;o<p;++o)(d=e[o])&&m.get(_[o])===d&&(a[o]=d)}function Hu(i){return i.__data__}function Ec(i,e){if(!arguments.length)return Array.from(this,Hu);var t=e?Nu:Ru,n=this._parents,a=this._groups;typeof i!="function"&&(i=Ac(i));for(var s=a.length,r=new Array(s),o=new Array(s),d=new Array(s),m=0;m<s;++m){var p=n[m],g=a[m],_=g.length,b=Bu(i.call(p,p&&p.__data__,m,n)),v=b.length,T=o[m]=new Array(v),O=r[m]=new Array(v),$=d[m]=new Array(_);t(p,g,T,O,$,b,e);for(var ee=0,te=0,le,he;ee<v;++ee)if(le=T[ee]){for(ee>=te&&(te=ee+1);!(he=O[te])&&++te<v;);le._next=he||null}}return r=new ue(r,n),r._enter=o,r._exit=d,r}function Bu(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Lc(){return new ue(this._exit||this._groups.map(Oa),this._parents)}function Dc(i,e,t){var n=this.enter(),a=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),e!=null&&(a=e(a),a&&(a=a.selection())),t==null?s.remove():t(s),n&&a?n.merge(a).order():a}function Fc(i){for(var e=i.selection?i.selection():i,t=this._groups,n=e._groups,a=t.length,s=n.length,r=Math.min(a,s),o=new Array(a),d=0;d<r;++d)for(var m=t[d],p=n[d],g=m.length,_=o[d]=new Array(g),b,v=0;v<g;++v)(b=m[v]||p[v])&&(_[v]=b);for(;d<a;++d)o[d]=t[d];return new ue(o,this._parents)}function Mc(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var n=i[e],a=n.length-1,s=n[a],r;--a>=0;)(r=n[a])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function Oc(i){i||(i=Gu);function e(g,_){return g&&_?i(g.__data__,_.__data__):!g-!_}for(var t=this._groups,n=t.length,a=new Array(n),s=0;s<n;++s){for(var r=t[s],o=r.length,d=a[s]=new Array(o),m,p=0;p<o;++p)(m=r[p])&&(d[p]=m);d.sort(e)}return new ue(a,this._parents).order()}function Gu(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function Vc(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function Ic(){return Array.from(this)}function Pc(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],a=0,s=n.length;a<s;++a){var r=n[a];if(r)return r}return null}function Rc(){let i=0;for(let e of this)++i;return i}function Nc(){return!this.node()}function Hc(i){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],s=0,r=a.length,o;s<r;++s)(o=a[s])&&i.call(o,o.__data__,s,a);return this}function $u(i){return function(){this.removeAttribute(i)}}function zu(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Xu(i,e){return function(){this.setAttribute(i,e)}}function Wu(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function Yu(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function qu(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function Bc(i,e){var t=Vt(i);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?zu:$u:typeof e=="function"?t.local?qu:Yu:t.local?Wu:Xu)(t,e))}function Va(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function ju(i){return function(){this.style.removeProperty(i)}}function Uu(i,e,t){return function(){this.style.setProperty(i,e,t)}}function Qu(i,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,t)}}function Gc(i,e,t){return arguments.length>1?this.each((e==null?ju:typeof e=="function"?Qu:Uu)(i,e,t??"")):Yt(this.node(),i)}function Yt(i,e){return i.style.getPropertyValue(e)||Va(i).getComputedStyle(i,null).getPropertyValue(e)}function Zu(i){return function(){delete this[i]}}function Ku(i,e){return function(){this[i]=e}}function Ju(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function $c(i,e){return arguments.length>1?this.each((e==null?Zu:typeof e=="function"?Ju:Ku)(i,e)):this.node()[i]}function zc(i){return i.trim().split(/^|\s+/)}function br(i){return i.classList||new Xc(i)}function Xc(i){this._node=i,this._names=zc(i.getAttribute("class")||"")}Xc.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function Wc(i,e){for(var t=br(i),n=-1,a=e.length;++n<a;)t.add(e[n])}function Yc(i,e){for(var t=br(i),n=-1,a=e.length;++n<a;)t.remove(e[n])}function ep(i){return function(){Wc(this,i)}}function tp(i){return function(){Yc(this,i)}}function ip(i,e){return function(){(e.apply(this,arguments)?Wc:Yc)(this,i)}}function qc(i,e){var t=zc(i+"");if(arguments.length<2){for(var n=br(this.node()),a=-1,s=t.length;++a<s;)if(!n.contains(t[a]))return!1;return!0}return this.each((typeof e=="function"?ip:e?ep:tp)(t,e))}function np(){this.textContent=""}function ap(i){return function(){this.textContent=i}}function sp(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function jc(i){return arguments.length?this.each(i==null?np:(typeof i=="function"?sp:ap)(i)):this.node().textContent}function rp(){this.innerHTML=""}function op(i){return function(){this.innerHTML=i}}function lp(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function Uc(i){return arguments.length?this.each(i==null?rp:(typeof i=="function"?lp:op)(i)):this.node().innerHTML}function cp(){this.nextSibling&&this.parentNode.appendChild(this)}function Qc(){return this.each(cp)}function dp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zc(){return this.each(dp)}function Kc(i){var e=typeof i=="function"?i:Fa(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mp(){return null}function Jc(i,e){var t=typeof i=="function"?i:Fa(i),n=e==null?mp:typeof e=="function"?e:hi(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function hp(){var i=this.parentNode;i&&i.removeChild(this)}function ed(){return this.each(hp)}function up(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function pp(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function td(i){return this.select(i?pp:up)}function id(i){return arguments.length?this.property("__data__",i):this.node().__data__}function gp(i){return function(e){i.call(this,e,this.__data__)}}function fp(i){return i.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function xp(i){return function(){var e=this.__on;if(e){for(var t=0,n=-1,a=e.length,s;t<a;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function _p(i,e,t){return function(){var n=this.__on,a,s=gp(e);if(n){for(var r=0,o=n.length;r<o;++r)if((a=n[r]).type===i.type&&a.name===i.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=t),a.value=e;return}}this.addEventListener(i.type,s,t),a={type:i.type,name:i.name,value:e,listener:s,options:t},n?n.push(a):this.__on=[a]}}function nd(i,e,t){var n=fp(i+""),a,s=n.length,r;if(arguments.length<2){var o=this.node().__on;if(o){for(var d=0,m=o.length,p;d<m;++d)for(a=0,p=o[d];a<s;++a)if((r=n[a]).type===p.type&&r.name===p.name)return p.value}return}for(o=e?_p:xp,a=0;a<s;++a)this.each(o(n[a],e,t));return this}function ad(i,e,t){var n=Va(i),a=n.CustomEvent;typeof a=="function"?a=new a(e,t):(a=n.document.createEvent("Event"),t?(a.initEvent(e,t.bubbles,t.cancelable),a.detail=t.detail):a.initEvent(e,!1,!1)),i.dispatchEvent(a)}function vp(i,e){return function(){return ad(this,i,e)}}function yp(i,e){return function(){return ad(this,i,e.apply(this,arguments))}}function sd(i,e){return this.each((typeof e=="function"?yp:vp)(i,e))}function*rd(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],a=0,s=n.length,r;a<s;++a)(r=n[a])&&(yield r)}var wr=[null];function ue(i,e){this._groups=i,this._parents=e}function od(){return new ue([[document.documentElement]],wr)}function bp(){return this}ue.prototype=od.prototype={constructor:ue,select:bc,selectAll:wc,selectChild:Tc,selectChildren:Sc,filter:Cc,data:Ec,enter:kc,exit:Lc,join:Dc,merge:Fc,selection:bp,order:Mc,sort:Oc,call:Vc,nodes:Ic,node:Pc,size:Rc,empty:Nc,each:Hc,attr:Bc,style:Gc,property:$c,classed:qc,text:jc,html:Uc,raise:Qc,lower:Zc,append:Kc,insert:Jc,remove:ed,clone:td,datum:id,on:nd,dispatch:sd,[Symbol.iterator]:rd};var It=od;function yn(i){return typeof i=="string"?new ue([[document.querySelector(i)]],[document.documentElement]):new ue([[i]],wr)}var wp={value:()=>{}};function cd(){for(var i=0,e=arguments.length,t={},n;i<e;++i){if(!(n=arguments[i]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Ia(t)}function Ia(i){this._=i}function Tp(i,e){return i.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");if(a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Ia.prototype=cd.prototype={constructor:Ia,on:function(i,e){var t=this._,n=Tp(i+"",t),a,s=-1,r=n.length;if(arguments.length<2){for(;++s<r;)if((a=(i=n[s]).type)&&(a=Sp(t[a],i.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<r;)if(a=(i=n[s]).type)t[a]=ld(t[a],i.name,e);else if(e==null)for(a in t)t[a]=ld(t[a],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new Ia(i)},call:function(i,e){if((a=arguments.length-2)>0)for(var t=new Array(a),n=0,a,s;n<a;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(s=this._[i],n=0,a=s.length;n<a;++n)s[n].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],a=0,s=n.length;a<s;++a)n[a].value.apply(e,t)}};function Sp(i,e){for(var t=0,n=i.length,a;t<n;++t)if((a=i[t]).name===e)return a.value}function ld(i,e,t){for(var n=0,a=i.length;n<a;++n)if(i[n].name===e){i[n]=wp,i=i.slice(0,n).concat(i.slice(n+1));break}return t!=null&&i.push({name:e,value:t}),i}var Tr=cd;function Pa(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Sr(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function Tn(){}var bn=.7,Ha=1/bn,Yi="\\s*([+-]?\\d+)\\s*",wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cp=/^#([0-9a-f]{3,8})$/,kp=new RegExp(`^rgb\\(${Yi},${Yi},${Yi}\\)$`),Ap=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Ep=new RegExp(`^rgba\\(${Yi},${Yi},${Yi},${wn}\\)$`),Lp=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${wn}\\)$`),Dp=new RegExp(`^hsl\\(${wn},${Tt},${Tt}\\)$`),Fp=new RegExp(`^hsla\\(${wn},${Tt},${Tt},${wn}\\)$`),dd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pa(Tn,ct,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:md,formatHex:md,formatHex8:Mp,formatHsl:Op,formatRgb:hd,toString:hd});function md(){return this.rgb().formatHex()}function Mp(){return this.rgb().formatHex8()}function Op(){return _d(this).formatHsl()}function hd(){return this.rgb().formatRgb()}function ct(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Cp.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?ud(e):t===3?new Xe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ra(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ra(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kp.exec(i))?new Xe(e[1],e[2],e[3],1):(e=Ap.exec(i))?new Xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ep.exec(i))?Ra(e[1],e[2],e[3],e[4]):(e=Lp.exec(i))?Ra(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dp.exec(i))?fd(e[1],e[2]/100,e[3]/100,1):(e=Fp.exec(i))?fd(e[1],e[2]/100,e[3]/100,e[4]):dd.hasOwnProperty(i)?ud(dd[i]):i==="transparent"?new Xe(NaN,NaN,NaN,0):null}function ud(i){return new Xe(i>>16&255,i>>8&255,i&255,1)}function Ra(i,e,t,n){return n<=0&&(i=e=t=NaN),new Xe(i,e,t,n)}function Vp(i){return i instanceof Tn||(i=ct(i)),i?(i=i.rgb(),new Xe(i.r,i.g,i.b,i.opacity)):new Xe}function qi(i,e,t,n){return arguments.length===1?Vp(i):new Xe(i,e,t,n??1)}function Xe(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}Pa(Xe,qi,Sr(Tn,{brighter(i){return i=i==null?Ha:Math.pow(Ha,i),new Xe(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?bn:Math.pow(bn,i),new Xe(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Xe(pi(this.r),pi(this.g),pi(this.b),Ba(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pd,formatHex:pd,formatHex8:Ip,formatRgb:gd,toString:gd}));function pd(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function Ip(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui((isNaN(this.opacity)?1:this.opacity)*255)}`}function gd(){let i=Ba(this.opacity);return`${i===1?"rgb(":"rgba("}${pi(this.r)}, ${pi(this.g)}, ${pi(this.b)}${i===1?")":`, ${i})`}`}function Ba(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function pi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function ui(i){return i=pi(i),(i<16?"0":"")+i.toString(16)}function fd(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new lt(i,e,t,n)}function _d(i){if(i instanceof lt)return new lt(i.h,i.s,i.l,i.opacity);if(i instanceof Tn||(i=ct(i)),!i)return new lt;if(i instanceof lt)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,a=Math.min(e,t,n),s=Math.max(e,t,n),r=NaN,o=s-a,d=(s+a)/2;return o?(e===s?r=(t-n)/o+(t<n)*6:t===s?r=(n-e)/o+2:r=(e-t)/o+4,o/=d<.5?s+a:2-s-a,r*=60):o=d>0&&d<1?0:r,new lt(r,o,d,i.opacity)}function vd(i,e,t,n){return arguments.length===1?_d(i):new lt(i,e,t,n??1)}function lt(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}Pa(lt,vd,Sr(Tn,{brighter(i){return i=i==null?Ha:Math.pow(Ha,i),new lt(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?bn:Math.pow(bn,i),new lt(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,a=2*t-n;return new Xe(Cr(i>=240?i-240:i+120,a,n),Cr(i,a,n),Cr(i<120?i+240:i-120,a,n),this.opacity)},clamp(){return new lt(xd(this.h),Na(this.s),Na(this.l),Ba(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let i=Ba(this.opacity);return`${i===1?"hsl(":"hsla("}${xd(this.h)}, ${Na(this.s)*100}%, ${Na(this.l)*100}%${i===1?")":`, ${i})`}`}}));function xd(i){return i=(i||0)%360,i<0?i+360:i}function Na(i){return Math.max(0,Math.min(1,i||0))}function Cr(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function kr(i,e,t,n,a){var s=i*i,r=s*i;return((1-3*i+3*s-r)*e+(4-6*s+3*r)*t+(1+3*i+3*s-3*r)*n+r*a)/6}function yd(i){var e=i.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),a=i[n],s=i[n+1],r=n>0?i[n-1]:2*a-s,o=n<e-1?i[n+2]:2*s-a;return kr((t-n/e)*e,r,a,s,o)}}function bd(i){var e=i.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e),a=i[(n+e-1)%e],s=i[n%e],r=i[(n+1)%e],o=i[(n+2)%e];return kr((t-n/e)*e,a,s,r,o)}}var Sn=i=>()=>i;function Pp(i,e){return function(t){return i+t*e}}function Rp(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function wd(i){return(i=+i)==1?Ga:function(e,t){return t-e?Rp(e,t,i):Sn(isNaN(e)?t:e)}}function Ga(i,e){var t=e-i;return t?Pp(i,t):Sn(isNaN(i)?e:i)}var gi=(function i(e){var t=wd(e);function n(a,s){var r=t((a=qi(a)).r,(s=qi(s)).r),o=t(a.g,s.g),d=t(a.b,s.b),m=Ga(a.opacity,s.opacity);return function(p){return a.r=r(p),a.g=o(p),a.b=d(p),a.opacity=m(p),a+""}}return n.gamma=i,n})(1);function Td(i){return function(e){var t=e.length,n=new Array(t),a=new Array(t),s=new Array(t),r,o;for(r=0;r<t;++r)o=qi(e[r]),n[r]=o.r||0,a[r]=o.g||0,s[r]=o.b||0;return n=i(n),a=i(a),s=i(s),o.opacity=1,function(d){return o.r=n(d),o.g=a(d),o.b=s(d),o+""}}}var Np=Td(yd),Hp=Td(bd);function Sd(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),a;return function(s){for(a=0;a<t;++a)n[a]=i[a]*(1-s)+e[a]*s;return n}}function Cd(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function kd(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,a=new Array(n),s=new Array(t),r;for(r=0;r<n;++r)a[r]=fi(i[r],e[r]);for(;r<t;++r)s[r]=e[r];return function(o){for(r=0;r<n;++r)s[r]=a[r](o);return s}}function Ad(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function Ee(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Ed(i,e){var t={},n={},a;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in i?t[a]=fi(i[a],e[a]):n[a]=e[a];return function(s){for(a in t)n[a]=t[a](s);return n}}var Er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ar=new RegExp(Er.source,"g");function Bp(i){return function(){return i}}function Gp(i){return function(e){return i(e)+""}}function Cn(i,e){var t=Er.lastIndex=Ar.lastIndex=0,n,a,s,r=-1,o=[],d=[];for(i=i+"",e=e+"";(n=Er.exec(i))&&(a=Ar.exec(e));)(s=a.index)>t&&(s=e.slice(t,s),o[r]?o[r]+=s:o[++r]=s),(n=n[0])===(a=a[0])?o[r]?o[r]+=a:o[++r]=a:(o[++r]=null,d.push({i:r,x:Ee(n,a)})),t=Ar.lastIndex;return t<e.length&&(s=e.slice(t),o[r]?o[r]+=s:o[++r]=s),o.length<2?d[0]?Gp(d[0].x):Bp(e):(e=d.length,function(m){for(var p=0,g;p<e;++p)o[(g=d[p]).i]=g.x(m);return o.join("")})}function fi(i,e){var t=typeof e,n;return e==null||t==="boolean"?Sn(e):(t==="number"?Ee:t==="string"?(n=ct(e))?(e=n,gi):Cn:e instanceof ct?gi:e instanceof Date?Ad:Cd(e)?Sd:Array.isArray(e)?kd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ed:Ee)(i,e)}function Lr(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}var Ld=180/Math.PI,$a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dr(i,e,t,n,a,s){var r,o,d;return(r=Math.sqrt(i*i+e*e))&&(i/=r,e/=r),(d=i*t+e*n)&&(t-=i*d,n-=e*d),(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o,d/=o),i*n<e*t&&(i=-i,e=-e,d=-d,r=-r),{translateX:a,translateY:s,rotate:Math.atan2(e,i)*Ld,skewX:Math.atan(d)*Ld,scaleX:r,scaleY:o}}var za;function Dd(i){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?$a:Dr(e.a,e.b,e.c,e.d,e.e,e.f)}function Fd(i){return i==null?$a:(za||(za=document.createElementNS("http://www.w3.org/2000/svg","g")),za.setAttribute("transform",i),(i=za.transform.baseVal.consolidate())?(i=i.matrix,Dr(i.a,i.b,i.c,i.d,i.e,i.f)):$a)}function Md(i,e,t,n){function a(m){return m.length?m.pop()+" ":""}function s(m,p,g,_,b,v){if(m!==g||p!==_){var T=b.push("translate(",null,e,null,t);v.push({i:T-4,x:Ee(m,g)},{i:T-2,x:Ee(p,_)})}else(g||_)&&b.push("translate("+g+e+_+t)}function r(m,p,g,_){m!==p?(m-p>180?p+=360:p-m>180&&(m+=360),_.push({i:g.push(a(g)+"rotate(",null,n)-2,x:Ee(m,p)})):p&&g.push(a(g)+"rotate("+p+n)}function o(m,p,g,_){m!==p?_.push({i:g.push(a(g)+"skewX(",null,n)-2,x:Ee(m,p)}):p&&g.push(a(g)+"skewX("+p+n)}function d(m,p,g,_,b,v){if(m!==g||p!==_){var T=b.push(a(b)+"scale(",null,",",null,")");v.push({i:T-4,x:Ee(m,g)},{i:T-2,x:Ee(p,_)})}else(g!==1||_!==1)&&b.push(a(b)+"scale("+g+","+_+")")}return function(m,p){var g=[],_=[];return m=i(m),p=i(p),s(m.translateX,m.translateY,p.translateX,p.translateY,g,_),r(m.rotate,p.rotate,g,_),o(m.skewX,p.skewX,g,_),d(m.scaleX,m.scaleY,p.scaleX,p.scaleY,g,_),m=p=null,function(b){for(var v=-1,T=_.length,O;++v<T;)g[(O=_[v]).i]=O.x(b);return g.join("")}}}var Fr=Md(Dd,"px, ","px)","deg)"),Mr=Md(Fd,", ",")",")");var ji=0,An=0,kn=0,Vd=1e3,Xa,En,Wa=0,xi=0,Ya=0,Ln=typeof performance=="object"&&performance.now?performance:Date,Id=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Fn(){return xi||(Id($p),xi=Ln.now()+Ya)}function $p(){xi=0}function Dn(){this._call=this._time=this._next=null}Dn.prototype=qa.prototype={constructor:Dn,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?Fn():+t)+(e==null?0:+e),!this._next&&En!==this&&(En?En._next=this:Xa=this,En=this),this._call=i,this._time=t,Or()},stop:function(){this._call&&(this._call=null,this._time=1/0,Or())}};function qa(i,e,t){var n=new Dn;return n.restart(i,e,t),n}function Pd(){Fn(),++ji;for(var i=Xa,e;i;)(e=xi-i._time)>=0&&i._call.call(void 0,e),i=i._next;--ji}function Od(){xi=(Wa=Ln.now())+Ya,ji=An=0;try{Pd()}finally{ji=0,Xp(),xi=0}}function zp(){var i=Ln.now(),e=i-Wa;e>Vd&&(Ya-=e,Wa=i)}function Xp(){for(var i,e=Xa,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:Xa=t);En=i,Or(n)}function Or(i){if(!ji){An&&(An=clearTimeout(An));var e=i-xi;e>24?(i<1/0&&(An=setTimeout(Od,i-Ln.now()-Ya)),kn&&(kn=clearInterval(kn))):(kn||(Wa=Ln.now(),kn=setInterval(zp,Vd)),ji=1,Id(Od))}}function ja(i,e,t){var n=new Dn;return e=e==null?0:+e,n.restart(a=>{n.stop(),i(a+e)},e,t),n}var Wp=Tr("start","end","cancel","interrupt"),Yp=[],Hd=0,Rd=1,Qa=2,Ua=3,Nd=4,Za=5,Mn=6;function qt(i,e,t,n,a,s){var r=i.__transition;if(!r)i.__transition={};else if(t in r)return;qp(i,t,{name:e,index:n,group:a,on:Wp,tween:Yp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hd})}function On(i,e){var t=xe(i,e);if(t.state>Hd)throw new Error("too late; already scheduled");return t}function Le(i,e){var t=xe(i,e);if(t.state>Ua)throw new Error("too late; already running");return t}function xe(i,e){var t=i.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function qp(i,e,t){var n=i.__transition,a;n[e]=t,t.timer=qa(s,0,t.time);function s(m){t.state=Rd,t.timer.restart(r,t.delay,t.time),t.delay<=m&&r(m-t.delay)}function r(m){var p,g,_,b;if(t.state!==Rd)return d();for(p in n)if(b=n[p],b.name===t.name){if(b.state===Ua)return ja(r);b.state===Nd?(b.state=Mn,b.timer.stop(),b.on.call("interrupt",i,i.__data__,b.index,b.group),delete n[p]):+p<e&&(b.state=Mn,b.timer.stop(),b.on.call("cancel",i,i.__data__,b.index,b.group),delete n[p])}if(ja(function(){t.state===Ua&&(t.state=Nd,t.timer.restart(o,t.delay,t.time),o(m))}),t.state=Qa,t.on.call("start",i,i.__data__,t.index,t.group),t.state===Qa){for(t.state=Ua,a=new Array(_=t.tween.length),p=0,g=-1;p<_;++p)(b=t.tween[p].value.call(i,i.__data__,t.index,t.group))&&(a[++g]=b);a.length=g+1}}function o(m){for(var p=m<t.duration?t.ease.call(null,m/t.duration):(t.timer.restart(d),t.state=Za,1),g=-1,_=a.length;++g<_;)a[g].call(i,p);t.state===Za&&(t.on.call("end",i,i.__data__,t.index,t.group),d())}function d(){t.state=Mn,t.timer.stop(),delete n[e];for(var m in n)return;delete i.__transition}}function Vr(i,e){var t=i.__transition,n,a,s=!0,r;if(t){e=e==null?null:e+"";for(r in t){if((n=t[r]).name!==e){s=!1;continue}a=n.state>Qa&&n.state<Za,n.state=Mn,n.timer.stop(),n.on.call(a?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete t[r]}s&&delete i.__transition}}function Bd(i){return this.each(function(){Vr(this,i)})}function jp(i,e){var t,n;return function(){var a=Le(this,i),s=a.tween;if(s!==t){n=t=s;for(var r=0,o=n.length;r<o;++r)if(n[r].name===e){n=n.slice(),n.splice(r,1);break}}a.tween=n}}function Up(i,e,t){var n,a;if(typeof t!="function")throw new Error;return function(){var s=Le(this,i),r=s.tween;if(r!==n){a=(n=r).slice();for(var o={name:e,value:t},d=0,m=a.length;d<m;++d)if(a[d].name===e){a[d]=o;break}d===m&&a.push(o)}s.tween=a}}function Gd(i,e){var t=this._id;if(i+="",arguments.length<2){for(var n=xe(this.node(),t).tween,a=0,s=n.length,r;a<s;++a)if((r=n[a]).name===i)return r.value;return null}return this.each((e==null?jp:Up)(t,i,e))}function Ui(i,e,t){var n=i._id;return i.each(function(){var a=Le(this,n);(a.value||(a.value={}))[e]=t.apply(this,arguments)}),function(a){return xe(a,n).value[e]}}function Ka(i,e){var t;return(typeof e=="number"?Ee:e instanceof ct?gi:(t=ct(e))?(e=t,gi):Cn)(i,e)}function Qp(i){return function(){this.removeAttribute(i)}}function Zp(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Kp(i,e,t){var n,a=t+"",s;return function(){var r=this.getAttribute(i);return r===a?null:r===n?s:s=e(n=r,t)}}function Jp(i,e,t){var n,a=t+"",s;return function(){var r=this.getAttributeNS(i.space,i.local);return r===a?null:r===n?s:s=e(n=r,t)}}function eg(i,e,t){var n,a,s;return function(){var r,o=t(this),d;return o==null?void this.removeAttribute(i):(r=this.getAttribute(i),d=o+"",r===d?null:r===n&&d===a?s:(a=d,s=e(n=r,o)))}}function tg(i,e,t){var n,a,s;return function(){var r,o=t(this),d;return o==null?void this.removeAttributeNS(i.space,i.local):(r=this.getAttributeNS(i.space,i.local),d=o+"",r===d?null:r===n&&d===a?s:(a=d,s=e(n=r,o)))}}function $d(i,e){var t=Vt(i),n=t==="transform"?Mr:Ka;return this.attrTween(i,typeof e=="function"?(t.local?tg:eg)(t,n,Ui(this,"attr."+i,e)):e==null?(t.local?Zp:Qp)(t):(t.local?Jp:Kp)(t,n,e))}function ig(i,e){return function(t){this.setAttribute(i,e.call(this,t))}}function ng(i,e){return function(t){this.setAttributeNS(i.space,i.local,e.call(this,t))}}function ag(i,e){var t,n;function a(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&ng(i,s)),t}return a._value=e,a}function sg(i,e){var t,n;function a(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&ig(i,s)),t}return a._value=e,a}function zd(i,e){var t="attr."+i;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var n=Vt(i);return this.tween(t,(n.local?ag:sg)(n,e))}function rg(i,e){return function(){On(this,i).delay=+e.apply(this,arguments)}}function og(i,e){return e=+e,function(){On(this,i).delay=e}}function Xd(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?rg:og)(e,i)):xe(this.node(),e).delay}function lg(i,e){return function(){Le(this,i).duration=+e.apply(this,arguments)}}function cg(i,e){return e=+e,function(){Le(this,i).duration=e}}function Wd(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?lg:cg)(e,i)):xe(this.node(),e).duration}function dg(i,e){if(typeof e!="function")throw new Error;return function(){Le(this,i).ease=e}}function Yd(i){var e=this._id;return arguments.length?this.each(dg(e,i)):xe(this.node(),e).ease}function mg(i,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Le(this,i).ease=t}}function qd(i){if(typeof i!="function")throw new Error;return this.each(mg(this._id,i))}function jd(i){typeof i!="function"&&(i=_n(i));for(var e=this._groups,t=e.length,n=new Array(t),a=0;a<t;++a)for(var s=e[a],r=s.length,o=n[a]=[],d,m=0;m<r;++m)(d=s[m])&&i.call(d,d.__data__,m,s)&&o.push(d);return new Re(n,this._parents,this._name,this._id)}function Ud(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,t=i._groups,n=e.length,a=t.length,s=Math.min(n,a),r=new Array(n),o=0;o<s;++o)for(var d=e[o],m=t[o],p=d.length,g=r[o]=new Array(p),_,b=0;b<p;++b)(_=d[b]||m[b])&&(g[b]=_);for(;o<n;++o)r[o]=e[o];return new Re(r,this._parents,this._name,this._id)}function hg(i){return(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function ug(i,e,t){var n,a,s=hg(e)?On:Le;return function(){var r=s(this,i),o=r.on;o!==n&&(a=(n=o).copy()).on(e,t),r.on=a}}function Qd(i,e){var t=this._id;return arguments.length<2?xe(this.node(),t).on.on(i):this.each(ug(t,i,e))}function pg(i){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}}function Zd(){return this.on("end.remove",pg(this._id))}function Kd(i){var e=this._name,t=this._id;typeof i!="function"&&(i=hi(i));for(var n=this._groups,a=n.length,s=new Array(a),r=0;r<a;++r)for(var o=n[r],d=o.length,m=s[r]=new Array(d),p,g,_=0;_<d;++_)(p=o[_])&&(g=i.call(p,p.__data__,_,o))&&("__data__"in p&&(g.__data__=p.__data__),m[_]=g,qt(m[_],e,t,_,m,xe(p,t)));return new Re(s,this._parents,e,t)}function Jd(i){var e=this._name,t=this._id;typeof i!="function"&&(i=xn(i));for(var n=this._groups,a=n.length,s=[],r=[],o=0;o<a;++o)for(var d=n[o],m=d.length,p,g=0;g<m;++g)if(p=d[g]){for(var _=i.call(p,p.__data__,g,d),b,v=xe(p,t),T=0,O=_.length;T<O;++T)(b=_[T])&&qt(b,e,t,T,_,v);s.push(_),r.push(p)}return new Re(s,r,e,t)}var gg=It.prototype.constructor;function em(){return new gg(this._groups,this._parents)}function fg(i,e){var t,n,a;return function(){var s=Yt(this,i),r=(this.style.removeProperty(i),Yt(this,i));return s===r?null:s===t&&r===n?a:a=e(t=s,n=r)}}function tm(i){return function(){this.style.removeProperty(i)}}function xg(i,e,t){var n,a=t+"",s;return function(){var r=Yt(this,i);return r===a?null:r===n?s:s=e(n=r,t)}}function _g(i,e,t){var n,a,s;return function(){var r=Yt(this,i),o=t(this),d=o+"";return o==null&&(d=o=(this.style.removeProperty(i),Yt(this,i))),r===d?null:r===n&&d===a?s:(a=d,s=e(n=r,o))}}function vg(i,e){var t,n,a,s="style."+e,r="end."+s,o;return function(){var d=Le(this,i),m=d.on,p=d.value[s]==null?o||(o=tm(e)):void 0;(m!==t||a!==p)&&(n=(t=m).copy()).on(r,a=p),d.on=n}}function im(i,e,t){var n=(i+="")=="transform"?Fr:Ka;return e==null?this.styleTween(i,fg(i,n)).on("end.style."+i,tm(i)):typeof e=="function"?this.styleTween(i,_g(i,n,Ui(this,"style."+i,e))).each(vg(this._id,i)):this.styleTween(i,xg(i,n,e),t).on("end.style."+i,null)}function yg(i,e,t){return function(n){this.style.setProperty(i,e.call(this,n),t)}}function bg(i,e,t){var n,a;function s(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&yg(i,r,t)),n}return s._value=e,s}function nm(i,e,t){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,bg(i,e,t??""))}function wg(i){return function(){this.textContent=i}}function Tg(i){return function(){var e=i(this);this.textContent=e??""}}function am(i){return this.tween("text",typeof i=="function"?Tg(Ui(this,"text",i)):wg(i==null?"":i+""))}function Sg(i){return function(e){this.textContent=i.call(this,e)}}function Cg(i){var e,t;function n(){var a=i.apply(this,arguments);return a!==t&&(e=(t=a)&&Sg(a)),e}return n._value=i,n}function sm(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,Cg(i))}function rm(){for(var i=this._name,e=this._id,t=Ja(),n=this._groups,a=n.length,s=0;s<a;++s)for(var r=n[s],o=r.length,d,m=0;m<o;++m)if(d=r[m]){var p=xe(d,e);qt(d,i,t,m,r,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Re(n,this._parents,i,t)}function om(){var i,e,t=this,n=t._id,a=t.size();return new Promise(function(s,r){var o={value:r},d={value:function(){--a===0&&s()}};t.each(function(){var m=Le(this,n),p=m.on;p!==i&&(e=(i=p).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(d)),m.on=e}),a===0&&s()})}var kg=0;function Re(i,e,t,n){this._groups=i,this._parents=e,this._name=t,this._id=n}function lm(i){return It().transition(i)}function Ja(){return++kg}var Pt=It.prototype;Re.prototype=lm.prototype={constructor:Re,select:Kd,selectAll:Jd,selectChild:Pt.selectChild,selectChildren:Pt.selectChildren,filter:jd,merge:Ud,selection:em,transition:rm,call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:Qd,attr:$d,attrTween:zd,style:im,styleTween:nm,text:am,textTween:sm,remove:Zd,tween:Gd,delay:Xd,duration:Wd,ease:Yd,easeVarying:qd,end:om,[Symbol.iterator]:Pt[Symbol.iterator]};function es(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var Ag={time:null,delay:0,duration:250,ease:es};function Eg(i,e){for(var t;!(t=i.__transition)||!(t=t[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return t}function cm(i){var e,t;i instanceof Re?(e=i._id,i=i._name):(e=Ja(),(t=Ag).time=Fn(),i=i==null?null:i+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var r=n[s],o=r.length,d,m=0;m<o;++m)(d=r[m])&&qt(d,i,e,m,r,t||Eg(d,e));return new Re(n,this._parents,i,e)}It.prototype.interrupt=Bd;It.prototype.transition=cm;var{abs:bS,max:wS,min:TS}=Math;function dm(i){return[+i[0],+i[1]]}function Lg(i){return[dm(i[0]),dm(i[1])]}var SS={name:"x",handles:["w","e"].map(Ir),input:function(i,e){return i==null?null:[[+i[0],e[0][1]],[+i[1],e[1][1]]]},output:function(i){return i&&[i[0][0],i[1][0]]}},CS={name:"y",handles:["n","s"].map(Ir),input:function(i,e){return i==null?null:[[e[0][0],+i[0]],[e[1][0],+i[1]]]},output:function(i){return i&&[i[0][1],i[1][1]]}},kS={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ir),input:function(i){return i==null?null:Lg(i)},output:function(i){return i}};function Ir(i){return{type:i}}function St(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function Pr(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function ts(i){let e,t,n;i.length!==2?(e=St,t=(o,d)=>St(i(o),d),n=(o,d)=>i(o)-d):(e=i===St||i===Pr?i:Fg,t=i,n=i);function a(o,d,m=0,p=o.length){if(m<p){if(e(d,d)!==0)return p;do{let g=m+p>>>1;t(o[g],d)<0?m=g+1:p=g}while(m<p)}return m}function s(o,d,m=0,p=o.length){if(m<p){if(e(d,d)!==0)return p;do{let g=m+p>>>1;t(o[g],d)<=0?m=g+1:p=g}while(m<p)}return m}function r(o,d,m=0,p=o.length){let g=a(o,d,m,p-1);return g>m&&n(o[g-1],d)>-n(o[g],d)?g-1:g}return{left:a,center:r,right:s}}function Fg(){return 0}function Vn(i){return i===null?NaN:+i}var mm=ts(St),hm=mm.right,Mg=mm.left,Og=ts(Vn).center,In=hm;var Qi=class extends Map{constructor(e,t=Pg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(um(this,e))}has(e){return super.has(um(this,e))}set(e,t){return super.set(Vg(this,e),t)}delete(e){return super.delete(Ig(this,e))}};function um({_intern:i,_key:e},t){let n=e(t);return i.has(n)?i.get(n):t}function Vg({_intern:i,_key:e},t){let n=e(t);return i.has(n)?i.get(n):(i.set(n,t),t)}function Ig({_intern:i,_key:e},t){let n=e(t);return i.has(n)&&(t=i.get(n),i.delete(n)),t}function Pg(i){return i!==null&&typeof i=="object"?i.valueOf():i}var Rg=Math.sqrt(50),Ng=Math.sqrt(10),Hg=Math.sqrt(2);function is(i,e,t){let n=(e-i)/Math.max(0,t),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),r=s>=Rg?10:s>=Ng?5:s>=Hg?2:1,o,d,m;return a<0?(m=Math.pow(10,-a)/r,o=Math.round(i*m),d=Math.round(e*m),o/m<i&&++o,d/m>e&&--d,m=-m):(m=Math.pow(10,a)*r,o=Math.round(i/m),d=Math.round(e/m),o*m<i&&++o,d*m>e&&--d),d<o&&.5<=t&&t<2?is(i,e,t*2):[o,d,m]}function ns(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];let n=e<i,[a,s,r]=n?is(e,i,t):is(i,e,t);if(!(s>=a))return[];let o=s-a+1,d=new Array(o);if(n)if(r<0)for(let m=0;m<o;++m)d[m]=(s-m)/-r;else for(let m=0;m<o;++m)d[m]=(s-m)*r;else if(r<0)for(let m=0;m<o;++m)d[m]=(a+m)/-r;else for(let m=0;m<o;++m)d[m]=(a+m)*r;return d}function Pn(i,e,t){return e=+e,i=+i,t=+t,is(i,e,t)[2]}function Rr(i,e,t){e=+e,i=+i,t=+t;let n=e<i,a=n?Pn(e,i,t):Pn(i,e,t);return(n?-1:1)*(a<0?1/-a:a)}function Nr(i,e,t=Vn){if(!(!(n=i.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(i[0],0,i);if(e>=1)return+t(i[n-1],n-1,i);var n,a=(n-1)*e,s=Math.floor(a),r=+t(i[s],s,i),o=+t(i[s+1],s+1,i);return r+(o-r)*(a-s)}}function Zi(i,e,t){i=+i,e=+e,t=(a=arguments.length)<2?(e=i,i=0,1):a<3?1:+t;for(var n=-1,a=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(a);++n<a;)s[n]=i+n*t;return s}function jt(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}var Hr=Symbol("implicit");function _i(){var i=new Qi,e=[],t=[],n=Hr;function a(s){let r=i.get(s);if(r===void 0){if(n!==Hr)return n;i.set(s,r=e.push(s)-1)}return t[r%t.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],i=new Qi;for(let r of s)i.has(r)||i.set(r,e.push(r)-1);return a},a.range=function(s){return arguments.length?(t=Array.from(s),a):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return _i(e,t).unknown(n)},jt.apply(a,arguments),a}function Ki(){var i=_i().unknown(void 0),e=i.domain,t=i.range,n=0,a=1,s,r,o=!1,d=0,m=0,p=.5;delete i.unknown;function g(){var _=e().length,b=a<n,v=b?a:n,T=b?n:a;s=(T-v)/Math.max(1,_-d+m*2),o&&(s=Math.floor(s)),v+=(T-v-s*(_-d))*p,r=s*(1-d),o&&(v=Math.round(v),r=Math.round(r));var O=Zi(_).map(function($){return v+s*$});return t(b?O.reverse():O)}return i.domain=function(_){return arguments.length?(e(_),g()):e()},i.range=function(_){return arguments.length?([n,a]=_,n=+n,a=+a,g()):[n,a]},i.rangeRound=function(_){return[n,a]=_,n=+n,a=+a,o=!0,g()},i.bandwidth=function(){return r},i.step=function(){return s},i.round=function(_){return arguments.length?(o=!!_,g()):o},i.padding=function(_){return arguments.length?(d=Math.min(1,m=+_),g()):d},i.paddingInner=function(_){return arguments.length?(d=Math.min(1,_),g()):d},i.paddingOuter=function(_){return arguments.length?(m=+_,g()):m},i.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),g()):p},i.copy=function(){return Ki(e(),[n,a]).round(o).paddingInner(d).paddingOuter(m).align(p)},jt.apply(g(),arguments)}function Br(i){return function(){return i}}function Gr(i){return+i}var pm=[0,1];function Ji(i){return i}function $r(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:Br(isNaN(e)?NaN:.5)}function Gg(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function $g(i,e,t){var n=i[0],a=i[1],s=e[0],r=e[1];return a<n?(n=$r(a,n),s=t(r,s)):(n=$r(n,a),s=t(s,r)),function(o){return s(n(o))}}function zg(i,e,t){var n=Math.min(i.length,e.length)-1,a=new Array(n),s=new Array(n),r=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++r<n;)a[r]=$r(i[r],i[r+1]),s[r]=t(e[r],e[r+1]);return function(o){var d=In(i,o,1,n)-1;return s[d](a[d](o))}}function gm(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Xg(){var i=pm,e=pm,t=fi,n,a,s,r=Ji,o,d,m;function p(){var _=Math.min(i.length,e.length);return r!==Ji&&(r=Gg(i[0],i[_-1])),o=_>2?zg:$g,d=m=null,g}function g(_){return _==null||isNaN(_=+_)?s:(d||(d=o(i.map(n),e,t)))(n(r(_)))}return g.invert=function(_){return r(a((m||(m=o(e,i.map(n),Ee)))(_)))},g.domain=function(_){return arguments.length?(i=Array.from(_,Gr),p()):i.slice()},g.range=function(_){return arguments.length?(e=Array.from(_),p()):e.slice()},g.rangeRound=function(_){return e=Array.from(_),t=Lr,p()},g.clamp=function(_){return arguments.length?(r=_?!0:Ji,p()):r!==Ji},g.interpolate=function(_){return arguments.length?(t=_,p()):t},g.unknown=function(_){return arguments.length?(s=_,g):s},function(_,b){return n=_,a=b,p()}}function zr(){return Xg()(Ji,Ji)}function fm(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function vi(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Ct(i){return i=vi(Math.abs(i)),i?i[1]:NaN}function xm(i,e){return function(t,n){for(var a=t.length,s=[],r=0,o=i[0],d=0;a>0&&o>0&&(d+o+1>n&&(o=Math.max(1,n-d)),s.push(t.substring(a-=o,a+o)),!((d+=o+1)>n));)o=i[r=(r+1)%i.length];return s.reverse().join(e)}}function _m(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var Wg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ut(i){if(!(e=Wg.exec(i)))throw new Error("invalid format: "+i);var e;return new as({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ut.prototype=as.prototype;function as(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}as.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vm(i){e:for(var e=i.length,t=1,n=-1,a;t<e;++t)switch(i[t]){case".":n=a=t;break;case"0":n===0&&(n=t),a=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(a+1):i}var Xr;function ym(i,e){var t=vi(i,e);if(!t)return i+"";var n=t[0],a=t[1],s=a-(Xr=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,r=n.length;return s===r?n:s>r?n+new Array(s-r+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+vi(i,Math.max(0,e+s-1))[0]}function Wr(i,e){var t=vi(i,e);if(!t)return i+"";var n=t[0],a=t[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Yr={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:fm,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>Wr(i*100,e),r:Wr,s:ym,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function qr(i){return i}var bm=Array.prototype.map,wm=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Tm(i){var e=i.grouping===void 0||i.thousands===void 0?qr:xm(bm.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",a=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?qr:_m(bm.call(i.numerals,String)),r=i.percent===void 0?"%":i.percent+"",o=i.minus===void 0?"\u2212":i.minus+"",d=i.nan===void 0?"NaN":i.nan+"";function m(g){g=Ut(g);var _=g.fill,b=g.align,v=g.sign,T=g.symbol,O=g.zero,$=g.width,ee=g.comma,te=g.precision,le=g.trim,he=g.type;he==="n"?(ee=!0,he="g"):Yr[he]||(te===void 0&&(te=12),le=!0,he="g"),(O||_==="0"&&b==="=")&&(O=!0,_="0",b="=");var Ze=T==="$"?t:T==="#"&&/[boxX]/.test(he)?"0"+he.toLowerCase():"",Se=T==="$"?n:/[%p]/.test(he)?r:"",Ce=Yr[he],kt=/[defgprs%]/.test(he);te=te===void 0?6:/[gprs]/.test(he)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function At(j){var Pe=Ze,De=Se,Et,an,L;if(he==="c")De=Ce(j)+De,j="";else{j=+j;var M=j<0||1/j<0;if(j=isNaN(j)?d:Ce(Math.abs(j),te),le&&(j=vm(j)),M&&+j==0&&v!=="+"&&(M=!1),Pe=(M?v==="("?v:o:v==="-"||v==="("?"":v)+Pe,De=(he==="s"?wm[8+Xr/3]:"")+De+(M&&v==="("?")":""),kt){for(Et=-1,an=j.length;++Et<an;)if(L=j.charCodeAt(Et),48>L||L>57){De=(L===46?a+j.slice(Et+1):j.slice(Et))+De,j=j.slice(0,Et);break}}}ee&&!O&&(j=e(j,1/0));var V=Pe.length+j.length+De.length,H=V<$?new Array($-V+1).join(_):"";switch(ee&&O&&(j=e(H+j,H.length?$-De.length:1/0),H=""),b){case"<":j=Pe+j+De+H;break;case"=":j=Pe+H+j+De;break;case"^":j=H.slice(0,V=H.length>>1)+Pe+j+De+H.slice(V);break;default:j=H+Pe+j+De;break}return s(j)}return At.toString=function(){return g+""},At}function p(g,_){var b=m((g=Ut(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Ct(_)/3)))*3,T=Math.pow(10,-v),O=wm[8+v/3];return function($){return b(T*$)+O}}return{format:m,formatPrefix:p}}var ss,rs,os;jr({thousands:",",grouping:[3],currency:["$",""]});function jr(i){return ss=Tm(i),rs=ss.format,os=ss.formatPrefix,ss}function Ur(i){return Math.max(0,-Ct(Math.abs(i)))}function Qr(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ct(e)/3)))*3-Ct(Math.abs(i)))}function Zr(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Ct(e)-Ct(i))+1}function Kr(i,e,t,n){var a=Rr(i,e,t),s;switch(n=Ut(n??",f"),n.type){case"s":{var r=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=Qr(a,r))&&(n.precision=s),os(n,r)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Zr(a,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Ur(a))&&(n.precision=s-(n.type==="%")*2);break}}return rs(n)}function Yg(i){var e=i.domain;return i.ticks=function(t){var n=e();return ns(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var a=e();return Kr(a[0],a[a.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),a=0,s=n.length-1,r=n[a],o=n[s],d,m,p=10;for(o<r&&(m=r,r=o,o=m,m=a,a=s,s=m);p-- >0;){if(m=Pn(r,o,t),m===d)return n[a]=r,n[s]=o,e(n);if(m>0)r=Math.floor(r/m)*m,o=Math.ceil(o/m)*m;else if(m<0)r=Math.ceil(r*m)/m,o=Math.floor(o*m)/m;else break;d=m}return i},i}function Qt(){var i=zr();return i.copy=function(){return gm(i,Qt())},jt.apply(i,arguments),Yg(i)}function Rn(){var i=[],e=[],t=[],n;function a(){var r=0,o=Math.max(1,e.length);for(t=new Array(o-1);++r<o;)t[r-1]=Nr(i,r/o);return s}function s(r){return r==null||isNaN(r=+r)?n:e[In(t,r)]}return s.invertExtent=function(r){var o=e.indexOf(r);return o<0?[NaN,NaN]:[o>0?t[o-1]:i[0],o<t.length?t[o]:i[i.length-1]]},s.domain=function(r){if(!arguments.length)return i.slice();i=[];for(let o of r)o!=null&&!isNaN(o=+o)&&i.push(o);return i.sort(St),a()},s.range=function(r){return arguments.length?(e=Array.from(r),a()):e.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.quantiles=function(){return t.slice()},s.copy=function(){return Rn().domain(i).range(e).unknown(n)},jt.apply(s,arguments)}var Kg=["caretElm"],Jg=i=>({model:i});function ef(i,e){}function tf(i,e){if(i&1&&(l(0,"span"),Y(1,ef,0,0,"ng-template",5),c()),i&2){let t=f();h(),x("ngTemplateOutlet",t.template)("ngTemplateOutletContext",Ht(2,Jg,t.context))}}function nf(i,e){if(i&1&&y(0,"span",6),i&2){let t=f();x("innerHTML",t.title,vo)}}function af(i,e){if(i&1&&(l(0,"header",4)(1,"span",5),u(2),c()()),i&2){let t=f();h(2),J(t.title)}}function sf(i,e){if(i&1){let t=R();l(0,"li",6)(1,"ngx-charts-legend-entry",7),w("select",function(a){S(t);let s=f();return C(s.labelClick.emit(a))})("activate",function(a){S(t);let s=f();return C(s.activate(a))})("deactivate",function(a){S(t);let s=f();return C(s.deactivate(a))}),c()()}if(i&2){let t=e.$implicit,n=f();h(),x("label",t.label)("formattedLabel",t.formattedLabel)("color",t.color)("isActive",n.isActive(t))}}var rf=["*"];function of(i,e){if(i&1&&y(0,"ngx-charts-scale-legend",4),i&2){let t=f();x("horizontal",t.legendOptions&&t.legendOptions.position===t.LegendPosition.Below)("valueRange",t.legendOptions.domain)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)}}function lf(i,e){if(i&1){let t=R();l(0,"ngx-charts-legend",5),w("labelClick",function(a){S(t);let s=f();return C(s.legendLabelClick.emit(a))})("labelActivate",function(a){S(t);let s=f();return C(s.legendLabelActivate.emit(a))})("labelDeactivate",function(a){S(t);let s=f();return C(s.legendLabelDeactivate.emit(a))}),c()}if(i&2){let t=f();x("horizontal",t.legendOptions&&t.legendOptions.position===t.LegendPosition.Below)("data",t.legendOptions.domain)("title",t.legendOptions.title)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)("activeEntries",t.activeEntries)}}var cf=["ngx-charts-axis-label",""],Om=["ticksel"],df=["ngx-charts-x-axis-ticks",""];function mf(i,e){i&1&&(D(),Vs(0))}function hf(i,e){if(i&1&&(D(),l(0,"tspan",12),u(1),c()),i&2){let t=e.$implicit,n=e.index;K("y",n*12),h(),F(" ",t," ")}}function uf(i,e){if(i&1&&(D(),Ci(0),Y(1,hf,2,2,"tspan",11),ki()),i&2){let t=e.ngIf;h(),x("ngForOf",t)}}function pf(i,e){if(i&1&&Y(0,uf,2,1,"ng-container",8),i&2){let t=f(2).$implicit,n=f();x("ngIf",n.tickChunks(t))}}function gf(i,e){if(i&1&&u(0),i&2){let t=f().ngIf,n=f(2);F(" ",n.tickTrim(t)," ")}}function ff(i,e){if(i&1&&(D(),Ci(0),l(1,"title"),u(2),c(),l(3,"text",9),Y(4,mf,1,0,"ng-container",10),c(),Y(5,pf,1,1,"ng-template",null,1,ln)(7,gf,1,1,"ng-template",null,2,ln),ki()),i&2){let t=e.ngIf,n=Ei(6),a=Ei(8),s=f(2);h(2),J(t),h(),K("text-anchor",s.textAnchor)("transform",s.textTransform),h(),x("ngIf",s.isWrapTicksSupported)("ngIfThen",n)("ngIfElse",a)}}function xf(i,e){if(i&1&&(D(),l(0,"g",7),Y(1,ff,9,6,"ng-container",8),c()),i&2){let t=e.$implicit,n=f();K("transform",n.tickTransform(t)),h(),x("ngIf",n.tickFormat(t))}}function _f(i,e){if(i&1&&(D(),l(0,"g"),y(1,"line",13),c()),i&2){let t=f(2);K("transform",t.gridLineTransform()),h(),K("y1",-t.gridLineHeight)}}function vf(i,e){if(i&1&&(D(),l(0,"g"),Y(1,_f,2,2,"g",8),c()),i&2){let t=e.$implicit,n=f();K("transform",n.tickTransform(t)),h(),x("ngIf",n.showGridLines)}}function yf(i,e){if(i&1&&(D(),y(0,"path",14)),i&2){let t=f();K("d",t.referenceAreaPath)("transform",t.gridLineTransform())}}function bf(i,e){if(i&1&&(D(),l(0,"g")(1,"title"),u(2),c(),l(3,"text",17),u(4),c()()),i&2){let t=f(2).$implicit,n=f();h(2),J(n.tickTrim(n.tickFormat(t.value))),h(2),F(" ",t.name," ")}}function wf(i,e){if(i&1&&(D(),l(0,"g"),y(1,"line",16),Y(2,bf,5,2,"g",8),c()),i&2){let t=f().$implicit,n=f();K("transform",n.transform(t.value)),h(),K("y2",25+n.gridLineHeight)("transform",n.gridLineTransform()),h(),x("ngIf",n.showRefLabels)}}function Tf(i,e){if(i&1&&(D(),l(0,"g",15),Y(1,wf,3,4,"g",8),c()),i&2){let t=f();h(),x("ngIf",t.showRefLines)}}var Sf=["ngx-charts-x-axis",""];function Cf(i,e){if(i&1){let t=R();D(),l(0,"g",2),w("dimensionsChanged",function(a){S(t);let s=f();return C(s.emitTicksHeight(a))}),c()}if(i&2){let t=f();x("trimTicks",t.trimTicks)("rotateTicks",t.rotateTicks)("maxTickLength",t.maxTickLength)("tickFormatting",t.tickFormatting)("tickArguments",t.tickArguments)("tickStroke",t.tickStroke)("scale",t.xScale)("orient",t.xOrient)("showGridLines",t.showGridLines)("gridLineHeight",t.dims.height)("referenceLines",t.referenceLines)("showRefLines",t.showRefLines)("showRefLabels",t.showRefLabels)("width",t.dims.width)("tickValues",t.ticks)("wrapTicks",t.wrapTicks)}}function kf(i,e){if(i&1&&(D(),y(0,"g",3)),i&2){let t=f();x("label",t.labelText)("offset",t.labelOffset)("orient",t.orientation.Bottom)("height",t.dims.height)("width",t.dims.width)}}var Af=["ngx-charts-y-axis-ticks",""];function Ef(i,e){i&1&&(D(),Vs(0))}function Lf(i,e){if(i&1&&(D(),l(0,"tspan",13),u(1),c()),i&2){let t=e.$implicit,n=e.index,a=f(6);K("y",n*(8+a.tickSpacing)),h(),F(" ",t," ")}}function Df(i,e){if(i&1&&(D(),Ci(0),Y(1,Lf,2,2,"tspan",12),ki()),i&2){let t=f().ngIf;h(),x("ngForOf",t)}}function Ff(i,e){if(i&1&&(D(),Ci(0),Y(1,Df,2,1,"ng-container",11),ki()),i&2){let t=e.ngIf;f(2);let n=Ei(8);h(),x("ngIf",t.length>1)("ngIfElse",n)}}function Mf(i,e){if(i&1&&Y(0,Ff,2,2,"ng-container",8),i&2){let t=f(2).$implicit,n=f();x("ngIf",n.tickChunks(t))}}function Of(i,e){if(i&1&&u(0),i&2){let t=f().ngIf,n=f(2);F(" ",n.tickTrim(t)," ")}}function Vf(i,e){if(i&1&&(D(),Ci(0),l(1,"title"),u(2),c(),l(3,"text",9),Y(4,Ef,1,0,"ng-container",10),c(),Y(5,Mf,1,1,"ng-template",null,1,ln)(7,Of,1,1,"ng-template",null,2,ln),ki()),i&2){let t=e.ngIf,n=Ei(6),a=Ei(8),s=f(2);h(2),J(t),h(),Ft("font-size","12px"),K("dy",s.dy)("x",s.x1)("y",s.y1)("text-anchor",s.textAnchor),h(),x("ngIf",s.wrapTicks)("ngIfThen",n)("ngIfElse",a)}}function If(i,e){if(i&1&&(D(),l(0,"g",7),Y(1,Vf,9,10,"ng-container",8),c()),i&2){let t=e.$implicit,n=f();K("transform",n.transform(t)),h(),x("ngIf",n.tickFormat(t))}}function Pf(i,e){if(i&1&&(D(),y(0,"path",14)),i&2){let t=f();K("d",t.referenceAreaPath)("transform",t.gridLineTransform())}}function Rf(i,e){if(i&1&&(D(),y(0,"line",16)),i&2){let t=f(3);K("x2",t.gridLineWidth)}}function Nf(i,e){if(i&1&&(D(),y(0,"line",16)),i&2){let t=f(3);K("x2",-t.gridLineWidth)}}function Hf(i,e){if(i&1&&(D(),l(0,"g"),Y(1,Rf,1,1,"line",15)(2,Nf,1,1,"line",15),c()),i&2){let t=f(2);K("transform",t.gridLineTransform()),h(),x("ngIf",t.orient===t.Orientation.Left),h(),x("ngIf",t.orient===t.Orientation.Right)}}function Bf(i,e){if(i&1&&(D(),l(0,"g"),Y(1,Hf,3,3,"g",8),c()),i&2){let t=e.$implicit,n=f();K("transform",n.transform(t)),h(),x("ngIf",n.showGridLines)}}function Gf(i,e){if(i&1&&(D(),l(0,"g")(1,"title"),u(2),c(),l(3,"text",19),u(4),c()()),i&2){let t=f(2).$implicit,n=f();h(2),J(n.tickTrim(n.tickFormat(t.value))),h(),K("dy",n.dy)("y",-6)("x",n.gridLineWidth)("text-anchor",n.textAnchor),h(),F(" ",t.name," ")}}function $f(i,e){if(i&1&&(D(),l(0,"g"),y(1,"line",18),Y(2,Gf,5,6,"g",8),c()),i&2){let t=f().$implicit,n=f();K("transform",n.transform(t.value)),h(),K("x2",n.gridLineWidth),h(),x("ngIf",n.showRefLabels)}}function zf(i,e){if(i&1&&(D(),l(0,"g",17),Y(1,$f,3,3,"g",8),c()),i&2){let t=f();h(),x("ngIf",t.showRefLines)}}var Xf=["ngx-charts-y-axis",""];function Wf(i,e){if(i&1){let t=R();D(),l(0,"g",2),w("dimensionsChanged",function(a){S(t);let s=f();return C(s.emitTicksWidth(a))}),c()}if(i&2){let t=f();x("trimTicks",t.trimTicks)("maxTickLength",t.maxTickLength)("tickFormatting",t.tickFormatting)("tickArguments",t.tickArguments)("tickValues",t.ticks)("tickStroke",t.tickStroke)("scale",t.yScale)("orient",t.yOrient)("showGridLines",t.showGridLines)("gridLineWidth",t.dims.width)("referenceLines",t.referenceLines)("showRefLines",t.showRefLines)("showRefLabels",t.showRefLabels)("height",t.dims.height)("wrapTicks",t.wrapTicks)}}function Yf(i,e){if(i&1&&(D(),y(0,"g",3)),i&2){let t=f();x("label",t.labelText)("offset",t.labelOffset)("orient",t.yOrient)("height",t.dims.height)("width",t.dims.width)}}var qf=["ngx-charts-svg-linear-gradient",""];function jf(i,e){if(i&1&&(D(),y(0,"stop")),i&2){let t=e.$implicit;Ft("stop-color",t.color)("stop-opacity",t.opacity),K("offset",t.offset+"%")}}var Uf=["tooltipTemplate"];var Qf=(i,e)=>[i,e];var Zf=`.ngx-charts-outer{animation:chartFadeIn linear .6s}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .node,.ngx-charts .link,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .node.active,.ngx-charts .node:hover,.ngx-charts .link.active,.ngx-charts .link:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .node:focus,.ngx-charts .link:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .node.hidden,.ngx-charts .link.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}
`;var Kf=["ngx-charts-bar",""];function Jf(i,e){if(i&1&&(D(),l(0,"defs"),y(1,"g",2),c()),i&2){let t=f();h(),x("orientation",t.orientation)("name",t.gradientId)("stops",t.gradientStops)}}var e0=["ngx-charts-bar-label",""];var t0=["ngx-charts-series-vertical",""];function i0(i,e){if(i&1){let t=R();D(),l(0,"g",2),w("select",function(a){S(t);let s=f(2);return C(s.onClick(a))})("activate",function(a){S(t);let s=f(2);return C(s.activate.emit(a))})("deactivate",function(a){S(t);let s=f(2);return C(s.deactivate.emit(a))}),c()}if(i&2){let t=e.$implicit,n=f(2);x("@animationState","active")("@.disabled",!n.animations)("width",t.width)("height",t.height)("x",t.x)("y",t.y)("fill",t.color)("stops",t.gradientStops)("data",t.data)("orientation",n.barOrientation.Vertical)("roundEdges",t.roundEdges)("gradient",n.gradient),Os("ariaLabel",t.ariaLabel),x("isActive",n.isActive(t.data))("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.tooltipPlacement)("tooltipType",n.tooltipType)("tooltipTitle",n.tooltipTemplate?void 0:t.tooltipText)("tooltipTemplate",n.tooltipTemplate)("tooltipContext",t.data)("noBarWhenZero",n.noBarWhenZero)("animations",n.animations)}}function n0(i,e){if(i&1&&(D(),l(0,"g"),Y(1,i0,1,22,"g",1),c()),i&2){let t=f();h(),x("ngForOf",t.bars)("ngForTrackBy",t.trackBy)}}function a0(i,e){if(i&1){let t=R();D(),l(0,"g",2),w("select",function(a){S(t);let s=f(2);return C(s.onClick(a))})("activate",function(a){S(t);let s=f(2);return C(s.activate.emit(a))})("deactivate",function(a){S(t);let s=f(2);return C(s.deactivate.emit(a))}),c()}if(i&2){let t=e.$implicit,n=f(2);x("width",t.width)("height",t.height)("x",t.x)("y",t.y)("fill",t.color)("stops",t.gradientStops)("data",t.data)("orientation",n.barOrientation.Vertical)("roundEdges",t.roundEdges)("gradient",n.gradient),Os("ariaLabel",t.ariaLabel),x("isActive",n.isActive(t.data))("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.tooltipPlacement)("tooltipType",n.tooltipType)("tooltipTitle",n.tooltipTemplate?void 0:t.tooltipText)("tooltipTemplate",n.tooltipTemplate)("tooltipContext",t.data)("noBarWhenZero",n.noBarWhenZero)("animations",n.animations)}}function s0(i,e){if(i&1&&(D(),l(0,"g"),Y(1,a0,1,20,"g",1),c()),i&2){let t=f();h(),x("ngForOf",t.bars)("ngForTrackBy",t.trackBy)}}function r0(i,e){if(i&1){let t=R();D(),l(0,"g",4),w("dimensionsChanged",function(a){let s=S(t).index,r=f(2);return C(r.dataLabelHeightChanged.emit({size:a,index:s}))}),c()}if(i&2){let t=e.$implicit,n=f(2);x("barX",t.x)("barY",t.y)("barWidth",t.width)("barHeight",t.height)("value",t.total)("valueFormatting",n.dataLabelFormatting)("orientation",n.barOrientation.Vertical)}}function o0(i,e){if(i&1&&(D(),l(0,"g"),Y(1,r0,1,7,"g",3),c()),i&2){let t=f();h(),x("ngForOf",t.barsForDataLabels)("ngForTrackBy",t.trackDataLabelBy)}}function l0(i,e){if(i&1){let t=R();D(),l(0,"g",5),w("dimensionsChanged",function(a){S(t);let s=f();return C(s.updateXAxisHeight(a))}),c()}if(i&2){let t=f();x("xScale",t.xScale)("dims",t.dims)("showGridLines",t.showGridLines)("showLabel",t.showXAxisLabel)("labelText",t.xAxisLabel)("trimTicks",t.trimXAxisTicks)("rotateTicks",t.rotateXAxisTicks)("maxTickLength",t.maxXAxisTickLength)("tickFormatting",t.xAxisTickFormatting)("ticks",t.xAxisTicks)("xAxisOffset",t.dataLabelMaxHeight.negative)("wrapTicks",t.wrapTicks)}}function c0(i,e){if(i&1){let t=R();D(),l(0,"g",6),w("dimensionsChanged",function(a){S(t);let s=f();return C(s.updateYAxisWidth(a))}),c()}if(i&2){let t=f();x("yScale",t.yScale)("dims",t.dims)("showGridLines",t.showGridLines)("showLabel",t.showYAxisLabel)("labelText",t.yAxisLabel)("trimTicks",t.trimYAxisTicks)("maxTickLength",t.maxYAxisTickLength)("tickFormatting",t.yAxisTickFormatting)("ticks",t.yAxisTicks)("referenceLines",t.referenceLines)("showRefLines",t.showRefLines)("showRefLabels",t.showRefLabels)("wrapTicks",t.wrapTicks)}}function d0(i,e,t){t=t||{};let n,a,s,r=null,o=0;function d(){o=t.leading===!1?0:+new Date,r=null,s=i.apply(n,a)}return function(){let m=+new Date;!o&&t.leading===!1&&(o=m);let p=e-(m-o);return n=this,a=arguments,p<=0?(clearTimeout(r),r=null,o=m,s=i.apply(n,a)):!r&&t.trailing!==!1&&(r=setTimeout(d,p)),s}}function m0(i,e){return function(n,a,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:s.enumerable,value:d0(s.value,i,e)}),this[a]}}}}var q=(function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i.Center="center",i})(q||{}),Kt=7;function Sm(i,e,t){if(t===q.Top)return i.top-Kt;if(t===q.Bottom)return i.top+i.height-e.height+Kt;if(t===q.Center)return i.top+i.height/2-e.height/2}function Cm(i,e,t){if(t===q.Left)return i.left-Kt;if(t===q.Right)return i.left+i.width-e.width+Kt;if(t===q.Center)return i.left+i.width/2-e.width/2}var Hn=class i{static calculateVerticalAlignment(e,t,n){let a=Sm(e,t,n);return a+t.height>window.innerHeight&&(a=window.innerHeight-t.height),a}static calculateVerticalCaret(e,t,n,a){let s;a===q.Top&&(s=e.height/2-n.height/2+Kt),a===q.Bottom&&(s=t.height-e.height/2-n.height/2-Kt),a===q.Center&&(s=t.height/2-n.height/2);let r=Sm(e,t,a);return r+t.height>window.innerHeight&&(s+=r+t.height-window.innerHeight),s}static calculateHorizontalAlignment(e,t,n){let a=Cm(e,t,n);return a+t.width>window.innerWidth&&(a=window.innerWidth-t.width),a}static calculateHorizontalCaret(e,t,n,a){let s;a===q.Left&&(s=e.width/2-n.width/2+Kt),a===q.Right&&(s=t.width-e.width/2-n.width/2-Kt),a===q.Center&&(s=t.width/2-n.width/2);let r=Cm(e,t,a);return r+t.width>window.innerWidth&&(s+=r+t.width-window.innerWidth),s}static shouldFlip(e,t,n,a){let s=!1;return n===q.Right&&e.left+e.width+t.width+a>window.innerWidth&&(s=!0),n===q.Left&&e.left-t.width-a<0&&(s=!0),n===q.Top&&e.top-t.height-a<0&&(s=!0),n===q.Bottom&&e.top+e.height+t.height+a>window.innerHeight&&(s=!0),s}static positionCaret(e,t,n,a,s){let r=0,o=0;return e===q.Right?(o=-7,r=i.calculateVerticalCaret(n,t,a,s)):e===q.Left?(o=t.width,r=i.calculateVerticalCaret(n,t,a,s)):e===q.Top?(r=t.height,o=i.calculateHorizontalCaret(n,t,a,s)):e===q.Bottom&&(r=-7,o=i.calculateHorizontalCaret(n,t,a,s)),{top:r,left:o}}static positionContent(e,t,n,a,s){let r=0,o=0;return e===q.Right?(o=n.left+n.width+a,r=i.calculateVerticalAlignment(n,t,s)):e===q.Left?(o=n.left-t.width-a,r=i.calculateVerticalAlignment(n,t,s)):e===q.Top?(r=n.top-t.height-a,o=i.calculateHorizontalAlignment(n,t,s)):e===q.Bottom&&(r=n.top+n.height+a,o=i.calculateHorizontalAlignment(n,t,s)),{top:r,left:o}}static determinePlacement(e,t,n,a){if(i.shouldFlip(n,t,e,a)){if(e===q.Right)return q.Left;if(e===q.Left)return q.Right;if(e===q.Top)return q.Bottom;if(e===q.Bottom)return q.Top}return e}},h0=(()=>{let e=class e{get cssClasses(){let n="ngx-charts-tooltip-content";return n+=` position-${this.placement}`,n+=` type-${this.type}`,n+=` ${this.cssClass}`,n}constructor(n,a,s){this.element=n,this.renderer=a,this.platformId=s}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!si(this.platformId))return;let n=this.element.nativeElement,a=this.host.nativeElement.getBoundingClientRect();if(!a.height&&!a.width)return;let s=n.getBoundingClientRect();this.checkFlip(a,s),this.positionContent(n,a,s),this.showCaret&&this.positionCaret(a,s),setTimeout(()=>this.renderer.addClass(n,"animate"),1)}positionContent(n,a,s){let{top:r,left:o}=Hn.positionContent(this.placement,s,a,this.spacing,this.alignment);this.renderer.setStyle(n,"top",`${r}px`),this.renderer.setStyle(n,"left",`${o}px`)}positionCaret(n,a){let s=this.caretElm.nativeElement,r=s.getBoundingClientRect(),{top:o,left:d}=Hn.positionCaret(this.placement,a,n,r,this.alignment);this.renderer.setStyle(s,"top",`${o}px`),this.renderer.setStyle(s,"left",`${d}px`)}checkFlip(n,a){this.placement=Hn.determinePlacement(this.placement,a,n,this.spacing)}onWindowResize(){this.position()}};e.\u0275fac=function(a){return new(a||e)(A(ti),A(Ms),A(Si))},e.\u0275cmp=E({type:e,selectors:[["ngx-tooltip-content"]],viewQuery:function(a,s){if(a&1&&Ai(Kg,5),a&2){let r;ni(r=ai())&&(s.caretElm=r.first)}},hostVars:2,hostBindings:function(a,s){a&1&&w("resize",function(){return s.onWindowResize()},bo),a&2&&Oe(s.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},standalone:!1,decls:6,vars:6,consts:[["caretElm",""],[3,"hidden"],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(a,s){a&1&&(l(0,"div"),y(1,"span",1,0),l(3,"div",2),Y(4,tf,2,4,"span",3)(5,nf,1,1,"span",4),c()()),a&2&&(h(),Oe(Oo("tooltip-caret position-",s.placement)),x("hidden",!s.showCaret),h(3),x("ngIf",!s.title),h(),x("ngIf",s.title))},dependencies:[st,Bo],styles:[`.ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:#000000bf;font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translateZ(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}
`],encapsulation:2});let i=e;return ho([m0(100)],i.prototype,"onWindowResize",null),i})(),Jr=class{constructor(e){this.injectionService=e,this.defaults={},this.components=new Map}getByType(e=this.type){return this.components.get(e)}create(e){return this.createByType(this.type,e)}createByType(e,t){t=this.assignDefaults(t);let n=this.injectComponent(e,t);return this.register(e,n),n}destroy(e){let t=this.components.get(e.componentType);if(t&&t.length){let n=t.indexOf(e);n>-1&&(t[n].destroy(),t.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(e){let t=this.components.get(e);if(t&&t.length){let n=t.length-1;for(;n>=0;)this.destroy(t[n--])}}injectComponent(e,t){return this.injectionService.appendComponent(e,t)}assignDefaults(e){let t=Z({},this.defaults.inputs),n=Z({},this.defaults.outputs);return!e.inputs&&!e.outputs&&(e={inputs:e}),t&&(e.inputs=Z(Z({},t),e.inputs)),n&&(e.outputs=Z(Z({},n),e.outputs)),e}register(e,t){this.components.has(e)||this.components.set(e,[]),this.components.get(e).push(t)}};function u0(i){return i.element}var Vm=(()=>{let e=class e{static setGlobalRootViewContainer(n){e.globalRootViewContainer=n}constructor(n,a){this.applicationRef=n,this.injector=a}getRootViewContainer(){if(this._container)return this._container;if(e.globalRootViewContainer)return e.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(n){this._container=n}getComponentRootNode(n){return u0(n)?n.element.nativeElement:n.hostView&&n.hostView.rootNodes.length>0?n.hostView.rootNodes[0]:n.location.nativeElement}getRootViewContainerNode(n){return this.getComponentRootNode(n)}projectComponentBindings(n,a){if(a){if(a.inputs!==void 0){let s=Object.getOwnPropertyNames(a.inputs);for(let r of s)n.instance[r]=a.inputs[r]}if(a.outputs!==void 0){let s=Object.getOwnPropertyNames(a.outputs);for(let r of s)n.instance[r]=a.outputs[r]}}return n}appendComponent(n,a={},s){s||(s=this.getRootViewContainer());let r=this.getComponentRootNode(s),o=new rl(r,this.applicationRef,this.injector),d=new sl(n),m=o.attach(d);return this.projectComponentBindings(m,a),m}};e.globalRootViewContainer=null,e.\u0275fac=function(a){return new(a||e)(de(Ao),de(fo))},e.\u0275prov=ge({token:e,factory:e.\u0275fac});let i=e;return i})(),io=(()=>{let e=class e extends Jr{constructor(n){super(n),this.type=h0}};e.\u0275fac=function(a){return new(a||e)(de(Vm))},e.\u0275prov=ge({token:e,factory:e.\u0275fac});let i=e;return i})(),yi=(function(i){return i.Right="right",i.Below="below",i})(yi||{}),Nn=(function(i){return i.ScaleLegend="scaleLegend",i.Legend="legend",i})(Nn||{}),ae=(function(i){return i.Time="time",i.Linear="linear",i.Ordinal="ordinal",i.Quantile="quantile",i})(ae||{});function no(i){return i instanceof Date?i=i.toLocaleDateString():i=i.toLocaleString(),i}function p0(i){return i.toLocaleString().replace(/[&'`"<>]/g,e=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"})[e])}var g0=(()=>{let e=class e{constructor(){this.isActive=!1,this.select=new N,this.activate=new N,this.deactivate=new N,this.toggle=new N}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(a,s){a&1&&w("mouseenter",function(){return s.onMouseEnter()})("mouseleave",function(){return s.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},standalone:!1,decls:4,vars:6,consts:[["tabindex","-1",3,"click","title"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(a,s){a&1&&(l(0,"span",0),w("click",function(){return s.select.emit(s.formattedLabel)}),l(1,"span",1),w("click",function(){return s.toggle.emit(s.formattedLabel)}),c(),l(2,"span",2),u(3),c()()),a&2&&(ne("active",s.isActive),x("title",s.formattedLabel),h(),Ft("background-color",s.color),h(2),F(" ",s.trimmedLabel," "))},encapsulation:2,changeDetection:0});let i=e;return i})(),f0=(()=>{let e=class e{constructor(n){this.cd=n,this.horizontal=!1,this.labelClick=new N,this.labelActivate=new N,this.labelDeactivate=new N,this.legendEntries=[]}ngOnChanges(n){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){let n=[];for(let a of this.data){let s=no(a);n.findIndex(o=>o.label===s)===-1&&n.push({label:a,formattedLabel:s,color:this.colors.getColor(a)})}return n}isActive(n){return this.activeEntries?this.activeEntries.find(s=>n.label===s.name)!==void 0:!1}activate(n){this.labelActivate.emit(n)}deactivate(n){this.labelDeactivate.emit(n)}trackBy(n,a){return a.label}};e.\u0275fac=function(a){return new(a||e)(A(Ps))},e.\u0275cmp=E({type:e,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},standalone:!1,features:[ke],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"select","activate","deactivate","label","formattedLabel","color","isActive"]],template:function(a,s){a&1&&(l(0,"div"),Y(1,af,3,1,"header",0),l(2,"div",1)(3,"ul",2),Y(4,sf,2,4,"li",3),c()()()),a&2&&(Ft("width",s.width,"px"),h(),x("ngIf",(s.title==null?null:s.title.length)>0),h(2),Ft("max-height",s.height-45,"px"),ne("horizontal-legend",s.horizontal),h(),x("ngForOf",s.legendEntries)("ngForTrackBy",s.trackBy))},dependencies:[Li,st,g0],styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:#0000000d}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;-webkit-transition:.2s;-moz-transition:.2s;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
`],encapsulation:2,changeDetection:0});let i=e;return i})(),x0=(()=>{let e=class e{constructor(){this.horizontal=!1}ngOnChanges(n){let a=this.gradientString(this.colors.range(),this.colors.domain()),s=this.horizontal?"right":"bottom";this.gradient=`linear-gradient(to ${s}, ${a})`}gradientString(n,a){a.push(1);let s=[];return n.reverse().forEach((r,o)=>{s.push(`${r} ${Math.round(a[o]*100)}%`)}),s.join(", ")}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},standalone:!1,features:[ke],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(a,s){a&1&&(l(0,"div",0)(1,"div",1)(2,"span"),u(3),c()(),y(4,"div",2),l(5,"div",1)(6,"span"),u(7),c()()()),a&2&&(Ft("height",s.horizontal?void 0:s.height,"px")("width",s.width,"px"),ne("horizontal-legend",s.horizontal),h(3),J(s.valueRange[1].toLocaleString()),h(),Ft("background",s.gradient),h(3),J(s.valueRange[0].toLocaleString()))},styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}
`],encapsulation:2,changeDetection:0});let i=e;return i})(),_0=(()=>{let e=class e{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new N,this.legendLabelActivate=new N,this.legendLabelDeactivate=new N,this.LegendPosition=yi,this.LegendType=Nn}ngOnChanges(n){this.update()}update(){let n=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===yi.Right)&&(this.legendType===Nn.ScaleLegend?n=1:n=2));let a=12-n;this.chartWidth=Math.floor(this.view[0]*a/12),this.legendWidth=!this.legendOptions||this.legendOptions.position===yi.Right?Math.floor(this.view[0]*n/12):this.chartWidth}getLegendType(){return this.legendOptions.scaleType===ae.Linear?Nn.ScaleLegend:Nn.Legend}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},standalone:!1,features:[Vo([io]),ke],ngContentSelectors:rf,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"labelClick","labelActivate","labelDeactivate","horizontal","data","title","colors","height","width","activeEntries"]],template:function(a,s){a&1&&(Do(),l(0,"div",0),D(),l(1,"svg",1),Fo(2),c(),Y(3,of,1,5,"ngx-charts-scale-legend",2)(4,lf,1,7,"ngx-charts-legend",3),c()),a&2&&(Ft("width",s.view[0],"px")("height",s.view[1],"px"),h(),K("width",s.chartWidth)("height",s.view[1]),h(2),x("ngIf",s.showLegend&&s.legendType===s.LegendType.ScaleLegend),h(),x("ngIf",s.showLegend&&s.legendType===s.LegendType.Legend))},dependencies:[st,f0,x0],encapsulation:2,changeDetection:0});let i=e;return i})(),v0=(()=>{let e=class e{constructor(n,a){this.element=n,this.zone=a,this.visible=new N,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let n=()=>{if(!this.element)return;let{offsetHeight:a,offsetWidth:s}=this.element.nativeElement;a&&s?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n())})}};e.\u0275fac=function(a){return new(a||e)(A(ti),A(ii))},e.\u0275dir=sn({type:e,selectors:[["visibility-observer"]],outputs:{visible:"visible"},standalone:!1});let i=e;return i})();function km(i){return toString.call(i)==="[object Date]"}var y0=(()=>{let e=class e{constructor(n,a,s,r){this.chartElement=n,this.zone=a,this.cd=s,this.platformId=r,this.scheme="cool",this.schemeType=ae.Ordinal,this.animations=!0,this.select=new N}ngOnInit(){Rs(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new v0(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(n){this.update()}update(){if(this.results?this.results=this.cloneData(this.results):this.results=[],this.view)this.width=this.view[0],this.height=this.view[1];else{let n=this.getContainerDims();n&&(this.width=n.width,this.height=n.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let n,a,s=this.chartElement.nativeElement;if(si(this.platformId)&&s.parentNode!==null){let r=s.parentNode.getBoundingClientRect();n=r.width,a=r.height}return n&&a?{width:n,height:a}:null}formatDates(){for(let n=0;n<this.results.length;n++){let a=this.results[n];if(a.label=a.name,km(a.label)&&(a.label=a.label.toLocaleDateString()),a.series)for(let s=0;s<a.series.length;s++){let r=a.series[s];r.label=r.name,km(r.label)&&(r.label=r.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!si(this.platformId))return;let a=$n(window,"resize").pipe(zn(200)).subscribe(s=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=a}cloneData(n){let a=[];for(let s of n){let r={};if(s.name!==void 0&&(r.name=s.name),s.value!==void 0&&(r.value=s.value),s.series!==void 0){r.series=[];for(let o of s.series){let d=Object.assign({},o);r.series.push(d)}}s.extra!==void 0&&(r.extra=JSON.parse(JSON.stringify(s.extra))),s.source!==void 0&&(r.source=s.source),s.target!==void 0&&(r.target=s.target),a.push(r)}return a}};e.\u0275fac=function(a){return new(a||e)(A(ti),A(ii),A(Ps),A(Si))},e.\u0275cmp=E({type:e,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},standalone:!1,features:[ke],decls:1,vars:0,template:function(a,s){a&1&&y(0,"div")},encapsulation:2});let i=e;return i})(),me=(function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i})(me||{}),Im=(()=>{let e=class e{constructor(n){this.textHeight=25,this.margin=5,this.element=n.nativeElement}ngOnChanges(n){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case me.Top:this.y=this.offset,this.x=this.width/2;break;case me.Bottom:this.y=this.offset,this.x=this.width/2;break;case me.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case me.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)";break;default:}}};e.\u0275fac=function(a){return new(a||e)(A(ti))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},standalone:!1,features:[ke],attrs:cf,decls:2,vars:6,template:function(a,s){a&1&&(D(),l(0,"text"),u(1),c()),a&2&&(K("stroke-width",s.strokeWidth)("x",s.x)("y",s.y)("text-anchor",s.textAnchor)("transform",s.transform),h(),F(" ",s.label," "))},encapsulation:2,changeDetection:0});let i=e;return i})();function Pm(i,e=16){return typeof i!="string"?typeof i=="number"?i+"":"":(i=i.trim(),i.length<=e?i:`${i.slice(0,e)}...`)}function Rm(i,e){if(i.length>e){let t=[],n=Math.floor(i.length/e);for(let a=0;a<i.length;a++)a%n===0&&t.push(i[a]);i=t}return i}function Nm(i,e,t){let n=(i||"").toString(),a=[];if(/\s/.test(n))a=n.split(/\s+/).reduce((s,r)=>{let o=(s.pop()||"")+" ";return o.length+r.length>e?[...s,o.trim(),r.trim()]:[...s,o+r]},[]);else{let s=0;for(;s<n.length;)a.push(n.substring(s,s+e)),s+=e}return a.length>t&&(a=a.splice(0,t),a[a.length-1]+="..."),a}var Ue=(function(i){return i.Start="start",i.Middle="middle",i.End="end",i})(Ue||{});function Rt(i,e,t,n,a,[s,r,o,d]){let m="";return t=Math.floor(t),n=Math.floor(n),t=t===0?1:t,n=n===0?1:n,m=`M${[i+a,e]}`,m+=`h${t-2*a}`,r?m+=`a${[a,a]} 0 0 1 ${[a,a]}`:m+=`h${a}v${a}`,m+=`v${n-2*a}`,d?m+=`a${[a,a]} 0 0 1 ${[-a,a]}`:m+=`v${a}h${-a}`,m+=`h${2*a-t}`,o?m+=`a${[a,a]} 0 0 1 ${[-a,-a]}`:m+=`h${-a}v${-a}`,m+=`v${2*a-n}`,s?m+=`a${[a,a]} 0 0 1 ${[a,-a]}`:m+=`v${-a}h${a}`,m+="z",m}var Am=(()=>{let e=class e{get isWrapTicksSupported(){return this.wrapTicks&&this.scale.step}constructor(n){this.platformId=n,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.wrapTicks=!1,this.showRefLabels=!1,this.showRefLines=!1,this.dimensionsChanged=new N,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Ue.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10,this.maxPossibleLengthForTickIfWrapped=16,this.referenceLineLength=0}ngOnChanges(n){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!si(this.platformId)){this.dimensionsChanged.emit({height:this.approxHeight});return}let n=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);n!==this.height&&(this.height=n,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){let n=this.scale;this.adjustedScale=this.scale.bandwidth?function(r){return this.scale(r)+this.scale.bandwidth()*.5}:this.scale,this.ticks=this.getTicks();let a=this.orient===me.Top||this.orient===me.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.orient){case me.Bottom:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Ue.Middle,this.x2=this.innerTickSize*a,this.x1=this.tickSpacing*a,this.dx=a<0?"0em":".71em";break;case me.Left:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Ue.End,this.y2=this.innerTickSize*-a,this.y1=this.tickSpacing*-a,this.dx=".32em";break;case me.Top:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Ue.Middle,this.y2=this.innerTickSize*a,this.y1=this.tickSpacing*a,this.dx=a<0?"0em":".71em";break;case me.Right:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Ue.Start,this.x2=this.innerTickSize*-a,this.x1=this.tickSpacing*-a,this.dx=".32em";break;default:}this.tickFormatting?this.tickFormat=this.tickFormatting:n.tickFormat?this.tickFormat=n.tickFormat.apply(n,this.tickArguments):this.tickFormat=function(r){return r.constructor.name==="Date"?r.toLocaleDateString():r.toLocaleString()};let s=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.textTransform="",s&&s!==0?(this.textTransform=`rotate(${s})`,this.textAnchor=Ue.End,this.verticalSpacing=10):this.textAnchor=Ue.Middle,setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(n=>n.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(n=>n.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=Rt(this.refMax,-this.gridLineHeight+25,this.refMin-this.refMax,this.gridLineHeight,0,[!1,!1,!1,!1])}getRotationAngle(n){let a=0;this.maxTicksLength=0;for(let _=0;_<n.length;_++){let b=this.tickFormat(n[_]).toString(),v=b.length;this.trimTicks&&(v=this.tickTrim(b).length),v>this.maxTicksLength&&(this.maxTicksLength=v)}let s=Math.min(this.maxTicksLength,this.maxAllowedLength),r=7,o=s*r,d=o,m=Math.floor(this.width/n.length);for(;d>m&&a>-90;)a-=30,d=Math.cos(a*(Math.PI/180))*o;let p=14;if(this.isWrapTicksSupported){let _=this.ticks.reduce((v,T)=>T.length>v.length?T:v,"");p=14*(this.tickChunks(_).length||1),this.maxPossibleLengthForTickIfWrapped=this.getMaxPossibleLengthForTick(_)}let g=a!==0?Math.max(Math.abs(Math.sin(a*Math.PI/180))*this.maxTickLength*r,10):p;return this.approxHeight=Math.min(g,200),this.showRefLines&&this.referenceLines&&this.setReferencelines(),a}getTicks(){let n,a=this.getMaxTicks(20),s=this.getMaxTicks(100);return this.tickValues?n=this.tickValues:this.scale.ticks?n=this.scale.ticks.apply(this.scale,[s]):(n=this.scale.domain(),n=Rm(n,a)),n}getMaxTicks(n){return Math.floor(this.width/n)}tickTransform(n){return"translate("+this.adjustedScale(n)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(n){return this.trimTicks?Pm(n,this.maxTickLength):n}getMaxPossibleLengthForTick(n){if(this.scale.bandwidth){let s=Math.floor(this.scale.bandwidth()/7),r=n.slice(0,s);return Math.max(r.length,this.maxTickLength)}return this.maxTickLength}tickChunks(n){if(n.toString().length>this.maxTickLength&&this.scale.bandwidth){let s=this.rotateTicks?Math.floor(this.scale.step()/14):5;if(s<=1)return[this.tickTrim(n)];let r=Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength);return si(this.platformId)||(r=Math.floor(Math.min(this.approxHeight/5,Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength)))),s=Math.min(s,5),Nm(n,r,s<1?1:s)}return[this.tickTrim(n)]}};e.\u0275fac=function(a){return new(a||e)(A(Si))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(a,s){if(a&1&&Ai(Om,5),a&2){let r;ni(r=ai())&&(s.ticksElement=r.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks",wrapTicks:"wrapTicks",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[ke],attrs:df,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],["class","ref-line",4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01","font-size","12px"],[4,"ngIf","ngIfThen","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],["y2","0",1,"gridline-path","gridline-path-vertical"],[1,"reference-area"],[1,"ref-line"],["y1","25",1,"refline-path","gridline-path-vertical"],["transform","rotate(-270) translate(5, -5)",1,"refline-label"]],template:function(a,s){a&1&&(D(),l(0,"g",null,0),Y(2,xf,2,2,"g",3),c(),Y(3,vf,2,2,"g",4)(4,yf,1,2,"path",5)(5,Tf,2,1,"g",6)),a&2&&(h(2),x("ngForOf",s.ticks),h(),x("ngForOf",s.ticks),h(),x("ngIf",s.referenceLineLength>1&&s.refMax&&s.refMin&&s.showRefLines),h(),x("ngForOf",s.referenceLines))},dependencies:[Li,st],encapsulation:2,changeDetection:0});let i=e;return i})(),b0=(()=>{let e=class e{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=me.Bottom,this.xAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new N,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=me}ngOnChanges(n){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,typeof this.xAxisTickCount<"u"&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:n}){let a=n+25+5;a!==this.labelOffset&&(this.labelOffset=a,setTimeout(()=>{this.dimensionsChanged.emit({height:n})},0))}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(a,s){if(a&1&&Ai(Am,5),a&2){let r;ni(r=ai())&&(s.ticksComponent=r.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",xAxisOffset:"xAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[ke],attrs:Sf,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","referenceLines","showRefLines","showRefLabels","width","tickValues","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"dimensionsChanged","trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","referenceLines","showRefLines","showRefLabels","width","tickValues","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(a,s){a&1&&(D(),l(0,"g"),Y(1,Cf,1,16,"g",0)(2,kf,1,5,"g",1),c()),a&2&&(K("class",s.xAxisClassName)("transform",s.transform),h(),x("ngIf",s.xScale),h(),x("ngIf",s.showLabel))},dependencies:[st,Im,Am],encapsulation:2,changeDetection:0});let i=e;return i})(),Em=(()=>{let e=class e{constructor(n){this.platformId=n,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.wrapTicks=!1,this.dimensionsChanged=new N,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Ue.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=me}ngOnChanges(n){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!si(this.platformId)){this.width=this.getApproximateAxisWidth(),this.dimensionsChanged.emit({width:this.width});return}let n=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);n!==this.width&&(this.width=n,this.dimensionsChanged.emit({width:n}),setTimeout(()=>this.updateDims()))}update(){let n=this.scale,a=this.orient===me.Top||this.orient===me.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:n.tickFormat?this.tickFormat=n.tickFormat.apply(n,this.tickArguments):this.tickFormat=function(s){return s.constructor.name==="Date"?s.toLocaleDateString():s.toLocaleString()},this.adjustedScale=n.bandwidth?s=>{let r=n(s)+n.bandwidth()*.5;if(this.wrapTicks&&s.toString().length>this.maxTickLength){let o=this.tickChunks(s).length;if(o===1)return r;let d=n.bandwidth(),m=o*8,p=d*.5-m*.5;return n(s)+p}return r}:n,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case me.Top:this.transform=function(s){return"translate("+this.adjustedScale(s)+",0)"},this.textAnchor=Ue.Middle,this.y2=this.innerTickSize*a,this.y1=this.tickSpacing*a,this.dy=a<0?"0em":".71em";break;case me.Bottom:this.transform=function(s){return"translate("+this.adjustedScale(s)+",0)"},this.textAnchor=Ue.Middle,this.y2=this.innerTickSize*a,this.y1=this.tickSpacing*a,this.dy=a<0?"0em":".71em";break;case me.Left:this.transform=function(s){return"translate(0,"+this.adjustedScale(s)+")"},this.textAnchor=Ue.End,this.x2=this.innerTickSize*-a,this.x1=this.tickSpacing*-a,this.dy=".32em";break;case me.Right:this.transform=function(s){return"translate(0,"+this.adjustedScale(s)+")"},this.textAnchor=Ue.Start,this.x2=this.innerTickSize*-a,this.x1=this.tickSpacing*-a,this.dy=".32em";break;default:}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(n=>n.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(n=>n.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=Rt(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let n,a=this.getMaxTicks(20),s=this.getMaxTicks(50);return this.tickValues?n=this.tickValues:this.scale.ticks?n=this.scale.ticks.apply(this.scale,[s]):(n=this.scale.domain(),n=Rm(n,a)),n}getMaxTicks(n){return Math.floor(this.height/n)}tickTransform(n){return`translate(${this.adjustedScale(n)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(n){return this.trimTicks?Pm(n,this.maxTickLength):n}getApproximateAxisWidth(){return Math.max(...this.ticks.map(s=>this.tickTrim(this.tickFormat(s)).length))*7}tickChunks(n){if(n.toString().length>this.maxTickLength&&this.scale.bandwidth){let a=this.maxTickLength,s=Math.floor(this.scale.bandwidth()/15);return s<=1?[this.tickTrim(n)]:Nm(n,a,Math.min(s,5))}return[this.tickFormat(n)]}};e.\u0275fac=function(a){return new(a||e)(A(Si))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(a,s){if(a&1&&Ai(Om,5),a&2){let r;ni(r=ai())&&(s.ticksElement=r.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[ke],attrs:Af,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],["class","ref-line",4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],[1,"reference-area"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],[1,"ref-line"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(a,s){a&1&&(D(),l(0,"g",null,0),Y(2,If,2,2,"g",3),c(),Y(3,Pf,1,2,"path",4)(4,Bf,2,2,"g",5)(5,zf,2,1,"g",6)),a&2&&(h(2),x("ngForOf",s.ticks),h(),x("ngIf",s.referenceLineLength>1&&s.refMax&&s.refMin&&s.showRefLines),h(),x("ngForOf",s.ticks),h(),x("ngForOf",s.referenceLines))},dependencies:[Li,st],encapsulation:2,changeDetection:0});let i=e;return i})(),w0=(()=>{let e=class e{constructor(){this.showGridLines=!1,this.yOrient=me.Left,this.yAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new N,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(n){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===me.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):this.transform=`translate(${this.offset} , 0)`,this.yAxisTickCount!==void 0&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:n}){n!==this.labelOffset&&this.yOrient===me.Right?(this.labelOffset=n+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:n})},0)):n!==this.labelOffset&&(this.labelOffset=n,setTimeout(()=>{this.dimensionsChanged.emit({width:n})},0))}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(a,s){if(a&1&&Ai(Em,5),a&2){let r;ni(r=ai())&&(s.ticksComponent=r.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[ke],attrs:Xf,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"dimensionsChanged","trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(a,s){a&1&&(D(),l(0,"g"),Y(1,Wf,1,15,"g",0)(2,Yf,1,5,"g",1),c()),a&2&&(K("class",s.yAxisClassName)("transform",s.transform),h(),x("ngIf",s.yScale),h(),x("ngIf",s.showLabel))},dependencies:[st,Im,Em],encapsulation:2,changeDetection:0});let i=e;return i})(),Lm=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[je]});let i=e;return i})(),ao=(function(i){return i.popover="popover",i.tooltip="tooltip",i})(ao||{}),en=(function(i){return i[i.all="all"]="all",i[i.focus="focus"]="focus",i[i.mouseover="mouseover"]="mouseover",i})(en||{}),T0=(()=>{let e=class e{get listensForFocus(){return this.tooltipShowEvent===en.all||this.tooltipShowEvent===en.focus}get listensForHover(){return this.tooltipShowEvent===en.all||this.tooltipShowEvent===en.mouseover}constructor(n,a,s){this.tooltipService=n,this.viewContainerRef=a,this.renderer=s,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=q.Top,this.tooltipAlignment=q.Center,this.tooltipType=ao.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=en.all,this.tooltipImmediateExit=!1,this.show=new N,this.hide=new N}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(n){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(n))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(n){if(this.component||this.tooltipDisabled)return;let a=n?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?400:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();let s=this.createBoundOptions();this.component=this.tooltipService.create(s),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},a)}addHideListeners(n){this.mouseEnterContentEvent=this.renderer.listen(n,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(n,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",a=>{n.contains(a.target)||this.hideTooltip()}))}hideTooltip(n=!1){if(!this.component)return;let a=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),n?a():this.timeout=setTimeout(a,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}};e.\u0275fac=function(a){return new(a||e)(A(io),A(So),A(Ms))},e.\u0275dir=sn({type:e,selectors:[["","ngx-tooltip",""]],hostBindings:function(a,s){a&1&&w("focusin",function(){return s.onFocus()})("blur",function(){return s.onBlur()})("mouseenter",function(){return s.onMouseEnter()})("mouseleave",function(o){return s.onMouseLeave(o.target)})("click",function(){return s.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"},standalone:!1});let i=e;return i})(),Dm=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({providers:[Vm,io],imports:[je]});let i=e;return i})(),Fm={};function Hm(){let i=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return i=`a${i}`,Fm[i]?Hm():(Fm[i]=!0,i)}var Ne=(function(i){return i.Vertical="vertical",i.Horizontal="horizontal",i})(Ne||{});var S0=(()=>{let e=class e{constructor(){this.orientation=Ne.Vertical}ngOnChanges(n){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===Ne.Horizontal?this.x2="100%":this.orientation===Ne.Vertical&&(this.y1="100%")}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},standalone:!1,features:[ke],attrs:qf,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(a,s){a&1&&(D(),l(0,"linearGradient",0),Y(1,jf,1,5,"stop",1),c()),a&2&&(x("id",s.name),K("x1",s.x1)("y1",s.y1)("x2",s.x2)("y2",s.y2),h(),x("ngForOf",s.stops))},dependencies:[Li],encapsulation:2,changeDetection:0});let i=e;return i})();var eo;typeof window<"u"?eo=window:typeof global<"u"&&(eo=global);var o2=eo.MouseEvent;var Qe=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[je,Lm,Dm,je,Lm,Dm]});let i=e;return i})();function C0({width:i,height:e,margins:t,showXAxis:n=!1,showYAxis:a=!1,xAxisHeight:s=0,yAxisWidth:r=0,showXLabel:o=!1,showYLabel:d=!1,showLegend:m=!1,legendType:p=ae.Ordinal,legendPosition:g=yi.Right,columns:_=12}){let b=t[3],v=i,T=e-t[0]-t[2];return m&&g===yi.Right&&(p===ae.Ordinal?_-=2:_-=1),v=v*_/12,v=v-t[1]-t[3],n&&(T-=5,T-=s,o&&(T-=30)),a&&(v-=5,v-=r,b+=r,b+=10,d&&(v-=30,b+=30)),v=Math.max(0,v),T=Math.max(0,T),{width:Math.floor(v),height:Math.floor(T),xOffset:Math.floor(b)}}var Mm=[{name:"vivid",selectable:!0,group:ae.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:ae.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:ae.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:ae.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:ae.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:ae.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:ae.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:ae.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:ae.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:ae.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:ae.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:ae.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:ae.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:ae.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:ae.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}],to=class{constructor(e,t,n,a){typeof e=="string"&&(e=Mm.find(s=>s.name===e)),this.colorDomain=e.domain,this.scaleType=t,this.domain=n,this.customColors=a,this.scale=this.generateColorScheme(e,t,this.domain)}generateColorScheme(e,t,n){typeof e=="string"&&(e=Mm.find(s=>s.name===e));let a;switch(t){case ae.Quantile:a=Rn().range(e.domain).domain(n);break;case ae.Ordinal:a=_i().range(e.domain).domain(n);break;case ae.Linear:{let s=[...e.domain];s.length===1&&(s.push(s[0]),this.colorDomain=s);let r=Zi(0,1,1/s.length);a=Qt().range(s).domain(r)}break;default:break}return a}getColor(e){if(e==null)throw new Error("Value can not be null");if(this.scaleType===ae.Linear){let t=Qt().domain(this.domain).range([0,1]);return this.scale(t(e))}else{if(typeof this.customColors=="function")return this.customColors(e);let t=e.toString(),n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(a=>a.name.toLowerCase()===t.toLowerCase())),n?n.value:this.scale(e)}}getLinearGradientStops(e,t){t===void 0&&(t=this.domain[0]);let n=Qt().domain(this.domain).range([0,1]),a=Ki().domain(this.colorDomain).range([0,1]),s=this.getColor(e),r=n(t),o=this.getColor(t),d=n(e),m=1,p=r,g=[];for(g.push({color:o,offset:r,originalOffset:r,opacity:1});p<d&&m<this.colorDomain.length;){let _=this.colorDomain[m],b=a(_);if(b<=r){m++;continue}if(b.toFixed(4)>=(d-a.bandwidth()).toFixed(4))break;g.push({color:_,offset:b,opacity:1}),p=b,m++}if(g[g.length-1].offset<100&&g.push({color:s,offset:d,opacity:1}),d===r)g[0].offset=0,g[1].offset=100;else if(g[g.length-1].offset!==100)for(let _ of g)_.offset=(_.offset-r)/(d-r)*100;return g}};var k0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})(),A0=(()=>{let e=class e{constructor(n){this.roundEdges=!0,this.gradient=!1,this.offset=0,this.isActive=!1,this.animations=!0,this.noBarWhenZero=!0,this.select=new N,this.activate=new N,this.deactivate=new N,this.hasGradient=!1,this.hideBar=!1,this.element=n.nativeElement}ngOnChanges(n){n.roundEdges&&this.loadAnimation(),this.update()}update(){this.gradientId="grad"+Hm().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl(),this.checkToHideBar()}loadAnimation(){this.path=this.getStartingPath(),setTimeout(this.update.bind(this),100)}updatePathEl(){let n=yn(this.element).select(".bar"),a=this.getPath();this.animations?n.transition().duration(500).attr("d",a):n.attr("d",a)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.getStartOpacity()},{offset:100,color:this.fill,opacity:1}]}getStartingPath(){if(!this.animations)return this.getPath();let n=this.getRadius(),a;return this.roundEdges?this.orientation===Ne.Vertical?(n=Math.min(this.height,n),a=Rt(this.x,this.y+this.height,this.width,1,0,this.edges)):this.orientation===Ne.Horizontal&&(n=Math.min(this.width,n),a=Rt(this.x,this.y,1,this.height,0,this.edges)):this.orientation===Ne.Vertical?a=Rt(this.x,this.y+this.height,this.width,1,0,this.edges):this.orientation===Ne.Horizontal&&(a=Rt(this.x,this.y,1,this.height,0,this.edges)),a}getPath(){let n=this.getRadius(),a;return this.roundEdges?this.orientation===Ne.Vertical?(n=Math.min(this.height,n),a=Rt(this.x,this.y,this.width,this.height,n,this.edges)):this.orientation===Ne.Horizontal&&(n=Math.min(this.width,n),a=Rt(this.x,this.y,this.width,this.height,n,this.edges)):a=Rt(this.x,this.y,this.width,this.height,n,this.edges),a}getRadius(){let n=0;return this.roundEdges&&this.height>5&&this.width>5&&(n=Math.floor(Math.min(5,this.height/2,this.width/2))),n}getStartOpacity(){return this.roundEdges?.2:.5}get edges(){let n=[!1,!1,!1,!1];return this.roundEdges&&(this.orientation===Ne.Vertical?this.data.value>0?n=[!0,!0,!1,!1]:n=[!1,!1,!0,!0]:this.orientation===Ne.Horizontal&&(this.data.value>0?n=[!1,!0,!1,!0]:n=[!0,!1,!0,!1])),n}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}checkToHideBar(){this.hideBar=this.noBarWhenZero&&(this.orientation===Ne.Vertical&&this.height===0||this.orientation===Ne.Horizontal&&this.width===0)}};e.\u0275fac=function(a){return new(a||e)(A(ti))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-bar",""]],hostBindings:function(a,s){a&1&&w("mouseenter",function(){return s.onMouseEnter()})("mouseleave",function(){return s.onMouseLeave()})},inputs:{fill:"fill",data:"data",width:"width",height:"height",x:"x",y:"y",orientation:"orientation",roundEdges:"roundEdges",gradient:"gradient",offset:"offset",isActive:"isActive",stops:"stops",animations:"animations",ariaLabel:"ariaLabel",noBarWhenZero:"noBarWhenZero"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},standalone:!1,features:[ke],attrs:Kf,decls:2,vars:8,consts:[[4,"ngIf"],["stroke","none","role","img","tabIndex","-1",1,"bar",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(a,s){a&1&&(Y(0,Jf,2,3,"defs",0),D(),l(1,"path",1),w("click",function(){return s.select.emit(s.data)}),c()),a&2&&(x("ngIf",s.hasGradient),h(),ne("active",s.isActive)("hidden",s.hideBar),K("d",s.path)("aria-label",s.ariaLabel)("fill",s.hasGradient?s.gradientFill:s.fill))},dependencies:[st,S0],encapsulation:2,changeDetection:0});let i=e;return i})(),Zt=(function(i){return i.Standard="standard",i.Normalized="normalized",i.Stacked="stacked",i})(Zt||{}),tn=(function(i){return i.positive="positive",i.negative="negative",i})(tn||{}),E0=(()=>{let e=class e{constructor(n){this.dimensionsChanged=new N,this.horizontalPadding=2,this.verticalPadding=5,this.element=n.nativeElement}ngOnChanges(n){this.update()}getSize(){let n=this.element.getBoundingClientRect().height,a=this.element.getBoundingClientRect().width;return{height:n,width:a,negative:this.value<0}}ngAfterViewInit(){this.dimensionsChanged.emit(this.getSize())}update(){this.valueFormatting?this.formatedValue=this.valueFormatting(this.value):this.formatedValue=no(this.value),this.orientation==="horizontal"?(this.x=this.barX+this.barWidth,this.value<0?(this.x=this.x-this.horizontalPadding,this.textAnchor="end"):(this.x=this.x+this.horizontalPadding,this.textAnchor="start"),this.y=this.barY+this.barHeight/2):(this.x=this.barX+this.barWidth/2,this.y=this.barY+this.barHeight,this.value<0?(this.y=this.y+this.verticalPadding,this.textAnchor="end"):(this.y=this.y-this.verticalPadding,this.textAnchor="start"),this.transform=`rotate(-45, ${this.x} , ${this.y})`)}};e.\u0275fac=function(a){return new(a||e)(A(ti))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-bar-label",""]],inputs:{value:"value",valueFormatting:"valueFormatting",barX:"barX",barY:"barY",barWidth:"barWidth",barHeight:"barHeight",orientation:"orientation"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[ke],attrs:e0,decls:2,vars:5,consts:[["alignment-baseline","middle",1,"textDataLabel"]],template:function(a,s){a&1&&(D(),l(0,"text",0),u(1),c()),a&2&&(K("text-anchor",s.textAnchor)("transform",s.transform)("x",s.x)("y",s.y),h(),F(" ",s.formatedValue," "))},styles:[".textDataLabel[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0});let i=e;return i})();var L0=(()=>{let e=class e{constructor(n){this.platformId=n,this.type=Zt.Standard,this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new N,this.activate=new N,this.deactivate=new N,this.dataLabelHeightChanged=new N,this.barsForDataLabels=[],this.barOrientation=Ne,this.isSSR=!1}ngOnInit(){Rs(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){this.updateTooltipSettings();let n;this.series.length&&(n=this.xScale.bandwidth()),n=Math.round(n);let a=Math.max(this.yScale.domain()[0],0),s={[tn.positive]:0,[tn.negative]:0},r=tn.positive,o;this.type===Zt.Normalized&&(o=this.series.map(d=>d.value).reduce((d,m)=>d+m,0)),this.bars=this.series.map((d,m)=>{let p=d.value,g=this.getLabel(d),_=no(g),b=this.roundEdges;r=p>0?tn.positive:tn.negative;let v={value:p,label:g,roundEdges:b,data:d,width:n,formattedLabel:_,height:0,x:0,y:0};if(this.type===Zt.Standard)v.height=Math.abs(this.yScale(p)-this.yScale(a)),v.x=this.xScale(g),p<0?v.y=this.yScale(0):v.y=this.yScale(p);else if(this.type===Zt.Stacked){let O=s[r],$=O+p;s[r]+=p,v.height=this.yScale(O)-this.yScale($),v.x=0,v.y=this.yScale($),v.offset0=O,v.offset1=$}else if(this.type===Zt.Normalized){let O=s[r],$=O+p;s[r]+=p,o>0?(O=O*100/o,$=$*100/o):(O=0,$=0),v.height=this.yScale(O)-this.yScale($),v.x=0,v.y=this.yScale($),v.offset0=O,v.offset1=$,p=($-O).toFixed(2)+"%"}this.colors.scaleType===ae.Ordinal?v.color=this.colors.getColor(g):this.type===Zt.Standard?(v.color=this.colors.getColor(p),v.gradientStops=this.colors.getLinearGradientStops(p)):(v.color=this.colors.getColor(v.offset1),v.gradientStops=this.colors.getLinearGradientStops(v.offset1,v.offset0));let T=_;return v.ariaLabel=_+" "+p.toLocaleString(),this.seriesName!==null&&this.seriesName!==void 0&&(T=`${this.seriesName} \u2022 ${_}`,v.data.series=this.seriesName,v.ariaLabel=this.seriesName+" "+v.ariaLabel),v.tooltipText=this.tooltipDisabled?void 0:`
        <span class="tooltip-label">${p0(T)}</span>
        <span class="tooltip-val">${this.dataLabelFormatting?this.dataLabelFormatting(p):p.toLocaleString()}</span>
      `,v}),this.updateDataLabels()}updateDataLabels(){if(this.type===Zt.Stacked){this.barsForDataLabels=[];let n={};n.series=this.seriesName;let a=this.series.map(r=>r.value).reduce((r,o)=>o>0?r+o:r,0),s=this.series.map(r=>r.value).reduce((r,o)=>o<0?r+o:r,0);n.total=a+s,n.x=0,n.y=0,n.total>0?n.height=this.yScale(a):n.height=this.yScale(s),n.width=this.xScale.bandwidth(),this.barsForDataLabels.push(n)}else this.barsForDataLabels=this.series.map(n=>{let a={};return a.series=this.seriesName??n.label,a.total=n.value,a.x=this.xScale(n.label),a.y=this.yScale(0),a.height=this.yScale(a.total)-this.yScale(0),a.width=this.xScale.bandwidth(),a})}updateTooltipSettings(){this.tooltipPlacement=this.tooltipDisabled?void 0:q.Top,this.tooltipType=this.tooltipDisabled?void 0:ao.tooltip}isActive(n){return this.activeEntries?this.activeEntries.find(s=>n.name===s.name&&n.value===s.value)!==void 0:!1}onClick(n){this.select.emit(n)}getLabel(n){return n.label?n.label:n.name}trackBy(n,a){return a.label}trackDataLabelBy(n,a){return n+"#"+a.series+"#"+a.total}};e.\u0275fac=function(a){return new(a||e)(A(Si))},e.\u0275cmp=E({type:e,selectors:[["g","ngx-charts-series-vertical",""]],inputs:{dims:"dims",type:"type",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",animations:"animations",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",noBarWhenZero:"noBarWhenZero"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelHeightChanged:"dataLabelHeightChanged"},standalone:!1,features:[ke],attrs:t0,decls:3,vars:3,consts:[[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar","","ngx-tooltip","",3,"select","activate","deactivate","width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"dimensionsChanged","barX","barY","barWidth","barHeight","value","valueFormatting","orientation"]],template:function(a,s){a&1&&Y(0,n0,2,2,"g",0)(1,s0,2,2,"g",0)(2,o0,2,2,"g",0),a&2&&(x("ngIf",!s.isSSR),h(),x("ngIf",s.isSSR),h(),x("ngIf",s.showDataLabel))},dependencies:[Li,st,T0,A0,E0],encapsulation:2,data:{animation:[Bs("animationState",[$s(":leave",[oi({opacity:1}),Gs(500,oi({opacity:0}))])])]},changeDetection:0});let i=e;return i})(),Bm=(()=>{let e=class e extends y0{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition=yi.Right,this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.wrapTicks=!1,this.activate=new N,this.deactivate=new N,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}ngOnChanges(){this.update()}update(){if(super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=C0({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`,this.showRefLines){let n=yn(this.chartElement.nativeElement).select(".bar-chart").node();yn(this.chartElement.nativeElement).selectAll(".ref-line").nodes().forEach(s=>n.appendChild(s))}}getXScale(){this.xDomain=this.getXDomain();let n=this.xDomain.length/(this.dims.width/this.barPadding+1);return Ki().range([0,this.dims.width]).paddingInner(n).domain(this.xDomain)}getYScale(){this.yDomain=this.getYDomain();let n=Qt().range([this.dims.height,0]).domain(this.yDomain);return this.roundDomains?n.nice():n}getXDomain(){return this.results.map(n=>n.label)}getYDomain(){let n=this.results.map(r=>r.value),a=this.yScaleMin?Math.min(this.yScaleMin,...n):Math.min(0,...n);this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(a=Math.min(a,...this.yAxisTicks));let s=this.yScaleMax?Math.max(this.yScaleMax,...n):Math.max(0,...n);return this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(s=Math.max(s,...this.yAxisTicks)),[a,s]}onClick(n){this.select.emit(n)}setColors(){let n;this.schemeType===ae.Ordinal?n=this.xDomain:n=this.yDomain,this.colors=new to(this.scheme,this.schemeType,n,this.customColors)}getLegendOptions(){let n={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return n.scaleType===ae.Ordinal?(n.domain=this.xDomain,n.colors=this.colors,n.title=this.legendTitle):(n.domain=this.yDomain,n.colors=this.colors.scale),n}updateYAxisWidth({width:n}){this.yAxisWidth=n,this.update()}updateXAxisHeight({height:n}){this.xAxisHeight=n,this.update()}onDataLabelMaxHeightChanged(n){n.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,n.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,n.size.height),n.index===this.results.length-1&&setTimeout(()=>this.update())}onActivate(n,a=!1){n=this.results.find(r=>a?r.label===n.name:r.name===n.name),!(this.activeEntries.findIndex(r=>r.name===n.name&&r.value===n.value&&r.series===n.series)>-1)&&(this.activeEntries=[n,...this.activeEntries],this.activate.emit({value:n,entries:this.activeEntries}))}onDeactivate(n,a=!1){n=this.results.find(r=>a?r.label===n.name:r.name===n.name);let s=this.activeEntries.findIndex(r=>r.name===n.name&&r.value===n.value&&r.series===n.series);this.activeEntries.splice(s,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:n,entries:this.activeEntries})}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=_o(e)))(s||e)}})(),e.\u0275cmp=E({type:e,selectors:[["ngx-charts-bar-vertical"]],contentQueries:function(a,s,r){if(a&1&&Mo(r,Uf,5),a&2){let o;ni(o=ai())&&(s.tooltipTemplate=o.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",tooltipDisabled:"tooltipDisabled",gradient:"gradient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",yScaleMax:"yScaleMax",yScaleMin:"yScaleMin",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",noBarWhenZero:"noBarWhenZero",wrapTicks:"wrapTicks"},outputs:{activate:"activate",deactivate:"deactivate"},standalone:!1,features:[ko,ke],decls:5,vars:25,consts:[[3,"legendLabelClick","legendLabelActivate","legendLabelDeactivate","view","showLegend","legendOptions","activeEntries","animations"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"activate","deactivate","select","dataLabelHeightChanged","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","activeEntries","roundEdges","animations","noBarWhenZero"],["ngx-charts-x-axis","",3,"dimensionsChanged","xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","wrapTicks"],["ngx-charts-y-axis","",3,"dimensionsChanged","yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks"]],template:function(a,s){a&1&&(l(0,"ngx-charts-chart",0),w("legendLabelClick",function(o){return s.onClick(o)})("legendLabelActivate",function(o){return s.onActivate(o,!0)})("legendLabelDeactivate",function(o){return s.onDeactivate(o,!0)}),D(),l(1,"g",1),Y(2,l0,1,12,"g",2)(3,c0,1,13,"g",3),l(4,"g",4),w("activate",function(o){return s.onActivate(o)})("deactivate",function(o){return s.onDeactivate(o)})("select",function(o){return s.onClick(o)})("dataLabelHeightChanged",function(o){return s.onDataLabelMaxHeightChanged(o)}),c()()()),a&2&&(x("view",Io(22,Qf,s.width,s.height))("showLegend",s.legend)("legendOptions",s.legendOptions)("activeEntries",s.activeEntries)("animations",s.animations),h(),K("transform",s.transform),h(),x("ngIf",s.xAxis),h(),x("ngIf",s.yAxis),h(),x("xScale",s.xScale)("yScale",s.yScale)("colors",s.colors)("series",s.results)("dims",s.dims)("gradient",s.gradient)("tooltipDisabled",s.tooltipDisabled)("tooltipTemplate",s.tooltipTemplate)("showDataLabel",s.showDataLabel)("dataLabelFormatting",s.dataLabelFormatting)("activeEntries",s.activeEntries)("roundEdges",s.roundEdges)("animations",s.animations)("noBarWhenZero",s.noBarWhenZero))},dependencies:[st,b0,w0,_0,L0],styles:[Zf],encapsulation:2,changeDetection:0});let i=e;return i})();var Gm=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var D0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var F0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var M0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var $m=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var l2=2*Math.PI;var so=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})(),O0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe,so,$m]});let i=e;return i})();var V0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var I0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})();var P0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe,so,Gm]});let i=e;return i})();function R0(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}var N0=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe]});let i=e;return i})(),zm=(()=>{let e=class e{constructor(){R0()}};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=be({type:e}),e.\u0275inj=ye({imports:[Qe,k0,Gm,D0,F0,M0,N0,$m,O0,V0,so,I0,P0]});let i=e;return i})();var B0=()=>["all","animal","habitat","service"],G0=()=>[1100,400],$0=(i,e)=>e.name;function z0(i,e){if(i&1){let t=R();l(0,"button",12),w("click",function(){let a=S(t).$implicit,s=f();return C(s.setFilter(a))}),u(1),c()}if(i&2){let t=e.$implicit,n=f();ne("bg-tertiary",n.currentFilter()===t)("text-white",n.currentFilter()===t),h(),F(" ",t==="all"?"Tous":t," ")}}function X0(i,e){if(i&1&&(l(0,"div",9)(1,"div",13),y(2,"img",14),c(),l(3,"span",15),u(4),c(),l(5,"span",16),u(6),c()()),i&2){let t=e.$implicit;h(2),x("src",t.extra.image,Ae)("alt",t.name),h(2),J(t.name),h(2),F("",t.value," visites")}}var ls=class i{trackingService=G(Un);animalService=G(Ii);habitatService=G(Xt);serviceService=G(jn);customColors=[{name:"Animaux",value:"#557A46"},{name:"Habitats",value:"#7A9D54"},{name:"Services",value:"#A4D0A4"}];colorScheme="forest";animals=k([]);habitats=k([]);services=k([]);stats=k([]);currentFilter=k("all");visitData=k([]);categoryTypes=fe(()=>["all",...new Set(this.stats().map(e=>e.category_type))]);filteredData=fe(()=>{let e=this.visitData();return this.currentFilter()==="all"?e:e.filter(t=>t.extra.type===this.currentFilter())});chartData=fe(()=>this.filteredData());constructor(){this.initializeSubscriptions()}ngOnInit(){this.loadEntities(),setTimeout(()=>this.loadVisitStats(),1e3)}initializeSubscriptions(){this.trackingService.visitStats$.subscribe(e=>this.stats.set(e)),this.trackingService.refreshStats()}loadEntities(){this.loadAnimals(),this.loadHabitats(),this.loadServices()}loadAnimals(){this.animalService.getAnimals().subscribe(e=>{this.animals.set(e)})}loadHabitats(){this.habitatService.getHabitats().subscribe(e=>{this.habitats.set(e)})}loadServices(){this.serviceService.getServices().subscribe(e=>{this.services.set(e)})}loadVisitStats(){this.trackingService.visitStats$.subscribe({next:e=>{let t=e.map(n=>({name:n.category_name,value:n.visit_count||0,extra:{image:this.getImageUrl(n.category_type,n.category_name),type:n.category_type}}));this.visitData.set(t)},error:e=>console.error("Erreur lors du chargement des statistiques:",e)}),this.trackingService.refreshStats()}getImageUrl(e,t){let n=`${we.apiUrl}/api/uploads`;switch(e){case"animal":return this.getAnimalImage(t,n);case"habitat":return this.getHabitatImage(t,n);case"service":return this.getServiceImage(t,n);default:return`${n}/default.webp`}}getAnimalImage(e,t){let n=this.animals().find(a=>a.name===e);return n?.images?`${t}/animals/${n.images.split("/").pop()}`:`${t}/animals/default.webp`}getHabitatImage(e,t){let n=this.habitats().find(a=>a.name===e);return n?.images?`${t}/habitats/${n.images.split("/").pop()}`:`${t}/habitats/default.webp`}getServiceImage(e,t){let n=this.services().find(a=>a.name===e);return n?.images?`${t}/services/${n.images.split("/").pop()}`:`${t}/services/default.webp`}setFilter(e){this.currentFilter.set(e)}exportData(){let e=this.stats(),t=this.convertToCSV(e);this.downloadCSV(t)}convertToCSV(e){let t=["Cat\xE9gorie","Type","Nombre de visites","Pourcentage"],n=e.map(a=>[a.category_name,a.category_type,a.visit_count,a.visit_percentage]);return[t,...n].map(a=>a.join(",")).join(`
`)}downloadCSV(e){let t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="statistiques-visites.csv",a.click()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-visit-stats"]],decls:15,vars:18,consts:[[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-tertiary"],[1,"flex","gap-2"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200","hover:bg-tertiary/10",3,"bg-tertiary","text-white"],[1,"flex","justify-center","items-center","bg-white","rounded-lg","mb-6","w-full","overflow-x-auto"],[1,"min-w-[1100px]"],[3,"view","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","customColors","noBarWhenZero","barPadding","roundEdges","animations","showDataLabel"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-6","gap-4","mt-8"],[1,"flex","flex-col","items-center","space-y-2","p-2","rounded-lg","hover:bg-gray-50","transition-colors","duration-200"],[1,"mt-6","flex","justify-end"],[1,"px-2","shadow-sm","hover:shadow-md","transition-all","duration-200",3,"click","keydown","text","type","color","rounded"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200","hover:bg-tertiary/10",3,"click"],[1,"relative","w-20","h-20"],[1,"w-full","h-full","object-cover","rounded-lg","shadow-sm",3,"src","alt"],[1,"text-sm","font-medium","text-gray-700","text-center"],[1,"text-xs","text-gray-500"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Statistiques des visites "),c(),l(4,"div",3),z(5,z0,2,5,"button",4,ht),c()(),l(7,"div",5)(8,"div",6),y(9,"ngx-charts-bar-vertical",7),c()(),l(10,"div",8),z(11,X0,7,4,"div",9,$0),c(),l(13,"div",10)(14,"app-button",11),w("click",function(){return n.exportData()})("keydown",function(){return n.exportData()}),c()()()),t&2&&(h(5),X(ie(16,B0)),h(4),x("view",ie(17,G0))("results",n.chartData())("xAxis",!0)("yAxis",!0)("showXAxisLabel",!1)("showYAxisLabel",!0)("customColors",n.customColors)("noBarWhenZero",!0)("barPadding",35)("roundEdges",!0)("animations",!0)("showDataLabel",!0),h(2),X(n.filteredData()),h(3),x("text","Exporter les donn\xE9es")("type","button")("color","tertiary")("rounded",!0))},dependencies:[zm,Bm,Ie],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};var cs=class i{constructor(e){this.countResourceService=e}ngOnInit(){this.loadCountResource()}loadCountResource(){this.countResourceService.getStats().subscribe({next:()=>{},error:e=>{console.error("Erreur lors de la r\xE9cup\xE9ration des statistiques:",e)}})}static \u0275fac=function(t){return new(t||i)(A(Qn))};static \u0275cmp=E({type:i,selectors:[["app-count-resource"]],decls:57,vars:0,consts:[[1,"w-full","py-12"],[1,"container","mx-auto","px-4"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","max-w-7xl","mx-auto"],[1,"text-center","space-y-4","mb-8"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"flex","justify-center","items-center","gap-12","max-w-4xl","mx-auto","mb-8"],[1,"relative","group"],[1,"w-16","h-16","rounded-full","bg-white/90","shadow-lg","flex","items-center","justify-center","cursor-pointer","transition-transform","duration-300","hover:scale-110"],[1,"fas","fa-paw","text-2xl","text-tertiary"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-4","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none"],[1,"bg-tertiary/90","backdrop-blur-sm","text-white","px-4","py-3","rounded-xl","shadow-xl"],[1,"font-serif","text-lg","whitespace-nowrap"],[1,"text-3xl","font-light","text-center"],[1,"w-3","h-3","bg-tertiary/90","transform","rotate-45","translate-x-1/2","translate-y-1/2","absolute","left-1/2","bottom-0"],[1,"fas","fa-tree","text-2xl","text-tertiary"],[1,"fas","fa-concierge-bell","text-2xl","text-tertiary"],[1,"fas","fa-users","text-2xl","text-tertiary"],[1,"space-y-2"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u(5," Statistiques G\xE9n\xE9rales "),c(),l(6,"p",5),u(7," Vue d'ensemble des ressources du zoo "),c()(),l(8,"div",6)(9,"div",7)(10,"div",8),y(11,"i",9),c(),l(12,"div",10)(13,"div",11)(14,"p",12),u(15,"Total Animaux"),c(),l(16,"p",13),u(17,"12"),c()(),y(18,"div",14),c()(),l(19,"div",7)(20,"div",8),y(21,"i",15),c(),l(22,"div",10)(23,"div",11)(24,"p",12),u(25,"Total Habitats"),c(),l(26,"p",13),u(27,"3"),c()(),y(28,"div",14),c()(),l(29,"div",7)(30,"div",8),y(31,"i",16),c(),l(32,"div",10)(33,"div",11)(34,"p",12),u(35,"Total Services"),c(),l(36,"p",13),u(37,"3"),c()(),y(38,"div",14),c()(),l(39,"div",7)(40,"div",8),y(41,"i",17),c(),l(42,"div",10)(43,"div",11)(44,"div",18)(45,"div")(46,"p",12),u(47,"Employ\xE9s"),c(),l(48,"p",13),u(49,"1"),c()(),l(50,"div")(51,"p",12),u(52," V\xE9t\xE9rinaires "),c(),l(53,"p",13),u(54,"1"),c()()()(),y(55,"div",14),c()()(),y(56,"app-visit-stats"),c()()())},dependencies:[ls],encapsulation:2})};var ds=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-stats"]],decls:2,vars:0,consts:[[1,"container","mx-auto","px-4","bg-gradient-to-b","from-secondary","to-primary"]],template:function(t,n){t&1&&(l(0,"div",0),y(1,"app-count-resource"),c())},dependencies:[cs],encapsulation:2})};var Y0=(i,e)=>e.route;function q0(i,e){if(i&1&&(l(0,"div",14)(1,"div",15),u(2),c(),y(3,"div",16),c()),i&2){let t=f().$implicit;h(2),F(" ",t.description," ")}}function j0(i,e){if(i&1){let t=R();l(0,"button",11),w("click",function(){let a=S(t).$implicit,s=f();return C(s.navigateTo(a.route))}),l(1,"div",12),y(2,"i"),c(),l(3,"span",13),u(4),c(),I(5,q0,4,1,"div",14),c()}if(i&2){let t=e.$implicit,n=f();Oe(n.isActiveRoute(t.route)?"bg-tertiary text-white shadow-md transform hover:-translate-y-1":"bg-white/50 text-tertiary hover:bg-tertiary/10"),h(2),Oe("fas "+n.getIcon(t.text)+" text-xl"),h(2),J(t.text),h(),P(t.description?5:-1)}}function U0(i,e){i&1&&y(0,"app-stats")}function Q0(i,e){i&1&&y(0,"router-outlet")}var ms=class i{constructor(e){this.router=e;let t=this.router.url.split("/").pop();this.activeRoute.set(t==="admin"?"":t??"")}navigationItems=[{text:"Statistiques",route:"",description:"Voir les statistiques du zoo"},{text:"Animaux",route:"animal-management",description:"G\xE9rer les animaux du zoo"},{text:"Habitats",route:"habitat-management",description:"G\xE9rer les habitats des animaux"},{text:"Services",route:"service-management",description:"G\xE9rer les services du zoo"},{text:"Comptes",route:"account-management",description:"G\xE9rer les comptes utilisateurs"},{text:"Horaires d'ouverture",route:"opening-hours-management",description:"G\xE9rer les horaires du zoo"},{text:"Rapports v\xE9t\xE9rinaires",route:"veterinary-reports",description:"Consulter les rapports v\xE9t\xE9rinaires"},{text:"Historique des actions",route:"history-management",description:"Consulter l'historique des actions"}];activeRoute=k("");navigateTo(e){e===""?(this.activeRoute.set(""),this.router.navigate(["/admin"])):(this.activeRoute.set(e),this.router.navigate(["/admin",e]))}goBack(){this.router.navigate(["/"])}isActiveRoute(e){return this.activeRoute()===e}getIcon(e){return{Statistiques:"fa-chart-bar",Animaux:"fa-paw",Habitats:"fa-tree",Services:"fa-concierge-bell",Comptes:"fa-users","Horaires d'ouverture":"fa-clock","Rapports veterinaires":"fa-stethoscope","Historique des actions":"fa-history"}[e]||"fa-circle"}static \u0275fac=function(t){return new(t||i)(A(xt))};static \u0275cmp=E({type:i,selectors:[["app-admin-dashboard"]],decls:19,vars:1,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","min-h-screen"],[1,"container","mx-auto","px-4","py-8"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","p-6","mb-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"group","relative","flex","flex-col","items-center","p-6","rounded-xl","transition-all","duration-300","hover:shadow-lg",3,"class"],[1,"flex","justify-center","mt-8"],[1,"group","flex","items-center","gap-3","px-8","py-3","bg-tertiary","text-white","rounded-full","hover:shadow-lg","hover:-translate-y-1","transition-all","duration-300",3,"click"],[1,"fas","fa-arrow-left","group-hover:-translate-x-1","transition-transform","duration-300"],[1,"group","relative","flex","flex-col","items-center","p-6","rounded-xl","transition-all","duration-300","hover:shadow-lg",3,"click"],[1,"w-12","h-12","rounded-full","bg-white/20","flex","items-center","justify-center","mb-3","group-hover:scale-110","transition-transform","duration-300"],[1,"font-medium","text-center"],[1,"absolute","-top-2","left-1/2","transform","-translate-x-1/2","-translate-y-full","opacity-0","group-hover:opacity-100","transition-all","duration-200","pointer-events-none"],[1,"bg-black/75","text-white","text-sm","px-4","py-2","rounded-lg","whitespace-nowrap"],[1,"w-3","h-3","bg-black/75","transform","rotate-45","translate-x-1/2","translate-y-1/2","mx-auto","-mt-1.5"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Tableau de Bord Administrateur "),c(),l(5,"p",4),u(6," G\xE9rez l'ensemble des fonctionnalit\xE9s du zoo "),c()(),l(7,"nav",5)(8,"div",6),z(9,j0,6,6,"button",7,Y0),c()(),l(11,"div",5),I(12,U0,1,0,"app-stats")(13,Q0,1,0,"router-outlet"),c(),l(14,"div",8)(15,"button",9),w("click",function(){return n.goBack()}),y(16,"i",10),l(17,"span"),u(18,"Retour accueil"),c()()()()()),t&2&&(h(9),X(n.navigationItems),h(3),P(n.activeRoute()?13:12))},dependencies:[Wn,ds],encapsulation:2})};var hs=class i{constructor(e,t){this.http=e;this.animalService=t}apiUrl=`${we.apiUrl}/api/admin/animals`;imageBaseUrl=`${we.apiUrl}/api`;getAllAnimals(){return this.http.get(this.apiUrl).pipe(Gn(e=>e.map(t=>ve(Z({},t),{images:this.formatImageUrl(t.images,"animals")}))),pe(e=>this.handleError("chargement des animaux",e)))}createAnimal(e){return this.http.post(this.apiUrl,e).pipe(Je(()=>this.animalService.clearCache()),pe(t=>this.handleError("cr\xE9ation de l'animal",t)))}updateAnimal(e,t){if(!e)return Me(()=>new Error("ID invalide"));let n=new FormData;return t.forEach((a,s)=>{s==="images"&&a instanceof File?n.append("images",a):s!=="showTime"&&a!==null&&a!==void 0&&n.append(s,typeof a=="object"?JSON.stringify(a):String(a))}),console.log("Donn\xE9es \xE0 envoyer:",{id:e,name:n.get("name"),species:n.get("species")}),this.http.put(`${this.apiUrl}/${e}`,n).pipe(Je(a=>{console.log("R\xE9ponse du serveur (mise \xE0 jour):",a),this.animalService.clearCache()}),pe(a=>(console.error("Erreur d\xE9taill\xE9e (mise \xE0 jour):",a),a.status===413?Me(()=>new Error("Fichier trop volumineux")):this.handleError("mise \xE0 jour de l'animal",a))))}deleteAnimal(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe(Je(()=>this.animalService.clearCache()),pe(t=>this.handleError("suppression de l'animal",t)))}formatImageUrl(e,t="animals"){if(!e)return null;if(e.startsWith("http")||e.startsWith("https"))return e;if(e.includes("uploads")){let n=e.split("/");e=n[n.length-1]}return`${this.imageBaseUrl}/uploads/${t}/${e}`}handleError(e,t){let n=`Erreur lors de ${e}: `;return t.error instanceof ErrorEvent?n+=`Une erreur est survenue: ${t.error.message}`:(n+=`Le serveur a retourn\xE9: ${t.status} - ${t.statusText}`,t.error?.message&&(n+=`
D\xE9tail: ${t.error.message}`)),console.error(n),Me(()=>new Error(n))}static \u0275fac=function(t){return new(t||i)(de(ft),de(Ii))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var J0=()=>[],Xm=(i,e)=>e.id_habitat,ex=(i,e)=>e.id_animal;function tx(i,e){if(i&1){let t=R();l(0,"div",36),y(1,"img",37),l(2,"div",38)(3,"h4",39),u(4),c(),l(5,"p",40),u(6),c()(),l(7,"div",41)(8,"app-button",42),w("click",function(){let a=S(t).$implicit,s=f(3);return C(s.editAnimal(a.id_animal))})("keydown",function(){let a=S(t).$implicit,s=f(3);return C(s.editAnimal(a.id_animal))}),c(),l(9,"app-button",42),w("click",function(){let a=S(t).$implicit,s=f(3);return C(s.confirmDeleteAnimal(a.id_animal))})("keydown",function(){let a=S(t).$implicit,s=f(3);return C(s.confirmDeleteAnimal(a.id_animal))}),c()()()}if(i&2){let t=e.$implicit;h(),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(2),J(t.species),h(2),x("text","Modifier")("color","tertiary")("rounded",!0)("customClass","px-3 py-1 text-sm"),h(),x("text","Supprimer")("color","danger")("rounded",!0)("customClass","px-3 py-1 text-sm")}}function ix(i,e){if(i&1&&(l(0,"div",34),z(1,tx,10,12,"div",36,ex),c()),i&2){let t=f().$implicit,n=f();h(),X(n.groupedAnimals()[t.id_habitat]||ie(0,J0))}}function nx(i,e){i&1&&(l(0,"p",35),u(1," Aucun animal dans cet habitat "),c())}function ax(i,e){if(i&1&&(l(0,"div",6)(1,"div",32)(2,"h3",33),u(3),c(),I(4,ix,3,1,"div",34)(5,nx,2,0,"p",35),c()()),i&2){let t=e.$implicit,n=f();h(3),F(" ",t.name," "),h(),P(n.groupedAnimals()[t.id_habitat].length?4:5)}}function sx(i,e){if(i&1&&(l(0,"option",17),u(1),c()),i&2){let t=e.$implicit;x("value",t.id_habitat),h(),J(t.name)}}function rx(i,e){if(i&1){let t=R();l(0,"app-button",43),w("click",function(){S(t);let a=f();return C(a.cancel())})("keydown",function(){S(t);let a=f();return C(a.cancel())}),c()}i&2&&x("text","Annuler")("color","secondary")("rounded",!0)("customClass","px-6 min-w-[120px] text-lg font-medium")}var us=class i{constructor(e,t,n,a,s,r){this.animalManagement=e;this.habitatService=t;this.countResourceService=n;this.toastService=a;this.fileSecurityService=s;this.imageUrlService=r}animals=k([]);habitats=k([]);selectedHabitat=k(null);selectedFile=k(null);groupedAnimals=k({});visibleAnimals=k({});newAnimalData=k({});animalToDelete=null;imageBaseUrl=`${we.apiUrl}/api/uploads/animals`;filteredAnimals=fe(()=>this.animals().filter(e=>e.habitat_id===this.selectedHabitat()));ngOnInit(){this.loadHabitats(),this.loadAnimals()}initializeVisibility(){let e={};this.habitats().forEach(t=>{e[t.id_habitat]=!1}),this.visibleAnimals.set(e)}loadHabitats(){this.habitatService.getHabitats().subscribe({next:e=>{this.habitats.set(e),this.initializeVisibility()},error:e=>{console.error("Erreur de chargement des habitats :",e),this.toastService.showError("Erreur lors du chargement des habitats")}})}loadAnimals(){this.animalManagement.getAllAnimals().subscribe({next:e=>{this.animals.set(e.map(t=>ve(Z({},t),{showTime:!1,images:t.images}))),this.groupAnimals()},error:e=>{console.error("Erreur de chargement des animaux :",e),this.toastService.showError("Erreur lors du chargement des animaux")}})}onFileChange(e){let t=e.target;t.files&&t.files.length>0&&(this.selectedFile.set(t.files[0]),this.toastService.showSuccess("Image s\xE9lectionn\xE9e avec succ\xE8s"))}createAnimal(){if(this.validateAnimalData()){let e=this.buildFormData();this.animalManagement.createAnimal(e).subscribe({next:()=>{this.resetForm(),this.loadAnimals(),this.countResourceService.incrementTotalAnimals(),this.toastService.showSuccess("Animal cr\xE9\xE9 avec succ\xE8s")},error:t=>{console.error("Erreur de cr\xE9ation de l'animal :",t),this.toastService.showError("Erreur lors de la cr\xE9ation de l'animal")}})}else this.toastService.showError("Veuillez remplir tous les champs requis")}updateAnimal(){if(this.validateAnimalData(!0)){let e=this.buildFormData(),t=this.newAnimalData().id_animal.toString();this.animalManagement.updateAnimal(t,e).subscribe({next:n=>{n.name!==e.get("name")&&this.toastService.showWarning("Les donn\xE9es re\xE7ues diff\xE8rent des donn\xE9es envoy\xE9es");let a=ve(Z({},n),{images:n.images??""});this.animals.update(s=>s.map(r=>r.id_animal===a.id_animal?a:r)),this.groupAnimals(),this.resetForm(),this.toastService.showSuccess("Animal mis \xE0 jour avec succ\xE8s")},error:n=>{console.error("Erreur lors de la mise \xE0 jour de l'animal:",n),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'animal")}})}else this.toastService.showError("Veuillez remplir tous les champs requis")}editAnimal(e){let t=this.animals().find(n=>n.id_animal===e);t&&(this.newAnimalData.set(Z({},t)),this.toastService.showSuccess("Animal s\xE9lectionn\xE9 pour modification"))}deleteAnimal(e){let t=this.animals().find(a=>a.id_animal===e);if(!t)return;let n=`\xCAtes-vous s\xFBr de vouloir supprimer l'animal "${t.name}" ?`;confirm(n)?this.animalManagement.deleteAnimal(e.toString()).subscribe({next:()=>{this.animals.update(a=>a.filter(s=>s.id_animal!==e)),this.groupAnimals(),this.countResourceService.decrementTotalAnimals(),this.loadAnimals(),this.resetForm(),this.toastService.showSuccess("Animal supprim\xE9 avec succ\xE8s")},error:a=>{console.error("Erreur de suppression de l'animal :",a),this.toastService.showError("Erreur lors de la suppression de l'animal")}}):this.toastService.showSuccess("Suppression annul\xE9e")}resetForm(){this.newAnimalData.set({}),this.selectedFile.set(null)}cancel(){this.resetForm(),this.toastService.showSuccess("Formulaire r\xE9initialis\xE9")}toggleAnimal(e){if(!this.animals().find(a=>a.id_animal===e)){console.error("Animal non trouv\xE9:",e);return}let n=this.animals().map(a=>a.id_animal===e?ve(Z({},a),{showTime:!a.showTime}):a);this.animals.set(n),this.groupAnimals()}toggleVisibility(e){this.visibleAnimals.update(t=>ve(Z({},t),{[e]:!t[e]}))}isAnimalVisible(e){return!e||!e.habitat_id?!1:this.visibleAnimals()[e.habitat_id]??!1}shouldShowFullDescription(e){if(!e)return!1;let t=!!e.showTime;return console.log(`V\xE9rification description pour ${e.name||"animal inconnu"}:`,t),t}validateAnimalData(e=!1){let t=[this.newAnimalData().name,this.newAnimalData().species,this.newAnimalData().habitat_id,this.newAnimalData().characteristics,this.newAnimalData().weightRange,this.newAnimalData().diet];return e&&t.push(this.newAnimalData().id_animal),t.every(n=>n!=null)}buildFormData(){let e=new FormData,t=this.newAnimalData();Object.entries(t).forEach(([a,s])=>{s!=null&&e.append(a,typeof s=="object"?JSON.stringify(s):String(s))});let n=this.selectedFile();return n&&e.append("images",n),e}groupAnimals(){let e={};this.habitats().forEach(t=>{e[t.id_habitat]=[]}),this.animals().forEach(t=>{t.habitat_id&&e[t.habitat_id].push(Z({},t))}),this.groupedAnimals.set(e)}onFileSelected(e){return He(this,null,function*(){let t=e.target.files?.[0];if(t)try{let n=yield this.fileSecurityService.scan(t);if(!n.isSafe){this.toastService.showError(n.threats.join(`
`));return}this.selectedFile.set(t);let a=new FileReader;a.onload=()=>{this.newAnimalData.update(s=>ve(Z({},s),{images:a.result}))},a.readAsDataURL(t),this.toastService.showSuccess("Image s\xE9lectionn\xE9e avec succ\xE8s")}catch(n){console.error("Erreur lors du traitement du fichier:",n),this.toastService.showError("Erreur lors du traitement du fichier")}})}confirmDeleteAnimal(e){this.animalToDelete=e}cancelDelete(){this.animalToDelete=null}deleteAnimalConfirmed(){this.animalToDelete!==null&&(this.deleteAnimal(this.animalToDelete),this.animalToDelete=null)}getImageUrl(e){return this.imageUrlService.getImageUrl(e)}static \u0275fac=function(t){return new(t||i)(A(hs),A(Xt),A(Qn),A(Ve),A(ll),A(cl))};static \u0275cmp=E({type:i,selectors:[["app-animal-management"]],decls:57,vars:12,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mb-12"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","overflow-hidden"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-semibold","text-tertiary","mb-6"],["enctype","multipart/form-data",1,"space-y-6",3,"ngSubmit"],["for","name",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","name","name","name","required","","placeholder","Nom de l'animal",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","species",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","species","name","species","required","","placeholder","Esp\xE8ce de l'animal",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","animal-habitat",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","animal-habitat","name","habitat_id","required","",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","characteristics",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","characteristics","name","characteristics","required","","rows","3","placeholder","Ex: sociable, actif, joueur",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","weight-range",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","weight-range","name","weightRange","required","","placeholder","Ex: 150 \xE0 300 kg",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","diet",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","diet","name","diet","required","",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["value","Herbivore"],["value","Carnivore"],["value","Omnivore"],["for","image",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","file","id","image","accept","image/*",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"change"],[1,"flex","justify-end","space-x-4"],["type","button",3,"text","color","rounded","customClass"],["type","submit",3,"text","color","rounded","customClass"],[1,"p-4"],[1,"text-xl","font-serif","font-semibold","text-tertiary","mb-4"],[1,"space-y-4"],[1,"text-center","text-gray-500","italic"],[1,"flex","items-center","gap-4","p-2","rounded-lg","hover:bg-white/50","transition-colors"],[1,"w-16","h-16","object-cover","rounded-lg","shadow",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-base","font-semibold","text-tertiary","truncate"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],[3,"click","keydown","text","color","rounded","customClass"],["type","button",3,"click","keydown","text","color","rounded","customClass"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Gestion des Animaux "),c(),l(5,"p",4),u(6," G\xE9rez les animaux du zoo "),c()(),l(7,"div",5),z(8,ax,6,2,"div",6,Xm),c(),l(10,"div",7)(11,"h3",8),u(12),c(),l(13,"form",9),w("ngSubmit",function(){return n.newAnimalData().id_animal?n.updateAnimal():n.createAnimal()}),l(14,"div")(15,"label",10),u(16," Nom de l'animal "),c(),l(17,"input",11),gt("ngModelChange",function(s){return pt(n.newAnimalData().name,s)||(n.newAnimalData().name=s),s}),c()(),l(18,"div")(19,"label",12),u(20," Esp\xE8ce "),c(),l(21,"input",13),gt("ngModelChange",function(s){return pt(n.newAnimalData().species,s)||(n.newAnimalData().species=s),s}),c()(),l(22,"div")(23,"label",14),u(24," Habitat "),c(),l(25,"select",15),gt("ngModelChange",function(s){return pt(n.newAnimalData().habitat_id,s)||(n.newAnimalData().habitat_id=s),s}),l(26,"option",16),u(27,"S\xE9lectionner un habitat"),c(),z(28,sx,2,2,"option",17,Xm),c()(),l(30,"div")(31,"label",18),u(32," Caract\xE9ristiques "),c(),l(33,"textarea",19),gt("ngModelChange",function(s){return pt(n.newAnimalData().characteristics,s)||(n.newAnimalData().characteristics=s),s}),c()(),l(34,"div")(35,"label",20),u(36," Fourchette de poids "),c(),l(37,"input",21),gt("ngModelChange",function(s){return pt(n.newAnimalData().weightRange,s)||(n.newAnimalData().weightRange=s),s}),c()(),l(38,"div")(39,"label",22),u(40," R\xE9gime alimentaire "),c(),l(41,"select",23),gt("ngModelChange",function(s){return pt(n.newAnimalData().diet,s)||(n.newAnimalData().diet=s),s}),l(42,"option",16),u(43,"S\xE9lectionner un r\xE9gime"),c(),l(44,"option",24),u(45,"Herbivore"),c(),l(46,"option",25),u(47,"Carnivore"),c(),l(48,"option",26),u(49,"Omnivore"),c()()(),l(50,"div")(51,"label",27),u(52," Image "),c(),l(53,"input",28),w("change",function(s){return n.onFileSelected(s)}),c()(),l(54,"div",29),I(55,rx,1,4,"app-button",30),y(56,"app-button",31),c()()()()()),t&2&&(h(8),X(n.habitats()),h(4),F(" ",n.newAnimalData().id_animal?"Modifier l'animal":"Ajouter un animal"," "),h(5),ut("ngModel",n.newAnimalData().name),h(4),ut("ngModel",n.newAnimalData().species),h(4),ut("ngModel",n.newAnimalData().habitat_id),h(3),X(n.habitats()),h(5),ut("ngModel",n.newAnimalData().characteristics),h(4),ut("ngModel",n.newAnimalData().weightRange),h(4),ut("ngModel",n.newAnimalData().diet),h(14),P(n.newAnimalData().id_animal?55:-1),h(),x("text",n.newAnimalData().id_animal?"Mettre \xE0 jour":"Cr\xE9er")("color","tertiary")("rounded",!0)("customClass","px-6 min-w-[120px] text-lg font-medium"))},dependencies:[Oi,tt,Fi,Mi,Be,Di,Ge,et,al,qn,tl,it,Ko,Ie],encapsulation:2})};var ps=class i{constructor(e,t,n){this.fb=e;this.openingHoursService=t;this.toastService=n;this.hoursForm=this.createForm()}openingHours=k([]);parkStatus=k({isOpen:!0,message:""});hoursForm;openingHoursId=k(null);ngOnInit(){this.loadInitialData()}createForm(){return this.fb.group({weekdayHours:["",W.required],weekendHours:["",W.required],isWeekdayOpen:[!0],isWeekendOpen:[!0],parkStatus:[!0],statusMessage:[""]})}loadInitialData(){this.openingHoursService.getCurrentOpeningHours().subscribe({next:e=>{e&&(this.openingHours.set([e]),this.parkStatus.set({isOpen:e.parkStatus,message:e.statusMessage||""}),e._id?this.openingHoursId.set(e._id):console.warn("L'ID des horaires n'a pas \xE9t\xE9 retourn\xE9 par l'API."),this.patchForm(e))},error:e=>{console.error("Erreur lors du chargement des horaires:",e),this.toastService.showError("Erreur lors du chargement des horaires")}})}patchForm(e){let t=e.openingHours.find(a=>a.days.includes("Lundi")),n=e.openingHours.find(a=>a.days.includes("Samedi"));this.hoursForm.patchValue({weekdayHours:t?.hours??"",weekendHours:n?.hours??"",isWeekdayOpen:t?.isOpen??!0,isWeekendOpen:n?.isOpen??!0,parkStatus:e.parkStatus,statusMessage:e.statusMessage||""})}updateHours(){return He(this,null,function*(){try{let e=yield this.openingHoursService.getOpeningHoursId();if(!e){console.error("L'ID des horaires est manquant."),this.toastService.showError("ID des horaires non d\xE9fini");return}if(this.hoursForm.invalid){console.error("Formulaire invalide:",this.hoursForm.errors),this.toastService.showError("Veuillez corriger les erreurs du formulaire");return}let t=this.prepareFormData(),n=yield Lt(this.openingHoursService.updateOpeningHours(e,t));n&&(this.openingHours.set([n]),this.patchForm(n),this.toastService.showSuccess("Horaires mis \xE0 jour avec succ\xE8s"))}catch(e){console.error("Erreur compl\xE8te lors de la mise \xE0 jour:",e),this.toastService.showError("Erreur lors de la mise \xE0 jour des horaires")}})}prepareFormData(){return{weekdayHours:this.hoursForm.get("weekdayHours")?.value||"",weekendHours:this.hoursForm.get("weekendHours")?.value||"",isWeekdayOpen:this.hoursForm.get("isWeekdayOpen")?.value??!0,isWeekendOpen:this.hoursForm.get("isWeekendOpen")?.value??!0,parkStatus:this.hoursForm.get("parkStatus")?.value??!0,statusMessage:this.hoursForm.get("statusMessage")?.value||""}}createNewHours(){return He(this,null,function*(){let e=this.prepareFormData();console.log("Donn\xE9es pr\xE9par\xE9es pour cr\xE9ation:",e);try{let t=yield Lt(bi(this.openingHoursService.createOpeningHours(e)));if(t?._id)console.log("R\xE9ponse de cr\xE9ation:",t),this.openingHoursId.set(t._id),this.openingHours.set([t]),this.patchForm(t),this.toastService.showSuccess("Horaires cr\xE9\xE9s avec succ\xE8s");else{console.error("La cr\xE9ation n'a pas retourn\xE9 d'ID valide."),this.toastService.showError("Erreur lors de la cr\xE9ation des horaires");return}}catch(t){console.error("Erreur lors de la cr\xE9ation des horaires:",t),this.toastService.showError("Erreur lors de la cr\xE9ation des horaires")}})}saveChanges(){return He(this,null,function*(){try{if(!this.hoursForm.valid){this.toastService.showError("Veuillez remplir correctement tous les champs requis");return}this.openingHoursId()?yield this.updateHours():(console.log("Aucun ID trouv\xE9, cr\xE9ation de nouveaux horaires."),yield this.createNewHours())}catch(e){console.error("Erreur lors de la sauvegarde:",e),this.toastService.showError("Erreur lors de la sauvegarde des horaires")}})}ensureOpeningHoursExist(){return He(this,null,function*(){try{return yield this.openingHoursService.getOpeningHoursId()}catch{let e={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""},t=yield Lt(bi(this.openingHoursService.createOpeningHours(e)));if(!t._id)throw new Error("L'ID des nouveaux horaires est manquant.");return t._id}})}getOpeningHoursId(){return He(this,null,function*(){try{let e=this.openingHours();if(e&&e.length>0&&e[0]._id)return e[0]._id;{let t={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""};return(yield Lt(bi(this.openingHoursService.createOpeningHours(t))))._id}}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration ou de la cr\xE9ation des horaires:",e),new Error("Aucun ID trouv\xE9 pour les horaires")}})}static \u0275fac=function(t){return new(t||i)(A(yt),A(Ri),A(Ve))};static \u0275cmp=E({type:i,selectors:[["app-opening-hours-management"]],decls:43,vars:1,consts:[[1,"bg-white","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"far","fa-clock","mr-3"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-secondary/10","rounded-lg","p-4","space-y-4"],[1,"text-lg","font-serif","font-semibold","text-tertiary"],[1,"space-y-4"],[1,"flex","flex-col","space-y-2"],["type","text","formControlName","weekdayHours","placeholder","ex: 9h00 - 18h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","items-center"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isWeekdayOpen",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-tertiary/30","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-tertiary"],[1,"ms-3","text-sm","font-medium","text-quinary"],["type","text","formControlName","weekendHours","placeholder","ex: 10h00 - 19h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],["type","checkbox","formControlName","isWeekendOpen",1,"sr-only","peer"],["type","checkbox","formControlName","parkStatus",1,"sr-only","peer"],["type","text","formControlName","statusMessage","placeholder","Message de statut (optionnel)",1,"w-full","p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-2","bg-tertiary","text-white","rounded-lg","hover:bg-tertiary/90","transition"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"h2",1),y(2,"i",2),u(3," Gestion des horaires d'ouverture "),c(),l(4,"form",3),w("ngSubmit",function(){return n.saveChanges()}),l(5,"div",4)(6,"h3",5),u(7," Horaires en semaine "),c(),l(8,"div",6)(9,"div",7),y(10,"input",8),l(11,"div",9)(12,"label",10),y(13,"input",11)(14,"div",12),l(15,"span",13),u(16,"Ouvert"),c()()()()()(),l(17,"div",4)(18,"h3",5),u(19," Horaires weekend "),c(),l(20,"div",6)(21,"div",7),y(22,"input",14),l(23,"div",9)(24,"label",10),y(25,"input",15)(26,"div",12),l(27,"span",13),u(28,"Ouvert"),c()()()()()(),l(29,"div",4)(30,"h3",5),u(31," Statut du parc "),c(),l(32,"div",6)(33,"div",9)(34,"label",10),y(35,"input",16)(36,"div",12),l(37,"span",13),u(38,"Parc ouvert"),c()()(),y(39,"input",17),c()(),l(40,"div",18)(41,"button",19),u(42," Enregistrer les modifications "),c()()()()),t&2&&(h(4),x("formGroup",n.hoursForm))},dependencies:[it,tt,Be,Yn,Ge,et,_t,vt],encapsulation:2})};var ox=(i,e)=>e.id_feeding;function lx(i,e){i&1&&(se(0,"div",1)(1,"p",3),u(2," Aucun historique disponible pour cet animal. "),re(),se(3,"p",4),u(4," Les repas enregistr\xE9s appara\xEEtront ici. "),re()())}function cx(i,e){if(i&1&&(se(0,"div",17)(1,"p",18)(2,"span",19),D(),se(3,"svg",14),Dt(4,"path",20),re()(),u(5),re()()),i&2){let t=f().$implicit;h(5),F(' "',t.notes,'" ')}}function dx(i,e){if(i&1&&(se(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),u(5),qe(6,"titlecase"),re(),se(7,"span",10),u(8),re()(),se(9,"div",11)(10,"p",12)(11,"span",13),D(),se(12,"svg",14),Dt(13,"path",15),re()(),u(14),qe(15,"date"),re(),Ye(),se(16,"p",12)(17,"span",13),D(),se(18,"svg",14),Dt(19,"path",16),re()(),u(20),re()()()(),I(21,cx,6,1,"div",17),re()),i&2){let t=e.$implicit;h(5),F(" ",Xn(6,6,t.food_type)," "),h(3),rn(" ",t.quantity," ",t.unit," "),h(6),F(" ",Bt(15,8,t.feeding_date,"dd/MM/yyyy HH:mm")," "),h(6),F(" ",t.user_name," "),h(),P(t.notes?21:-1)}}function mx(i,e){if(i&1&&(se(0,"div",2),z(1,dx,22,11,"div",5,ox),re()),i&2){let t=f();h(),X(t.feedingHistory())}}var gs=class i{animalId;feedingService=G(Zn);destroyRef=G(Ti);feedingHistory=k([]);ngOnInit(){this.loadHistory()}ngOnChanges(e){e.animalId&&!e.animalId.firstChange&&this.loadHistory()}loadHistory(){return He(this,null,function*(){try{this.feedingHistory.set([]);let e=yield Lt(this.feedingService.getFeedingHistory(this.animalId).pipe(Pi(this.destroyRef)));this.feedingHistory.set(e)}catch(e){console.error("Erreur lors du chargement de l'historique:",e),this.feedingHistory.set([])}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-feeding-history-vet"]],inputs:{animalId:"animalId"},features:[ke],decls:3,vars:1,consts:[[1,"pr-3","custom-scrollbar","max-h-[70vh]","overflow-y-auto"],[1,"flex","flex-col","items-center","justify-center","py-8","bg-white/80","rounded-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"text-gray-600","text-lg","font-medium"],[1,"text-gray-500","text-sm","mt-2"],[1,"bg-white/90","rounded-xl","p-4","shadow-md","border-l-4","border-l-tertiary","border","border-secondary/10","transition-all","duration-200","hover:shadow-lg"],[1,"flex","flex-col","gap-3"],[1,"flex-1","space-y-2"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"font-medium","text-quinary","text-lg"],[1,"bg-tertiary/10","text-tertiary","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"space-y-1"],[1,"text-sm","text-gray-600","flex","items-center","gap-2"],[1,"w-4","h-4","inline-block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"text-sm","text-gray-600","italic","flex","items-start","gap-2"],[1,"w-4","h-4","inline-block","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"]],template:function(t,n){t&1&&(se(0,"div",0),I(1,lx,5,0,"div",1)(2,mx,3,0,"div",2),re()),t&2&&(h(),P(n.feedingHistory().length===0?1:2))},dependencies:[je,$o,Gt],styles:["[_nghost-%COMP%]{display:block}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#557a46 #e2e8f0}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#557a46;border-radius:10px}"]})};var Jt=class i{constructor(e,t){this.http=e;this.tokenService=t}apiUrl=`${we.apiUrl}/api/veterinary/habitat-comments`;getHeaders(){let e=this.tokenService.getToken();return new Yo({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}getCommentsByHabitatId(e){return console.log("R\xE9cup\xE9ration des commentaires pour habitat:",e),this.http.get(`${this.apiUrl}/${e}`,{headers:this.getHeaders()}).pipe(Je(t=>{console.log("Commentaires re\xE7us:",t)}),pe(t=>(console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",t),Me(()=>t))))}createHabitatComment(e){let t=this.tokenService.getToken(),n=t?JSON.parse(atob(t.split(".")[1])):null;if(console.log("Token d\xE9cod\xE9:",n),!n)return Me(()=>new Error("Token non valide"));let a=ve(Z({},e),{id_user:n.sub,user_name:n.username||n.name});return console.log("Donn\xE9es du commentaire \xE0 envoyer:",a),this.http.post(this.apiUrl,a,{headers:this.getHeaders()}).pipe(Je(s=>{console.log("R\xE9ponse du serveur:",s)}),pe(s=>(console.error("Erreur lors de la cr\xE9ation du commentaire:",s),Me(()=>new Error("Erreur lors de la cr\xE9ation du commentaire")))))}getAllComments(){return console.log("R\xE9cup\xE9ration de tous les commentaires"),this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(Je(e=>{console.log("Tous les commentaires charg\xE9s:",e)}),pe(e=>(console.error("Erreur lors du chargement des commentaires:",e),Me(()=>e))))}static \u0275fac=function(t){return new(t||i)(de(ft),de(Mt))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ym=(i,e,t)=>({"bg-green-500":i,"bg-yellow-500":e,"bg-red-500":t}),hx=(i,e,t)=>({"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":e,"bg-red-100 text-red-800":t}),ux=(i,e)=>e.id_habitat;function px(i,e){i&1&&(l(0,"p",6),u(1," Aucun commentaire pour cet habitat. "),c())}function gx(i,e){i&1&&(l(0,"div",17),D(),l(1,"svg",24),y(2,"path",25),c(),Ye(),l(3,"span"),u(4,"R\xE9gl\xE9"),c()())}function fx(i,e){i&1&&(l(0,"div",18),D(),l(1,"svg",24),y(2,"path",26),c(),Ye(),l(3,"span"),u(4,"En attente"),c()())}function xx(i,e){if(i&1&&(l(0,"div",23),u(1),qe(2,"date"),c()),i&2){let t=f().$implicit;h(),rn(" R\xE9solu par ",t.resolved_by," le ",Bt(2,2,t.resolved_at,"dd/MM/yyyy")," ")}}function _x(i,e){if(i&1&&(l(0,"div",9),y(1,"div",10),l(2,"div",11)(3,"div",12)(4,"div",13),u(5),qe(6,"date"),c()(),l(7,"div",14)(8,"div",15),y(9,"span",16),u(10),c(),I(11,gx,5,0,"div",17)(12,fx,5,0,"div",18),c()(),l(13,"p",19),u(14),c(),l(15,"div",20)(16,"div",21),u(17," Par: "),l(18,"span",22),u(19),c()(),I(20,xx,3,5,"div",23),c()()),i&2){let t=e.$implicit;h(),x("ngClass",on(12,Ym,t.habitat_status==="Optimal",t.habitat_status==="Acceptable",t.habitat_status==="N\xE9cessite des am\xE9liorations")),h(4),F(" ",Bt(6,9,t.createdAt,"dd/MM/yyyy \xE0 HH:mm")," "),h(3),x("ngClass",on(16,hx,t.habitat_status==="Optimal",t.habitat_status==="Acceptable",t.habitat_status==="N\xE9cessite des am\xE9liorations")),h(),x("ngClass",on(20,Ym,t.habitat_status==="Optimal",t.habitat_status==="Acceptable",t.habitat_status==="N\xE9cessite des am\xE9liorations")),h(),F(" ",t.habitat_status," "),h(),P(t.is_resolved?11:12),h(3),F(" ",t.comment," "),h(5),J(t.user_name),h(),P(t.is_resolved?20:-1)}}function vx(i,e){if(i&1&&z(0,_x,21,24,"div",9,ux),i&2){let t=f();X(t.comments())}}var fs=class i{constructor(e){this.habitatCommentService=e}habitatId;habitatImage;habitatName;close=new N;comments=k([]);ngOnInit(){this.loadComments()}onClose(){this.close.emit()}loadComments(){this.habitatCommentService.getCommentsByHabitatId(this.habitatId).subscribe({next:e=>{this.comments.set(e)},error:e=>{console.error("Erreur lors du chargement des commentaires:",e)}})}static \u0275fac=function(t){return new(t||i)(A(Jt))};static \u0275cmp=E({type:i,selectors:[["app-habitat-comment-history"]],inputs:{habitatId:"habitatId",habitatImage:"habitatImage",habitatName:"habitatName"},outputs:{close:"close"},decls:13,vars:8,consts:[[1,"w-full","max-w-6xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"flex","items-center","gap-4","mb-8"],[1,"w-24","h-24","rounded-xl","object-cover","shadow-md",3,"src","alt"],[1,"text-2xl","sm:text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-quinary/70","font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"col-span-full","text-center","text-tertiary/70","py-8"],[1,"flex","justify-center","mt-8"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[1,"bg-white","rounded-xl","shadow-md","hover:shadow-lg","transition-all","duration-300","p-4","relative","overflow-hidden"],[1,"absolute","top-0","left-0","right-0","h-1",3,"ngClass"],[1,"flex","justify-between","items-start","mt-2"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-tertiary/80","font-medium"],[1,"flex","flex-col","items-end","gap-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","flex","items-center","gap-1",3,"ngClass"],[1,"w-1.5","h-1.5","rounded-full",3,"ngClass"],[1,"flex","items-center","gap-1.5","bg-green-50","text-green-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-1.5","bg-red-50","text-red-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-quinary/80","my-4","line-clamp-3"],[1,"flex","justify-between","items-end"],[1,"text-sm","text-tertiary/70"],[1,"font-medium"],[1,"text-xs","text-gray-500","italic"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3.5","w-3.5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zm-1 8a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),y(2,"img",2),l(3,"div")(4,"h2",3),u(5," Historique des commentaires sur les habitats "),c(),l(6,"p",4),u(7),c()()(),l(8,"div",5),I(9,px,2,0,"p",6)(10,vx,2,0),c(),l(11,"div",7)(12,"app-button",8),w("click",function(){return n.onClose()}),c()()()),t&2&&(h(2),x("src",n.habitatImage,Ae)("alt",n.habitatName),h(5),F(" ",n.habitatName," "),h(2),P(n.comments().length===0?9:10),h(3),x("text","Fermer")("type","button")("color","secondary")("rounded",!0))},dependencies:[je,Ho,Ie,Gt],encapsulation:2})};function yx(i,e){if(i&1&&(l(0,"option",6),u(1),c()),i&2){let t=e.$implicit;x("value",t),h(),J(t)}}function bx(i,e){if(i&1&&y(0,"app-toast",10),i&2){let t=f();x("message",t.toastMessage())("type",t.toastType())}}var xs=class i{constructor(e){this.habitatComments=e}habitatId;commentAdded=new N;habitatsComments=k([]);isToastVisible=k(!1);toastMessage=k("");toastType=k("success");newHabitatCommentData={habitat_status:"Optimal",comment:"",id_habitat:0};statusOptions=["Optimal","Acceptable","N\xE9cessite des am\xE9liorations"];commentStatusService=G(dl);statusSubscription;ngOnInit(){this.habitatId&&(this.newHabitatCommentData.id_habitat=this.habitatId,this.loadHabitatsComments()),this.statusSubscription=this.commentStatusService.commentStatusChanged$.subscribe(e=>{console.log("Mise \xE0 jour du commentaire re\xE7ue dans le composant v\xE9t\xE9rinaire:",e),this.loadHabitatsComments(),this.showToast(`Commentaire ${e.is_resolved?"marqu\xE9 comme r\xE9gl\xE9":"r\xE9ouvert"}`,"success")})}ngOnDestroy(){this.statusSubscription&&this.statusSubscription.unsubscribe()}loadHabitatsComments(){this.habitatComments.getCommentsByHabitatId(this.habitatId).subscribe({next:e=>{console.log("Commentaires re\xE7us pour l'habitat:",e);let t=[...e].sort((n,a)=>new Date(a.createdAt).getTime()-new Date(n.createdAt).getTime());this.habitatsComments.set(t)},error:e=>console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",e)})}submitComment(){if(console.log("Donn\xE9es \xE0 envoyer:",this.newHabitatCommentData),!this.newHabitatCommentData.comment||!this.newHabitatCommentData.id_habitat){this.showToast("Veuillez remplir tous les champs","error");return}this.habitatComments.createHabitatComment(this.newHabitatCommentData).subscribe({next:e=>{console.log("Commentaire cr\xE9\xE9:",e),this.loadHabitatsComments(),this.newHabitatCommentData={id_habitat:this.habitatId,habitat_status:"Optimal",comment:""},this.showToast("Commentaire ajout\xE9 avec succ\xE8s","success")},error:e=>{console.error("Erreur lors de l'ajout du commentaire:",e),this.showToast("Erreur lors de l'ajout du commentaire","error")}})}showToast(e,t){this.toastMessage.set(e),this.toastType.set(t),this.isToastVisible.set(!0),setTimeout(t==="success"?()=>{this.isToastVisible.set(!1),this.commentAdded.emit()}:()=>{this.isToastVisible.set(!1)},3e3)}static \u0275fac=function(t){return new(t||i)(A(Jt))};static \u0275cmp=E({type:i,selectors:[["app-habitat-comment"]],inputs:{habitatId:"habitatId"},outputs:{commentAdded:"commentAdded"},decls:17,vars:6,consts:[[1,"bg-white","rounded-lg","shadow-lg","p-6"],[1,"mb-8"],[1,"text-xl","font-semibold","mb-4","text-tertiary"],[1,"space-y-4"],["for","habitat-status",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","habitat-status",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"value"],["for","habitat-comment",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","habitat-comment","rows","3",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"click","keydown.enter","color","text","rounded"],[3,"message","type"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Ajouter un commentaire "),c(),l(4,"div",3)(5,"div")(6,"label",4),u(7,"\xC9tat de l'habitat"),c(),l(8,"select",5),gt("ngModelChange",function(s){return pt(n.newHabitatCommentData.habitat_status,s)||(n.newHabitatCommentData.habitat_status=s),s}),z(9,yx,2,2,"option",6,ht),c()(),l(11,"div")(12,"label",7),u(13,"Commentaire"),c(),l(14,"textarea",8),gt("ngModelChange",function(s){return pt(n.newHabitatCommentData.comment,s)||(n.newHabitatCommentData.comment=s),s}),c()(),l(15,"app-button",9),w("click",function(){return n.submitComment()})("keydown.enter",function(){return n.submitComment()}),c()()(),I(16,bx,1,2,"app-toast",10),c()),t&2&&(h(8),ut("ngModel",n.newHabitatCommentData.habitat_status),h(),X(n.statusOptions),h(5),ut("ngModel",n.newHabitatCommentData.comment),h(),x("color","tertiary")("text","Ajouter le commentaire")("rounded",!0),h(),P(n.isToastVisible()?16:-1))},dependencies:[Oi,Fi,Mi,Be,Di,Ge,qn,Ie,zt],encapsulation:2})};var _s=(n=>(n.GOOD_HEALTH="Bonne sant\xE9",n.INJURED="Bless\xE9",n.SICK="Malade",n))(_s||{});var vs=class i{apiUrl=`${we.apiUrl}/api/veterinary/animal-health`;http=G(ft);updateAnimalHealth(e,t){return this.http.patch(`${this.apiUrl}/${e}`,{state:t})}getAnimalHealth(e){return this.http.get(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};function wx(i,e){if(i&1){let t=R();l(0,"app-button",5),w("click",function(){let a=S(t).$implicit,s=f();return C(s.setActiveTab(a.id))})("keyup",function(){let a=S(t).$implicit,s=f();return C(s.setActiveTab(a.id))}),c()}if(i&2){let t=e.$implicit,n=f();x("text",t.label)("color",n.activeTab===t.id?"tertiary":"secondary")("customClass","flex-1 py-2 px-4 rounded-lg text-sm font-medium hover:opacity-90 transition-all")}}function Tx(i,e){if(i&1&&(l(0,"p",10),u(1),c()),i&2){let t=f().$implicit;h(),F(" ",t.notes," ")}}function Sx(i,e){if(i&1&&(l(0,"div",7)(1,"p",8),u(2),qe(3,"date"),c(),l(4,"p",9),u(5),c(),I(6,Tx,2,1,"p",10),c()),i&2){let t=e.$implicit;h(2),F(" ",Bt(3,5,t.date,"dd/MM/yyyy HH:mm")," "),h(3),Is(" ",t.food_type," - ",t.quantity,"",t.unit," "),h(),P(t.notes?6:-1)}}function Cx(i,e){if(i&1&&(l(0,"section",4)(1,"h2",6),u(2," Historique des repas "),c(),z(3,Sx,7,8,"div",7,ht),c()),i&2){let t=f();h(3),X(t.feedingHistory())}}function kx(i,e){if(i&1&&(l(0,"p",12),u(1),c()),i&2){let t=f().$implicit;h(),F(' "',t.additional_details,'" ')}}function Ax(i,e){if(i&1&&(l(0,"div",7)(1,"p",8),u(2),qe(3,"date"),c(),l(4,"p",9),u(5),c(),l(6,"span"),u(7),c(),l(8,"p",11),u(9),c(),I(10,kx,2,1,"p",12),c()),i&2){let t=e.$implicit,n=f(2);h(2),F(" ",Bt(3,9,t.visit_date,"dd/MM/yyyy HH:mm")," "),h(3),F("Dr. ",t.user_name),h(),Oe(n.getStateClass(t.animal_state)),h(),J(t.animal_state),h(2),Is(" Alimentation recommand\xE9e: ",t.recommended_food_type," - ",t.recommended_food_quantity,"",t.food_unit," "),h(),P(t.additional_details?10:-1)}}function Ex(i,e){if(i&1&&(l(0,"section",4)(1,"h2",6),u(2," Rapports v\xE9t\xE9rinaires "),c(),z(3,Ax,11,12,"div",7,ht),c()),i&2){let t=f();h(3),X(t.veterinaryReports())}}function Lx(i,e){if(i&1&&(l(0,"option",21),u(1),c()),i&2){let t=e.$implicit;x("value",t),h(),J(t)}}function Dx(i,e){if(i&1&&(l(0,"option",21),u(1),c()),i&2){let t=e.$implicit;x("value",t),h(),J(t)}}function Fx(i,e){if(i&1){let t=R();l(0,"section")(1,"h2",6),u(2," Nouveau rapport v\xE9t\xE9rinaire "),c(),l(3,"form",13),w("ngSubmit",function(){S(t);let a=f();return C(a.onSubmit())}),l(4,"div")(5,"label",14),u(6," Animal "),c(),l(7,"div",15),u(8),c()(),l(9,"div")(10,"label",16),u(11," Date de visite "),c(),y(12,"input",17),c(),l(13,"div")(14,"label",18),u(15," \xC9tat de sant\xE9 de l'animal "),c(),l(16,"select",19)(17,"option",20),u(18,"S\xE9lectionner un \xE9tat"),c(),z(19,Lx,2,2,"option",21,ht),c()(),l(21,"fieldset",22)(22,"legend",23),u(23," Recommandations alimentaires "),c(),l(24,"div")(25,"label",24),u(26," Type d'alimentation "),c(),y(27,"input",25),c(),l(28,"div",26)(29,"div",27)(30,"label",28),u(31," Quantit\xE9 "),c(),y(32,"input",29),c(),l(33,"div",30)(34,"label",31),u(35," Unit\xE9 "),c(),l(36,"select",32)(37,"option",20),u(38,"Unit\xE9"),c(),z(39,Dx,2,2,"option",21,ht),c()()()(),l(41,"div")(42,"label",33),u(43," Observations "),c(),y(44,"textarea",34),c(),l(45,"div",35)(46,"button",36),w("click",function(){S(t);let a=f();return C(a.closeModal())}),u(47," Annuler "),c(),l(48,"button",37),u(49),c()()()()}if(i&2){let t,n=f();h(3),x("formGroup",n.reportForm),h(5),F(" ",(t=n.reportForm.get("animal_name"))==null?null:t.value," "),h(11),X(n.animalStates),h(20),X(n.foodUnits),h(9),x("disabled",!n.reportForm.valid||n.isSubmitting()),h(),F(" ",n.isSubmitting()?"Enregistrement...":"Enregistrer"," ")}}var ys=class i{animalId;close=new N;reportForm;isModalOpen=!0;activeTab="veterinary";veterinaryReports=k([]);feedingHistory=k([]);animalStates=Object.values(_s);foodUnits=["kg","g"];tabs=[{id:"feeding",label:"Historique des repas"},{id:"veterinary",label:"Rapports v\xE9t\xE9rinaires"},{id:"new",label:"Nouveau rapport"}];AnimalState=_s;selectedState=k("Bonne sant\xE9");selectedAnimalId=k(null);isSubmitting=k(!1);fb=G(yt);veterinaryReportsService=G(ml);authService=G(Te);toastService=G(Ve);animalHealthService=G(vs);ngOnInit(){this.initForm(),this.animalId&&(this.selectedAnimalId.set(this.animalId),this.loadAnimalDetails(),this.loadVeterinaryReports(),this.loadFeedingHistory())}initForm(){this.reportForm=this.fb.group({id_animal:[null,W.required],animal_name:["",W.required],visit_date:[new Date,W.required],animal_state:["",W.required],recommended_food_type:["",W.required],recommended_food_quantity:[null,[W.required,W.min(0)]],food_unit:["",W.required],additional_details:[""]})}loadAnimalDetails(){this.veterinaryReportsService.fetchAnimalDetails(this.animalId).subscribe({next:e=>{e&&this.reportForm.patchValue({id_animal:e.id_animal,animal_name:e.name,animal_photo:e.images})},error:e=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'animal:",e)})}loadVeterinaryReports(){this.animalId&&this.veterinaryReportsService.getReportsByAnimalId(this.animalId).subscribe({next:e=>{e&&e.length>0?this.veterinaryReports.set(e):this.veterinaryReports.set([])},error:e=>{console.error("Erreur lors du chargement des rapports:",e),this.toastService.showError("Erreur lors du chargement des rapports v\xE9t\xE9rinaires"),this.veterinaryReports.set([])}})}loadFeedingHistory(){this.animalId&&this.feedingHistory.set([])}getStateClass(e){let t="px-3 py-1 rounded-full text-sm font-semibold";switch(e.toLowerCase()){case"Bonne sant\xE9".toLowerCase():return`${t} bg-green-100 text-green-800`;case"Bless\xE9".toLowerCase():return`${t} bg-yellow-100 text-yellow-800`;case"Malade".toLowerCase():return`${t} bg-red-100 text-red-800`;default:return`${t} bg-gray-100 text-gray-800`}}closeModal(){this.close.emit()}onSubmit(){if(this.reportForm.valid){this.isSubmitting.set(!0);let e=this.authService.user();if(!e?.id){console.error("Utilisateur non connect\xE9");return}let t=ve(Z({},this.reportForm.value),{id_user:e.id,user_name:e.name,animal_state:this.reportForm.value.animal_state});this.veterinaryReportsService.createReport(t).subscribe({next:n=>{console.log("Rapport cr\xE9\xE9 avec succ\xE8s",n),this.isSubmitting.set(!1),new Promise(s=>{this.toastService.showSuccess("Rapport v\xE9t\xE9rinaire enregistr\xE9 avec succ\xE8s"),setTimeout(s,3e3)}).then(()=>{this.closeModal()})},error:()=>{this.isSubmitting.set(!1),this.toastService.showError("Erreur lors de l'enregistrement du rapport")}})}}updateHealthState(){if(!this.selectedAnimalId()){this.toastService.showError("Veuillez s\xE9lectionner un animal");return}this.animalHealthService.updateAnimalHealth(this.selectedAnimalId(),this.selectedState()).subscribe({next:()=>{this.toastService.showSuccess("\xC9tat de sant\xE9 mis \xE0 jour avec succ\xE8s")},error:e=>{console.error("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9:",e),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9")}})}updateAnimalState(e){this.animalId&&this.animalHealthService.updateAnimalHealth(this.animalId,e).subscribe({next:()=>{this.toastService.showSuccess("\xC9tat de sant\xE9 mis \xE0 jour avec succ\xE8s"),this.loadVeterinaryReports()},error:t=>{console.error("Erreur lors de la mise \xE0 jour:",t),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9")}})}setActiveTab(e){this.activeTab=e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-veterinary-reports"]],inputs:{animalId:"animalId"},outputs:{close:"close"},decls:8,vars:1,consts:[[1,"max-w-xl","mx-auto"],[1,"flex","gap-2","mb-6"],[3,"text","color","customClass"],[1,"bg-white","p-4","rounded-lg","shadow-sm"],[1,"space-y-3"],[3,"click","keyup","text","color","customClass"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"p-3","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600"],[1,"font-medium"],[1,"mt-1","text-sm","text-gray-600"],[1,"mt-2","text-sm","font-medium"],[1,"mt-1","text-sm","text-gray-600","italic"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","animal-name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"p-2","bg-gray-100","rounded-md","text-sm"],["for","visit-date",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","visit-date","type","date","formControlName","visit_date",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["for","animal-state",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","animal-state","formControlName","animal_state",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["value",""],[3,"value"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700"],["for","food-type",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-type","type","text","formControlName","recommended_food_type","placeholder","Type d'alimentation recommand\xE9",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"flex","gap-2"],[1,"w-2/3"],["for","food-quantity",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-quantity","type","number","formControlName","recommended_food_quantity","placeholder","Quantit\xE9",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"w-1/3"],["for","food-unit",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-unit","formControlName","food_unit",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["for","observations",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","observations","formControlName","additional_details","rows","3","placeholder","Ajoutez des observations...",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"flex","justify-end","gap-2"],["type","button",1,"px-4","py-2","text-sm","rounded-md","bg-secondary","text-white","hover:bg-opacity-90","transition-all",3,"click"],["type","submit",1,"px-4","py-2","text-sm","rounded-md","bg-tertiary","text-white","hover:bg-opacity-90","transition-all","disabled:opacity-50",3,"disabled"]],template:function(t,n){if(t&1&&(l(0,"div",0)(1,"nav",1),z(2,wx,1,3,"app-button",2,ht),c(),l(4,"div",3),I(5,Cx,5,0,"section",4)(6,Ex,5,0,"section",4)(7,Fx,50,4,"section"),c()()),t&2){let a;h(2),X(n.tabs),h(3),P((a=n.activeTab)==="feeding"?5:a==="veterinary"?6:a==="new"?7:-1)}},dependencies:[je,Oi,tt,Fi,Mi,Be,nl,Di,Ge,et,it,_t,vt,Ie,Gt],encapsulation:2})};var Mx=(i,e)=>e.id_animal,Ox=(i,e)=>e.id_habitat;function Vx(i,e){if(i&1){let t=R();l(0,"div",13)(1,"div",25),y(2,"img",26)(3,"div",27),l(4,"h3",28),u(5),c()(),l(6,"div",29)(7,"table",30)(8,"thead")(9,"tr")(10,"th",31),u(11," Caract\xE9ristique "),c(),l(12,"th",32),u(13,"D\xE9tail"),c()()(),l(14,"tbody")(15,"tr")(16,"td",33),u(17,"Esp\xE8ce:"),c(),l(18,"td",34),u(19),c()(),l(20,"tr")(21,"td",33),u(22,"R\xE9gime:"),c(),l(23,"td",34),u(24),c()(),l(25,"tr")(26,"td",33),u(27,"Habitat:"),c(),l(28,"td",35),u(29),c()()()(),l(30,"div",36)(31,"app-button",37),w("click",function(){let a=S(t).$implicit,s=f(2);return C(s.openVetReportsHistory(a.id_animal))})("keydown",function(){let a=S(t).$implicit,s=f(2);return C(s.openVetReportsHistory(a.id_animal))}),c(),l(32,"app-button",37),w("click",function(){let a=S(t).$implicit,s=f(2);return C(s.openFeedingHistory(a.id_animal))})("keydown",function(){let a=S(t).$implicit,s=f(2);return C(s.openFeedingHistory(a.id_animal))}),c()()()()}if(i&2){let t=e.$implicit,n=f(2);h(2),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(14),J(t.species),h(5),J(t.diet),h(5),F(" ",n.getHabitatName(t.habitat_id)," "),h(2),x("text","Rapports")("color","tertiary")("rounded",!0),h(),x("text","Historique")("color","secondary")("rounded",!0)}}function Ix(i,e){if(i&1){let t=R();l(0,"div",16)(1,"div",38),y(2,"img",26)(3,"div",27),l(4,"h3",28),u(5),c()(),l(6,"div",39)(7,"app-button",37),w("click",function(){let a=S(t).$implicit,s=f(2);return C(s.selectHabitat(a.id_habitat))})("keydown",function(){let a=S(t).$implicit,s=f(2);return C(s.selectHabitat(a.id_habitat))}),c(),l(8,"app-button",37),w("click",function(){let a=S(t).$implicit,s=f(2);return C(s.viewHabitatComments(a.id_habitat))})("keydown",function(){let a=S(t).$implicit,s=f(2);return C(s.viewHabitatComments(a.id_habitat))}),c()()()}if(i&2){let t=e.$implicit;h(2),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(2),x("text","Commentaire")("color","tertiary")("rounded",!0),h(),x("text","Historique")("color","secondary")("rounded",!0)}}function Px(i,e){if(i&1&&(l(0,"div",46),y(1,"app-feeding-history-vet",24),c()),i&2){let t=f(3);h(),x("animalId",t.selectedAnimalId())}}function Rx(i,e){if(i&1&&(l(0,"div",47),y(1,"app-veterinary-reports",24),c()),i&2){let t=f(3);h(),x("animalId",t.selectedAnimalId())}}function Nx(i,e){if(i&1){let t=R();l(0,"div",40)(1,"div",41)(2,"app-button",42),w("click",function(){S(t);let a=f(2);return C(a.toggleHistoryView(!1))})("keydown",function(){S(t);let a=f(2);return C(a.toggleHistoryView(!1))}),c(),l(3,"app-button",42),w("click",function(){S(t);let a=f(2);return C(a.toggleHistoryView(!0))})("keydown",function(){S(t);let a=f(2);return C(a.toggleHistoryView(!0))}),c()(),l(4,"button",43),w("click",function(){S(t);let a=f(2);return C(a.closeHistoryModal())}),D(),l(5,"svg",44),y(6,"path",45),c()()(),I(7,Px,2,1,"div",46)(8,Rx,2,1,"div",47)}if(i&2){let t=f(2);h(2),x("text","Historique des repas")("color",t.showVetReports()?"secondary":"tertiary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),h(),x("text","Rapports v\xE9t\xE9rinaires")("color",t.showVetReports()?"tertiary":"secondary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),h(4),P(t.showVetReports()?8:7)}}function Hx(i,e){if(i&1){let t=R();l(0,"app-habitat-comment",48),w("commentAdded",function(){S(t);let a=f(2);return C(a.closeHabitatModal())}),c()}if(i&2){let t=f(2);x("habitatId",t.selectedHabitatId())}}function Bx(i,e){if(i&1){let t=R();l(0,"app-habitat-comment-history",49),w("close",function(){S(t);let a=f(2);return C(a.closeHabitatHistoryModal())}),c()}if(i&2){let t,n=f(2);x("habitatId",n.selectedHabitatId())("habitatImage",((t=n.getSelectedHabitat())==null?null:t.images)??"")("habitatName",n.getHabitatName(n.selectedHabitatId()))}}function Gx(i,e){if(i&1&&y(0,"app-veterinary-reports",24),i&2){let t=f(2);x("animalId",t.selectedAnimalId())}}function $x(i,e){if(i&1){let t=R();l(0,"div",7)(1,"div",8)(2,"h2",9),y(3,"i",10),u(4,"Animaux "),c(),y(5,"div",11),c(),l(6,"div",12),z(7,Vx,33,12,"div",13,Mx),c()(),l(9,"div",7)(10,"div",8)(11,"h2",9),y(12,"i",14),u(13,"Habitats "),c()(),l(14,"div",15),z(15,Ix,9,9,"div",16,Ox),c()(),l(17,"app-modal",17),w("close",function(){S(t);let a=f();return C(a.closeHistoryModal())}),l(18,"div",18),I(19,Nx,9,9),c()(),l(20,"app-modal",17),w("close",function(){S(t);let a=f();return C(a.closeHabitatModal())}),l(21,"div",19),I(22,Hx,1,1,"app-habitat-comment",20),l(23,"div",21)(24,"app-button",22),w("click",function(){S(t);let a=f();return C(a.closeHabitatModal())})("keydown",function(){S(t);let a=f();return C(a.closeHabitatModal())}),c()()()(),l(25,"app-modal",17),w("close",function(){S(t);let a=f();return C(a.closeHabitatHistoryModal())}),I(26,Bx,1,3,"app-habitat-comment-history",23),c(),l(27,"app-modal",17),w("close",function(){S(t);let a=f();return C(a.closeReportModal())}),l(28,"div",19),I(29,Gx,1,1,"app-veterinary-reports",24),l(30,"div",21)(31,"app-button",22),w("click",function(){S(t);let a=f();return C(a.closeReportModal())})("keydown",function(){S(t);let a=f();return C(a.closeReportModal())}),c()()()()}if(i&2){let t=f();h(7),X(t.animals()),h(8),X(t.habitats()),h(2),x("isOpen",t.isHistoryModalOpen()),h(2),P(t.selectedAnimalId()?19:-1),h(),x("isOpen",t.isHabitatModalOpen()),h(2),P(t.selectedHabitatId()?22:-1),h(2),x("text","Fermer")("type","button")("color","secondary")("rounded",!0),h(),x("isOpen",t.isHabitatHistoryModalOpen()),h(),P(t.selectedHabitatId()?26:-1),h(),x("isOpen",t.isReportModalOpen()),h(2),P(t.selectedAnimalId()?29:-1),h(2),x("text","Fermer")("type","button")("color","secondary")("rounded",!0)}}var nn=class i{constructor(e,t,n,a){this.habitatService=e;this.animalService=t;this.habitatCommentService=n;this.animalFeedingService=a}habitats=k([]);animals=k([]);activeTab=k("overview");selectedAnimalId=k(null);selectedHabitatId=k(null);_isHistoryModalOpen=k(!1);_isHabitatModalOpen=k(!1);_isHabitatHistoryModalOpen=k(!1);habitatComments=k([]);activeHistoryTab="meals";habitatCommentsMap=k(new Map);_isReportModalOpen=k(!1);_showVetReports=k(!1);showVetReports=fe(()=>this._showVetReports());hasHistory=k(!1);ngOnInit(){this.loadHabitats(),this.loadAnimals()}setActiveTab(e){this.activeTab.set(e)}loadHabitats(){this.habitatService.getHabitats().subscribe({next:e=>this.habitats.set(e),error:e=>console.error("Erreur lors du chargement des habitats:",e)})}loadAnimals(){this.animalService.getAnimals().subscribe({next:e=>this.animals.set(e),error:e=>console.error("Erreur lors du chargement des animaux:",e)})}selectAnimal(e){this.selectedAnimalId.set(e),this._isHistoryModalOpen.set(!0)}selectHabitat(e){this.selectedHabitatId.set(e),this._isHabitatModalOpen.set(!0)}closeHistoryModal(){this._isHistoryModalOpen.set(!1),this.selectedAnimalId.set(null),this._showVetReports.set(!1)}closeHabitatModal(){this._isHabitatModalOpen.set(!1),this.selectedHabitatId.set(null)}viewHabitatComments(e){this.selectedHabitatId.set(e),this.loadHabitatComments(e),this._isHabitatHistoryModalOpen.set(!0)}loadHabitatComments(e){this.habitatCommentService.getCommentsByHabitatId(e).subscribe({next:t=>{let n=new Map(this.habitatCommentsMap());n.set(e,t),this.habitatCommentsMap.set(n)},error:t=>{console.error("Erreur lors du chargement des commentaires:",t)}})}closeHabitatHistoryModal(){this._isHabitatHistoryModalOpen.set(!1),this.selectedHabitatId.set(null),this.habitatComments.set([])}openReportForm(e){this.selectedAnimalId.set(e),this._isReportModalOpen.set(!0)}closeReportModal(){this._isReportModalOpen.set(!1),this.selectedAnimalId.set(null)}getHabitatName(e){let t=this.habitats().find(n=>n.id_habitat===e);return t?t.name:"Non assign\xE9"}openFeedingHistory(e){this.selectedAnimalId.set(e),this._isHistoryModalOpen.set(!0)}isHistoryModalOpen=fe(()=>this._isHistoryModalOpen());isHabitatModalOpen=fe(()=>this._isHabitatModalOpen());isHabitatHistoryModalOpen=fe(()=>this._isHabitatHistoryModalOpen());isReportModalOpen=fe(()=>this._isReportModalOpen());getSelectedHabitat(){return this.habitats().find(e=>e.id_habitat===this.selectedHabitatId())}setActiveHistoryTab(e){this.activeHistoryTab=e,e==="habitats"&&this.habitats().forEach(t=>{this.loadHabitatComments(t.id_habitat)})}viewConsultations(e){console.log("Voir les consultations pour l'animal:",e)}getHabitatComments(e){return this.habitatCommentsMap().get(e)||[]}toggleHistoryView(e){this._showVetReports.set(e)}openVetReportsHistory(e){this.selectedAnimalId.set(e),this._isHistoryModalOpen.set(!0),this._showVetReports.set(!0)}loadFeedingHistory(e){this.animalFeedingService.getFeedingHistory(e).subscribe({next:t=>{this.hasHistory.set(t.length>0)},error:t=>{console.error("Erreur lors du chargement de l'historique:",t)}})}getAnimals(){return this.animalService.getAnimals()}static \u0275fac=function(t){return new(t||i)(A(Xt),A(Ii),A(Jt),A(Zn))};static \u0275cmp=E({type:i,selectors:[["app-veterinary-dashboard"]],decls:9,vars:1,consts:[[1,"relative","bg-gradient-to-r","from-secondary","to-tertiary/90","shadow-lg"],[1,"absolute","inset-0","bg-[url('/assets/patterns/subtle-dots.png')]","opacity-10"],[1,"container","mx-auto","px-4","py-12"],[1,"relative","z-10"],[1,"flex","flex-col","items-center","justify-center","space-y-4"],[1,"text-4xl","md:text-6xl","font-serif","text-white","font-bold","tracking-tight"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-16"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-serif","text-tertiary","font-bold"],[1,"fas","fa-paw","mr-2"],[1,"flex","space-x-2"],[1,"grid","grid-cols-1","sm:grid-cols-4","lg:grid-cols-4","gap-6","md:gap-8"],[1,"group","relative","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"fas","fa-home","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6","md:gap-8"],[1,"group","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[3,"close","isOpen"],[1,"w-full","max-w-3xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"w-full","max-w-4xl","mx-auto","bg-white/95","backdrop-blur-sm","p-4","sm:p-6","rounded-xl","shadow-xl"],[3,"habitatId"],[1,"flex","justify-center","mt-6"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","keydown","text","type","color","rounded"],[3,"habitatId","habitatImage","habitatName"],[3,"animalId"],[1,"relative","h-56","overflow-hidden"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-300",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/60","to-transparent"],[1,"absolute","bottom-4","left-4","text-2xl","font-serif","text-white","font-bold"],[1,"p-6"],[1,"w-full","text-sm"],[1,"text-left","text-tertiary","font-medium","pr-2"],[1,"text-left","text-tertiary","font-medium"],[1,"text-tertiary","font-medium","pr-2"],[1,"text-quinary/80"],[1,"text-quinary/80","line-clamp-2"],[1,"grid","grid-cols-2","gap-2","mt-4"],[1,"transform","hover:-translate-y-0.5","transition-all","duration-300",3,"click","keydown","text","color","rounded"],[1,"relative","h-48","overflow-hidden"],[1,"grid","grid-cols-2","gap-2","p-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","gap-4"],[3,"click","keydown","text","color","rounded","customClass"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"min-h-[400px]","flex","flex-col"],[1,"min-h-[400px]"],[3,"commentAdded","habitatId"],[3,"close","habitatId","habitatImage","habitatName"]],template:function(t,n){t&1&&(l(0,"section",0),y(1,"div",1),l(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),u(6," Tableau de Bord V\xE9t\xE9rinaire "),c()()()()(),l(7,"div",6),I(8,$x,32,16),c()),t&2&&(h(8),P(n.activeTab()==="overview"?8:-1))},dependencies:[Vi,gs,xs,Ie,fs,ys],encapsulation:2})};var bs=class i{animals=[];count=4;updateAnimals=new N;intervalSubscription;ngOnInit(){this.updateDisplayedAnimals(),this.intervalSubscription=po(5e3).subscribe(()=>{this.updateDisplayedAnimals()})}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}updateDisplayedAnimals(){let t=[...this.animals].sort(()=>.5-Math.random()).slice(0,this.count);this.updateAnimals.emit(t)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=sn({type:i,selectors:[["","appRandomAnimals",""]],inputs:{animals:"animals",count:"count"},outputs:{updateAnimals:"updateAnimals"}})};var ws=class i{constructor(e){this.http=e}apiUrl=`${we.apiUrl}/api/animals`;imageBaseUrl=`${we.apiUrl}/api`;getAnimals(){return this.http.get(this.apiUrl).pipe(Gn(e=>e.map(t=>ve(Z({},t),{images:this.formatImageUrl(t.images,"animals")}))))}formatImageUrl(e,t="animals"){if(!e)return null;if(e.startsWith("http")||e.startsWith("https"))return e;if(e.includes("uploads")){let n=e.split("/");e=n[n.length-1]}return`${this.imageBaseUrl}/uploads/${t}/${e}`}static \u0275fac=function(t){return new(t||i)(de(ft))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var Xx=i=>["/animal",i],Wx=(i,e)=>e.id_animal;function Yx(i,e){if(i&1&&(l(0,"div",7)(1,"a",8)(2,"div",9)(3,"div",10),y(4,"img",11),c()(),l(5,"div",12)(6,"h3",13),u(7),c(),l(8,"span",14),u(9," Cliquez pour d\xE9couvrir "),c()(),l(10,"div",15)(11,"h3",16),u(12),c()()()()),i&2){let t=e.$implicit;h(),x("routerLink",Ht(5,Xx,t.id_animal)),h(3),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(5),F(" ",t.name," ")}}var Ts=class i{constructor(e,t){this.animalOverviewService=e;this.route=t}animal=k(void 0);animals=k([]);displayedAnimals=k([]);imageBaseUrl=`${we.apiUrl}/api/uploads/animals`;ngOnInit(){this.loadAnimals()}loadAnimals(){this.animalOverviewService.getAnimals().subscribe({next:e=>{this.animals.set(e),this.displayedAnimals.set(this.getRandomAnimals(e,3))},error:e=>console.error("Erreur lors du chargement des animaux:",e)})}getRandomAnimals(e,t){return[...e].sort(()=>.5-Math.random()).slice(0,t)}onUpdateDisplayedAnimals(e){this.displayedAnimals.set(e)}static \u0275fac=function(t){return new(t||i)(A(ws),A(Qo))};static \u0275cmp=E({type:i,selectors:[["app-animals-overview"]],decls:11,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],["appRandomAnimals","",1,"max-w-7xl","mx-auto",3,"updateAnimals","animals","count"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group",3,"routerLink"],[1,"relative","group","rounded-xl","overflow-hidden"],[1,"aspect-square","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Animaux "),c(),l(5,"p",4),u(6," D\xE9couvrez nos animaux fascinants qui peuplent nos trois habitats uniques : la jungle luxuriante, les marais myst\xE9rieux et la savane aride. Chaque animal r\xE9v\xE8le un aper\xE7u captivant de son habitat naturel. "),c()(),l(7,"div",5),w("updateAnimals",function(s){return n.onUpdateDisplayedAnimals(s)}),l(8,"div",6),z(9,Yx,13,7,"div",7,Wx),c()()()()),t&2&&(h(7),x("animals",n.animals())("count",3),h(2),X(n.displayedAnimals()))},dependencies:[$t,bs],encapsulation:2})};var qx=i=>["/habitat",i],jx=(i,e)=>e.id_habitat;function Ux(i,e){if(i&1&&(l(0,"div",6)(1,"a",7),y(2,"img",8),l(3,"div",9)(4,"h3",10),u(5),c(),l(6,"p",11),u(7),c()(),l(8,"div",12)(9,"h3",13),u(10),c()()()()),i&2){let t=e.$implicit;h(),x("routerLink",Ht(6,qx,t.id_habitat)),h(),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(2),F(" ",t.description," "),h(3),F(" ",t.name," ")}}var Ss=class i{constructor(e){this.habitatService=e}destroyRef=G(Ti);habitats=k([]);ngOnInit(){this.loadHabitats()}loadHabitats(){this.habitatService.getHabitats().pipe(Pi(this.destroyRef)).subscribe({next:e=>{this.habitats.set(e)},error:e=>console.error("Erreur lors du chargement des habitats:",e)})}static \u0275fac=function(t){return new(t||i)(A(Xt))};static \u0275cmp=E({type:i,selectors:[["app-habitats-overview"]],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Habitats "),c(),l(5,"p",4),u(6," Explorez la beaut\xE9 sauvage et la diversit\xE9 fascinante de trois \xE9cosyst\xE8mes uniques : la savane, la jungle et les marais. Chaque habitat vous d\xE9voile la richesse de la vie sous ses formes les plus \xE9tonnantes. "),c()(),l(7,"div",5),z(8,Ux,11,8,"div",6,jx),c()()()),t&2&&(h(8),X(n.habitats()))},dependencies:[$t],encapsulation:2})};var Qx=i=>["/service",i],Zx=(i,e)=>e.id_service;function Kx(i,e){if(i&1&&(l(0,"div",6)(1,"a",7),y(2,"img",8),l(3,"div",9)(4,"h3",10),u(5),c(),l(6,"p",11),u(7),c()(),l(8,"div",12)(9,"h3",13),u(10),c()()()()),i&2){let t=e.$implicit;h(),x("routerLink",Ht(6,Qx,t.id_service)),h(),x("src",t.images,Ae)("alt",t.name),h(3),F(" ",t.name," "),h(2),F(" ",t.description," "),h(3),F(" ",t.name," ")}}var Cs=class i{constructor(e){this.serviceService=e}destroyRef=G(Ti);services=k([]);ngOnInit(){this.loadServices()}loadServices(){this.serviceService.getServices().pipe(Pi(this.destroyRef)).subscribe({next:e=>{this.services.set(e)},error:e=>console.error("Erreur lors du chargement des services:",e)})}static \u0275fac=function(t){return new(t||i)(A(jn))};static \u0275cmp=E({type:i,selectors:[["app-services-overview"]],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Services "),c(),l(5,"p",4),u(6," D\xE9couvrez nos services pour une exp\xE9rience enrichissante au zoo ! Profitez de nos diff\xE9rentes options pour rendre votre visite inoubliable. "),c()(),l(7,"div",5),z(8,Kx,11,8,"div",6,Zx),c()()()),t&2&&(h(8),X(n.services()))},dependencies:[$t],encapsulation:2})};function e_(i,e){i&1&&(l(0,"span"),u(1,"Le nom est requis"),c())}function t_(i,e){i&1&&(l(0,"span"),u(1,"Le nom doit contenir au moins 2 caract\xE8res"),c())}function i_(i,e){i&1&&(l(0,"span"),u(1,"Le nom contient des caract\xE8res non autoris\xE9s"),c())}function n_(i,e){if(i&1&&(l(0,"div",11),I(1,e_,2,0,"span")(2,t_,2,0,"span")(3,i_,2,0,"span"),c()),i&2){let t,n=f();h(),P(!((t=n.opinionForm.get("name"))==null||t.errors==null)&&t.errors.required?1:!((t=n.opinionForm.get("name"))==null||t.errors==null)&&t.errors.minlength?2:!((t=n.opinionForm.get("name"))==null||t.errors==null)&&t.errors.pattern?3:-1)}}function a_(i,e){i&1&&(l(0,"span"),u(1,"L'avis est requis"),c())}function s_(i,e){i&1&&(l(0,"span"),u(1,"L'avis doit contenir au moins 10 caract\xE8res"),c())}function r_(i,e){i&1&&(l(0,"span"),u(1,"L'avis ne doit pas d\xE9passer 500 caract\xE8res"),c())}function o_(i,e){if(i&1&&(l(0,"div",11),I(1,a_,2,0,"span")(2,s_,2,0,"span")(3,r_,2,0,"span"),c()),i&2){let t,n=f();h(),P(!((t=n.opinionForm.get("message"))==null||t.errors==null)&&t.errors.required?1:!((t=n.opinionForm.get("message"))==null||t.errors==null)&&t.errors.minlength?2:!((t=n.opinionForm.get("message"))==null||t.errors==null)&&t.errors.maxlength?3:-1)}}function l_(i,e){i&1&&(l(0,"div",11),u(1,"Veuillez attribuer une note"),c())}function c_(i,e){i&1&&(l(0,"span"),u(1,"La date est requise"),c())}function d_(i,e){i&1&&(l(0,"span"),u(1,"La date ne peut pas \xEAtre dans le futur"),c())}function m_(i,e){if(i&1&&(l(0,"div",11),I(1,c_,2,0,"span")(2,d_,2,0,"span"),c()),i&2){let t,n=f();h(),P(!((t=n.opinionForm.get("date"))==null||t.errors==null)&&t.errors.required?1:!((t=n.opinionForm.get("date"))==null||t.errors==null)&&t.errors.futureDate?2:-1)}}var ks=class i{constructor(e,t,n){this.fb=e;this.userOpinionsService=t;this.toastService=n;this.currentDate=new Date().toISOString().split("T")[0],this.opinionForm=this.fb.group({})}opinionForm;currentDate;isOpen=!1;opinionAdded=new N;closeModal=new N;ngOnInit(){this.initForm()}initForm(){this.opinionForm=this.fb.group({name:["",[W.required,W.minLength(2),W.maxLength(50),W.pattern(/^[a-zA-Z-\s'-]*$/)]],message:["",[W.required,W.minLength(10),W.maxLength(500),W.pattern(/^[a-zA-Z-0-9\s.,!?'"()-]*$/)]],rating:[0,[W.required,W.min(1),W.max(5)]],date:["",[W.required,this.futureDateValidator]]})}futureDateValidator(e){if(!e.value)return null;let t=new Date(e.value),n=new Date,a=new Date(t.toDateString()),s=new Date(n.toDateString());return a>s?{futureDate:!0}:null}onSubmit(){if(this.opinionForm.valid){let e=Z({},this.opinionForm.value);this.userOpinionsService.addUserOpinions(e).subscribe({next:()=>{this.toastService.showSuccess("Votre avis a \xE9t\xE9 envoy\xE9 avec succ\xE8s ! Merci de votre contribution.",2500),this.opinionForm.reset(),this.opinionAdded.emit(),setTimeout(()=>this.closeModal.emit(),2500)},error:t=>{console.error("Erreur lors de l'envoi de l'avis",t),this.toastService.showError("Une erreur est survenue lors de l'envoi de votre avis. Veuillez r\xE9essayer.")}})}}onClose(){this.closeModal.emit()}static \u0275fac=function(t){return new(t||i)(A(yt),A(Jn),A(Ve))};static \u0275cmp=E({type:i,selectors:[["app-add-user-opinions"]],inputs:{isOpen:"isOpen"},outputs:{opinionAdded:"opinionAdded",closeModal:"closeModal"},decls:33,vars:17,consts:[[1,"max-w-2xl","mx-auto","bg-white/95","rounded-2xl","shadow-xl","relative","overflow-hidden"],[1,"bg-tertiary/10","px-8","py-6","border-b","border-tertiary/20","flex","justify-between","items-center"],[1,"text-2xl","font-serif","text-tertiary","font-bold"],[1,"p-2","hover:bg-tertiary/10","rounded-full","transition-all","duration-300",3,"click"],[1,"fas","fa-times","text-tertiary"],[1,"relative"],[1,"px-8","py-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["for","name",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","text","id","name","formControlName","name","placeholder","Votre nom",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],[1,"mt-1","text-sm","text-red-500"],["for","message",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["id","message","formControlName","message","rows","4","placeholder","Partagez votre exp\xE9rience...",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","resize-none","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],["for","rating",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],[1,"p-3.5","border-2","border-tertiary/20","rounded-xl","bg-white","hover:border-tertiary/50","transition-all","duration-300"],["formControlName","rating",1,"w-full"],["for","date",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","date","id","date","formControlName","date",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50",3,"max"],[1,"bg-tertiary/10","px-8","py-6","border-t","border-tertiary/20","flex","justify-center"],[1,"w-full","sm:w-1/2","md:w-1/3","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"keyup","keyup.enter","click","text","type","disabled","rounded","color"]],template:function(t,n){if(t&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Partagez votre exp\xE9rience "),c(),l(4,"button",3),w("click",function(){return n.onClose()}),y(5,"i",4),c()(),l(6,"div",5),y(7,"app-toast"),c(),l(8,"div",6)(9,"form",7),w("ngSubmit",function(){return n.onSubmit()}),l(10,"div",8)(11,"label",9),u(12," Nom "),c(),y(13,"input",10),I(14,n_,4,1,"div",11),c(),l(15,"div",8)(16,"label",12),u(17," Votre avis "),c(),y(18,"textarea",13),I(19,o_,4,1,"div",11),c(),l(20,"div",8)(21,"label",14),u(22," Note "),c(),l(23,"div",15),y(24,"app-rate",16),c(),I(25,l_,2,0,"div",11),c(),l(26,"div",8)(27,"label",17),u(28," Date de votre visite "),c(),y(29,"input",18),I(30,m_,3,1,"div",11),c()()(),l(31,"div",19)(32,"app-button",20),w("keyup",function(){return n.onSubmit()})("keyup.enter",function(){return n.onSubmit()})("click",function(){return n.onSubmit()}),c()()()),t&2){let a,s,r,o,d,m,p;h(9),x("formGroup",n.opinionForm),h(4),ne("border-red-500",((a=n.opinionForm.get("name"))==null||a.errors==null?null:a.errors.required)&&((a=n.opinionForm.get("name"))==null?null:a.touched)),h(),P((s=n.opinionForm.get("name"))!=null&&s.errors&&((s=n.opinionForm.get("name"))!=null&&s.touched)?14:-1),h(4),ne("border-red-500",((r=n.opinionForm.get("message"))==null||r.errors==null?null:r.errors.required)&&((r=n.opinionForm.get("message"))==null?null:r.touched)),h(),P((o=n.opinionForm.get("message"))!=null&&o.errors&&((o=n.opinionForm.get("message"))!=null&&o.touched)?19:-1),h(6),P(!((d=n.opinionForm.get("rating"))==null||d.errors==null)&&d.errors.required&&((d=n.opinionForm.get("rating"))!=null&&d.touched)?25:-1),h(4),ne("border-red-500",((m=n.opinionForm.get("date"))==null||m.errors==null?null:m.errors.required)&&((m=n.opinionForm.get("date"))==null?null:m.touched)),x("max",n.currentDate),h(),P((p=n.opinionForm.get("date"))!=null&&p.errors&&((p=n.opinionForm.get("date"))!=null&&p.touched)?30:-1),h(2),x("text","Envoyer mon avis")("type","submit")("disabled",!n.opinionForm.valid)("rounded",!0)("color","tertiary")}},dependencies:[it,tt,Be,Ge,et,_t,vt,Ie,Kn,zt],encapsulation:2})};function h_(i,e){i&1&&(l(0,"div",6),y(1,"i",14),l(2,"p",15),u(3,"Chargement des avis..."),c()())}function u_(i,e){if(i&1){let t=R();l(0,"div",7)(1,"p",16),u(2," Une erreur est survenue lors du chargement des avis. "),c(),l(3,"app-button",17),w("click",function(){S(t);let a=f();return C(a.loadUserOpinions())})("keydown",function(){S(t);let a=f();return C(a.loadUserOpinions())}),c()()}i&2&&(h(3),x("text","R\xE9essayer")("type","button")("color","tertiary")("rounded",!0))}function p_(i,e){if(i&1){let t=R();l(0,"button",32),w("click",function(){let a=S(t).$index,s=f(2);return C(s.currentUserOpinionsIndex.set(a))}),c()}if(i&2){let t=e.$index,n=f(2);ne("bg-tertiary",t===n.currentUserOpinionsIndex())("bg-tertiary",t!==n.currentUserOpinionsIndex())}}function g_(i,e){if(i&1){let t=R();l(0,"div",8)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",21),u(5),c()(),l(6,"div")(7,"h3",22),u(8),c(),l(9,"p",23),u(10),qe(11,"date"),c()()(),y(12,"app-rate",24),c(),l(13,"p",25),u(14),c(),l(15,"div",26)(16,"app-button",27),w("click",function(){S(t);let a=f();return C(a.changeUserOpinions("previous"))})("keydown",function(){S(t);let a=f();return C(a.changeUserOpinions("previous"))}),y(17,"i",28),c(),l(18,"div",29),z(19,p_,1,4,"button",30,Eo),c(),l(21,"app-button",27),w("click",function(){S(t);let a=f();return C(a.changeUserOpinions("next"))})("keydown",function(){S(t);let a=f();return C(a.changeUserOpinions("next"))}),y(22,"i",31),c()()()}if(i&2){let t=f();h(5),F(" ",t.userOpinions()[t.currentUserOpinionsIndex()].name.charAt(0)," "),h(3),F(" ",t.userOpinions()[t.currentUserOpinionsIndex()].name," "),h(2),F(" ",Po(11,18,t.userOpinions()[t.currentUserOpinionsIndex()].date,"dd MMMM yyyy","fr-FR")," "),h(2),x("rating",t.currentRating)("isReadOnly",t.isReadOnly),h(2),F(' "',t.userOpinions()[t.currentUserOpinionsIndex()].message,'" '),h(2),x("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",t.currentUserOpinionsIndex()===0)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0
                           transition-all duration-300 transform hover:-translate-x-1`),h(3),X(t.userOpinions()),h(2),x("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",t.currentUserOpinionsIndex()===t.userOpinions().length-1)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0
                           transition-all duration-300 transform hover:translate-x-1`)}}function f_(i,e){i&1&&(l(0,"p",9),u(1," Aucun avis disponible pour le moment. "),c())}var As=class i{constructor(e,t){this.userOpinionsService=e;this.toastService=t}isReadOnly=k(!0);userOpinions=k([]);currentUserOpinionsIndex=k(0);currentRating=k(0);isLoading=k(!0);hasError=k(!1);isModalOpen=k(!1);opinionsSubscription;ngOnInit(){this.loadUserOpinions()}loadUserOpinions(){this.isLoading.set(!0),this.hasError.set(!1),this.opinionsSubscription=this.userOpinionsService.getUserOpinions().subscribe({next:e=>{this.userOpinions.set(e),this.updateCurrentRating(),this.isLoading.set(!1)},error:e=>{console.error("Erreur lors du chargement des avis:",e),this.hasError.set(!0),this.isLoading.set(!1),this.toastService.showError("Impossible de charger les avis utilisateurs")}})}ngOnDestroy(){this.opinionsSubscription?.unsubscribe()}updateCurrentRating(){let e=this.userOpinions(),t=this.currentUserOpinionsIndex();e[t]&&this.currentRating.set(e[t].rating)}changeUserOpinions(e){let t=this.currentUserOpinionsIndex(),n=this.userOpinions().length-1;e==="previous"&&t>0?this.currentUserOpinionsIndex.set(t-1):e==="next"&&t<n&&this.currentUserOpinionsIndex.set(t+1),this.updateCurrentRating()}openModal(){this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}static \u0275fac=function(t){return new(t||i)(A(Jn),A(Ve))};static \u0275cmp=E({type:i,selectors:[["app-user-opinions"]],decls:16,vars:7,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"max-w-3xl","mx-auto"],[1,"text-center","py-8","text-tertiary"],[1,"text-center","py-8"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","mb-8","transition-all","duration-300","border","border-secondary/20"],[1,"text-center","text-tertiary/70"],[1,"text-center","mt-8"],[3,"click","keydown","text","type","color","rounded","customClass"],[3,"closed","isOpen"],[3,"closeModal"],[1,"fas","fa-circle-notch","fa-spin","text-3xl"],[1,"mt-4"],[1,"text-red-500","mb-4"],[1,"w-auto","mx-auto","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","keydown","text","type","color","rounded"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-tertiary","rounded-full","flex","items-center","justify-center","shadow-md"],[1,"text-primary","text-xl","font-semibold"],[1,"font-serif","font-semibold","text-lg","text-tertiary"],[1,"text-sm","text-tertiary/70"],[3,"rating","isReadOnly"],[1,"text-quinary/80","mb-6","italic","text-lg","leading-relaxed"],[1,"flex","justify-between","items-center"],[3,"click","keydown","text","type","color","rounded","disabled","customClass"],[1,"fas","fa-chevron-left"],[1,"flex","gap-2"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"bg-tertiary"],[1,"fas","fa-chevron-right"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"click"]],template:function(t,n){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Avis de nos visiteurs "),c(),l(5,"p",4),u(6," D\xE9couvrez ce que nos visiteurs pensent de leur exp\xE9rience "),c()(),l(7,"div",5),I(8,h_,4,0,"div",6)(9,u_,4,4,"div",7)(10,g_,23,22,"div",8)(11,f_,2,0,"p",9),l(12,"div",10)(13,"app-button",11),w("click",function(){return n.openModal()})("keydown",function(){return n.openModal()}),c()()()()(),l(14,"app-modal",12),w("closed",function(){return n.closeModal()}),l(15,"app-add-user-opinions",13),w("closeModal",function(){return n.closeModal()}),c()()),t&2&&(h(8),P(n.isLoading()?8:n.hasError()?9:n.userOpinions().length>0?10:11),h(5),x("text","Partagez votre exp\xE9rience")("type","button")("color","tertiary")("rounded",!0)("customClass",`!w-auto !px-8 !py-4 font-bold shadow-md hover:shadow-lg
                         transition-all duration-300 transform hover:-translate-y-1`),h(),x("isOpen",n.isModalOpen()))},dependencies:[Kn,Ie,Vi,ks,Gt],encapsulation:2})};var Es=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-zoo-intro"]],decls:17,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"max-w-7xl","mx-auto"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","p-8","shadow-xl","border","border-secondary/20","mb-12","relative"],[1,"absolute","-top-4","left-4","md:-top-6","md:left-6"],[1,"fas","fa-quote-left","text-tertiary/50","text-4xl","md:text-5xl"],[1,"text-base","md:text-xl","text-quinary/90","font-sans","leading-relaxed","text-center","max-w-5xl","mx-auto","pt-6"],[1,"relative","group","rounded-2xl","overflow-hidden","shadow-xl","hover:shadow-2xl","transition-all","duration-300"],["src","images/img_home/img-back.webp","alt","Vue du Zoo Arcadia",1,"w-full","h-[300px]","md:h-[500px]","object-cover","transform","group-hover:scale-105","transition-transform","duration-500"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6","md:p-12"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-6","max-w-4xl"],[1,"text-primary","text-center","text-sm","md:text-xl","font-sans"]],template:function(t,n){t&1&&(se(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Bienvenue au Zoo Arcadia "),re()(),se(5,"div",4)(6,"div",5)(7,"div",6),Dt(8,"i",7),re(),se(9,"p",8),u(10," Le Zoo Arcadia, fond\xE9 en 1960, est un parc zoologique situ\xE9 pr\xE8s de la l\xE9gendaire for\xEAt de Broc\xE9liande, en Bretagne, France. Ce zoo, reconnu pour son engagement en faveur du bien-\xEAtre animal et de l'\xE9cologie, est un lieu de conservation o\xF9 les animaux sont soigneusement r\xE9partis selon leurs habitats naturels : savane, jungle, et marais. "),re()(),se(11,"div",9),Dt(12,"img",10),se(13,"div",11)(14,"div",12)(15,"p",13),u(16," Chaque jour, une \xE9quipe de v\xE9t\xE9rinaires effectue des contr\xF4les rigoureux sur chaque animal avant l'ouverture du zoo pour garantir leur bonne sant\xE9. L'alimentation des animaux est minutieusement calcul\xE9e pour r\xE9pondre aux besoins nutritionnels sp\xE9cifiques de chaque esp\xE8ce. "),re()()()()()()())},encapsulation:2})};var Ls=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-home"]],decls:5,vars:0,template:function(t,n){t&1&&y(0,"app-zoo-intro")(1,"app-habitats-overview")(2,"app-animals-overview")(3,"app-services-overview")(4,"app-user-opinions")},dependencies:[As,Es,Ss,Ts,Cs],encapsulation:2})};var x_=[{path:"",component:Ls,title:"Accueil - Zoo Arcadia"},{path:"animal/:id",loadComponent:()=>import("./chunk-YYDLIGA6.js").then(i=>i.AnimalComponent),title:"Animal"},{path:"habitat/:id",loadComponent:()=>import("./chunk-DYZPNZP3.js").then(i=>i.HabitatComponent),title:"Habitat"},{path:"habitats",loadComponent:()=>import("./chunk-DV7X7ITS.js").then(i=>i.HabitatsComponent),title:"Habitats"},{path:"services",loadComponent:()=>import("./chunk-ULTT2MQ5.js").then(i=>i.ServicesComponent),title:"Services"},{path:"service/:id",loadComponent:()=>import("./chunk-D5V4BARW.js").then(i=>i.ServiceComponent),title:"Service"},{path:"contact",loadComponent:()=>import("./chunk-F5ZKFDYM.js").then(i=>i.ContactComponent),title:"Contact"}],__=[{path:"admin",component:ms,children:[{path:"animal-management",component:us},{path:"account-management",loadComponent:()=>import("./chunk-HH7MV4G3.js").then(i=>i.AccountManagementComponent),title:"Gestion des comptes"},{path:"service-management",loadComponent:()=>import("./chunk-HENJ5ZQ6.js").then(i=>i.ServiceManagementComponent),title:"Modification des services"},{path:"habitat-management",loadComponent:()=>import("./chunk-L4T7HZFF.js").then(i=>i.HabitatManagementComponent),title:"Gestion des habitats"},{path:"veterinary-reports",loadComponent:()=>import("./chunk-DJTTEQ2G.js").then(i=>i.ReportsVeterinaryManagement),title:"Comptes rendus des v\xE9t\xE9rinaires"},{path:"history-management",loadComponent:()=>import("./chunk-GDRUIAHD.js").then(i=>i.HistoryManagementComponent),title:"Consultation des historiques"},{path:"opening-hours-management",component:ps,title:"Gestion des horaires d'ouverture"}]}],v_=[{path:"veterinaire",component:nn,title:"Dashboard V\xE9t\xE9rinaire",canActivate:[La],data:{roles:["Veterinaire"]},children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:nn},{path:"history",component:nn}]}],y_=[{path:"employe",loadComponent:()=>import("./chunk-3RTQDE6K.js").then(i=>i.EmployeDashboardComponent),title:"Employ\xE9",canActivate:[La],data:{roles:["Employe"]},children:[{path:"",redirectTo:"pending",pathMatch:"full"},{path:"pending",loadComponent:()=>import("./chunk-ONPTD7QF.js").then(i=>i.UserOpinionManagementComponent)},{path:"validated",loadComponent:()=>import("./chunk-ONPTD7QF.js").then(i=>i.UserOpinionManagementComponent)},{path:"rejected",loadComponent:()=>import("./chunk-ONPTD7QF.js").then(i=>i.UserOpinionManagementComponent)}]}],b_=[{path:"update-password",loadComponent:()=>import("./chunk-DOWTCMZB.js").then(i=>i.UpdatePasswordComponent),title:"Modification du mot de passe",canActivate:[La],data:{roles:["Admin","Veterinaire","Employe"]}}],qm=[...x_,...__,...v_,...y_,...b_,{path:"**",redirectTo:""}];var w_=["/api/auth/login","/api/auth/refresh","/api/public"],jm=(i,e)=>{let t=G(Mt),n=G(Te);return w_.some(a=>i.url.includes(a))?e(i):e(Um(i,t)).pipe(pe(a=>a.status===qo.Unauthorized?T_(a,n,i,e):Me(()=>ve(Z({},a),{message:`Erreur lors de la requ\xEAte: ${a.message}`,timestamp:new Date().toISOString()}))))};function T_(i,e,t,n){let a=G(Mt);return e.refreshToken().pipe(wi(()=>n(Um(t,a))),pe(s=>(e.logout(),Me(()=>ve(Z({},s),{message:"Session expir\xE9e. Veuillez vous reconnecter.",timestamp:new Date().toISOString()})))))}function Um(i,e){let t=e.getToken();return t?i.clone({setHeaders:{Authorization:`Bearer ${t}`,"X-Request-ID":crypto.randomUUID()},withCredentials:!0}):i.clone({withCredentials:!0})}var Qm={providers:[Ro({eventCoalescing:!0}),Zo(qm),jo(Uo([jm])),vc(),{provide:No,useValue:"fr-FR"},go(ol),Un]};zo(hl);Wo(la,Qm).catch(i=>console.error(i));
