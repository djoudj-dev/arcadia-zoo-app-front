"use strict";(self.webpackChunkarcadia_zoo_app_front=self.webpackChunkarcadia_zoo_app_front||[]).push([[396],{7396:(F,p,o)=>{o.r(p),o.d(p,{AnimalComponent:()=>R});var x=o(177),t=o(4438),f=o(6354),v=o(8219),u=o(494),h=o(9260),y=o(7472);function b(n,_){if(1&n&&(t.j41(0,"div",36),t.nrm(1,"i",40),t.j41(2,"div")(3,"p",33)(4,"span",17),t.EFF(5,"D\xe9tails suppl\xe9mentaires : "),t.k0s(),t.j41(6,"span",18),t.EFF(7),t.k0s()()()()),2&n){let a;const e=t.XpG(3);t.R7$(7),t.SpI(" ",null==(a=e.latestVeterinaryReport())?null:a.additional_details," ")}}function g(n,_){if(1&n&&(t.j41(0,"div",22)(1,"h2",25),t.nrm(2,"i",26),t.EFF(3," Dernier rapport v\xe9t\xe9rinaire "),t.k0s(),t.j41(4,"div",27)(5,"div",28),t.nrm(6,"div",29),t.j41(7,"div",30)(8,"div",31),t.nrm(9,"i",32),t.j41(10,"p",33)(11,"span",17),t.EFF(12,"Date de visite : "),t.k0s(),t.j41(13,"span",34),t.EFF(14),t.nI1(15,"date"),t.k0s()()(),t.j41(16,"span"),t.EFF(17),t.k0s()(),t.j41(18,"div",35)(19,"div",36),t.nrm(20,"i",37),t.j41(21,"div")(22,"p",33)(23,"span",17),t.EFF(24,"Alimentation recommand\xe9e : "),t.k0s(),t.j41(25,"span",18),t.EFF(26),t.k0s()()()(),t.DNE(27,b,8,1,"div",36),t.j41(28,"div",38),t.nrm(29,"i",39),t.j41(30,"p",33)(31,"span",17),t.EFF(32,"V\xe9t\xe9rinaire : "),t.k0s(),t.j41(33,"span",18),t.EFF(34),t.k0s()()()()()()()),2&n){let a,e,r,i,d,m;const l=t.XpG(2);t.R7$(14),t.SpI(" ",t.i5U(15,9,null==(a=l.latestVeterinaryReport())?null:a.visit_date,"dd/MM/yyyy")," "),t.R7$(2),t.HbH(l.getStateClass((null==(e=l.latestVeterinaryReport())?null:e.animal_state)||"")),t.R7$(),t.SpI(" ",null==(r=l.latestVeterinaryReport())?null:r.animal_state," "),t.R7$(9),t.E5c(" ",null==(i=l.latestVeterinaryReport())?null:i.recommended_food_quantity," ",null==(i=l.latestVeterinaryReport())?null:i.food_unit," de ",null==(i=l.latestVeterinaryReport())?null:i.recommended_food_type," "),t.R7$(),t.vxM(null!=(d=l.latestVeterinaryReport())&&d.additional_details?27:-1),t.R7$(7),t.SpI(" ",null==(m=l.latestVeterinaryReport())?null:m.user_name," ")}}function E(n,_){if(1&n){const a=t.RV6();t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.k0s(),t.j41(5,"p",4),t.EFF(6),t.k0s()()(),t.j41(7,"div",5)(8,"div",6)(9,"div",7),t.nrm(10,"img",8)(11,"div",9),t.k0s(),t.j41(12,"div",10)(13,"div",11)(14,"h2",12),t.EFF(15," Informations "),t.k0s()(),t.j41(16,"div",13)(17,"div",14),t.nrm(18,"i",15),t.j41(19,"p",16)(20,"span",17),t.EFF(21,"Habitat : "),t.k0s(),t.j41(22,"span",18),t.EFF(23),t.k0s()()(),t.j41(24,"div",14),t.nrm(25,"i",19),t.j41(26,"p",16)(27,"span",17),t.EFF(28,"Caract\xe9ristiques : "),t.k0s(),t.j41(29,"span",18),t.EFF(30),t.k0s()()(),t.j41(31,"div",14),t.nrm(32,"i",20),t.j41(33,"p",16)(34,"span",17),t.EFF(35,"Poids : "),t.k0s(),t.j41(36,"span",18),t.EFF(37),t.k0s()()(),t.j41(38,"div",14),t.nrm(39,"i",21),t.j41(40,"p",16)(41,"span",17),t.EFF(42,"R\xe9gime : "),t.k0s(),t.j41(43,"span",18),t.EFF(44),t.k0s()()()()(),t.DNE(45,g,35,12,"div",22),t.j41(46,"div",23)(47,"app-button",24),t.bIt("click",function(){t.eBV(a);const r=t.XpG();return t.Njj(r.goBack())}),t.k0s(),t.j41(48,"app-button",24),t.bIt("click",function(){t.eBV(a);const r=t.XpG();return t.Njj(r.goHabitat())}),t.k0s()()()()()}if(2&n){let a,e,r,i,d,m,l,c;const s=t.XpG();t.R7$(4),t.SpI(" ",null==(a=s.animal())?null:a.name," "),t.R7$(2),t.SpI(" ",null==(e=s.animal())?null:e.species," "),t.R7$(4),t.Y8G("src",null==(r=s.animal())?null:r.images,t.B4B)("alt",null==(i=s.animal())?null:i.name),t.R7$(13),t.JRh(null==(d=s.habitat())?null:d.name),t.R7$(7),t.JRh(null==(m=s.animal())?null:m.characteristics),t.R7$(7),t.JRh(null==(l=s.animal())?null:l.weightRange),t.R7$(7),t.JRh(null==(c=s.animal())?null:c.diet),t.R7$(),t.vxM(s.latestVeterinaryReport()?45:-1),t.R7$(2),t.Y8G("text","Retour accueil")("type","button")("color","tertiary")("rounded",!0),t.R7$(),t.Y8G("text","Retour habitat")("type","button")("color","quinary")("rounded",!0)}}let R=(()=>{class n{route;router;animalService;veterinaryReportsService;animal=(0,t.vPA)(void 0);habitat=(0,t.vPA)(void 0);latestVeterinaryReport=(0,t.vPA)(void 0);constructor(a,e,r,i){this.route=a,this.router=e,this.animalService=r,this.veterinaryReportsService=i}ngOnInit(){this.loadAnimal()}loadAnimal(){const a=Number(this.route.snapshot.paramMap.get("id"));this.animalService.getAnimalById(a).subscribe({next:e=>{this.animal.set(e),e&&(this.loadHabitat(e.habitat_id),this.loadVeterinaryReports(e.id_animal))},error:e=>console.error("Erreur lors de la r\xe9cup\xe9ration de l'animal :",e)})}loadHabitat(a){null!=a&&this.animalService.getHabitatById(a).subscribe({next:e=>this.habitat.set(e),error:e=>console.error("Erreur lors de la r\xe9cup\xe9ration de l'habitat :",e)})}goBack(){this.router.navigate(["/"])}goHabitat(){const a=this.habitat()?.id_habitat;a&&this.router.navigate(["/habitat",a])}loadVeterinaryReports(a){this.veterinaryReportsService.getAllReports().pipe((0,f.T)(e=>e.filter(r=>r.id_animal===a).sort((r,i)=>new Date(i.visit_date).getTime()-new Date(r.visit_date).getTime())[0])).subscribe({next:e=>this.latestVeterinaryReport.set(e),error:e=>console.error("Erreur lors du chargement du dernier rapport v\xe9t\xe9rinaire:",e)})}getStateClass(a){const e="px-3 py-1 rounded-full text-sm font-semibold";switch(a.toLowerCase()){case"bonne sant\xe9":return`${e} bg-green-100 text-green-800`;case"surveillance":return`${e} bg-yellow-100 text-yellow-800`;case"malade":return`${e} bg-red-100 text-red-800`;default:return`${e} bg-gray-100 text-gray-800`}}static \u0275fac=function(e){return new(e||n)(t.rXU(u.nX),t.rXU(u.Ix),t.rXU(h.K),t.rXU(y.e))};static \u0275cmp=t.VBU({type:n,selectors:[["app-animal"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic"],[1,"flex","justify-center","w-full","px-4","mt-8"],[1,"bg-white","shadow-xl","rounded-2xl","p-6","w-full","flex","flex-col","items-center","sm:w-3/4","lg:w-2/3"],[1,"w-full","flex","justify-center","mb-8","relative","group"],[1,"w-full","h-auto","object-cover","rounded-xl","shadow-lg","sm:w-3/4","md:w-1/2","transition-all","duration-300","group-hover:shadow-2xl",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-quinary/30","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","rounded-xl"],[1,"bg-secondary/10","backdrop-blur-sm","rounded-xl","shadow-md","w-full","sm:w-3/4","md:w-1/2","p-6","hover:shadow-lg","transition-all","duration-300"],[1,"text-center","mb-6"],[1,"text-tertiary","text-2xl","font-serif","font-bold"],[1,"space-y-5"],[1,"flex","items-start"],[1,"fas","fa-home","text-tertiary","mt-1","mr-3","text-lg"],[1,"text-sm","md:text-base"],[1,"font-bold","text-tertiary"],[1,"font-normal","text-quinary"],[1,"fas","fa-paw","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-weight","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-drumstick-bite","text-tertiary","mt-1","mr-3","text-lg"],[1,"mt-8","w-full","sm:w-3/4","md:w-1/2","p-6"],[1,"w-full","flex","justify-center","pt-8","space-x-6"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","text","type","color","rounded"],[1,"text-xl","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"fas","fa-stethoscope","mr-2"],[1,"bg-gradient-to-br","from-green-50","to-secondary/10","rounded-2xl","shadow-[0_8px_30px_rgb(0,0,0,0.05)]","backdrop-blur-sm","hover:shadow-[0_8px_30px_rgb(0,0,0,0.1)]","transition-all","duration-300","border","border-secondary/20"],[1,"p-6","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-[0.03]","bg-[radial-gradient(#557A46_1px,transparent_1px)]","[background-size:16px_16px]"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4","mb-6","relative"],[1,"flex","items-center","bg-white/50","rounded-lg","px-3","py-2"],[1,"far","fa-calendar-alt","text-tertiary","mr-2"],[1,"text-sm"],[1,"font-normal"],[1,"space-y-4","relative"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-utensils","text-tertiary","mt-1","mr-3"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","mt-4","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-user-md","text-tertiary","mt-1","mr-3"],[1,"fas","fa-notes-medical","text-tertiary","mt-1","mr-3"]],template:function(e,r){1&e&&t.DNE(0,E,49,17,"section",0),2&e&&t.vxM(r.animal()?0:-1)},dependencies:[v.Q,x.vh],encapsulation:2})}return n})()}}]);