import{p as f,s as n}from"./chunk-H7WWMUX6.js";import{Ia as b,Q as p,T as l,Y as h,a as s,b as m,n as o,r}from"./chunk-FRW6CNJS.js";var c=class e{constructor(i){this.http=i}imageBaseUrl=`${n.apiUrl}`;apiUrl=`${n.apiUrl}/api/habitats`;habitatsCache=b([]);getHabitats(){let i=this.habitatsCache();return i.length>0?o(i):this.http.get(this.apiUrl).pipe(r(t=>t.map(a=>m(s({},a),{images:this.formatImageUrl("habitats",a.images)}))),p(t=>this.habitatsCache.set(t)))}getHabitatById(i){return this.getHabitats().pipe(r(t=>t.find(a=>a.id_habitat===i)),p(t=>{t&&(t.images=this.formatImageUrl("habitats",t.images))}))}getAnimalsByHabitatId(i){return this.http.get(`${this.apiUrl}/${i}/animals`).pipe(r(t=>t.map(a=>m(s({},a),{images:a.images?this.formatImageUrl("animals",a.images):""}))))}formatImageUrl(i,t){return t.startsWith("http")||t.startsWith("https")?t:`${this.imageBaseUrl}/${t}`}clearCache(){this.habitatsCache.set([])}static \u0275fac=function(t){return new(t||e)(h(f))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};export{c as a};
