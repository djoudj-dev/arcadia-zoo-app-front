import{a as me}from"./chunk-O65AYKTS.js";import{a as ae,b as re,c as le}from"./chunk-UYZGIIS6.js";import{a as ne}from"./chunk-BH6KRXX3.js";import{c as E,d as c,e as I,f as F,i as D,j as se,k as M,l as k,m as T,n as H,o as q,q as z,s as O}from"./chunk-2KB7PZZF.js";import{i as ie,j as oe,n as A}from"./chunk-LAWGQKM5.js";import{$a as V,Ia as f,Ka as m,Ma as b,O as K,Oa as h,Pa as v,Qa as n,Ra as i,Sa as d,T as R,Ta as y,W as x,Wa as u,Xa as p,Ya as X,Za as Y,_a as r,a as P,ab as N,b as U,bb as Z,da as _,ea as g,fa as J,gb as S,jb as ee,la as w,mb as te,ua as Q,ya as l,za as C}from"./chunk-X5OSXEGS.js";var de=[{id:1,name:"Dr. Sarah Martins",specialization:"Sp\xE9cialiste des grands carnivores (Tigres)",animalsSpecializedIn:[1]},{id:2,name:"Dr. John Doe",specialization:"Sp\xE9cialiste des primates",animalsSpecializedIn:[2]},{id:3,name:"Dr. Emily Turner",specialization:"Sp\xE9cialiste des oiseaux exotiques",animalsSpecializedIn:[3]},{id:4,name:"Dr. Liam Collins",specialization:"Sp\xE9cialiste des reptiles (Serpents)",animalsSpecializedIn:[4]},{id:5,name:"Dr. Noah Peterson",specialization:"Sp\xE9cialiste des reptiles et amphibiens",animalsSpecializedIn:[5,7,8]},{id:6,name:"Dr. Olivia Harper",specialization:"Sp\xE9cialiste des oiseaux aquatiques",animalsSpecializedIn:[6]},{id:7,name:"Dr. Alexander Moore",specialization:"Sp\xE9cialiste des grands f\xE9lins (Lions, Gu\xE9pards)",animalsSpecializedIn:[9,12]},{id:8,name:"Dr. Maya Wilson",specialization:"Sp\xE9cialiste des grands mammif\xE8res (\xC9l\xE9phants, Girafes)",animalsSpecializedIn:[10,11]}];var ce=["*"];function be(o,t){if(o&1){let e=y();n(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){_(e);let s=p();return g(s.closeModal())}),J(),n(3,"svg",3),d(4,"path",4),i()(),Y(5),i()()}}var $=class o{isOpen=!1;close=new w;closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-modal"]],inputs:{isOpen:"isOpen"},outputs:{close:"close"},standalone:!0,features:[S],ngContentSelectors:ce,decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-secondary","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-secondary","w-full","sm:max-w-lg","mx-auto","p-6","rounded-lg","shadow-lg","relative"],[1,"absolute","top-2","right-2","text-quinary","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(e,a){e&1&&(X(),f(0,be,6,0,"div",0)),e&2&&b(a.isOpen?0:-1)},encapsulation:2})};var he=(o,t)=>t.id;function ve(o,t){if(o&1&&(n(0,"option",5),r(1),i()),o&2){let e=t.$implicit;m("value",e.id),l(),V(e.name)}}var B=class o{constructor(t){this.fb=t;this.habitatNoteForm=this.fb.group({habitatId:["",c.required],message:["",[c.required,c.minLength(10)]]})}habitats=[];submitNote=new w;habitatNoteForm;onSubmit(){this.habitatNoteForm.valid?(this.submitNote.emit(this.habitatNoteForm.value),console.log("Form submitted:",this.habitatNoteForm.value),this.habitatNoteForm.reset()):console.log("Form is invalid")}static \u0275fac=function(e){return new(e||o)(C(z))};static \u0275cmp=x({type:o,selectors:[["app-note-habitat"]],inputs:{habitats:"habitats"},outputs:{submitNote:"submitNote"},standalone:!0,features:[S],decls:17,vars:6,consts:[[1,"bg-primary","p-6","rounded-lg","shadow-lg","shadow-secondary","space-y-6",3,"ngSubmit","formGroup"],[1,"text-xl","sm:text-xl","font-bold","text-quinary"],["for","habitatId",1,"block","text-sm","font-bold","text-quinary"],["id","habitatId","formControlName","habitatId",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["value","","disabled","","selected",""],[3,"value"],["for","message",1,"block","text-sm","font-bold","text-quinary"],["id","message","formControlName","message","rows","4","placeholder","Entrez un message",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],[1,"flex","justify-center"],[1,"w-1/2","sm:w-1/3","lg:w-1/2","font-bold",3,"text","type","color","rounded","disabled"]],template:function(e,a){e&1&&(n(0,"form",0),u("ngSubmit",function(){return a.onSubmit()}),n(1,"h3",1),r(2," Donnez votre avis sur un habitat "),i(),n(3,"div")(4,"label",2),r(5,"Habitat"),i(),n(6,"select",3)(7,"option",4),r(8,"Choisissez un habitat"),i(),h(9,ve,2,2,"option",5,he),i()(),n(11,"div")(12,"label",6),r(13,"Message"),i(),d(14,"textarea",7),i(),n(15,"div",8),d(16,"app-button",9),i()()),e&2&&(m("formGroup",a.habitatNoteForm),l(9),v(a.habitats),l(7),m("text","Soumettre avis")("type","submit")("color","tertiary")("rounded",!0)("disabled",a.habitatNoteForm.invalid))},dependencies:[A,O,D,H,q,E,T,I,F,M,k,oe],encapsulation:2})};var G=class o{constructor(t){this.http=t}apiUrl="https://backend-api-url.com/habitat-notes";submitHabitatNote(t){return this.http.post(`${this.apiUrl}/submit`,t)}getAllHabitatNotes(){return this.http.get(`${this.apiUrl}/all`)}getHabitatNotesByHabitatId(t){return this.http.get(`${this.apiUrl}/habitat/${t}`)}static \u0275fac=function(e){return new(e||o)(R(ne))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var j=(o,t)=>t.id;function _e(o,t){if(o&1&&(n(0,"option",8),r(1),i()),o&2){let e=t.$implicit;m("value",e.id),l(),V(e.name)}}function ge(o,t){if(o&1&&d(0,"img",35),o&2){let e=p().$implicit;m("src",e.image,Q)("alt",e.name)}}function ye(o,t){if(o&1&&f(0,ge,1,2,"img",35),o&2){let e=t.$implicit,a=p().$implicit;b(e.id===a.animalId?0:-1)}}function Ne(o,t){if(o&1&&(n(0,"h3",36),r(1),ee(2,"date"),i()),o&2){let e=p().$implicit,a=p().$implicit;l(),Z(" ",e.name," - Visite le ",te(2,2,a.visitDate,"dd/MM/yyyy","fr")," ")}}function Se(o,t){if(o&1&&f(0,Ne,3,6,"h3",36),o&2){let e=t.$implicit,a=p().$implicit;b(e.id===a.animalId?0:-1)}}function Ce(o,t){if(o&1&&(n(0,"div",34)(1,"p",37)(2,"span",32),r(3,"Nourriture :"),i(),r(4),i(),n(5,"p",37)(6,"span",32),r(7,"Grammage :"),i(),r(8),i(),n(9,"p",37)(10,"span",32),r(11,"D\xE9tails suppl\xE9mentaires :"),i(),r(12),i()()),o&2){let e=p().$implicit;l(4),N(" ",e.food," "),l(4),N(" ",e.foodWeight," kg "),l(4),N(" ",e.additionalDetails," ")}}function we(o,t){if(o&1){let e=y();n(0,"div",27)(1,"div",29),h(2,ye,1,1,null,null,j),i(),n(4,"div",30),h(5,Se,1,1,null,null,j),n(7,"p",31)(8,"span",32),r(9,"\xC9tat de l'animal :"),i(),r(10),i(),n(11,"button",33),u("click",function(){let s=_(e).$implicit,L=p();return g(L.toggleDetails(s))}),r(12),i(),f(13,Ce,13,3,"div",34),i()()}if(o&2){let e=t.$implicit,a=p();l(2),v(a.animals),l(3),v(a.animals),l(5),N(" ",e.animalState," "),l(2),N(" ",e.showDetails?"Masquer les d\xE9tails":"Voir les d\xE9tails"," "),l(),b(e.showDetails?13:-1)}}function Ve(o,t){if(o&1){let e=y();n(0,"app-button",38),u("click",function(){_(e);let s=p();return g(s.loadMore())}),i()}o&2&&m("text","Voir plus")("type","button")("color","tertiary")("rounded",!0)}function Ee(o,t){if(o&1){let e=y();n(0,"app-button",38),u("click",function(){_(e);let s=p();return g(s.showLess())}),i()}o&2&&m("text","Voir moins")("type","button")("color","quinary")("rounded",!0)}var ue=class o{constructor(t,e){this.fb=t;this.habitatNoteService=e;this.vetNoteForm=this.fb.group({animalId:["",c.required],animalState:["",c.required],food:["",c.required],foodWeight:[null,[c.required,c.min(.1)]],visitDate:[new Date,c.required],additionalDetails:[""]})}vetNotes=[];visibleVetNotes=[];vets=de;animals=re;habitats=le;selectedVet=null;vetNoteForm;isModalOpen=!1;notesToShow=4;ngOnInit(){this.initializeVetNotes()}initializeVetNotes(){this.vetNotes=ae.map(t=>U(P({},t),{showDetails:!1})),this.visibleVetNotes=this.vetNotes.slice(0,this.notesToShow)}handleSubmitHabitat(t){let e=this.habitats.find(a=>a.id===t.habitatId);if(e){let a={id:Date.now(),habitatId:t.habitatId,vetId:this.selectedVet?.id||0,message:t.message,createdAt:new Date().toISOString()};console.log(`Avis pour l'habitat ${e.name}:`,t.message),this.habitatNoteService.submitHabitatNote(a).subscribe(s=>{console.log("Avis soumis avec succ\xE8s:",s)},s=>{console.error("Erreur lors de la soumission:",s)})}else console.error("Habitat non trouv\xE9 pour ID:",t.habitatId)}loadMore(){let t=this.vetNotes.slice(this.visibleVetNotes.length,this.visibleVetNotes.length+this.notesToShow);this.visibleVetNotes=[...this.visibleVetNotes,...t]}showLess(){this.visibleVetNotes=this.vetNotes.slice(0,this.notesToShow)}assignVetByAnimalId(t){this.selectedVet=this.vets.find(e=>e.animalsSpecializedIn.includes(t))||null}onSubmit(){let t=this.vetNoteForm.value.animalId;this.assignVetByAnimalId(t),this.vetNoteForm.valid&&this.selectedVet&&(this.vetNotes.push(P({id:this.vetNotes.length+1,vetId:this.selectedVet.id,showDetails:!1},this.vetNoteForm.value)),this.vetNoteForm.reset({visitDate:new Date}),this.updateVisibleVetNotes(),this.closeModal())}updateVisibleVetNotes(){this.visibleVetNotes=this.vetNotes.slice(0,this.visibleVetNotes.length)}toggleDetails(t){t.showDetails=!t.showDetails}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}trackByNoteId(t,e){return e.id}static \u0275fac=function(e){return new(e||o)(C(z),C(G))};static \u0275cmp=x({type:o,selectors:[["app-vet"]],standalone:!0,features:[S],decls:48,vars:13,consts:[[1,"min-h-screen","bg-primary","p-4","flex","flex-col","items-center"],[1,"text-2xl","sm:text-4xl","font-bold","text-quinary","mb-8"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold","pb-8",3,"click","text","type","color","rounded"],[3,"close","isOpen"],[1,"bg-primary","p-6","rounded-lg","shadow-md","space-y-6",3,"ngSubmit","formGroup"],["for","animalId",1,"block","text-sm","font-bold","text-quinary"],["id","animalId","formControlName","animalId",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["value","","disabled","","selected",""],[3,"value"],[1,"flex","flex-col","sm:flex-row","sm:space-x-4"],[1,"w-full","sm:w-1/2"],["for","animalState",1,"block","text-sm","font-bold","text-quinary"],["id","animalState","formControlName","animalState","type","text","placeholder","Entrez l'\xE9tat de l'animal",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["for","food",1,"block","text-sm","font-bold","text-quinary"],["id","food","formControlName","food","type","text","placeholder","Entrez la nourriture donn\xE9e",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["for","foodWeight",1,"block","text-sm","font-bold","text-quinary"],["id","foodWeight","formControlName","foodWeight","type","number","step","0.1","placeholder","Entrez le grammage",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["for","visitDate",1,"block","text-sm","font-bold","text-quinary"],["id","visitDate","formControlName","visitDate","type","date",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],["for","additionalDetails",1,"block","text-sm","font-bold","text-quinary"],["id","additionalDetails","formControlName","additionalDetails","rows","4","placeholder","Entrez des d\xE9tails suppl\xE9mentaires",1,"mt-1","block","w-full","px-3","py-2","border","border-quaternary","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm"],[1,"flex","justify-center"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold",3,"text","type","color","rounded"],[3,"submitNote","habitats"],[1,"w-full","max-w-5xl","mt-8"],[1,"text-xl","sm:text-2xl","font-bold","text-quinary","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-2","gap-6"],["appBorderCardAnimal","",1,"bg-white","p-6","rounded-lg","shadow-lg","flex","shadow-secondary"],[1,"flex","justify-center","mt-6","space-x-4"],[1,"w-24","h-24","flex-shrink-0"],[1,"flex-1","pl-4"],[1,"text-sm","text-quinary"],[1,"font-bold"],[1,"mt-2","text-sm","font-semibold","text-tertiary","hover:text-quinary",3,"click"],[1,"mt-4"],[1,"w-full","h-full","rounded-lg","object-cover",3,"src","alt"],[1,"text-lg","font-bold","text-tertiary","mb-2"],[1,"text-sm","text-gray-700"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold",3,"click","text","type","color","rounded"]],template:function(e,a){e&1&&(n(0,"section",0)(1,"h1",1),r(2," Espace V\xE9t\xE9rinaire "),i(),n(3,"app-button",2),u("click",function(){return a.openModal()}),i(),n(4,"app-modal",3),u("close",function(){return a.closeModal()}),n(5,"form",4),u("ngSubmit",function(){return a.onSubmit()}),n(6,"div")(7,"label",5),r(8," Animal "),i(),n(9,"select",6)(10,"option",7),r(11,"Choisissez un animal"),i(),h(12,_e,2,2,"option",8,j),i()(),n(14,"div",9)(15,"div",10)(16,"label",11),r(17," \xC9tat de l'animal "),i(),d(18,"input",12),i(),n(19,"div",10)(20,"label",13),r(21," Nourriture donn\xE9e "),i(),d(22,"input",14),i()(),n(23,"div",9)(24,"div",10)(25,"label",15),r(26," Poids de la nourriture (kg) "),i(),d(27,"input",16),i(),n(28,"div",10)(29,"label",17),r(30," Date de passage "),i(),d(31,"input",18),i()(),n(32,"div")(33,"label",19),r(34," D\xE9tails suppl\xE9mentaires "),i(),d(35,"textarea",20),i(),n(36,"div",21),d(37,"app-button",22),i()()(),n(38,"app-note-habitat",23),u("submitNote",function(L){return a.handleSubmitHabitat(L)}),i(),n(39,"div",24)(40,"h2",25),r(41," Comptes rendus v\xE9t\xE9rinaires "),i(),n(42,"div",26),h(43,we,14,3,"div",27,j),i(),n(45,"div",28),f(46,Ve,1,4,"app-button",22)(47,Ee,1,4,"app-button",22),i()()()),e&2&&(l(3),m("text","Ajouter un compte rendu v\xE9t\xE9rinaire")("type","button")("color","tertiary")("rounded",!0),l(),m("isOpen",a.isModalOpen),l(),m("formGroup",a.vetNoteForm),l(7),v(a.animals),l(25),m("text","Soumettre")("type","submit")("color","tertiary")("rounded",!0),l(),m("habitats",a.habitats),l(5),v(a.visibleVetNotes),l(3),b(a.visibleVetNotes.length<a.vetNotes.length?46:-1),l(),b(a.visibleVetNotes.length>a.notesToShow?47:-1))},dependencies:[O,D,H,q,E,se,T,I,F,M,k,ie,me,A,$,B],encapsulation:2})};export{ue as VetComponent};
