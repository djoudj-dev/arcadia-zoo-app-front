import{a as Y}from"./chunk-TKFMAMM4.js";import{a as G}from"./chunk-PIUU732I.js";import{a as L}from"./chunk-NBXSWBXU.js";import"./chunk-2CBPXYGN.js";import"./chunk-GMW7M4BS.js";import"./chunk-WE56B5VH.js";import{a as F}from"./chunk-TTATSR4U.js";import{c as O,e as z}from"./chunk-PRIUQE34.js";import{a as U}from"./chunk-G3OXHIUX.js";import{Bb as j,Db as V,Fa as D,Fb as u,G as R,Hc as P,Ic as $,Ka as r,Pa as f,Pb as N,Qb as n,Rb as h,Sb as x,Ub as H,Wa as M,cc as B,ec as q,ha as y,ia as g,lb as S,m as C,mb as E,qa as w,rb as b,sb as t,tb as i,u as T,ub as s}from"./chunk-JLM7LPRF.js";function K(d,a){if(d&1&&(t(0,"div",36),s(1,"i",40),t(2,"div")(3,"p",33)(4,"span",17),n(5,"D\xE9tails suppl\xE9mentaires : "),i(),t(6,"span",18),n(7),i()()()()),d&2){let e,l=u(3);r(7),x(" ",(e=l.latestVeterinaryReport())==null?null:e.additional_details," ")}}function Q(d,a){if(d&1&&(t(0,"div",22)(1,"h2",25),s(2,"i",26),n(3," Dernier rapport v\xE9t\xE9rinaire "),i(),t(4,"div",27)(5,"div",28),s(6,"div",29),t(7,"div",30)(8,"div",31),s(9,"i",32),t(10,"p",33)(11,"span",17),n(12,"Date de visite : "),i(),t(13,"span",34),n(14),B(15,"date"),i()()(),t(16,"span"),n(17),i()(),t(18,"div",35)(19,"div",36),s(20,"i",37),t(21,"div")(22,"p",33)(23,"span",17),n(24,"Alimentation recommand\xE9e : "),i(),t(25,"span",18),n(26),i()()()(),S(27,K,8,1,"div",36),t(28,"div",38),s(29,"i",39),t(30,"p",33)(31,"span",17),n(32,"V\xE9t\xE9rinaire : "),i(),t(33,"span",18),n(34),i()()()()()()()),d&2){let e,l,o,c,v,_,m=u(2);r(14),x(" ",q(15,9,(e=m.latestVeterinaryReport())==null?null:e.visit_date,"dd/MM/yyyy")," "),r(2),N(m.getStateClass(((l=m.latestVeterinaryReport())==null?null:l.animal_state)||"")),r(),x(" ",(o=m.latestVeterinaryReport())==null?null:o.animal_state," "),r(9),H(" ",(c=m.latestVeterinaryReport())==null?null:c.recommended_food_quantity," ",(c=m.latestVeterinaryReport())==null?null:c.food_unit," de ",(c=m.latestVeterinaryReport())==null?null:c.recommended_food_type," "),r(),E((v=m.latestVeterinaryReport())!=null&&v.additional_details?27:-1),r(7),x(" ",(_=m.latestVeterinaryReport())==null?null:_.user_name," ")}}function W(d,a){if(d&1){let e=j();t(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4),i(),t(5,"p",4),n(6),i()()(),t(7,"div",5)(8,"div",6)(9,"div",7),s(10,"img",8)(11,"div",9),i(),t(12,"div",10)(13,"div",11)(14,"h2",12),n(15," Informations "),i()(),t(16,"div",13)(17,"div",14),s(18,"i",15),t(19,"p",16)(20,"span",17),n(21,"Habitat : "),i(),t(22,"span",18),n(23),i()()(),t(24,"div",14),s(25,"i",19),t(26,"p",16)(27,"span",17),n(28,"Caract\xE9ristiques : "),i(),t(29,"span",18),n(30),i()()(),t(31,"div",14),s(32,"i",20),t(33,"p",16)(34,"span",17),n(35,"Poids : "),i(),t(36,"span",18),n(37),i()()(),t(38,"div",14),s(39,"i",21),t(40,"p",16)(41,"span",17),n(42,"R\xE9gime : "),i(),t(43,"span",18),n(44),i()()()()(),S(45,Q,35,12,"div",22),t(46,"div",23)(47,"app-button",24),V("click",function(){y(e);let o=u();return g(o.goBack())})("keydown",function(){y(e);let o=u();return g(o.goBack())}),i(),t(48,"app-button",24),V("click",function(){y(e);let o=u();return g(o.goHabitat())})("keydown",function(){y(e);let o=u();return g(o.goHabitat())}),i()()()()()}if(d&2){let e,l,o,c,v,_,m,I,A,k,p=u();b("categoryName",((e=p.animal())==null?null:e.name)||"")("pageId",((l=p.animal())==null?null:l.id_animal)||0),r(4),x(" ",(o=p.animal())==null?null:o.name," "),r(2),x(" ",(c=p.animal())==null?null:c.species," "),r(4),b("src",(v=p.animal())==null?null:v.images,D)("alt",(_=p.animal())==null?null:_.name),r(13),h((m=p.habitat())==null?null:m.name),r(7),h((I=p.animal())==null?null:I.characteristics),r(7),h((A=p.animal())==null?null:A.weightRange),r(7),h((k=p.animal())==null?null:k.diet),r(),E(p.latestVeterinaryReport()?45:-1),r(2),b("text","Retour accueil")("type","button")("color","tertiary")("rounded",!0),r(),b("text","Retour habitat")("type","button")("color","quinary")("rounded",!0)}}var J=class d{constructor(a,e,l,o,c){this.route=a;this.router=e;this.animalService=l;this.veterinaryReportsService=o;this.toastService=c}animal=w(void 0);habitat=w(void 0);latestVeterinaryReport=w(void 0);ngOnInit(){this.loadAnimal()}loadAnimal(){let a=Number(this.route.snapshot.paramMap.get("id"));if(!a||isNaN(a)){console.error("ID animal invalide"),this.toastService.showError("ID animal invalide");return}this.animalService.getAnimalById(a).pipe(R(e=>(e.status===404?this.toastService.showError("Animal non trouv\xE9"):this.toastService.showError("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es"),C))).subscribe({next:e=>{e&&(this.animal.set(e),this.loadHabitat(e.habitat_id),this.loadVeterinaryReports(e.id_animal))}})}loadHabitat(a){a!=null&&this.animalService.getHabitatById(a).subscribe({next:e=>this.habitat.set(e),error:e=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'habitat :",e)})}goBack(){this.router.navigate(["/"])}goHabitat(){let a=this.habitat()?.id_habitat;a&&this.router.navigate(["/habitat",a])}loadVeterinaryReports(a){a&&this.veterinaryReportsService.getReportsByAnimalId(a).pipe(T(e=>e[0]),R(e=>(console.error("Erreur lors du chargement des rapports:",e),this.toastService.showError("Impossible de charger les rapports v\xE9t\xE9rinaires"),C))).subscribe({next:e=>this.latestVeterinaryReport.set(e)})}getStateClass(a){let e="px-3 py-1 rounded-full text-sm font-semibold";switch(a.toLowerCase()){case"bonne sant\xE9":return`${e} bg-green-100 text-green-800`;case"surveillance":return`${e} bg-yellow-100 text-yellow-800`;case"malade":return`${e} bg-red-100 text-red-800`;default:return`${e} bg-gray-100 text-gray-800`}}static \u0275fac=function(e){return new(e||d)(f(O),f(z),f(L),f(Y),f(F))};static \u0275cmp=M({type:d,selectors:[["app-animal"]],decls:1,vars:1,consts:[["appVisitTracker","","categoryType","animal",1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8",3,"categoryName","pageId"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic"],[1,"flex","justify-center","w-full","px-4","mt-8"],[1,"bg-white","shadow-xl","rounded-2xl","p-6","w-full","flex","flex-col","items-center","sm:w-3/4","lg:w-2/3"],[1,"w-full","flex","justify-center","mb-8","relative","group"],[1,"w-full","h-auto","object-cover","rounded-xl","shadow-lg","sm:w-3/4","md:w-1/2","transition-all","duration-300","group-hover:shadow-2xl",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-quinary/30","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","rounded-xl"],[1,"bg-secondary/10","backdrop-blur-sm","rounded-xl","shadow-md","w-full","sm:w-3/4","md:w-1/2","p-6","hover:shadow-lg","transition-all","duration-300"],[1,"text-center","mb-6"],[1,"text-tertiary","text-2xl","font-serif","font-bold"],[1,"space-y-5"],[1,"flex","items-start"],[1,"fas","fa-home","text-tertiary","mt-1","mr-3","text-lg"],[1,"text-sm","md:text-base"],[1,"font-bold","text-tertiary"],[1,"font-normal","text-quinary"],[1,"fas","fa-paw","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-weight","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-drumstick-bite","text-tertiary","mt-1","mr-3","text-lg"],[1,"mt-8","w-full","sm:w-3/4","md:w-1/2","p-6"],[1,"w-full","flex","justify-center","pt-8","space-x-6"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","keydown","text","type","color","rounded"],[1,"text-xl","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"fas","fa-stethoscope","mr-2"],[1,"bg-gradient-to-br","from-green-50","to-secondary/10","rounded-2xl","shadow-[0_8px_30px_rgb(0,0,0,0.05)]","backdrop-blur-sm","hover:shadow-[0_8px_30px_rgb(0,0,0,0.1)]","transition-all","duration-300","border","border-secondary/20"],[1,"p-6","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-[0.03]","bg-[radial-gradient(#557A46_1px,transparent_1px)]","[background-size:16px_16px]"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4","mb-6","relative"],[1,"flex","items-center","bg-white/50","rounded-lg","px-3","py-2"],[1,"far","fa-calendar-alt","text-tertiary","mr-2"],[1,"text-sm"],[1,"font-normal"],[1,"space-y-4","relative"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-utensils","text-tertiary","mt-1","mr-3"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","mt-4","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-user-md","text-tertiary","mt-1","mr-3"],[1,"fas","fa-notes-medical","text-tertiary","mt-1","mr-3"]],template:function(e,l){e&1&&S(0,W,49,19,"section",0),e&2&&E(l.animal()?0:-1)},dependencies:[$,U,G,P],encapsulation:2})};export{J as AnimalComponent};
