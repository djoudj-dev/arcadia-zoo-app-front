import{a as P}from"./chunk-AJHSUSCG.js";import{b as O}from"./chunk-AZP7S37A.js";import{b as M,d as $}from"./chunk-63Q2HYMA.js";import{a as N}from"./chunk-D7JCWFOM.js";import{Db as T,Ea as I,Fb as q,Ja as a,Ka as _,Pa as b,Ua as g,Ya as h,_a as k,ab as w,ba as A,dc as B,fb as e,gb as i,hb as s,ib as j,jb as R,kb as x,la as S,ma as E,qb as n,rb as y,s as V,sb as c,ub as D,zb as H}from"./chunk-OS3QXM5S.js";function F(d,r){if(d&1&&(e(0,"div",36),s(1,"i",40),e(2,"div")(3,"p",33)(4,"span",17),n(5,"D\xE9tails suppl\xE9mentaires : "),i(),e(6,"span",18),n(7),i()()()()),d&2){let t,l=x(3);a(7),c(" ",(t=l.latestVeterinaryReport())==null?null:t.additional_details," ")}}function L(d,r){if(d&1&&(e(0,"div",22)(1,"h2",25),s(2,"i",26),n(3," Dernier rapport v\xE9t\xE9rinaire "),i(),e(4,"div",27)(5,"div",28),s(6,"div",29),e(7,"div",30)(8,"div",31),s(9,"i",32),e(10,"p",33)(11,"span",17),n(12,"Date de visite : "),i(),e(13,"span",34),n(14),T(15,"date"),i()()(),e(16,"span"),n(17),i()(),e(18,"div",35)(19,"div",36),s(20,"i",37),e(21,"div")(22,"p",33)(23,"span",17),n(24,"Alimentation recommand\xE9e : "),i(),e(25,"span",18),n(26),i()()()(),g(27,F,8,1,"div",36),e(28,"div",38),s(29,"i",39),e(30,"p",33)(31,"span",17),n(32,"V\xE9t\xE9rinaire : "),i(),e(33,"span",18),n(34),i()()()()()()()),d&2){let t,l,o,p,f,v,m=x(2);a(14),c(" ",q(15,9,(t=m.latestVeterinaryReport())==null?null:t.visit_date,"dd/MM/yyyy")," "),a(2),k(m.getStateClass(((l=m.latestVeterinaryReport())==null?null:l.animal_state)||"")),a(),c(" ",(o=m.latestVeterinaryReport())==null?null:o.animal_state," "),a(9),D(" ",(p=m.latestVeterinaryReport())==null?null:p.recommended_food_quantity," ",(p=m.latestVeterinaryReport())==null?null:p.food_unit," de ",(p=m.latestVeterinaryReport())==null?null:p.recommended_food_type," "),a(),w((f=m.latestVeterinaryReport())!=null&&f.additional_details?27:-1),a(7),c(" ",(v=m.latestVeterinaryReport())==null?null:v.user_name," ")}}function U(d,r){if(d&1){let t=j();e(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4),i(),e(5,"p",4),n(6),i()()(),e(7,"div",5)(8,"div",6)(9,"div",7),s(10,"img",8)(11,"div",9),i(),e(12,"div",10)(13,"div",11)(14,"h2",12),n(15," Informations "),i()(),e(16,"div",13)(17,"div",14),s(18,"i",15),e(19,"p",16)(20,"span",17),n(21,"Habitat : "),i(),e(22,"span",18),n(23),i()()(),e(24,"div",14),s(25,"i",19),e(26,"p",16)(27,"span",17),n(28,"Caract\xE9ristiques : "),i(),e(29,"span",18),n(30),i()()(),e(31,"div",14),s(32,"i",20),e(33,"p",16)(34,"span",17),n(35,"Poids : "),i(),e(36,"span",18),n(37),i()()(),e(38,"div",14),s(39,"i",21),e(40,"p",16)(41,"span",17),n(42,"R\xE9gime : "),i(),e(43,"span",18),n(44),i()()()()(),g(45,L,35,12,"div",22),e(46,"div",23)(47,"app-button",24),R("click",function(){S(t);let o=x();return E(o.goBack())}),i(),e(48,"app-button",24),R("click",function(){S(t);let o=x();return E(o.goHabitat())}),i()()()()()}if(d&2){let t,l,o,p,f,v,m,C,u=x();a(4),c(" ",(t=u.animal())==null?null:t.name," "),a(2),c(" ",(l=u.animal())==null?null:l.species," "),a(4),h("src",(o=u.animal())==null?null:o.images,I)("alt",(p=u.animal())==null?null:p.name),a(13),y((f=u.habitat())==null?null:f.name),a(7),y((v=u.animal())==null?null:v.characteristics),a(7),y((m=u.animal())==null?null:m.weightRange),a(7),y((C=u.animal())==null?null:C.diet),a(),w(u.latestVeterinaryReport()?45:-1),a(2),h("text","Retour accueil")("type","button")("color","tertiary")("rounded",!0),a(),h("text","Retour habitat")("type","button")("color","quinary")("rounded",!0)}}var z=class d{constructor(r,t,l,o){this.route=r;this.router=t;this.animalService=l;this.veterinaryReportsService=o}animal=b(void 0);habitat=b(void 0);latestVeterinaryReport=b(void 0);ngOnInit(){this.loadAnimal()}loadAnimal(){let r=Number(this.route.snapshot.paramMap.get("id"));this.animalService.getAnimalById(r).subscribe({next:t=>{this.animal.set(t),t&&(this.loadHabitat(t.habitat_id),this.loadVeterinaryReports(t.id_animal))},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'animal :",t)})}loadHabitat(r){r!=null&&this.animalService.getHabitatById(r).subscribe({next:t=>this.habitat.set(t),error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'habitat :",t)})}goBack(){this.router.navigate(["/"])}goHabitat(){let r=this.habitat()?.id_habitat;r&&this.router.navigate(["/habitat",r])}loadVeterinaryReports(r){this.veterinaryReportsService.getAllReports().pipe(V(t=>t.filter(l=>l.id_animal===r).sort((l,o)=>new Date(o.visit_date).getTime()-new Date(l.visit_date).getTime())[0])).subscribe({next:t=>this.latestVeterinaryReport.set(t),error:t=>console.error("Erreur lors du chargement du dernier rapport v\xE9t\xE9rinaire:",t)})}getStateClass(r){let t="px-3 py-1 rounded-full text-sm font-semibold";switch(r.toLowerCase()){case"bonne sant\xE9":return`${t} bg-green-100 text-green-800`;case"surveillance":return`${t} bg-yellow-100 text-yellow-800`;case"malade":return`${t} bg-red-100 text-red-800`;default:return`${t} bg-gray-100 text-gray-800`}}static \u0275fac=function(t){return new(t||d)(_(M),_($),_(P),_(O))};static \u0275cmp=A({type:d,selectors:[["app-animal"]],standalone:!0,features:[H],decls:1,vars:1,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic"],[1,"flex","justify-center","w-full","px-4","mt-8"],[1,"bg-white","shadow-xl","rounded-2xl","p-6","w-full","flex","flex-col","items-center","sm:w-3/4","lg:w-2/3"],[1,"w-full","flex","justify-center","mb-8","relative","group"],[1,"w-full","h-auto","object-cover","rounded-xl","shadow-lg","sm:w-3/4","md:w-1/2","transition-all","duration-300","group-hover:shadow-2xl",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-quinary/30","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","rounded-xl"],[1,"bg-secondary/10","backdrop-blur-sm","rounded-xl","shadow-md","w-full","sm:w-3/4","md:w-1/2","p-6","hover:shadow-lg","transition-all","duration-300"],[1,"text-center","mb-6"],[1,"text-tertiary","text-2xl","font-serif","font-bold"],[1,"space-y-5"],[1,"flex","items-start"],[1,"fas","fa-home","text-tertiary","mt-1","mr-3","text-lg"],[1,"text-sm","md:text-base"],[1,"font-bold","text-tertiary"],[1,"font-normal","text-quinary"],[1,"fas","fa-paw","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-weight","text-tertiary","mt-1","mr-3","text-lg"],[1,"fas","fa-drumstick-bite","text-tertiary","mt-1","mr-3","text-lg"],[1,"mt-8","w-full","sm:w-3/4","md:w-1/2","p-6"],[1,"w-full","flex","justify-center","pt-8","space-x-6"],[1,"w-1/2","sm:w-1/3","lg:w-1/4","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","text","type","color","rounded"],[1,"text-xl","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"fas","fa-stethoscope","mr-2"],[1,"bg-gradient-to-br","from-green-50","to-secondary/10","rounded-2xl","shadow-[0_8px_30px_rgb(0,0,0,0.05)]","backdrop-blur-sm","hover:shadow-[0_8px_30px_rgb(0,0,0,0.1)]","transition-all","duration-300","border","border-secondary/20"],[1,"p-6","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-[0.03]","bg-[radial-gradient(#557A46_1px,transparent_1px)]","[background-size:16px_16px]"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4","mb-6","relative"],[1,"flex","items-center","bg-white/50","rounded-lg","px-3","py-2"],[1,"far","fa-calendar-alt","text-tertiary","mr-2"],[1,"text-sm"],[1,"font-normal"],[1,"space-y-4","relative"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-utensils","text-tertiary","mt-1","mr-3"],[1,"flex","items-start","bg-white/50","rounded-lg","p-3","mt-4","hover:bg-white/70","transition-colors","duration-200"],[1,"fas","fa-user-md","text-tertiary","mt-1","mr-3"],[1,"fas","fa-notes-medical","text-tertiary","mt-1","mr-3"]],template:function(t,l){t&1&&g(0,U,49,17,"section",0),t&2&&w(l.animal()?0:-1)},dependencies:[N,B],encapsulation:2})};export{z as AnimalComponent};
