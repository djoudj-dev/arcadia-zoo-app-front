import{a as fi}from"./chunk-GFOZMZCS.js";import{a as We}from"./chunk-Q3KK4JDI.js";import{a as j}from"./chunk-PVFCMAIY.js";import{a as li,b as Ge}from"./chunk-JN7JVIU6.js";import{a as Je,b as Ye}from"./chunk-A2ACOLYE.js";import{a as fe}from"./chunk-7EALMZ3I.js";import{a as N}from"./chunk-YQ5HTG6F.js";import{a as vi}from"./chunk-ZIKR7SAQ.js";import{a as Oe}from"./chunk-3TXI3TAG.js";import{a as _e}from"./chunk-IQHRYKAE.js";import{a as Ze}from"./chunk-GAVMKF42.js";import{a as hi}from"./chunk-YVUJ2J2A.js";import{a as si}from"./chunk-Q7QJDDWF.js";import{b as mi,c as X,d as C,e as Q,f as me,h as pi,i as pe,j as di,k as ci,l as de,m as He,n as qe,o as Be,p as ze,s as ce,t as ui,u as ue}from"./chunk-3GFJ5VFU.js";import{a as ri,b as $e,c as oi,d as se,e as le,f as ai}from"./chunk-P5Z6PEHU.js";import{a as $}from"./chunk-SHRURUTQ.js";import{$ as Z,$a as xe,$b as Xt,A as jt,Ab as g,Bb as M,Cb as te,Db as Le,E as W,Eb as G,Fa as P,Fb as Ue,G as Lt,Ga as Bt,Gb as ye,Hb as Jt,Ia as zt,Ka as a,La as b,Ob as Yt,Pb as Kt,Qa as u,R as ie,S as we,T as ne,Tb as R,Va as y,W as re,Ya as Gt,Za as m,_a as V,a as T,aa as _,ab as Wt,b as A,bb as f,bc as Pe,c as z,ca as h,cb as Ne,cc as Qt,d as Mt,db as De,dc as ei,ea as Ut,eb as E,ec as ae,f as Dt,fb as H,ga as Pt,gb as n,gc as k,hb as o,i as Tt,ib as p,jb as F,k as Ct,ka as $t,kb as c,l as At,la as Re,lb as d,m as Se,ma as S,mc as ti,n as K,na as w,nc as Ee,o as be,oa as U,oc as ii,pa as J,pc as ni,qc as B,r as ee,rb as s,s as Me,sb as q,ta as oe,tb as v,ub as je,va as Y,vb as Zt,wa as qt,wb as St,x as Vt,xb as wt,y as Rt,yb as Et,z as Nt}from"./chunk-TKCV3HAR.js";function Ai(i){let t=i,e=Math.floor(Math.abs(i)),r=i.toString().replace(/^[^.]*\.?/,"").length,l=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:l===0&&e!==0&&e%1e6===0&&r===0||!(l>=0&&l<=5)?4:5}var gi=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Ai];var Vi=(i,t)=>t.id;function Ri(i,t){if(i&1&&(n(0,"div",2),s(1),o()),i&2){let e=t.$implicit;xe(e.type==="success"?"bg-green-600":"bg-red-600"),a(),v(" ",e.message," ")}}var Ke=class i{constructor(t){this.notificationService=t}static \u0275fac=function(e){return new(e||i)(b(si))};static \u0275cmp=h({type:i,selectors:[["app-notification"]],standalone:!0,features:[g],decls:4,vars:2,consts:[[1,"fixed","top-4","right-4","z-50","space-y-2"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out",3,"class"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out"]],template:function(e,r){e&1&&(n(0,"div",0),E(1,Ri,2,3,"div",1,Vi),G(3,"async"),o()),e&2&&(a(),H(Ue(3,0,r.notificationService.notifications$)))},dependencies:[k,Qt],encapsulation:2})};var Ni=(i,t)=>t.id;function ji(i,t){if(i&1&&(n(0,"a",1),p(1,"i"),o()),i&2){let e=t.$implicit;m("href",e.url,P)("title",e.name),a(),xe(e.icon+" text-2xl")}}var Qe=class i{socialLinks=[{id:1,icon:"fab fa-facebook",url:"#",name:"Facebook"},{id:2,icon:"fab fa-instagram",url:"#",name:"Instagram"},{id:3,icon:"fab fa-tiktok",url:"#",name:"TikTok"},{id:4,icon:"fab fa-linkedin",url:"#",name:"LinkedIn"}];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-social-links"]],standalone:!0,features:[g],decls:3,vars:0,consts:[[1,"flex","justify-center","gap-4"],["target","_blank","rel","noopener noreferrer",1,"text-tertiary","hover:text-primary","transition-colors","duration-300",3,"href","title"]],template:function(e,r){e&1&&(n(0,"div",0),E(1,ji,2,4,"a",1,Ni),o()),e&2&&(a(),H(r.socialLinks))},encapsulation:2})};var ke=class i{constructor(t){this.http=t;this.loadOpeningHours()}apiUrl=`${B.apiUrl}/api/opening-hours`;openingHours=u([]);parkStatus=u({isOpen:!0,message:""});loadOpeningHours(){this.getCurrentOpeningHours().pipe(W(t=>(console.error("Erreur lors du chargement des horaires:",t),At))).subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage}))}})}getCurrentOpeningHours(){return this.http.get(`${this.apiUrl}/current`).pipe(W(t=>t.status===401?K({openingHours:[],parkStatus:!0,statusMessage:"",isCurrent:!0}):this.handleError("r\xE9cup\xE9ration des horaires actuels",t)))}createOpeningHours(t){let e={openingHours:[{days:"Lundi - Vendredi",hours:t.weekdayHours,isOpen:t.isWeekdayOpen},{days:"Samedi - Dimanche",hours:t.weekendHours,isOpen:t.isWeekendOpen}],parkStatus:t.parkStatus,statusMessage:t.statusMessage??""};return console.log("Payload envoy\xE9 pour cr\xE9ation:",e),this.http.post(this.apiUrl,e).pipe(ne(r=>console.log("R\xE9ponse de l'API (cr\xE9ation) :",r)),W(r=>(console.error("Erreur API lors de la cr\xE9ation :",r),r.error&&console.error("D\xE9tails de l'erreur renvoy\xE9e par l'API :",r.error),be(()=>new Error("Erreur lors de la cr\xE9ation des horaires.")))))}updateOpeningHours(t,e){let r={openingHours:[{days:"Lundi - Vendredi",hours:e.weekdayHours,isOpen:e.isWeekdayOpen},{days:"Samedi - Dimanche",hours:e.weekendHours,isOpen:e.isWeekendOpen}],parkStatus:e.parkStatus,statusMessage:e.statusMessage??""};return this.http.put(`${this.apiUrl}/${t}`,r).pipe(ne(l=>{this.openingHours.set([l])}),W(l=>this.handleError("mise \xE0 jour des horaires",l)))}updateParkStatus(t){return t.isOpen===void 0?be(()=>new Error("Le statut isOpen est requis")):this.http.put(`${this.apiUrl}/status`,t).pipe(ne(e=>{this.parkStatus.set(e)}),W(e=>this.handleError("mise \xE0 jour du statut",e)))}isParkOpen(){if(!this.parkStatus().isOpen)return!1;let t=new Date,e=t.getDay(),r=t.getHours()*100+t.getMinutes(),l=this.openingHours()[0]?.openingHours.find(D=>e>=1&&e<=5?D.days.includes("Lundi - Vendredi"):D.days.includes("Samedi - Dimanche"));if(!l?.isOpen)return!1;let[x,L]=l.hours.split(" - ").map(D=>parseInt(D.replace("h","")));return r>=x*100&&r<=L*100}getOpeningHoursId(){return z(this,null,function*(){let t=this.openingHours();if(t&&t.length>0&&t[0]._id)return t[0]._id;throw new Error("Aucun ID trouv\xE9 pour les horaires")})}handleError(t,e){return console.error(`Erreur lors de ${t}:`,e),be(()=>new Error(`Erreur lors de ${t}`))}static \u0275fac=function(e){return new(e||i)(Z(Ee))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var Li=(i,t)=>t.days;function Ui(i,t){if(i&1&&(n(0,"li",27)(1,"span",28),s(2),o(),n(3,"span",29),s(4),o()()),i&2){let e=t.$implicit;a(2),q(e.days),a(2),q(e.hours)}}function Pi(i,t){if(i&1&&E(0,Ui,5,2,"li",27,Li),i&2){let e=d();H(e.openingHours()[0].openingHours)}}var et=class i{constructor(t){this.openingHoursService=t}currentYear=new Date().getFullYear();isParkOpen=R(()=>this.openingHoursService.isParkOpen());openingHours=R(()=>this.openingHoursService.openingHours());parkStatus=R(()=>this.openingHoursService.parkStatus());static \u0275fac=function(e){return new(e||i)(b(ke))};static \u0275cmp=h({type:i,selectors:[["app-footer"]],standalone:!0,features:[g],decls:47,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-3"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","justify-center","items-start","gap-16","mb-4"],[1,"flex","flex-col","items-center","space-y-3","w-full","md:w-auto"],[1,"w-full","max-w-[280px]","text-center"],[1,"text-lg","font-serif","font-bold","text-tertiary","mb-1"],[1,"fas","fa-info-circle","mr-2"],[1,"text-sm","text-quinary/80","leading-relaxed"],[1,"w-full","max-w-[280px]"],[1,"text-lg","font-serif","font-bold","text-tertiary","text-center","mb-1"],[1,"far","fa-clock","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5"],[1,"divide-y","divide-tertiary/10"],[1,"fas","fa-map-marker-alt","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5","space-y-1"],[1,"not-italic","space-y-1","text-sm","text-quinary/80"],[1,"flex","items-center","justify-center","gap-2"],[1,"fas","fa-home","text-tertiary"],[1,"fas","fa-city","text-tertiary"],[1,"fas","fa-globe-europe","text-tertiary"],[1,"rounded-lg","overflow-hidden","shadow-md","h-[70px]","mt-1"],["src",Bt`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2668.735021438556!2d-2.1739626!3d48.018829!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x480faceab3587495%3A0xcdc883e818be2eb2!2sFor%C3%AAt%20de%20Broc%C3%A9liande!5e0!3m2!1sfr!2sfr!4v1728318223640!5m2!1sfr!2sfr`,"width","100%","height","100%","loading","lazy","referrerpolicy","no-referrer-when-downgrade",1,"w-full","h-full",2,"border","0"],[1,"border-t","border-tertiary/20","pt-2","space-y-1"],[1,"text-xs","font-medium","text-quinary/70","text-center"],[1,"flex","flex-col","items-center","space-y-1"],[1,"text-sm","font-serif","font-bold","text-tertiary"],[1,"fas","fa-share-alt","mr-2"],[1,"flex","justify-between","items-center","text-sm","text-quinary/80","px-2","py-1"],[1,"pr-2"],[1,"bg-tertiary/10","px-2","py-0.5","rounded-md"]],template:function(e,r){e&1&&(n(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),p(6,"i",6),s(7,"Zoo Arcadia "),o(),n(8,"p",7),s(9," Un lieu magique o\xF9 la nature et l'\xE9merveillement se rencontrent, situ\xE9 au c\u0153ur de la l\xE9gendaire for\xEAt de Broc\xE9liande. "),o()()(),n(10,"div",3)(11,"div",8)(12,"h3",9),p(13,"i",10),s(14,"Horaires d'ouverture "),o(),n(15,"div",11)(16,"ul",12),y(17,Pi,2,0),o()()()(),n(18,"div",3)(19,"div",8)(20,"h3",9),p(21,"i",13),s(22,"Nous trouver "),o(),n(23,"div",14)(24,"address",15)(25,"div",16),p(26,"i",17),n(27,"span"),s(28,"666 chemin de l'\xE9trange"),o()(),n(29,"div",16),p(30,"i",18),n(31,"span"),s(32,"35380 Paimpont"),o()(),n(33,"div",16),p(34,"i",19),n(35,"span"),s(36,"France"),o()()(),n(37,"div",20),p(38,"iframe",21),o()()()()(),n(39,"div",22)(40,"p",23),s(41),o(),n(42,"div",24)(43,"h3",25),p(44,"i",26),s(45,"Suivez-nous "),o(),p(46,"app-social-links"),o()()()()),e&2&&(a(17),f(r.openingHours()&&r.openingHours().length>0?17:-1),a(24),v(" Copyright \xA9 ",r.currentYear," N\xE9dellec Julien. Tous droits r\xE9serv\xE9s. "))},dependencies:[Qe],encapsulation:2})};function $i(i,t){if(i&1&&(n(0,"div",1)(1,"div",2),s(2),o()()),i&2){let e=d();V("opacity-0",!e.visible),a(2),v(" ",e.currentMessage," ")}}var tt=class i{constructor(t){this.toastService=t}visible=!1;currentMessage="";isLogoutMessage=!1;subscription=new Mt;ngOnInit(){this.subscription.add(this.toastService.toast$.subscribe(t=>{this.currentMessage=t.message,this.isLogoutMessage=t.message.toLowerCase().includes("d\xE9connexion"),this.isLogoutMessage&&(this.visible=!0)})),this.subscription.add(this.toastService.hideToast$.subscribe(()=>{this.visible=!1}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)(b(N))};static \u0275cmp=h({type:i,selectors:[["app-logout-toast"]],standalone:!0,features:[g],decls:1,vars:1,consts:[["role","alert",1,"fixed","top-4","right-4","z-50","transition-opacity","duration-300",3,"opacity-0"],["role","alert",1,"fixed","top-4","right-4","z-50","transition-opacity","duration-300"],[1,"p-4","rounded-lg","shadow-lg","min-w-[300px]","bg-red-100","text-red-800","border-l-4","border-red-500"]],template:function(e,r){e&1&&y(0,$i,3,3,"div",0),e&2&&f(r.visible&&r.isLogoutMessage?0:-1)},dependencies:[k],encapsulation:2})};var it=class i{constructor(t){this.authService=t}isAuthenticated(){return this.authService.isAuthenticated()}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||i)(b(j))};static \u0275cmp=h({type:i,selectors:[["app-banner"]],standalone:!0,features:[g],decls:3,vars:0,consts:[[1,"w-full","pt-14"],["src","images/banner.webp","alt","Banni\xE8re Zoo Arcadia.",1,"w-full","md:h-[30rem]"]],template:function(e,r){e&1&&(n(0,"div",0),p(1,"img",1)(2,"app-logout-toast"),o())},dependencies:[k,tt],encapsulation:2})};var Ht=()=>["/"],_i=()=>["/services"],Ci=()=>["/habitats"],Si=()=>["/contact"],wi=()=>["/veterinaire"],Ot=()=>["/update-password"],Ei=()=>["/employe"],Hi=()=>["/admin"];function qi(i,t){i&1&&p(0,"img",4)}function Bi(i,t){i&1&&p(0,"img",5)}function zi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){S(e);let l=d();return w(l.toggleDropdown("vet"))}),s(2," V\xE9t\xE9rinaire "),U(),n(3,"svg",13),p(4,"path",14),o()(),J(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),o(),n(8,"button",17),s(9," Modifier mot de passe "),o()()()}if(i&2){let e=d();a(3),V("rotate-180",e.activeDropdown==="vet"),a(2),V("scale-0",e.activeDropdown!=="vet")("scale-100",e.activeDropdown==="vet"),a(),m("routerLink",M(8,wi)),a(2),m("routerLink",M(9,Ot))}}function Gi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){S(e);let l=d();return w(l.toggleDropdown("employe"))}),s(2," Employ\xE9 "),U(),n(3,"svg",13),p(4,"path",14),o()(),J(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),o(),n(8,"button",17),s(9," Modifier mot de passe "),o()()()}if(i&2){let e=d();a(3),V("rotate-180",e.activeDropdown==="employe"),a(2),V("scale-0",e.activeDropdown!=="employe")("scale-100",e.activeDropdown==="employe"),a(),m("routerLink",M(8,Ei)),a(2),m("routerLink",M(9,Ot))}}function Wi(i,t){if(i&1){let e=F();n(0,"li",9)(1,"button",12),c("click",function(){S(e);let l=d();return w(l.toggleDropdown("admin"))}),s(2," Admin "),U(),n(3,"svg",13),p(4,"path",14),o()(),J(),n(5,"div",15)(6,"a",16),s(7," Dashboard "),o(),n(8,"button",17),s(9," Modifier mot de passe "),o()()()}if(i&2){let e=d();a(3),V("rotate-180",e.activeDropdown==="admin"),a(2),V("scale-0",e.activeDropdown!=="admin")("scale-100",e.activeDropdown==="admin"),a(),m("routerLink",M(8,Hi)),a(2),m("routerLink",M(9,Ot))}}function Zi(i,t){if(i&1){let e=F();n(0,"li",7)(1,"a",18),c("click",function(){S(e);let l=d();return w(l.logout())}),s(2," D\xE9connexion "),o()()}}function Ji(i,t){i&1&&(n(0,"li",11)(1,"a",8),s(2," V\xE9t\xE9rinaire "),o()()),i&2&&(a(),m("routerLink",M(1,wi)))}function Yi(i,t){i&1&&(n(0,"li",7)(1,"a",8),s(2," Employe "),o()()),i&2&&(a(),m("routerLink",M(1,Ei)))}function Ki(i,t){i&1&&(n(0,"li",11)(1,"a",8),s(2," Admin "),o()()),i&2&&(a(),m("routerLink",M(1,Hi)))}function Xi(i,t){if(i&1){let e=F();n(0,"li",11)(1,"a",18),c("click",function(){S(e);let l=d();return w(l.logout())}),s(2," D\xE9connexion "),o()()}}var nt=class i{isMenuOpen=!1;activeDropdown=null;isPasswordModalOpen=!1;authService=_(j);router=_(se);userAuthenticated=R(()=>!!this.authService.user());userRoles=R(()=>{let t=this.authService.user();return{admin:t?.role?.name==="Admin",veterinaire:t?.role?.name==="Veterinaire",employe:t?.role?.name==="Employe"}});toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDropdown(t){this.activeDropdown=this.activeDropdown===t?null:t}openPasswordModal(){this.router.navigate(["/update-password"]),this.activeDropdown=null}closePasswordModal(){this.isPasswordModalOpen=!1}logout(){this.authService.logout(),this.router.navigate(["/"])}onDocumentClick(t){t.target.closest(".relative")||(this.activeDropdown=null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-nav"]],hostBindings:function(e,r){e&1&&c("click",function(x){return r.onDocumentClick(x)},!1,zt)},standalone:!0,features:[g],decls:42,vars:31,consts:[[1,"bg-secondary","z-50","fixed","top-0","w-full","shadow"],["id","main-nav",1,"bg-secondary","w-full","mx-auto","p-4","flex","items-center","justify-between","flex-wrap","md:p-5"],["aria-label","Accueil du portfolio",1,"text-lg","lg:text-xl","text-primary","font-bold",3,"routerLink"],["aria-controls","main-navlist","id","menu-toggler",1,"cursor-pointer","w-7","md:hidden",3,"click"],["width","28","height","28","src","images/menu.svg","alt","Ouvrir le menu"],["width","28","height","28","src","images/cross.svg","alt","Fermer le menu"],["id","main-navlist",1,"hidden","md:flex","items-center","w-full","md:w-auto","pt-4","md:pt-0","text-primary"],[1,"block","py-3","md:inline","md:py-0","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"routerLink"],[1,"block","py-3","md:inline","md:py-0","md:mr-6","relative","group"],["id","main-navlist-mobile",1,"bg-secondary","text-center","w-full","pt-4","text-primary","md:hidden"],[1,"block","py-3","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","flex","items-center","gap-2","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","py-2","w-48","bg-white","rounded-lg","shadow-xl","transition-all","duration-200","ease-in-out","transform","origin-top-right"],[1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"click"]],template:function(e,r){e&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),s(3," Zoo Arcadia "),o(),n(4,"button",3),c("click",function(){return r.toggleMenu()}),y(5,qi,1,0,"img",4)(6,Bi,1,0,"img",5),o(),n(7,"ul",6)(8,"li",7)(9,"a",8),s(10," Accueil "),o()(),n(11,"li",7)(12,"a",8),s(13," Services "),o()(),n(14,"li",7)(15,"a",8),s(16," Habitats "),o()(),n(17,"li",7)(18,"a",8),s(19," Contact "),o()(),y(20,zi,10,10,"li",9)(21,Gi,10,10,"li",9)(22,Wi,10,10,"li",9)(23,Zi,3,0,"li",7),o()(),n(24,"ul",10)(25,"li",11)(26,"a",8),s(27," Accueil "),o()(),n(28,"li",11)(29,"a",8),s(30," Services "),o()(),n(31,"li",11)(32,"a",8),s(33," Habitats "),o()(),n(34,"li",11)(35,"a",8),s(36," Contact "),o()(),y(37,Ji,3,2,"li",11)(38,Yi,3,2,"li",7)(39,Ki,3,2,"li",11)(40,Xi,3,0,"li",11),o()(),p(41,"app-banner")),e&2&&(a(2),m("routerLink",M(22,Ht)),a(2),Gt("aria-expanded",r.isMenuOpen),a(),f(r.isMenuOpen?-1:5),a(),f(r.isMenuOpen?6:-1),a(3),m("routerLink",M(23,Ht)),a(3),m("routerLink",M(24,_i)),a(3),m("routerLink",M(25,Ci)),a(3),m("routerLink",M(26,Si)),a(2),f(r.userRoles().veterinaire?20:-1),a(),f(r.userRoles().employe?21:-1),a(),f(r.userRoles().admin?22:-1),a(),f(r.userAuthenticated()?23:-1),a(),V("hidden",!r.isMenuOpen),a(2),m("routerLink",M(27,Ht)),a(3),m("routerLink",M(28,_i)),a(3),m("routerLink",M(29,Ci)),a(3),m("routerLink",M(30,Si)),a(2),f(r.userRoles().veterinaire?37:-1),a(),f(r.userRoles().employe?38:-1),a(),f(r.userRoles().admin?39:-1),a(),f(r.userAuthenticated()?40:-1))},dependencies:[le,it],encapsulation:2})};var ve=class i{constructor(t,e,r,l){this.authService=t;this.router=e;this.ngZone=r;this.toastService=l}activitySubject=new Ct(1);timeoutDuration=3e5;inactivitySubscription;startMonitoring(){["mousemove","keydown","click","touchstart","scroll"].forEach(e=>{Rt(window,e).pipe(Lt(1e3)).subscribe(()=>this.activitySubject.next())}),this.activitySubject.pipe(ie(()=>Nt(this.timeoutDuration))).subscribe(()=>this.handleInactivity())}handleInactivity(){this.ngZone.run(()=>{this.authService.logout(),this.router.navigate(["/login"])})}stopMonitoring(){this.inactivitySubscription&&(this.inactivitySubscription.unsubscribe(),console.log("Surveillance d'inactivit\xE9 arr\xEAt\xE9e."))}static \u0275fac=function(e){return new(e||i)(Z(j),Z(se),Z(qt),Z(N))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var rt=class i{constructor(t,e,r,l){this.tokenService=t;this.authService=e;this.inactivityService=r;this.toastService=l}ngOnInit(){let t=this.tokenService.getToken();t&&(this.tokenService.isTokenExpired(t)?(this.authService.logout(),this.toastService.showError("Votre session a expir\xE9, vous avez \xE9t\xE9 d\xE9connect\xE9.")):this.inactivityService.startMonitoring())}ngOnDestroy(){this.inactivityService.stopMonitoring()}static \u0275fac=function(e){return new(e||i)(b(_e),b(j),b(ve),b(N))};static \u0275cmp=h({type:i,selectors:[["app-root"]],standalone:!0,features:[g],decls:4,vars:0,template:function(e,r){e&1&&p(0,"app-nav")(1,"router-outlet")(2,"app-footer")(3,"app-notification")},dependencies:[nt,et,oi,Ke],encapsulation:2})};var Ae=(i,t)=>{let e=_(j),r=_(_e),l=_(se),x=_(ve),L=r.getToken(),D=i.data.roles;return L?r.isTokenExpired(L)?Se(tn(r,e)).pipe(ie(ge=>ge?Oi(D,e,l):(kt("Session expir\xE9e",l,e,t.url),K(!1))),W(()=>(kt("Erreur de validation",l,e,t.url),K(!1)))):(x.startMonitoring(),Oi(D,e,l)):(kt("Aucun token trouv\xE9",l,e,t.url),K(!1))};function tn(i,t){return z(this,null,function*(){try{return i.getRefreshToken()?(yield ee(t.refreshToken()),!0):!1}catch{return!1}})}function Oi(i,t,e){if(!i?.length)return K(!0);let r=t.userRole();return r?i.includes(r)?K(!0):(console.warn(`Acc\xE8s refus\xE9 - R\xF4le requis: ${i.join(", ")}`),e.navigate(["/unauthorized"]),K(!1)):(e.navigate(["/unauthorized"]),K(!1))}function kt(i,t,e,r){console.warn(`Erreur d'authentification: ${i}`),e.logout(),t.navigate(["/login"],{queryParams:{returnUrl:r,error:i}})}var ot=class i{constructor(t,e,r){this.fb=t;this.openingHoursService=e;this.toastService=r;this.hoursForm=this.createForm()}openingHours=u([]);parkStatus=u({isOpen:!0,message:""});hoursForm;openingHoursId=u(null);ngOnInit(){this.loadInitialData()}createForm(){return this.fb.group({weekdayHours:["",C.required],weekendHours:["",C.required],isWeekdayOpen:[!0],isWeekendOpen:[!0],parkStatus:[!0],statusMessage:[""]})}loadInitialData(){this.openingHoursService.getCurrentOpeningHours().subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage||""}),t._id?this.openingHoursId.set(t._id):console.warn("L'ID des horaires n'a pas \xE9t\xE9 retourn\xE9 par l'API."),this.patchForm(t))},error:t=>{console.error("Erreur lors du chargement des horaires:",t),this.toastService.showError("Erreur lors du chargement des horaires")}})}patchForm(t){let e=t.openingHours.find(l=>l.days.includes("Lundi")),r=t.openingHours.find(l=>l.days.includes("Samedi"));this.hoursForm.patchValue({weekdayHours:e?.hours??"",weekendHours:r?.hours??"",isWeekdayOpen:e?.isOpen??!0,isWeekendOpen:r?.isOpen??!0,parkStatus:t.parkStatus,statusMessage:t.statusMessage||""})}updateHours(){return z(this,null,function*(){console.log("D\xE9but de updateHours");try{let t=yield this.openingHoursService.getOpeningHoursId();if(!t){console.error("L'ID des horaires est manquant."),this.toastService.showError("ID des horaires non d\xE9fini");return}if(this.hoursForm.invalid){console.error("Formulaire invalide:",this.hoursForm.errors),this.toastService.showError("Veuillez corriger les erreurs du formulaire");return}let e=this.prepareFormData();console.log("Donn\xE9es du formulaire:",e);let r=yield ee(this.openingHoursService.updateOpeningHours(t,e));console.log("R\xE9ponse de l'API:",r),r&&(this.openingHours.set([r]),this.patchForm(r),this.toastService.showSuccess("Horaires mis \xE0 jour avec succ\xE8s"))}catch(t){console.error("Erreur compl\xE8te lors de la mise \xE0 jour:",t),this.toastService.showError("Erreur lors de la mise \xE0 jour des horaires")}})}prepareFormData(){return{weekdayHours:this.hoursForm.get("weekdayHours")?.value||"",weekendHours:this.hoursForm.get("weekendHours")?.value||"",isWeekdayOpen:this.hoursForm.get("isWeekdayOpen")?.value??!0,isWeekendOpen:this.hoursForm.get("isWeekendOpen")?.value??!0,parkStatus:this.hoursForm.get("parkStatus")?.value??!0,statusMessage:this.hoursForm.get("statusMessage")?.value||""}}createNewHours(){return z(this,null,function*(){let t=this.prepareFormData();console.log("Donn\xE9es pr\xE9par\xE9es pour cr\xE9ation:",t);try{let e=yield ee(Se(this.openingHoursService.createOpeningHours(t)));if(e?._id)console.log("R\xE9ponse de cr\xE9ation:",e),this.openingHoursId.set(e._id),this.openingHours.set([e]),this.patchForm(e),this.toastService.showSuccess("Horaires cr\xE9\xE9s avec succ\xE8s");else throw new Error("La cr\xE9ation n'a pas retourn\xE9 d'ID valide.")}catch(e){console.error("Erreur lors de la cr\xE9ation des horaires:",e),this.toastService.showError("Erreur lors de la cr\xE9ation des horaires")}})}saveChanges(){return z(this,null,function*(){try{if(!this.hoursForm.valid){this.toastService.showError("Veuillez remplir correctement tous les champs requis");return}this.openingHoursId()?(console.log("ID trouv\xE9, mise \xE0 jour des horaires."),yield this.updateHours()):(console.log("Aucun ID trouv\xE9, cr\xE9ation de nouveaux horaires."),yield this.createNewHours())}catch(t){console.error("Erreur lors de la sauvegarde:",t),this.toastService.showError("Erreur lors de la sauvegarde des horaires")}})}ensureOpeningHoursExist(){return z(this,null,function*(){try{return yield this.openingHoursService.getOpeningHoursId()}catch{let t={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""},e=yield ee(Se(this.openingHoursService.createOpeningHours(t)));if(!e._id)throw new Error("L'ID des nouveaux horaires est manquant.");return e._id}})}getOpeningHoursId(){return z(this,null,function*(){try{let t=this.openingHours();if(t&&t.length>0&&t[0]._id)return t[0]._id;{let e={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""};return(yield ee(Se(this.openingHoursService.createOpeningHours(e))))._id}}catch(t){throw console.error("Erreur lors de la r\xE9cup\xE9ration ou de la cr\xE9ation des horaires:",t),new Error("Aucun ID trouv\xE9 pour les horaires")}})}static \u0275fac=function(e){return new(e||i)(b(ce),b(ke),b(N))};static \u0275cmp=h({type:i,selectors:[["app-opening-hours-management"]],standalone:!0,features:[g],decls:43,vars:1,consts:[[1,"bg-white","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"far","fa-clock","mr-3"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-secondary/10","rounded-lg","p-4","space-y-4"],[1,"text-lg","font-serif","font-semibold","text-tertiary"],[1,"space-y-4"],[1,"flex","flex-col","space-y-2"],["type","text","formControlName","weekdayHours","placeholder","ex: 9h00 - 18h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","items-center"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isWeekdayOpen",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-tertiary/30","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-tertiary"],[1,"ms-3","text-sm","font-medium","text-quinary"],["type","text","formControlName","weekendHours","placeholder","ex: 10h00 - 19h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],["type","checkbox","formControlName","isWeekendOpen",1,"sr-only","peer"],["type","checkbox","formControlName","parkStatus",1,"sr-only","peer"],["type","text","formControlName","statusMessage","placeholder","Message de statut (optionnel)",1,"w-full","p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-2","bg-tertiary","text-white","rounded-lg","hover:bg-tertiary/90","transition"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2",1),p(2,"i",2),s(3," Gestion des horaires d'ouverture "),o(),n(4,"form",3),c("ngSubmit",function(){return r.saveChanges()}),n(5,"div",4)(6,"h3",5),s(7," Horaires en semaine "),o(),n(8,"div",6)(9,"div",7),p(10,"input",8),n(11,"div",9)(12,"label",10),p(13,"input",11)(14,"div",12),n(15,"span",13),s(16,"Ouvert"),o()()()()()(),n(17,"div",4)(18,"h3",5),s(19," Horaires weekend "),o(),n(20,"div",6)(21,"div",7),p(22,"input",14),n(23,"div",9)(24,"label",10),p(25,"input",15)(26,"div",12),n(27,"span",13),s(28,"Ouvert"),o()()()()()(),n(29,"div",4)(30,"h3",5),s(31," Statut du parc "),o(),n(32,"div",6)(33,"div",9)(34,"label",10),p(35,"input",16)(36,"div",12),n(37,"span",13),s(38,"Parc ouvert"),o()()(),p(39,"input",17),o()(),n(40,"div",18)(41,"button",19),s(42," Enregistrer les modifications "),o()()()()),e&2&&(a(4),m("formGroup",r.hoursForm))},dependencies:[ue,pe,X,mi,Q,me,de,He],encapsulation:2})};function Ce(i){i||($t(Ce),i=_(oe));let t=new Dt(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(we(t))}var nn=(i,t)=>t.id_feeding;function rn(i,t){i&1&&(n(0,"div",1)(1,"p",3),s(2," Aucun historique disponible pour cet animal. "),o(),n(3,"p",4),s(4," Les repas enregistr\xE9s appara\xEEtront ici. "),o()())}function on(i,t){if(i&1&&(n(0,"div",17)(1,"p",18)(2,"span",19),U(),n(3,"svg",14),p(4,"path",20),o()(),s(5),o()()),i&2){let e=d().$implicit;a(5),v(' "',e.notes,'" ')}}function an(i,t){if(i&1&&(n(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),s(5),G(6,"titlecase"),o(),n(7,"span",10),s(8),o()(),n(9,"div",11)(10,"p",12)(11,"span",13),U(),n(12,"svg",14),p(13,"path",15),o()(),s(14),G(15,"date"),o(),J(),n(16,"p",12)(17,"span",13),U(),n(18,"svg",14),p(19,"path",16),o()(),s(20),o()()()(),y(21,on,6,1,"div",17),o()),i&2){let e=t.$implicit;a(5),v(" ",Ue(6,6,e.food_type)," "),a(3),je(" ",e.quantity," ",e.unit," "),a(6),v(" ",ye(15,8,e.feeding_date,"dd/MM/yyyy HH:mm")," "),a(6),v(" ",e.user_name," "),a(),f(e.notes?21:-1)}}function sn(i,t){if(i&1&&(n(0,"div",2),E(1,an,22,11,"div",5,nn),o()),i&2){let e=d();a(),H(e.feedingHistory())}}var st=class i{animalId;feedingService=_(We);destroyRef=_(oe);feedingHistory=u([]);ngOnInit(){this.loadHistory()}ngOnChanges(t){t.animalId&&!t.animalId.firstChange&&this.loadHistory()}loadHistory(){return z(this,null,function*(){try{this.feedingHistory.set([]);let t=yield ee(this.feedingService.getFeedingHistory(this.animalId).pipe(Ce(this.destroyRef)));this.feedingHistory.set(t)}catch(t){console.error("Erreur lors du chargement de l'historique:",t),this.feedingHistory.set([])}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-feeding-history-vet"]],inputs:{animalId:"animalId"},standalone:!0,features:[Re,g],decls:3,vars:1,consts:[[1,"pr-3","custom-scrollbar","max-h-[70vh]","overflow-y-auto"],[1,"flex","flex-col","items-center","justify-center","py-8","bg-white/80","rounded-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"text-gray-600","text-lg","font-medium"],[1,"text-gray-500","text-sm","mt-2"],[1,"bg-white/90","rounded-xl","p-4","shadow-md","border-l-4","border-l-tertiary","border","border-secondary/10","transition-all","duration-200","hover:shadow-lg"],[1,"flex","flex-col","gap-3"],[1,"flex-1","space-y-2"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"font-medium","text-quinary","text-lg"],[1,"bg-tertiary/10","text-tertiary","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"space-y-1"],[1,"text-sm","text-gray-600","flex","items-center","gap-2"],[1,"w-4","h-4","inline-block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"text-sm","text-gray-600","italic","flex","items-start","gap-2"],[1,"w-4","h-4","inline-block","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"]],template:function(e,r){e&1&&(n(0,"div",0),y(1,rn,5,0,"div",1)(2,sn,3,0,"div",2),o()),e&2&&(a(),f(r.feedingHistory().length===0?1:2))},dependencies:[k,ei,ae],styles:["[_nghost-%COMP%]{display:block}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#557a46 #e2e8f0}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#557a46;border-radius:10px}"]})};var he=class i{constructor(t){this.http=t}apiUrl=`${B.apiUrl}/api/habitat-comment`;getCommentsByHabitatId(t){return console.log("R\xE9cup\xE9ration des commentaires pour habitat:",t),this.http.get(`${this.apiUrl}/${t}`).pipe(ne(e=>console.log("Commentaires re\xE7us:",e)))}createHabitatComment(t){return console.log("Cr\xE9ation du commentaire:",t),this.http.post(this.apiUrl,t).pipe(ne(e=>console.log("R\xE9ponse cr\xE9ation:",e)))}getAllComments(){return this.http.get(`${this.apiUrl}`).pipe(ne(t=>console.log("All comments loaded:",t)))}static \u0275fac=function(e){return new(e||i)(Z(Ee))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var ln=(i,t)=>t.id_habitat,ki=(i,t,e)=>({"bg-green-500":i,"bg-yellow-500":t,"bg-red-500":e}),mn=(i,t,e)=>({"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e});function pn(i,t){i&1&&(n(0,"p",6),s(1," Aucun commentaire pour cet habitat. "),o())}function dn(i,t){i&1&&(n(0,"div",17),U(),n(1,"svg",24),p(2,"path",25),o(),J(),n(3,"span"),s(4,"R\xE9gl\xE9"),o()())}function cn(i,t){i&1&&(n(0,"div",18),U(),n(1,"svg",24),p(2,"path",26),o(),J(),n(3,"span"),s(4,"En attente"),o()())}function un(i,t){if(i&1&&(n(0,"div",23),s(1),G(2,"date"),o()),i&2){let e=d().$implicit;a(),je(" R\xE9solu par ",e.resolved_by," le ",ye(2,2,e.resolved_at,"dd/MM/yyyy")," ")}}function fn(i,t){if(i&1&&(n(0,"div",9),p(1,"div",10),n(2,"div",11)(3,"div",12)(4,"div",13),s(5),G(6,"date"),o()(),n(7,"div",14)(8,"div",15),p(9,"span",16),s(10),o(),y(11,dn,5,0,"div",17)(12,cn,5,0,"div",18),o()(),n(13,"p",19),s(14),o(),n(15,"div",20)(16,"div",21),s(17," Par: "),n(18,"span",22),s(19),o()(),y(20,un,3,5,"div",23),o()()),i&2){let e=t.$implicit;a(),m("ngClass",Le(12,ki,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(4),v(" ",ye(6,9,e.createdAt,"dd/MM/yyyy \xE0 HH:mm")," "),a(3),m("ngClass",Le(16,mn,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(),m("ngClass",Le(20,ki,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),a(),v(" ",e.habitat_status," "),a(),f(e.is_resolved?11:12),a(3),v(" ",e.comment," "),a(5),q(e.user_name),a(),f(e.is_resolved?20:-1)}}function vn(i,t){if(i&1&&E(0,fn,21,24,"div",9,ln),i&2){let e=d();H(e.comments())}}var lt=class i{constructor(t){this.habitatCommentService=t}habitatId;habitatImage;habitatName;close=new Y;comments=u([]);ngOnInit(){this.loadComments()}onClose(){this.close.emit()}loadComments(){this.habitatCommentService.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{this.comments.set(t)},error:t=>{console.error("Erreur lors du chargement des commentaires:",t)}})}static \u0275fac=function(e){return new(e||i)(b(he))};static \u0275cmp=h({type:i,selectors:[["app-habitat-comment-history"]],inputs:{habitatId:"habitatId",habitatImage:"habitatImage",habitatName:"habitatName"},outputs:{close:"close"},standalone:!0,features:[g],decls:13,vars:8,consts:[[1,"w-full","max-w-6xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"flex","items-center","gap-4","mb-8"],[1,"w-24","h-24","rounded-xl","object-cover","shadow-md",3,"src","alt"],[1,"text-2xl","sm:text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-quinary/70","font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"col-span-full","text-center","text-tertiary/70","py-8"],[1,"flex","justify-center","mt-8"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[1,"bg-white","rounded-xl","shadow-md","hover:shadow-lg","transition-all","duration-300","p-4","relative","overflow-hidden"],[1,"absolute","top-0","left-0","right-0","h-1",3,"ngClass"],[1,"flex","justify-between","items-start","mt-2"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-tertiary/80","font-medium"],[1,"flex","flex-col","items-end","gap-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","flex","items-center","gap-1",3,"ngClass"],[1,"w-1.5","h-1.5","rounded-full",3,"ngClass"],[1,"flex","items-center","gap-1.5","bg-green-50","text-green-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-1.5","bg-red-50","text-red-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-quinary/80","my-4","line-clamp-3"],[1,"flex","justify-between","items-end"],[1,"text-sm","text-tertiary/70"],[1,"font-medium"],[1,"text-xs","text-gray-500","italic"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3.5","w-3.5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zm-1 8a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1),p(2,"img",2),n(3,"div")(4,"h2",3),s(5," Historique des commentaires sur les habitats "),o(),n(6,"p",4),s(7),o()()(),n(8,"div",5),y(9,pn,2,0,"p",6)(10,vn,2,0),o(),n(11,"div",7)(12,"app-button",8),c("click",function(){return r.onClose()}),o()()()),e&2&&(a(2),m("src",r.habitatImage,P)("alt",r.habitatName),a(5),v(" ",r.habitatName," "),a(2),f(r.comments().length===0?9:10),a(3),m("text","Fermer")("type","button")("color","secondary")("rounded",!0))},dependencies:[k,Pe,ae,$],encapsulation:2})};function hn(i,t){if(i&1&&(n(0,"option",6),s(1),o()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}function gn(i,t){if(i&1&&p(0,"app-toast",9),i&2){let e=d();m("message",e.toastMessage())("type",e.toastType())}}var mt=class i{constructor(t){this.habitatComments=t}habitatId;commentAdded=new Y;habitatsComments=u([]);isToastVisible=u(!1);toastMessage=u("");toastType=u("success");newHabitatCommentData={habitat_status:"Optimal",comment:"",id_habitat:0};statusOptions=["Optimal","Acceptable","N\xE9cessite des am\xE9liorations"];commentStatusService=_(fi);statusSubscription;ngOnInit(){this.habitatId&&(this.newHabitatCommentData.id_habitat=this.habitatId,this.loadHabitatsComments()),this.statusSubscription=this.commentStatusService.commentStatusChanged$.subscribe(t=>{console.log("Mise \xE0 jour du commentaire re\xE7ue dans le composant v\xE9t\xE9rinaire:",t),this.loadHabitatsComments(),this.showToast(`Commentaire ${t.is_resolved?"marqu\xE9 comme r\xE9gl\xE9":"r\xE9ouvert"}`,"success")})}ngOnDestroy(){this.statusSubscription&&this.statusSubscription.unsubscribe()}loadHabitatsComments(){console.log("Chargement des commentaires pour l'habitat:",this.habitatId),this.habitatComments.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{console.log("Commentaires re\xE7us pour l'habitat:",t);let e=[...t].sort((r,l)=>new Date(l.createdAt).getTime()-new Date(r.createdAt).getTime());this.habitatsComments.set(e)},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",t)})}submitComment(){if(console.log("Donn\xE9es \xE0 envoyer:",this.newHabitatCommentData),!this.newHabitatCommentData.comment||!this.newHabitatCommentData.id_habitat){this.showToast("Veuillez remplir tous les champs","error");return}this.habitatComments.createHabitatComment(this.newHabitatCommentData).subscribe({next:t=>{console.log("Commentaire cr\xE9\xE9:",t),this.loadHabitatsComments(),this.newHabitatCommentData={id_habitat:this.habitatId,habitat_status:"Optimal",comment:""},this.showToast("Commentaire ajout\xE9 avec succ\xE8s","success")},error:t=>{console.error("Erreur lors de l'ajout du commentaire:",t),this.showToast("Erreur lors de l'ajout du commentaire","error")}})}showToast(t,e){this.toastMessage.set(t),this.toastType.set(e),this.isToastVisible.set(!0),setTimeout(e==="success"?()=>{this.isToastVisible.set(!1),this.commentAdded.emit()}:()=>{this.isToastVisible.set(!1)},3e3)}static \u0275fac=function(e){return new(e||i)(b(he))};static \u0275cmp=h({type:i,selectors:[["app-habitat-comment"]],inputs:{habitatId:"habitatId"},outputs:{commentAdded:"commentAdded"},standalone:!0,features:[g],decls:17,vars:6,consts:[[1,"bg-white","rounded-lg","shadow-lg","p-6"],[1,"mb-8"],[1,"text-xl","font-semibold","mb-4","text-tertiary"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"value"],["rows","3",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"click","color","text","rounded"],[3,"message","type"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),s(3," Ajouter un commentaire "),o(),n(4,"div",3)(5,"div")(6,"label",4),s(7,"\xC9tat de l'habitat"),o(),n(8,"select",5),Et("ngModelChange",function(x){return wt(r.newHabitatCommentData.habitat_status,x)||(r.newHabitatCommentData.habitat_status=x),x}),E(9,hn,2,2,"option",6,De),o()(),n(11,"div")(12,"label",4),s(13,"Commentaire"),o(),n(14,"textarea",7),Et("ngModelChange",function(x){return wt(r.newHabitatCommentData.comment,x)||(r.newHabitatCommentData.comment=x),x}),o()(),n(15,"app-button",8),c("click",function(){return r.submitComment()}),o()()(),y(16,gn,1,2,"app-toast",9),o()),e&2&&(a(8),St("ngModel",r.newHabitatCommentData.habitat_status),a(),H(r.statusOptions),a(5),St("ngModel",r.newHabitatCommentData.comment),a(),m("color","tertiary")("text","Ajouter le commentaire")("rounded",!0),a(),f(r.isToastVisible()?16:-1))},dependencies:[k,ui,Be,ze,X,qe,Q,pi,$,fe],encapsulation:2})};var Ft=(r=>(r.GOOD_HEALTH="Bonne sant\xE9",r.INJURED="Bless\xE9",r.SICK="Malade",r))(Ft||{});function bn(i,t){if(i&1&&(n(0,"option",14),s(1),o()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}function xn(i,t){if(i&1&&(n(0,"option",14),s(1),o()),i&2){let e=t.$implicit;m("value",e),a(),q(e)}}var pt=class i{animalId;close=new Y;reportForm;isModalOpen=!0;animalStates=Object.values(Ft);foodUnits=["kg","g"];fb=_(ce);veterinaryReportsService=_(Oe);authService=_(j);toastService=_(N);ngOnInit(){console.log("VeterinaryReportsComponent initialized"),console.log("Modal state:",this.isModalOpen),this.initForm(),this.animalId&&this.loadAnimalDetails()}initForm(){this.reportForm=this.fb.group({id_animal:["",C.required],animal_name:["",C.required],visit_date:["",C.required],animal_state:["",C.required],recommended_food_type:["",C.required],recommended_food_quantity:["",[C.required,C.min(0)]],food_unit:["",C.required],additional_details:[""]})}loadAnimalDetails(){this.veterinaryReportsService.fetchAnimalDetails(this.animalId).subscribe({next:t=>{t&&this.reportForm.patchValue({id_animal:t.id_animal,animal_name:t.name,animal_photo:t.images})},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'animal:",t)})}closeModal(){this.close.emit()}onSubmit(){if(this.reportForm.valid){let t=this.authService.user();if(!t?.id){console.error("Utilisateur non connect\xE9");return}let e=A(T({},this.reportForm.value),{id_user:t.id,user_name:t.name,animal_state:this.reportForm.value.animal_state});this.veterinaryReportsService.createReport(e).subscribe({next:r=>{console.log("Rapport cr\xE9\xE9 avec succ\xE8s",r),new Promise(x=>{this.toastService.showSuccess("Rapport v\xE9t\xE9rinaire enregistr\xE9 avec succ\xE8s"),setTimeout(x,3e3)}).then(()=>{this.closeModal()})},error:()=>{this.toastService.showError("Erreur lors de l'enregistrement du rapport")}})}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-veterinary-reports"]],inputs:{animalId:"animalId"},outputs:{close:"close"},standalone:!0,features:[g],decls:53,vars:17,consts:[[1,"w-full","max-w-2xl","mx-auto","bg-white","p-6","rounded-xl"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-2xl","font-serif","text-tertiary"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-quinary/60","mb-2"],["type","text","readonly","",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","text-lg","text-tertiary","font-medium","focus:outline-none",3,"formControl"],[1,"grid","grid-cols-2","gap-6","mb-6"],["type","date",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],[1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none","appearance-none","cursor-pointer",3,"formControl"],["value","","disabled","","selected",""],[3,"value"],[1,"space-y-6"],[1,"text-lg","font-medium","text-tertiary"],["type","text","placeholder","Ex: Croquettes premium",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],[1,"grid","grid-cols-2","gap-6"],["type","number","placeholder","Ex: 250",1,"w-full","p-2","bg-transparent","border-b-2","border-tertiary/20","focus:border-tertiary","transition-colors","focus:outline-none",3,"formControl"],["rows","4","placeholder","Ajoutez des observations compl\xE9mentaires...",1,"w-full","p-4","bg-tertiary/5","rounded-lg","focus:outline-none","focus:ring-1","focus:ring-tertiary/30","transition-all","resize-none",3,"formControl"],[1,"flex","justify-end","gap-4","pt-6"],[3,"click","text","type","color","customClass"],[3,"text","type","color","disabled","customClass"]],template:function(e,r){e&1&&(n(0,"div",0),p(1,"app-toast"),n(2,"div",1)(3,"h2",2),s(4,"Nouveau Rapport"),o(),n(5,"button",3),c("click",function(){return r.closeModal()}),U(),n(6,"svg",4),p(7,"path",5),o()()(),J(),n(8,"form",6),c("ngSubmit",function(){return r.onSubmit()}),n(9,"div",7)(10,"label",8),s(11,"Animal"),o(),p(12,"input",9),o(),n(13,"div",10)(14,"div")(15,"label",8),s(16,"Date de visite"),o(),p(17,"input",11),o(),n(18,"div")(19,"label",8),s(20,"\xC9tat de sant\xE9"),o(),n(21,"select",12)(22,"option",13),s(23,"Choisir un \xE9tat"),o(),E(24,bn,2,2,"option",14,De),o()()(),n(26,"div",15)(27,"h3",16),s(28," Recommandations alimentaires "),o(),n(29,"div")(30,"label",8),s(31,"Type d'alimentation"),o(),p(32,"input",17),o(),n(33,"div",18)(34,"div")(35,"label",8),s(36,"Quantit\xE9"),o(),p(37,"input",19),o(),n(38,"div")(39,"label",8),s(40,"Unit\xE9"),o(),n(41,"select",12)(42,"option",13),s(43,"Choisir une unit\xE9"),o(),E(44,xn,2,2,"option",14,De),o()()()(),n(46,"div")(47,"label",8),s(48,"Observations"),o(),p(49,"textarea",20),o(),n(50,"div",21)(51,"app-button",22),c("click",function(){return r.closeModal()}),o(),p(52,"app-button",23),o()()()),e&2&&(a(8),m("formGroup",r.reportForm),a(4),m("formControl",r.reportForm.get("animal_name")),a(5),m("formControl",r.reportForm.get("visit_date")),a(4),m("formControl",r.reportForm.get("animal_state")),a(3),H(r.animalStates),a(8),m("formControl",r.reportForm.get("recommended_food_type")),a(5),m("formControl",r.reportForm.get("recommended_food_quantity")),a(4),m("formControl",r.reportForm.get("food_unit")),a(3),H(r.foodUnits),a(5),m("formControl",r.reportForm.get("additional_details")),a(2),m("text","Annuler")("type","button")("color","secondary")("customClass","px-6 py-2 rounded-lg hover:bg-gray-100"),a(),m("text","Enregistrer")("type","submit")("color","tertiary")("disabled",!r.reportForm.valid)("customClass","px-6 py-2 rounded-lg"))},dependencies:[k,ue,pe,Be,ze,X,di,qe,Q,me,ci,de,fe,$],styles:[`input[_ngcontent-%COMP%]::placeholder, 
   textarea[_ngcontent-%COMP%]::placeholder {
    color: rgba(85, 122, 70, 0.4);
  }

  input[_ngcontent-%COMP%]:focus::placeholder, 
   textarea[_ngcontent-%COMP%]:focus::placeholder {
    color: rgba(85, 122, 70, 0.6);
  }

  select[_ngcontent-%COMP%] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23557A46'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }`]})};function _n(i,t){if(i&1&&(n(0,"p",10)(1,"span",11),s(2,"D\xE9tails suppl\xE9mentaires:"),o(),s(3),o()),i&2){let e=d().$implicit;a(3),v(" ",e.additional_details," ")}}function Cn(i,t){if(i&1&&(n(0,"div",3)(1,"div",4)(2,"div",5),p(3,"img",6),n(4,"div")(5,"h3",7),s(6),o(),n(7,"p",8),s(8),G(9,"date"),o(),n(10,"div",9)(11,"p",10)(12,"span",11),s(13,"Alimentation recommand\xE9e:"),o(),s(14),o(),y(15,_n,4,1,"p",10),n(16,"p",12)(17,"span",11),s(18,"V\xE9t\xE9rinaire:"),o(),s(19),o()()()(),n(20,"div",13)(21,"span",14),p(22,"i"),s(23),o(),n(24,"span",15),s(25),o()()()()),i&2){let e,r=t.$implicit,l=d(2);a(3),m("src",r.animal_photo,P)("alt",r.animal_name),a(3),v(" ",r.animal_name," "),a(2),v(" ",ye(9,18,r.visit_date,"dd/MM/yyyy")," "),a(6),Zt(" ",r.recommended_food_quantity,"",r.food_unit," de ",r.recommended_food_type," "),a(),f(r.additional_details?15:-1),a(4),v(" ",r.user_name," "),a(2),xe(l.getStateClass(r.animal_state)),a(),Wt("fas fa-",l.getStateIcon(r.animal_state),""),a(),v(" ",r.animal_state," "),a(),xe(l.getStatusButtonClass((e=r.is_processed)!==null&&e!==void 0?e:!1)),a(),v(" ",r.is_processed?"Trait\xE9":"Non trait\xE9"," ")}}function Sn(i,t){if(i&1&&(n(0,"div",1)(1,"h2",2),s(2,"Rapports v\xE9t\xE9rinaires"),o()(),E(3,Cn,26,21,"div",3,Ne)),i&2){let e=d();a(3),H(e.reports)}}function wn(i,t){if(i&1){let e=F();n(0,"app-veterinary-reports",16),c("close",function(){S(e);let l=d();return w(l.closeReportForm())}),o()}}var dt=class i{constructor(t){this.veterinaryReportsService=t}animalId;showReportForm=!1;reportStatus;reports=[];ngOnInit(){this.loadReports()}ngOnChanges(t){t.reportStatus&&this.loadReports()}loadReports(){this.veterinaryReportsService.getAllReports().pipe(Me(t=>t.map(e=>A(T({},e),{is_processed:e.is_treated||!1}))),ie(t=>{let e=t.filter(r=>r.id_animal===this.animalId);return Vt(e.map(r=>this.veterinaryReportsService.fetchAnimalDetails(r.id_animal).pipe(Me(l=>A(T({},r),{animal_photo:l.images||"",animal_name:l.name})))))})).subscribe({next:t=>{this.reports=t},error:t=>{console.error("Erreur lors du chargement des rapports:",t)}})}openNewReportForm(){this.showReportForm=!0}closeReportForm(){this.showReportForm=!1,this.loadReports()}getStateClass(t){let e="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium whitespace-nowrap min-w-[140px] justify-center";switch(t.toLowerCase()){case"bonne sant\xE9":return`${e} bg-green-100 text-green-700`;case"malade":return`${e} bg-red-100 text-red-700`;case"en traitement":return`${e} bg-yellow-100 text-yellow-700`;case"en observation":return`${e} bg-blue-100 text-blue-700`;default:return`${e} bg-gray-100 text-gray-700`}}getStateIcon(t){switch(t.toLowerCase()){case"bonne sant\xE9":return"check-circle";case"malade":return"exclamation-circle";case"en traitement":return"clock";case"en observation":return"eye";default:return"information-circle"}}getStatusButtonClass(t){return t?"bg-green-100 text-green-700 hover:bg-green-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}toggleReportStatus(t){let e=t._id||t.id_veterinary_reports;if(!e){console.error("ID du rapport non d\xE9fini:",t);return}let r=!t.is_processed;this.veterinaryReportsService.updateReportStatus(e,r).subscribe({next:()=>{t.is_processed=r,t.is_treated=r,console.log("Statut du rapport mis \xE0 jour avec succ\xE8s")},error:l=>{console.error("Erreur lors de la mise \xE0 jour du statut:",l),t.is_processed=!r,t.is_treated=!r}})}static \u0275fac=function(e){return new(e||i)(b(Oe))};static \u0275cmp=h({type:i,selectors:[["app-veterinary-reports-list"]],inputs:{animalId:"animalId",showReportForm:"showReportForm",reportStatus:"reportStatus"},standalone:!0,features:[Re,g],decls:3,vars:2,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-serif","text-tertiary"],[1,"bg-white","p-6","rounded-lg","shadow-sm"],[1,"flex","justify-between","items-start"],[1,"flex","items-start","gap-4"],[1,"w-16","h-16","rounded-full","object-cover",3,"src","alt"],[1,"text-lg","font-medium","text-tertiary"],[1,"text-sm","text-quinary/60"],[1,"mt-2","space-y-1"],[1,"text-sm"],[1,"font-medium"],[1,"text-sm","mt-2","text-quinary/80"],[1,"flex","flex-col","items-end","gap-2"],[1,"ml-2"],[1,"px-3","py-1","rounded-full","text-sm","font-medium"],[3,"close"]],template:function(e,r){e&1&&(n(0,"div",0),y(1,Sn,5,0)(2,wn,1,0,"app-veterinary-reports"),o()),e&2&&(a(),f(r.showReportForm?-1:1),a(),f(r.showReportForm?2:-1))},dependencies:[k,ae,pt],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};var Hn=(i,t)=>t.id_animal,On=(i,t)=>t.id_habitat;function kn(i,t){if(i&1){let e=F();n(0,"div",13)(1,"div",25),p(2,"img",26)(3,"div",27),n(4,"h3",28),s(5),o()(),n(6,"div",29)(7,"table",30)(8,"tbody")(9,"tr")(10,"td",31),s(11,"Esp\xE8ce:"),o(),n(12,"td",32),s(13),o()(),n(14,"tr")(15,"td",31),s(16,"R\xE9gime:"),o(),n(17,"td",32),s(18),o()(),n(19,"tr")(20,"td",31),s(21,"Habitat:"),o(),n(22,"td",33),s(23),o()()()(),n(24,"div",34)(25,"app-button",35),c("click",function(){let l=S(e).$implicit,x=d(2);return w(x.openVetReportsHistory(l.id_animal))}),o(),n(26,"app-button",35),c("click",function(){let l=S(e).$implicit,x=d(2);return w(x.openFeedingHistory(l.id_animal))}),o()()()()}if(i&2){let e=t.$implicit,r=d(2);a(2),m("src",e.images,P)("alt",e.name),a(3),v(" ",e.name," "),a(8),q(e.species),a(5),q(e.diet),a(5),v(" ",r.getHabitatName(e.habitat_id)," "),a(2),m("text","Rapports")("color","tertiary")("rounded",!0),a(),m("text","Historique")("color","secondary")("rounded",!0)}}function In(i,t){if(i&1){let e=F();n(0,"div",16)(1,"div",36),p(2,"img",26)(3,"div",27),n(4,"h3",28),s(5),o()(),n(6,"div",37)(7,"app-button",35),c("click",function(){let l=S(e).$implicit,x=d(2);return w(x.selectHabitat(l.id_habitat))}),o(),n(8,"app-button",35),c("click",function(){let l=S(e).$implicit,x=d(2);return w(x.viewHabitatComments(l.id_habitat))}),o()()()}if(i&2){let e=t.$implicit;a(2),m("src",e.images,P)("alt",e.name),a(3),v(" ",e.name," "),a(2),m("text","Commentaire")("color","tertiary")("rounded",!0),a(),m("text","Historique")("color","secondary")("rounded",!0)}}function Fn(i,t){if(i&1&&(n(0,"div",44),p(1,"app-feeding-history-vet",46),o()),i&2){let e=d(3);a(),m("animalId",e.selectedAnimalId())}}function Mn(i,t){if(i&1&&(n(0,"div",45),p(1,"app-veterinary-reports-list",24),o()),i&2){let e=d(3);a(),m("animalId",e.selectedAnimalId())("showReportForm",!1)}}function Dn(i,t){if(i&1){let e=F();n(0,"div",38)(1,"div",39)(2,"app-button",40),c("click",function(){S(e);let l=d(2);return w(l.toggleHistoryView(!1))}),o(),n(3,"app-button",40),c("click",function(){S(e);let l=d(2);return w(l.toggleHistoryView(!0))}),o()(),n(4,"button",41),c("click",function(){S(e);let l=d(2);return w(l.closeHistoryModal())}),U(),n(5,"svg",42),p(6,"path",43),o()()(),y(7,Fn,2,1,"div",44)(8,Mn,2,2,"div",45)}if(i&2){let e=d(2);a(2),m("text","Historique des repas")("color",e.showVetReports()?"secondary":"tertiary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),a(),m("text","Rapports v\xE9t\xE9rinaires")("color",e.showVetReports()?"tertiary":"secondary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),a(4),f(e.showVetReports()?8:7)}}function Tn(i,t){if(i&1){let e=F();n(0,"app-habitat-comment",47),c("commentAdded",function(){S(e);let l=d(2);return w(l.closeHabitatModal())}),o()}if(i&2){let e=d(2);m("habitatId",e.selectedHabitatId())}}function An(i,t){if(i&1){let e=F();n(0,"app-habitat-comment-history",48),c("close",function(){S(e);let l=d(2);return w(l.closeHabitatHistoryModal())}),o()}if(i&2){let e,r=d(2);m("habitatId",r.selectedHabitatId())("habitatImage",(e=(e=r.getSelectedHabitat())==null?null:e.images)!==null&&e!==void 0?e:"")("habitatName",r.getHabitatName(r.selectedHabitatId()))}}function Vn(i,t){if(i&1&&p(0,"app-veterinary-reports-list",24),i&2){let e=d(2);m("animalId",e.selectedAnimalId())("showReportForm",!1)}}function Rn(i,t){if(i&1){let e=F();n(0,"div",7)(1,"div",8)(2,"h2",9),p(3,"i",10),s(4,"Animaux "),o(),p(5,"div",11),o(),n(6,"div",12),E(7,kn,27,12,"div",13,Hn),o()(),n(9,"div",7)(10,"div",8)(11,"h2",9),p(12,"i",14),s(13,"Habitats "),o()(),n(14,"div",15),E(15,In,9,9,"div",16,On),o()(),n(17,"app-modal",17),c("close",function(){S(e);let l=d();return w(l.closeHistoryModal())}),n(18,"div",18),y(19,Dn,9,9),o()(),n(20,"app-modal",17),c("close",function(){S(e);let l=d();return w(l.closeHabitatModal())}),n(21,"div",19),y(22,Tn,1,1,"app-habitat-comment",20),n(23,"div",21)(24,"app-button",22),c("click",function(){S(e);let l=d();return w(l.closeHabitatModal())}),o()()()(),n(25,"app-modal",17),c("close",function(){S(e);let l=d();return w(l.closeHabitatHistoryModal())}),y(26,An,1,3,"app-habitat-comment-history",23),o(),n(27,"app-modal",17),c("close",function(){S(e);let l=d();return w(l.closeReportModal())}),n(28,"div",19),y(29,Vn,1,2,"app-veterinary-reports-list",24),n(30,"div",21)(31,"app-button",22),c("click",function(){S(e);let l=d();return w(l.closeReportModal())}),o()()()()}if(i&2){let e=d();a(7),H(e.animals()),a(8),H(e.habitats()),a(2),m("isOpen",e.isHistoryModalOpen()),a(2),f(e.selectedAnimalId()?19:-1),a(),m("isOpen",e.isHabitatModalOpen()),a(2),f(e.selectedHabitatId()?22:-1),a(2),m("text","Fermer")("type","button")("color","secondary")("rounded",!0),a(),m("isOpen",e.isHabitatHistoryModalOpen()),a(),f(e.selectedHabitatId()?26:-1),a(),m("isOpen",e.isReportModalOpen()),a(2),f(e.selectedAnimalId()?29:-1),a(2),m("text","Fermer")("type","button")("color","secondary")("rounded",!0)}}var Ie=class i{constructor(t,e,r,l,x){this.habitatService=t;this.animalService=e;this.habitatCommentService=r;this.reportsService=l;this.animalFeedingService=x}habitats=u([]);animals=u([]);activeTab=u("overview");selectedAnimalId=u(null);selectedHabitatId=u(null);_isHistoryModalOpen=u(!1);_isHabitatModalOpen=u(!1);_isHabitatHistoryModalOpen=u(!1);habitatComments=u([]);activeHistoryTab="meals";habitatCommentsMap=u(new Map);_isReportModalOpen=u(!1);_showVetReports=u(!1);showVetReports=R(()=>this._showVetReports());hasHistory=u(!1);ngOnInit(){this.loadHabitats(),this.loadAnimals()}setActiveTab(t){this.activeTab.set(t)}loadHabitats(){this.habitatService.getHabitats().subscribe({next:t=>this.habitats.set(t),error:t=>console.error("Erreur lors du chargement des habitats:",t)})}loadAnimals(){this.animalService.getAnimals().subscribe({next:t=>this.animals.set(t),error:t=>console.error("Erreur lors du chargement des animaux:",t)})}selectAnimal(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}selectHabitat(t){this.selectedHabitatId.set(t),this._isHabitatModalOpen.set(!0)}closeHistoryModal(){this._isHistoryModalOpen.set(!1),this.selectedAnimalId.set(null),this._showVetReports.set(!1)}closeHabitatModal(){this._isHabitatModalOpen.set(!1),this.selectedHabitatId.set(null)}viewHabitatComments(t){this.selectedHabitatId.set(t),this.loadHabitatComments(t),this._isHabitatHistoryModalOpen.set(!0)}loadHabitatComments(t){this.habitatCommentService.getCommentsByHabitatId(t).subscribe({next:e=>{let r=new Map(this.habitatCommentsMap());r.set(t,e),this.habitatCommentsMap.set(r)},error:e=>{console.error("Erreur lors du chargement des commentaires:",e)}})}closeHabitatHistoryModal(){this._isHabitatHistoryModalOpen.set(!1),this.selectedHabitatId.set(null),this.habitatComments.set([])}openReportForm(t){this.selectedAnimalId.set(t),this._isReportModalOpen.set(!0)}closeReportModal(){this._isReportModalOpen.set(!1),this.selectedAnimalId.set(null)}getHabitatName(t){let e=this.habitats().find(r=>r.id_habitat===t);return e?e.name:"Non assign\xE9"}openFeedingHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}isHistoryModalOpen=R(()=>this._isHistoryModalOpen());isHabitatModalOpen=R(()=>this._isHabitatModalOpen());isHabitatHistoryModalOpen=R(()=>this._isHabitatHistoryModalOpen());isReportModalOpen=R(()=>this._isReportModalOpen());getSelectedHabitat(){return this.habitats().find(t=>t.id_habitat===this.selectedHabitatId())}setActiveHistoryTab(t){this.activeHistoryTab=t,t==="habitats"&&this.habitats().forEach(e=>{this.loadHabitatComments(e.id_habitat)})}viewConsultations(t){console.log("Voir les consultations pour l'animal:",t)}getHabitatComments(t){return this.habitatCommentsMap().get(t)||[]}toggleHistoryView(t){this._showVetReports.set(t)}openVetReportsHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0),this._showVetReports.set(!0)}loadFeedingHistory(t){this.animalFeedingService.getFeedingHistory(t).subscribe({next:e=>{this.hasHistory.set(e.length>0)},error:e=>{console.error("Erreur lors du chargement de l'historique:",e)}})}getAnimals(){return this.animalService.getAnimals()}static \u0275fac=function(e){return new(e||i)(b(Ze),b(vi),b(he),b(Oe),b(We))};static \u0275cmp=h({type:i,selectors:[["app-veterinary-dashboard"]],standalone:!0,features:[g],decls:9,vars:1,consts:[[1,"relative","bg-gradient-to-r","from-secondary","to-tertiary/90","shadow-lg"],[1,"absolute","inset-0","bg-[url('/assets/patterns/subtle-dots.png')]","opacity-10"],[1,"container","mx-auto","px-4","py-12"],[1,"relative","z-10"],[1,"flex","flex-col","items-center","justify-center","space-y-4"],[1,"text-4xl","md:text-6xl","font-serif","text-white","font-bold","tracking-tight"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-16"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-serif","text-tertiary","font-bold"],[1,"fas","fa-paw","mr-2"],[1,"flex","space-x-2"],[1,"grid","grid-cols-1","sm:grid-cols-4","lg:grid-cols-4","gap-6","md:gap-8"],[1,"group","relative","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"fas","fa-home","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6","md:gap-8"],[1,"group","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[3,"close","isOpen"],[1,"w-full","max-w-3xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"w-full","max-w-4xl","mx-auto","bg-white/95","backdrop-blur-sm","p-4","sm:p-6","rounded-xl","shadow-xl"],[3,"habitatId"],[1,"flex","justify-center","mt-6"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[3,"habitatId","habitatImage","habitatName"],[3,"animalId","showReportForm"],[1,"relative","h-56","overflow-hidden"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-300",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/60","to-transparent"],[1,"absolute","bottom-4","left-4","text-2xl","font-serif","text-white","font-bold"],[1,"p-6"],[1,"w-full","text-sm"],[1,"text-tertiary","font-medium","pr-2"],[1,"text-quinary/80"],[1,"text-quinary/80","line-clamp-2"],[1,"grid","grid-cols-2","gap-2","mt-4"],[1,"transform","hover:-translate-y-0.5","transition-all","duration-300",3,"click","text","color","rounded"],[1,"relative","h-48","overflow-hidden"],[1,"grid","grid-cols-2","gap-2","p-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","gap-4"],[3,"click","text","color","rounded","customClass"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"min-h-[400px]","flex","flex-col"],[1,"min-h-[400px]"],[3,"animalId"],[3,"commentAdded","habitatId"],[3,"close","habitatId","habitatImage","habitatName"]],template:function(e,r){e&1&&(n(0,"section",0),p(1,"div",1),n(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),s(6," Tableau de Bord V\xE9t\xE9rinaire "),o()()()()(),n(7,"div",6),y(8,Rn,32,16),o()),e&2&&(a(8),f(r.activeTab()==="overview"?8:-1))},dependencies:[k,Ge,st,mt,$,lt,dt],encapsulation:2})};var ct=class i{animals=[];count=4;updateAnimals=new Y;intervalSubscription;ngOnInit(){this.updateDisplayedAnimals(),this.intervalSubscription=jt(5e3).subscribe(()=>{this.updateDisplayedAnimals()})}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}updateDisplayedAnimals(){let e=[...this.animals].sort(()=>.5-Math.random()).slice(0,this.count);this.updateAnimals.emit(e)}static \u0275fac=function(e){return new(e||i)};static \u0275dir=Ut({type:i,selectors:[["","appRandomAnimals",""]],inputs:{animals:"animals",count:"count"},outputs:{updateAnimals:"updateAnimals"},standalone:!0})};var ut=class i{constructor(t){this.http=t}apiUrl=`${B.apiUrl}/api/animals`;uploadsUrl=`${B.apiUrl}/api`;getAnimals(){return this.http.get(this.apiUrl).pipe(Me(t=>t.map(e=>A(T({},e),{images:e.images?`${this.uploadsUrl}/${e.images}`:""}))))}static \u0275fac=function(e){return new(e||i)(Z(Ee))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var jn=(i,t)=>t.id_animal,Ln=i=>["/animal",i];function Un(i,t){if(i&1&&(n(0,"div",7)(1,"a",8)(2,"div",9),p(3,"img",10),o(),n(4,"div",11)(5,"h3",12),s(6),o(),n(7,"span",13),s(8," Cliquez pour d\xE9couvrir "),o()(),n(9,"div",14)(10,"h3",15),s(11),o()()()()),i&2){let e=t.$implicit;a(),m("routerLink",te(5,Ln,e.id_animal)),a(2),m("src",e.images,P)("alt",e.name),a(3),v(" ",e.name," "),a(5),v(" ",e.name," ")}}var ft=class i{constructor(t,e){this.animalOverviewService=t;this.route=e}animal=u(void 0);animals=u([]);displayedAnimals=u([]);imageBaseUrl=`${B.apiUrl}`;ngOnInit(){this.loadAnimals()}loadAnimals(){this.animalOverviewService.getAnimals().subscribe({next:t=>{this.animals.set(t),this.displayedAnimals.set(this.getRandomAnimals(this.animals(),3))},error:t=>console.error("Erreur lors du chargement des animaux:",t)})}getRandomAnimals(t,e){return[...t].sort(()=>.5-Math.random()).slice(0,e)}onUpdateDisplayedAnimals(t){this.displayedAnimals.set(t)}static \u0275fac=function(e){return new(e||i)(b(ut),b($e))};static \u0275cmp=h({type:i,selectors:[["app-animals-overview"]],standalone:!0,features:[g],decls:11,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],["appRandomAnimals","",1,"max-w-7xl","mx-auto",3,"updateAnimals","animals","count"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group",3,"routerLink"],[1,"aspect-square","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Animaux "),o(),n(5,"p",4),s(6," D\xE9couvrez nos animaux fascinants qui peuplent nos trois habitats uniques : la jungle luxuriante, les marais myst\xE9rieux et la savane aride. Chaque animal r\xE9v\xE8le un aper\xE7u captivant de son habitat naturel. "),o()(),n(7,"div",5),c("updateAnimals",function(x){return r.onUpdateDisplayedAnimals(x)}),n(8,"div",6),E(9,Un,12,7,"div",7,jn),o()()()()),e&2&&(a(7),m("animals",r.animals())("count",3),a(2),H(r.displayedAnimals()))},dependencies:[le,ct],encapsulation:2})};var Pn=(i,t)=>t.id_habitat,$n=i=>["/habitat",i];function qn(i,t){if(i&1&&(n(0,"div",6)(1,"a",7),p(2,"img",8),n(3,"div",9)(4,"h3",10),s(5),o(),n(6,"p",11),s(7),o()(),n(8,"div",12)(9,"h3",13),s(10),o()()()()),i&2){let e=t.$implicit;a(),m("routerLink",te(6,$n,e.id_habitat)),a(),m("src",e.images,P)("alt",e.name),a(3),v(" ",e.name," "),a(2),v(" ",e.description," "),a(3),v(" ",e.name," ")}}var vt=class i{constructor(t){this.habitatService=t}destroyRef=_(oe);habitats=u([]);ngOnInit(){this.loadHabitats()}loadHabitats(){this.habitatService.getHabitats().pipe(Ce(this.destroyRef)).subscribe({next:t=>{this.habitats.set(t.map(this.formatHabitatImage))},error:t=>console.error("Erreur lors du chargement des habitats:",t)})}formatHabitatImage(t){let e="";return t.images&&(e=t.images.startsWith("http")?t.images:`${B.apiUrl}/uploads/${t.images}`),A(T({},t),{images:e})}static \u0275fac=function(e){return new(e||i)(b(Ze))};static \u0275cmp=h({type:i,selectors:[["app-habitats-overview"]],standalone:!0,features:[g],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Habitats "),o(),n(5,"p",4),s(6," Explorez la beaut\xE9 sauvage et la diversit\xE9 fascinante de trois \xE9cosyst\xE8mes uniques : la savane, la jungle et les marais. Chaque habitat vous d\xE9voile la richesse de la vie sous ses formes les plus \xE9tonnantes. "),o()(),n(7,"div",5),E(8,qn,11,8,"div",6,Pn),o()()()),e&2&&(a(8),H(r.habitats()))},dependencies:[le],encapsulation:2})};var Bn=(i,t)=>t.id_service,zn=i=>["/service",i];function Gn(i,t){if(i&1&&(n(0,"div",6)(1,"a",7),p(2,"img",8),n(3,"div",9)(4,"h3",10),s(5),o(),n(6,"p",11),s(7),o()(),n(8,"div",12)(9,"h3",13),s(10),o()()()()),i&2){let e=t.$implicit;a(),m("routerLink",te(6,zn,e.id_service)),a(),m("src",e.images,P)("alt",e.name),a(3),v(" ",e.name," "),a(2),v(" ",e.description," "),a(3),v(" ",e.name," ")}}var ht=class i{constructor(t){this.serviceService=t}destroyRef=_(oe);services=u([]);ngOnInit(){this.loadServices()}loadServices(){this.serviceService.getServices().pipe(Ce(this.destroyRef)).subscribe({next:t=>{this.services.set(t.map(this.formatServiceImage))},error:t=>console.error("Erreur lors du chargement des services:",t)})}formatServiceImage(t){return A(T({},t),{images:t.images?.startsWith("http")?t.images:`${B.apiUrl}/api/${t.images}`})}static \u0275fac=function(e){return new(e||i)(b(hi))};static \u0275cmp=h({type:i,selectors:[["app-services-overview"]],standalone:!0,features:[g],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Nos Services "),o(),n(5,"p",4),s(6," D\xE9couvrez nos services pour une exp\xE9rience enrichissante au zoo ! Profitez de nos diff\xE9rentes options pour rendre votre visite inoubliable. "),o()(),n(7,"div",5),E(8,Gn,11,8,"div",6,Bn),o()()()),e&2&&(a(8),H(r.services()))},dependencies:[le],encapsulation:2})};function Zn(i,t){i&1&&(n(0,"span"),s(1,"Le nom est requis"),o())}function Jn(i,t){i&1&&(n(0,"span"),s(1,"Le nom doit contenir au moins 2 caract\xE8res"),o())}function Yn(i,t){i&1&&(n(0,"span"),s(1,"Le nom contient des caract\xE8res non autoris\xE9s"),o())}function Kn(i,t){if(i&1&&(n(0,"div",11),y(1,Zn,2,0,"span")(2,Jn,2,0,"span")(3,Yn,2,0,"span"),o()),i&2){let e,r=d();a(),f(!((e=r.opinionForm.get("name"))==null||e.errors==null)&&e.errors.required?1:!((e=r.opinionForm.get("name"))==null||e.errors==null)&&e.errors.minlength?2:!((e=r.opinionForm.get("name"))==null||e.errors==null)&&e.errors.pattern?3:-1)}}function Xn(i,t){i&1&&(n(0,"span"),s(1,"L'avis est requis"),o())}function Qn(i,t){i&1&&(n(0,"span"),s(1,"L'avis doit contenir au moins 10 caract\xE8res"),o())}function er(i,t){i&1&&(n(0,"span"),s(1,"L'avis ne doit pas d\xE9passer 500 caract\xE8res"),o())}function tr(i,t){if(i&1&&(n(0,"div",11),y(1,Xn,2,0,"span")(2,Qn,2,0,"span")(3,er,2,0,"span"),o()),i&2){let e,r=d();a(),f(!((e=r.opinionForm.get("message"))==null||e.errors==null)&&e.errors.required?1:!((e=r.opinionForm.get("message"))==null||e.errors==null)&&e.errors.minlength?2:!((e=r.opinionForm.get("message"))==null||e.errors==null)&&e.errors.maxlength?3:-1)}}function ir(i,t){i&1&&(n(0,"div",11),s(1,"Veuillez attribuer une note"),o())}function nr(i,t){i&1&&(n(0,"span"),s(1,"La date est requise"),o())}function rr(i,t){i&1&&(n(0,"span"),s(1,"La date ne peut pas \xEAtre dans le futur"),o())}function or(i,t){if(i&1&&(n(0,"div",11),y(1,nr,2,0,"span")(2,rr,2,0,"span"),o()),i&2){let e,r=d();a(),f(!((e=r.opinionForm.get("date"))==null||e.errors==null)&&e.errors.required?1:!((e=r.opinionForm.get("date"))==null||e.errors==null)&&e.errors.futureDate?2:-1)}}var gt=class i{constructor(t,e,r){this.fb=t;this.userOpinionsService=e;this.toastService=r;this.currentDate=new Date().toISOString().split("T")[0],this.opinionForm=this.fb.group({})}opinionForm;currentDate;isOpen=!1;opinionAdded=new Y;closeModal=new Y;ngOnInit(){this.initForm()}initForm(){this.opinionForm=this.fb.group({name:["",[C.required,C.minLength(2),C.maxLength(50),C.pattern(/^[a-zA-ZÀ-ÿ\s'-]*$/)]],message:["",[C.required,C.minLength(10),C.maxLength(500),C.pattern(/^[a-zA-ZÀ-ÿ0-9\s.,!?'"()-]*$/)]],rating:[0,[C.required,C.min(1),C.max(5)]],date:["",[C.required,this.futureDateValidator]]})}futureDateValidator(t){if(!t.value)return null;let e=new Date(t.value),r=new Date,l=new Date(e.toDateString()),x=new Date(r.toDateString());return l>x?{futureDate:!0}:null}onSubmit(){if(this.opinionForm.valid){let t=A(T({},this.opinionForm.value),{date:new Date().toISOString().split("T")[0]});this.userOpinionsService.addUserOpinions(t).subscribe({next:()=>{this.toastService.showSuccess("Votre avis a \xE9t\xE9 envoy\xE9 avec succ\xE8s ! Merci de votre contribution.",2500),this.opinionForm.reset(),this.opinionAdded.emit(),setTimeout(()=>this.closeModal.emit(),2500)},error:e=>{console.error("Erreur lors de l'envoi de l'avis",e),this.toastService.showError("Une erreur est survenue lors de l'envoi de votre avis. Veuillez r\xE9essayer.")}})}}onClose(){this.closeModal.emit()}static \u0275fac=function(e){return new(e||i)(b(ce),b(Ye),b(N))};static \u0275cmp=h({type:i,selectors:[["app-add-user-opinions"]],inputs:{isOpen:"isOpen"},outputs:{opinionAdded:"opinionAdded",closeModal:"closeModal"},standalone:!0,features:[g],decls:33,vars:17,consts:[[1,"max-w-2xl","mx-auto","bg-white/95","rounded-2xl","shadow-xl","relative","overflow-hidden"],[1,"bg-tertiary/10","px-8","py-6","border-b","border-tertiary/20","flex","justify-between","items-center"],[1,"text-2xl","font-serif","text-tertiary","font-bold"],[1,"p-2","hover:bg-tertiary/10","rounded-full","transition-all","duration-300",3,"click"],[1,"fas","fa-times","text-tertiary"],[1,"relative"],[1,"px-8","py-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["for","name",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","text","id","name","formControlName","name","placeholder","Votre nom",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],[1,"mt-1","text-sm","text-red-500"],["for","message",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["id","message","formControlName","message","rows","4","placeholder","Partagez votre exp\xE9rience...",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","resize-none","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],["for","rating",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],[1,"p-3.5","border-2","border-tertiary/20","rounded-xl","bg-white","hover:border-tertiary/50","transition-all","duration-300"],["formControlName","rating",1,"w-full"],["for","date",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","date","id","date","formControlName","date",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50",3,"max"],[1,"bg-tertiary/10","px-8","py-6","border-t","border-tertiary/20","flex","justify-center"],[1,"w-full","sm:w-1/2","md:w-1/3","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"keyup","keyup.enter","click","text","type","disabled","rounded","color"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),s(3," Partagez votre exp\xE9rience "),o(),n(4,"button",3),c("click",function(){return r.onClose()}),p(5,"i",4),o()(),n(6,"div",5),p(7,"app-toast"),o(),n(8,"div",6)(9,"form",7),c("ngSubmit",function(){return r.onSubmit()}),n(10,"div",8)(11,"label",9),s(12," Nom "),o(),p(13,"input",10),y(14,Kn,4,1,"div",11),o(),n(15,"div",8)(16,"label",12),s(17," Votre avis "),o(),p(18,"textarea",13),y(19,tr,4,1,"div",11),o(),n(20,"div",8)(21,"label",14),s(22," Note "),o(),n(23,"div",15),p(24,"app-rate",16),o(),y(25,ir,2,0,"div",11),o(),n(26,"div",8)(27,"label",17),s(28," Date de votre visite "),o(),p(29,"input",18),y(30,or,3,1,"div",11),o()()(),n(31,"div",19)(32,"app-button",20),c("keyup",function(){return r.onSubmit()})("keyup.enter",function(){return r.onSubmit()})("click",function(){return r.onSubmit()}),o()()()),e&2){let l,x,L,D,ge,Fe,Ve;a(9),m("formGroup",r.opinionForm),a(4),V("border-red-500",((l=r.opinionForm.get("name"))==null||l.errors==null?null:l.errors.required)&&((l=r.opinionForm.get("name"))==null?null:l.touched)),a(),f((x=r.opinionForm.get("name"))!=null&&x.errors&&((x=r.opinionForm.get("name"))!=null&&x.touched)?14:-1),a(4),V("border-red-500",((L=r.opinionForm.get("message"))==null||L.errors==null?null:L.errors.required)&&((L=r.opinionForm.get("message"))==null?null:L.touched)),a(),f((D=r.opinionForm.get("message"))!=null&&D.errors&&((D=r.opinionForm.get("message"))!=null&&D.touched)?19:-1),a(6),f(!((ge=r.opinionForm.get("rating"))==null||ge.errors==null)&&ge.errors.required&&((ge=r.opinionForm.get("rating"))!=null&&ge.touched)?25:-1),a(4),V("border-red-500",((Fe=r.opinionForm.get("date"))==null||Fe.errors==null?null:Fe.errors.required)&&((Fe=r.opinionForm.get("date"))==null?null:Fe.touched)),m("max",r.currentDate),a(),f((Ve=r.opinionForm.get("date"))!=null&&Ve.errors&&((Ve=r.opinionForm.get("date"))!=null&&Ve.touched)?30:-1),a(2),m("text","Envoyer mon avis")("type","submit")("disabled",!r.opinionForm.valid)("rounded",!0)("color","tertiary")}},dependencies:[k,ue,pe,X,Q,me,de,He,$,Je,fe],encapsulation:2})};function ar(i,t){i&1&&(n(0,"div",6),p(1,"i",14),n(2,"p",15),s(3,"Chargement des avis..."),o()())}function sr(i,t){if(i&1){let e=F();n(0,"div",7)(1,"p",16),s(2," Une erreur est survenue lors du chargement des avis. "),o(),n(3,"app-button",17),c("click",function(){S(e);let l=d();return w(l.loadUserOpinions())}),o()()}i&2&&(a(3),m("text","R\xE9essayer")("type","button")("color","tertiary")("rounded",!0))}function lr(i,t){if(i&1){let e=F();n(0,"button",32),c("click",function(){let l=S(e).$index,x=d(2);return w(x.currentUserOpinionsIndex.set(l))}),o()}if(i&2){let e=t.$index,r=d(2);V("bg-tertiary",e===r.currentUserOpinionsIndex())("bg-tertiary",e!==r.currentUserOpinionsIndex())}}function mr(i,t){if(i&1){let e=F();n(0,"div",8)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",21),s(5),o()(),n(6,"div")(7,"h3",22),s(8),o(),n(9,"p",23),s(10),G(11,"date"),o()()(),p(12,"app-rate",24),o(),n(13,"p",25),s(14),o(),n(15,"div",26)(16,"app-button",27),c("click",function(){S(e);let l=d();return w(l.changeUserOpinions("previous"))}),p(17,"i",28),o(),n(18,"div",29),E(19,lr,1,4,"button",30,Ne),o(),n(21,"app-button",27),c("click",function(){S(e);let l=d();return w(l.changeUserOpinions("next"))}),p(22,"i",31),o()()()}if(i&2){let e=d();a(5),v(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name.charAt(0)," "),a(3),v(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name," "),a(2),v(" ",Jt(11,18,e.userOpinions()[e.currentUserOpinionsIndex()].date,"dd MMMM yyyy","fr-FR")," "),a(2),m("rating",e.currentRating)("isReadOnly",e.isReadOnly),a(2),v(' "',e.userOpinions()[e.currentUserOpinionsIndex()].message,'" '),a(2),m("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===0)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0 
                           transition-all duration-300 transform hover:-translate-x-1`),a(3),H(e.userOpinions()),a(2),m("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===e.userOpinions().length-1)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0 
                           transition-all duration-300 transform hover:translate-x-1`)}}function pr(i,t){i&1&&(n(0,"p",9),s(1," Aucun avis disponible pour le moment. "),o())}var bt=class i{constructor(t,e){this.userOpinionsService=t;this.toastService=e}isReadOnly=u(!0);userOpinions=u([]);currentUserOpinionsIndex=u(0);currentRating=u(0);isLoading=u(!0);hasError=u(!1);isModalOpen=u(!1);opinionsSubscription;ngOnInit(){this.loadUserOpinions()}loadUserOpinions(){this.isLoading.set(!0),this.hasError.set(!1),this.opinionsSubscription=this.userOpinionsService.getUserOpinions().subscribe({next:t=>{this.userOpinions.set(t),this.updateCurrentRating(),this.isLoading.set(!1)},error:t=>{console.error("Erreur lors du chargement des avis:",t),this.hasError.set(!0),this.isLoading.set(!1),this.toastService.showError("Impossible de charger les avis utilisateurs")}})}ngOnDestroy(){this.opinionsSubscription?.unsubscribe()}updateCurrentRating(){let t=this.userOpinions(),e=this.currentUserOpinionsIndex();t[e]&&this.currentRating.set(t[e].rating)}changeUserOpinions(t){let e=this.currentUserOpinionsIndex(),r=this.userOpinions().length-1;t==="previous"&&e>0?this.currentUserOpinionsIndex.set(e-1):t==="next"&&e<r&&this.currentUserOpinionsIndex.set(e+1),this.updateCurrentRating()}openModal(){this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}static \u0275fac=function(e){return new(e||i)(b(Ye),b(N))};static \u0275cmp=h({type:i,selectors:[["app-user-opinions"]],standalone:!0,features:[g],decls:16,vars:7,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"max-w-3xl","mx-auto"],[1,"text-center","py-8","text-tertiary"],[1,"text-center","py-8"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","mb-8","transition-all","duration-300","border","border-secondary/20"],[1,"text-center","text-tertiary/70"],[1,"text-center","mt-8"],[3,"click","text","type","color","rounded","customClass"],[3,"closed","isOpen"],[3,"closeModal"],[1,"fas","fa-circle-notch","fa-spin","text-3xl"],[1,"mt-4"],[1,"text-red-500","mb-4"],[1,"w-auto","mx-auto","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","text","type","color","rounded"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-tertiary","rounded-full","flex","items-center","justify-center","shadow-md"],[1,"text-primary","text-xl","font-semibold"],[1,"font-serif","font-semibold","text-lg","text-tertiary"],[1,"text-sm","text-tertiary/70"],[3,"rating","isReadOnly"],[1,"text-quinary/80","mb-6","italic","text-lg","leading-relaxed"],[1,"flex","justify-between","items-center"],[3,"click","text","type","color","rounded","disabled","customClass"],[1,"fas","fa-chevron-left"],[1,"flex","gap-2"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"bg-tertiary"],[1,"fas","fa-chevron-right"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"click"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Avis de nos visiteurs "),o(),n(5,"p",4),s(6," D\xE9couvrez ce que nos visiteurs pensent de leur exp\xE9rience "),o()(),n(7,"div",5),y(8,ar,4,0,"div",6)(9,sr,4,4,"div",7)(10,mr,23,22,"div",8)(11,pr,2,0,"p",9),n(12,"div",10)(13,"app-button",11),c("click",function(){return r.openModal()}),o()()()()(),n(14,"app-modal",12),c("closed",function(){return r.closeModal()}),n(15,"app-add-user-opinions",13),c("closeModal",function(){return r.closeModal()}),o()()),e&2&&(a(8),f(r.isLoading()?8:r.hasError()?9:r.userOpinions().length>0?10:11),a(5),m("text","Partagez votre exp\xE9rience")("type","button")("color","tertiary")("rounded",!0)("customClass",`!w-auto !px-8 !py-4 font-bold shadow-md hover:shadow-lg 
                         transition-all duration-300 transform hover:-translate-y-1`),a(),m("isOpen",r.isModalOpen()))},dependencies:[Je,$,ae,Ge,gt],encapsulation:2})};var xt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-zoo-intro"]],standalone:!0,features:[g],decls:17,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"max-w-7xl","mx-auto"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","p-8","shadow-xl","border","border-secondary/20","mb-12","relative"],[1,"absolute","-top-4","left-4","md:-top-6","md:left-6"],[1,"fas","fa-quote-left","text-tertiary/50","text-4xl","md:text-5xl"],[1,"text-base","md:text-xl","text-quinary/90","font-sans","leading-relaxed","text-center","max-w-5xl","mx-auto","pt-6"],[1,"relative","group","rounded-2xl","overflow-hidden","shadow-xl","hover:shadow-2xl","transition-all","duration-300"],["src","images/img_home/img-back.webp","alt","Vue du Zoo Arcadia",1,"w-full","h-[300px]","md:h-[500px]","object-cover","transform","group-hover:scale-105","transition-transform","duration-500"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6","md:p-12"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-6","max-w-4xl"],[1,"text-primary","text-center","text-sm","md:text-xl","font-sans"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4," Bienvenue au Zoo Arcadia "),o()(),n(5,"div",4)(6,"div",5)(7,"div",6),p(8,"i",7),o(),n(9,"p",8),s(10," Le Zoo Arcadia, fond\xE9 en 1960, est un parc zoologique situ\xE9 pr\xE8s de la l\xE9gendaire for\xEAt de Broc\xE9liande, en Bretagne, France. Ce zoo, reconnu pour son engagement en faveur du bien-\xEAtre animal et de l'\xE9cologie, est un lieu de conservation o\xF9 les animaux sont soigneusement r\xE9partis selon leurs habitats naturels : savane, jungle, et marais. "),o()(),n(11,"div",9),p(12,"img",10),n(13,"div",11)(14,"div",12)(15,"p",13),s(16," Chaque jour, une \xE9quipe de v\xE9t\xE9rinaires effectue des contr\xF4les rigoureux sur chaque animal avant l'ouverture du zoo pour garantir leur bonne sant\xE9. L'alimentation des animaux est minutieusement calcul\xE9e pour r\xE9pondre aux besoins nutritionnels sp\xE9cifiques de chaque esp\xE8ce. "),o()()()()()()())},encapsulation:2})};var yt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-home"]],standalone:!0,features:[g],decls:5,vars:0,template:function(e,r){e&1&&p(0,"app-zoo-intro")(1,"app-habitats-overview")(2,"app-animals-overview")(3,"app-services-overview")(4,"app-user-opinions")},dependencies:[bt,xt,vt,ft,ht],encapsulation:2})};var Ii=i=>({"border-red-300 ring-red-300":i});function dr(i,t){if(i&1&&(n(0,"p",8),s(1),o()),i&2){let e=d();a(),v(" ",e.getErrorMessage("email")," ")}}function cr(i,t){if(i&1&&(n(0,"p",8),s(1),o()),i&2){let e=d();a(),v(" ",e.getErrorMessage("password")," ")}}var _t=class i{EMAIL_PATTERN=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;destroy$=new Tt;router=_(se);route=_($e);fb=_(ce);authService=_(j);inactivityService=_(ve);toastService=_(N);isLoading=u(!1);formErrors=u({email:[],password:[]});loginForm=this.initLoginForm();isFormValid=R(()=>this.loginForm.valid&&!this.isLoading());ngOnInit(){this.handleRedirectMessage(),this.setupFormValidation()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initLoginForm(){return this.fb.group({email:["",[C.required,C.email,C.pattern(this.EMAIL_PATTERN)]],password:["",[C.required,C.minLength(8)]]})}setupFormValidation(){this.loginForm.valueChanges.pipe(we(this.destroy$)).subscribe(()=>this.updateFormErrors())}updateFormErrors(){let t={email:[],password:[]},e=this.loginForm.get("email"),r=this.loginForm.get("password");e?.errors&&e.touched&&(e.errors.required&&t.email.push("L'email est requis"),(e.errors.email||e.errors.pattern)&&t.email.push("Format d'email invalide")),r?.errors&&r.touched&&(r.errors.required&&t.password.push("Le mot de passe est requis"),r.errors.minlength&&t.password.push("Le mot de passe doit contenir au moins 8 caract\xE8res")),this.formErrors.set(t)}handleRedirectMessage(){this.route.queryParams.pipe(we(this.destroy$)).subscribe(t=>{t.message&&(this.toastService.showSuccess(t.message),this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0}))})}onSubmit(){if(this.loginForm.valid&&!this.isLoading()){this.isLoading.set(!0);let{email:t,password:e}=this.loginForm.value;this.authService.login(t,e).pipe(we(this.destroy$)).subscribe({next:()=>{this.inactivityService.startMonitoring(),this.toastService.showSuccess("Connexion r\xE9ussie ! Redirection en cours...",500),setTimeout(()=>{this.router.navigate(["/dashboard"])},500)},error:r=>{console.error("Erreur lors de la connexion:",r),this.toastService.showError("Identifiants incorrects, veuillez r\xE9essayer."),this.isLoading.set(!1)}})}else this.updateFormErrors(),this.toastService.showError("Veuillez corriger les erreurs du formulaire")}getErrorMessage(t){return this.formErrors()[t]||[]}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-login"]],standalone:!0,features:[g],decls:21,vars:15,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-b","from-secondary","to-primary","py-12","px-4","sm:px-6","lg:px-8"],[1,"bg-white/80","backdrop-blur-sm","p-8","rounded-2xl","shadow-xl","w-full","max-w-md","space-y-8"],[1,"text-center","space-y-4"],[1,"text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-gray-600","font-serif","italic"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","email","type","email","formControlName","email","placeholder","exemple@domaine.com",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent","transition-all","duration-300",3,"ngClass"],[1,"mt-2","text-sm","text-red-600"],["for","password",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent","transition-all","duration-300",3,"ngClass"],[1,"pt-6"],[3,"text","type","color","rounded","disabled","customClass"]],template:function(e,r){if(e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"Connexion"),o(),n(5,"p",4),s(6," Acc\xE9dez \xE0 votre espace personnel "),o()(),p(7,"app-toast"),n(8,"form",5),c("ngSubmit",function(){return r.onSubmit()}),n(9,"div")(10,"label",6),s(11," Email "),o(),p(12,"input",7),y(13,dr,2,1,"p",8),o(),n(14,"div")(15,"label",9),s(16," Mot de passe "),o(),p(17,"input",10),y(18,cr,2,1,"p",8),o(),n(19,"div",11),p(20,"app-button",12),o()()()()),e&2){let l,x,L,D;a(8),m("formGroup",r.loginForm),a(4),m("ngClass",te(11,Ii,((l=r.loginForm.get("email"))==null?null:l.invalid)&&((l=r.loginForm.get("email"))==null?null:l.touched))),a(),f((x=r.loginForm.get("email"))!=null&&x.invalid&&((x=r.loginForm.get("email"))!=null&&x.touched)?13:-1),a(4),m("ngClass",te(13,Ii,((L=r.loginForm.get("password"))==null?null:L.invalid)&&((L=r.loginForm.get("password"))==null?null:L.touched))),a(),f((D=r.loginForm.get("password"))!=null&&D.invalid&&((D=r.loginForm.get("password"))!=null&&D.touched)?18:-1),a(2),m("text","Se connecter")("type","submit")("color","tertiary")("rounded",!0)("disabled",r.loginForm.invalid)("customClass","w-full font-bold shadow-md hover:shadow-lg transition-all duration-300 py-3")}},dependencies:[ue,pe,X,Q,me,de,He,$,k,Pe,fe],encapsulation:2})};var ur=[{path:"",component:yt,title:"Accueil - Zoo Arcadia"},{path:"login",component:_t,title:"Connexion"},{path:"animal/:id",loadComponent:()=>import("./chunk-QH7XCQYV.js").then(i=>i.AnimalComponent),title:"Animal"},{path:"habitat/:id",loadComponent:()=>import("./chunk-SXL7K2WB.js").then(i=>i.HabitatComponent),title:"Habitat"},{path:"habitats",loadComponent:()=>import("./chunk-3OCUMIVP.js").then(i=>i.HabitatsComponent),title:"Habitats"},{path:"services",loadComponent:()=>import("./chunk-D4UWRSVB.js").then(i=>i.ServicesComponent),title:"Services"},{path:"service/:id",loadComponent:()=>import("./chunk-ZKNGZGHA.js").then(i=>i.ServiceComponent),title:"Service"},{path:"contact",loadComponent:()=>import("./chunk-EHCW4BR6.js").then(i=>i.ContactComponent),title:"Contact"}],fr=[{path:"admin",loadComponent:()=>import("./chunk-VX6BG34R.js").then(i=>i.AdminDashboardComponent),title:"Admin",canActivate:[Ae],data:{roles:["Admin"]},children:[{path:"",redirectTo:"account-management",pathMatch:"full"},{path:"account-management",loadComponent:()=>import("./chunk-HSKRNAPT.js").then(i=>i.AccountManagementComponent),title:"Gestion des comptes"},{path:"service-management",loadComponent:()=>import("./chunk-KNYRJGTC.js").then(i=>i.ServiceManagementComponent),title:"Modification des services"},{path:"habitat-management",loadComponent:()=>import("./chunk-5QTX54A7.js").then(i=>i.HabitatManagementComponent),title:"Gestion des habitats"},{path:"animal-management",loadComponent:()=>import("./chunk-S42LQU26.js").then(i=>i.AnimalManagementComponent),title:"Gestion des animaux"},{path:"veterinary-reports",loadComponent:()=>import("./chunk-P5NC34A6.js").then(i=>i.ReportsVeterinaryManagement),title:"Comptes rendus des v\xE9t\xE9rinaires"},{path:"history-management",loadComponent:()=>import("./chunk-SXKVETCG.js").then(i=>i.HistoryManagementComponent),title:"Consultation des historiques"},{path:"opening-hours-management",component:ot,title:"Gestion des horaires d'ouverture"}]}],vr=[{path:"veterinaire",component:Ie,title:"Dashboard V\xE9t\xE9rinaire",canActivate:[Ae],data:{roles:["Veterinaire"]},children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Ie},{path:"history",component:Ie}]}],hr=[{path:"employe",loadComponent:()=>import("./chunk-NZJJHWM2.js").then(i=>i.EmployeDashboardComponent),title:"Employ\xE9",canActivate:[Ae],data:{roles:["Employe"]},children:[{path:"",redirectTo:"pending",pathMatch:"full"},{path:"pending",loadComponent:()=>import("./chunk-CFFDRAUB.js").then(i=>i.UserOpinionManagementComponent)},{path:"validated",loadComponent:()=>import("./chunk-CFFDRAUB.js").then(i=>i.UserOpinionManagementComponent)},{path:"rejected",loadComponent:()=>import("./chunk-CFFDRAUB.js").then(i=>i.UserOpinionManagementComponent)}]}],gr=[{path:"update-password",loadComponent:()=>import("./chunk-CNO3ZP5A.js").then(i=>i.UpdatePasswordComponent),title:"Modification du mot de passe",canActivate:[Ae],data:{roles:["Admin","Veterinaire","Employe"]}}],Fi=[...ur,...fr,...vr,...hr,...gr,{path:"**",redirectTo:""}];var br=["/api/auth/login","/api/auth/refresh","/api/public"],Mi=(i,t)=>{let e=_(_e),r=_(j);return br.some(l=>i.url.includes(l))?t(i):t(Di(i,e)).pipe(W(l=>l.status===ti.Unauthorized?xr(l,r,i,t):be(()=>A(T({},l),{message:`Erreur lors de la requ\xEAte: ${l.message}`,timestamp:new Date().toISOString()}))))};function xr(i,t,e,r){let l=_(_e);return t.refreshToken().pipe(ie(()=>r(Di(e,l))),W(x=>(t.logout(),be(()=>A(T({},x),{message:"Session expir\xE9e. Veuillez vous reconnecter.",timestamp:new Date().toISOString()})))))}function Di(i,t){let e=t.getToken();return e?i.clone({setHeaders:{Authorization:`Bearer ${e}`,"X-Request-ID":crypto.randomUUID()},withCredentials:!0}):i.clone({withCredentials:!0})}var Ti={providers:[Yt({eventCoalescing:!0}),ai(Fi),ii(ni([Mi])),{provide:Kt,useValue:"fr-FR"},Pt(li)]};Xt(gi);ri(rt,Ti).catch(i=>console.error(i));
