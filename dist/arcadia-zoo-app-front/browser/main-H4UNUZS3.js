import{a as Uo}from"./chunk-WQT2M6SU.js";import{a as Wo,b as Yo,c as qo,d as Ei,e as Fi,f as $n}from"./chunk-WZJFZ7S2.js";import{a as jo}from"./chunk-DRNBQNPL.js";import{a as zn,b as Xn}from"./chunk-O66G5F3S.js";import{a as be}from"./chunk-7LW6J6UB.js";import{a as Ht}from"./chunk-MWR6PVUV.js";import{a as Qo}from"./chunk-N6ICPUC7.js";import{a as Di,b as Bn}from"./chunk-SRUWVQDL.js";import{a as kt}from"./chunk-QMO5IVA6.js";import{a as Rt}from"./chunk-IMR7M5YK.js";import{a as Nn}from"./chunk-2YBA2I4T.js";import{a as No}from"./chunk-S3KEJRVB.js";import{a as Gn}from"./chunk-MR4UGKWL.js";import{a as Me}from"./chunk-VV7GXU3B.js";import{a as Oo,b as Io,c as Po,d as Pn,e as ht,f as Pt,g as Ho,h as Ro}from"./chunk-OTF63C3I.js";import{a as Ve}from"./chunk-M6XTAS6A.js";import{b as Hn,c as Ne,d as W,e as Be,f as Ze,g as Bo,h as Go,i as $o,j as Rn,k as Ke,l as zo,m as ut,n as pt,o as Si,p as ki,q as Ai,s as Xo,t as gt,u as Li,v as Je}from"./chunk-IVPOVWWL.js";import{$ as ve,$a as ho,Ab as go,Ac as Ao,B as Vn,Ba as R,Bb as fo,Bc as Lo,C as Kr,Ca as Zt,Cb as xo,Cc as Eo,D as Jr,Db as wi,Dc as It,Ea as Kt,Eb as Jt,Ec as Z,Fb as ei,Gb as Ti,Gc as ti,H as pe,Hb as u,Hc as Cs,Ia as vi,Ib as ie,Ja as vs,Jb as F,K as On,Kb as Ki,Kc as Do,La as no,Lb as ws,Ma as Ce,Mb as lt,Mc as Fo,Na as ao,Nb as ct,Nc as mt,Ob as dt,Oc as Mo,Pa as so,Pb as _o,Pc as Vo,Qa as ro,Qb as H,Qc as he,Rb as se,Sa as h,Sb as Vt,Ta as E,Tb as vo,Ub as Ji,V as xi,Va as oo,Vb as Xe,Wa as lo,Wb as In,X as Qe,Xa as ys,Xb as Ot,Y as Q,Ya as co,Yb as yo,Za as mo,Zb as en,_ as ge,_a as A,a as U,b as ue,c as qr,cc as bo,d as Re,da as oe,db as k,ea as G,ec as wo,fc as To,gb as J,gc as Ts,hb as x,ia as L,ib as St,ja as ye,jb as ne,jc as fe,ka as Zi,kb as Ie,l as jr,lb as uo,m as Ur,ma as eo,mb as P,n as Qr,nb as po,o as fi,ob as ot,p as rt,pb as z,pc as Co,q as De,qb as X,ra as Fe,rb as l,sa as C,sb as c,t as Ct,ta as S,tb as y,u as Zr,ua as M,ub as yi,va as ze,vb as bi,vc as So,wa as to,wb as bs,xb as N,xc as ko,ya as io,yb as w,yc as Ci,za as _i,zb as f,zc as tt}from"./chunk-RMHEMJYH.js";function _m(i){let t=i,e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:a===0&&e!==0&&e%1e6===0&&n===0||!(a>=0&&a<=5)?4:5}var Zo=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",_m];var vm=(i,t)=>t.id;function ym(i,t){if(i&1&&(l(0,"div",2),u(1),c()),i&2){let e=t.$implicit;Ie(e.type==="success"?"bg-green-600":"bg-red-600"),h(),F(" ",e.message," ")}}var Wn=class i{constructor(t){this.notificationService=t}static \u0275fac=function(e){return new(e||i)(E(No))};static \u0275cmp=L({type:i,selectors:[["app-notification"]],standalone:!0,features:[H],decls:4,vars:2,consts:[[1,"fixed","top-4","right-4","z-50","space-y-2"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out",3,"class"],[1,"p-4","rounded-lg","shadow-lg","text-white","transform","transition-all","duration-500","ease-in-out"]],template:function(e,n){e&1&&(l(0,"div",0),z(1,ym,2,3,"div",1,vm),Xe(3,"async"),c()),e&2&&(h(),X(In(3,0,n.notificationService.notifications$)))},dependencies:[Z,Lo],encapsulation:2})};var bm=(i,t)=>t.id;function wm(i,t){if(i&1&&(l(0,"a",1),y(1,"i"),c()),i&2){let e=t.$implicit;x("href",e.url,Ce)("title",e.name),h(),Ie(e.icon+" text-2xl")}}var qn=class i{socialLinks=[{id:1,icon:"fab fa-facebook",url:"#",name:"Facebook"},{id:2,icon:"fab fa-instagram",url:"#",name:"Instagram"},{id:3,icon:"fab fa-tiktok",url:"#",name:"TikTok"},{id:4,icon:"fab fa-linkedin",url:"#",name:"LinkedIn"}];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-social-links"]],standalone:!0,features:[H],decls:3,vars:0,consts:[[1,"flex","justify-center","gap-4"],["target","_blank","rel","noopener noreferrer",1,"text-tertiary","hover:text-primary","transition-colors","duration-300",3,"href","title"]],template:function(e,n){e&1&&(l(0,"div",0),z(1,wm,2,4,"a",1,bm),c()),e&2&&(h(),X(n.socialLinks))},encapsulation:2})};var Mi=class i{constructor(t){this.http=t;this.loadOpeningHours()}apiUrl=`${he.apiUrl}/api/opening-hours`;openingHours=A([]);parkStatus=A({isOpen:!0,message:""});loadOpeningHours(){this.getCurrentOpeningHours().pipe(pe(t=>(console.error("Erreur lors du chargement des horaires:",t),Ur))).subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage}))}})}getCurrentOpeningHours(){return this.http.get(`${this.apiUrl}/current`).pipe(pe(t=>t.status===401?rt({openingHours:[],parkStatus:!0,statusMessage:"",isCurrent:!0}):this.handleError("r\xE9cup\xE9ration des horaires actuels",t)))}createOpeningHours(t){let e={openingHours:[{days:"Lundi - Vendredi",hours:t.weekdayHours,isOpen:t.isWeekdayOpen},{days:"Samedi - Dimanche",hours:t.weekendHours,isOpen:t.isWeekendOpen}],parkStatus:t.parkStatus,statusMessage:t.statusMessage??""};return console.log("Payload envoy\xE9 pour cr\xE9ation:",e),this.http.post(this.apiUrl,e).pipe(Qe(n=>console.log("R\xE9ponse de l'API (cr\xE9ation) :",n)),pe(n=>(console.error("Erreur API lors de la cr\xE9ation :",n),n.error&&console.error("D\xE9tails de l'erreur renvoy\xE9e par l'API :",n.error),De(()=>new Error("Erreur lors de la cr\xE9ation des horaires.")))))}updateOpeningHours(t,e){let n={openingHours:[{days:"Lundi - Vendredi",hours:e.weekdayHours,isOpen:e.isWeekdayOpen},{days:"Samedi - Dimanche",hours:e.weekendHours,isOpen:e.isWeekendOpen}],parkStatus:e.parkStatus,statusMessage:e.statusMessage??""};return this.http.put(`${this.apiUrl}/${t}`,n).pipe(Qe(a=>{this.openingHours.set([a])}),pe(a=>this.handleError("mise \xE0 jour des horaires",a)))}updateParkStatus(t){return t.isOpen===void 0?De(()=>new Error("Le statut isOpen est requis")):this.http.put(`${this.apiUrl}/status`,t).pipe(Qe(e=>{this.parkStatus.set(e)}),pe(e=>this.handleError("mise \xE0 jour du statut",e)))}isParkOpen(){if(!this.parkStatus().isOpen)return!1;let t=new Date,e=t.getDay(),n=t.getHours()*100+t.getMinutes(),a=this.openingHours()[0]?.openingHours.find(o=>e>=1&&e<=5?o.days.includes("Lundi - Vendredi"):o.days.includes("Samedi - Dimanche"));if(!a?.isOpen)return!1;let[s,r]=a.hours.split(" - ").map(o=>parseInt(o.replace("h","")));return n>=s*100&&n<=r*100}getOpeningHoursId(){return Re(this,null,function*(){let t=this.openingHours();if(t&&t.length>0&&t[0]._id)return t[0]._id;throw new Error("Aucun ID trouv\xE9 pour les horaires")})}handleError(t,e){return console.error(`Erreur lors de ${t}:`,e),De(()=>new Error(`Erreur lors de ${t}`))}static \u0275fac=function(e){return new(e||i)(oe(mt))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var Tm=(i,t)=>t.days;function Cm(i,t){if(i&1&&(l(0,"li",27)(1,"span",28),u(2),c(),l(3,"span",29),u(4),c()()),i&2){let e=t.$implicit;h(2),ie(e.days),h(2),ie(e.hours)}}function Sm(i,t){if(i&1&&z(0,Cm,5,2,"li",27,Tm),i&2){let e=f();X(e.openingHours()[0].openingHours)}}var jn=class i{constructor(t){this.openingHoursService=t}currentYear=new Date().getFullYear();isParkOpen=fe(()=>this.openingHoursService.isParkOpen());openingHours=fe(()=>this.openingHoursService.openingHours());parkStatus=fe(()=>this.openingHoursService.parkStatus());static \u0275fac=function(e){return new(e||i)(E(Mi))};static \u0275cmp=L({type:i,selectors:[["app-footer"]],standalone:!0,features:[H],decls:47,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-3"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","justify-center","items-start","gap-16","mb-4"],[1,"flex","flex-col","items-center","space-y-3","w-full","md:w-auto"],[1,"w-full","max-w-[280px]","text-center"],[1,"text-lg","font-serif","font-bold","text-tertiary","mb-1"],[1,"fas","fa-info-circle","mr-2"],[1,"text-sm","text-quinary/80","leading-relaxed"],[1,"w-full","max-w-[280px]"],[1,"text-lg","font-serif","font-bold","text-tertiary","text-center","mb-1"],[1,"far","fa-clock","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5"],[1,"divide-y","divide-tertiary/10"],[1,"fas","fa-map-marker-alt","mr-2"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-1.5","space-y-1"],[1,"not-italic","space-y-1","text-sm","text-quinary/80"],[1,"flex","items-center","justify-center","gap-2"],[1,"fas","fa-home","text-tertiary"],[1,"fas","fa-city","text-tertiary"],[1,"fas","fa-globe-europe","text-tertiary"],[1,"rounded-lg","overflow-hidden","shadow-md","h-[70px]","mt-1"],["src",ao`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2668.735021438556!2d-2.1739626!3d48.018829!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x480faceab3587495%3A0xcdc883e818be2eb2!2sFor%C3%AAt%20de%20Broc%C3%A9liande!5e0!3m2!1sfr!2sfr!4v1728318223640!5m2!1sfr!2sfr`,"width","100%","height","100%","loading","lazy","referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin allow-popups","title","Carte Google Maps de la For\xEAt de Broc\xE9liande",1,"w-full","h-full",2,"border","0"],[1,"border-t","border-tertiary/20","pt-2","space-y-1"],[1,"text-xs","font-medium","text-quinary/70","text-center"],[1,"flex","flex-col","items-center","space-y-1"],[1,"text-sm","font-serif","font-bold","text-tertiary"],[1,"fas","fa-share-alt","mr-2"],[1,"flex","justify-between","items-center","text-sm","text-quinary/80","px-2","py-1"],[1,"pr-2"],[1,"bg-tertiary/10","px-2","py-0.5","rounded-md"]],template:function(e,n){e&1&&(l(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),y(6,"i",6),u(7,"Zoo Arcadia "),c(),l(8,"p",7),u(9," Un lieu magique o\xF9 la nature et l'\xE9merveillement se rencontrent, situ\xE9 au c\u0153ur de la l\xE9gendaire for\xEAt de Broc\xE9liande. "),c()()(),l(10,"div",3)(11,"div",8)(12,"h3",9),y(13,"i",10),u(14,"Horaires d'ouverture "),c(),l(15,"div",11)(16,"ul",12),k(17,Sm,2,0),c()()()(),l(18,"div",3)(19,"div",8)(20,"h3",9),y(21,"i",13),u(22,"Nous trouver "),c(),l(23,"div",14)(24,"address",15)(25,"div",16),y(26,"i",17),l(27,"span"),u(28,"666 chemin de l'\xE9trange"),c()(),l(29,"div",16),y(30,"i",18),l(31,"span"),u(32,"35380 Paimpont"),c()(),l(33,"div",16),y(34,"i",19),l(35,"span"),u(36,"France"),c()()(),l(37,"div",20),y(38,"iframe",21),c()()()()(),l(39,"div",22)(40,"p",23),u(41),c(),l(42,"div",24)(43,"h3",25),y(44,"i",26),u(45,"Suivez-nous "),c(),y(46,"app-social-links"),c()()()()),e&2&&(h(17),P(n.openingHours()&&n.openingHours().length>0?17:-1),h(24),F(" Copyright \xA9 ",n.currentYear," N\xE9dellec Julien. Tous droits r\xE9serv\xE9s. "))},dependencies:[qn],encapsulation:2})};var Un=class i{loginSuccess=new R;forgotPasswordClick=new R;showPassword=!1;authService=G(be);fb=G(gt);loginForm=this.fb.group({email:["",[W.required,W.email]],password:["",[W.required,W.minLength(6)]],remember:[!1]});togglePasswordVisibility(){this.showPassword=!this.showPassword}forgotPassword(){this.forgotPasswordClick.emit()}onSubmit(){if(this.loginForm.valid){let{email:t,password:e,remember:n}=this.loginForm.value;n?localStorage.setItem("savedEmail",t):localStorage.removeItem("savedEmail"),this.authService.login(t,e).subscribe({next:()=>{this.loginSuccess.emit()},error:a=>{console.error("Erreur de connexion:",a)}})}}ngOnInit(){let t=localStorage.getItem("savedEmail");t&&this.loginForm.patchValue({email:t,remember:!0})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-login-form"]],outputs:{loginSuccess:"loginSuccess",forgotPasswordClick:"forgotPasswordClick"},standalone:!0,features:[H],decls:25,vars:5,consts:[[1,"bg-white/95","backdrop-blur-sm","rounded-xl","shadow-2xl","w-full","max-w-md","mx-auto","border","border-secondary/20"],[1,"p-8"],[1,"text-center","text-3xl","font-bold","mb-8","text-tertiary","font-serif"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","email",1,"block","text-sm","font-medium","text-tertiary/80"],[1,"relative"],["id","email","type","email","formControlName","email","placeholder","vous@exemple.com",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["for","password",1,"block","text-sm","font-medium","text-tertiary/80"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-tertiary/60","hover:text-tertiary","transition-colors",3,"click"],["href","#",1,"text-sm","text-tertiary","hover:text-quaternary","transition-colors","float-right",3,"click"],[1,"flex","items-center","mt-4"],["type","checkbox","id","remember","formControlName","remember",1,"w-4","h-4","text-tertiary","border-secondary/30","rounded","focus:ring-tertiary/30"],["for","remember",1,"ml-2","text-sm","text-tertiary/80","cursor-pointer","hover:text-tertiary","transition-colors"],["type","submit",1,"w-full","bg-tertiary","text-white","py-3.5","px-4","rounded-lg","font-medium","hover:bg-quaternary","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-quaternary","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","shadow-lg","hover:shadow-xl","mt-6",3,"disabled"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Connectez-vous \xE0 votre compte "),c(),l(4,"form",3),w("ngSubmit",function(){return n.onSubmit()}),l(5,"div",4)(6,"label",5),u(7," Adresse email "),c(),l(8,"div",6),y(9,"input",7),c()(),l(10,"div",4)(11,"label",8),u(12," Mot de passe "),c(),l(13,"div",6),y(14,"input",9),l(15,"button",10),w("click",function(){return n.togglePasswordVisibility()}),y(16,"i"),c()(),l(17,"a",11),w("click",function(s){return s.preventDefault(),n.forgotPassword()}),u(18," Mot de passe oubli\xE9 ? "),c()(),l(19,"div",12),y(20,"input",13),l(21,"label",14),u(22," Se souvenir de moi "),c()(),l(23,"button",15),u(24," Se connecter "),c()()()()),e&2&&(h(4),x("formGroup",n.loginForm),h(10),x("type",n.showPassword?"text":"password"),h(2),Ie(n.showPassword?"fas fa-eye-slash fa-lg":"fas fa-eye fa-lg"),h(7),x("disabled",!n.loginForm.valid))},dependencies:[Je,Ke,Ne,Hn,Be,Ze,ut,pt,Z],encapsulation:2})};function km(i,t){if(i&1){let e=N();l(0,"form",4),w("ngSubmit",function(){C(e);let a=f();return S(a.requestCode())}),l(1,"div",5)(2,"label",6),u(3," Adresse email "),c(),l(4,"div",7),y(5,"input",8),c()(),l(6,"button",9),u(7),c()()}if(i&2){let e=f();x("formGroup",e.emailForm),h(6),x("disabled",!e.emailForm.valid||e.isLoading()),h(),F(" ",e.isLoading()?"Envoi en cours...":"Recevoir le code"," ")}}function Am(i,t){if(i&1){let e=N();l(0,"form",4),w("ngSubmit",function(){C(e);let a=f();return S(a.onSubmit())}),l(1,"div",5)(2,"label",10),u(3," Code de r\xE9initialisation "),c(),l(4,"div",7),y(5,"input",11),c()(),l(6,"div",5)(7,"label",12),u(8," Nouveau mot de passe "),c(),l(9,"div",7),y(10,"input",13),l(11,"button",14),w("click",function(){C(e);let a=f();return S(a.togglePasswordVisibility())}),y(12,"i"),c()()(),l(13,"button",9),u(14),c()()}if(i&2){let e=f();x("formGroup",e.resetForm),h(10),x("type",e.showPassword?"text":"password"),h(2),Ie(e.showPassword?"fas fa-eye-slash fa-lg":"fas fa-eye fa-lg"),h(),x("disabled",!e.resetForm.valid||e.isLoading()),h(),F(" ",e.isLoading()?"R\xE9initialisation...":"R\xE9initialiser le mot de passe"," ")}}var Qn=class i{closeModal=new R;authService=G(be);fb=G(gt);toastService=G(Me);router=G(ht);showPassword=!1;codeRequested=A(!1);isLoading=A(!1);emailForm=new Bo({email:new $o("",{validators:[W.required,W.email],nonNullable:!0})});resetForm=this.fb.group({code:["",[W.required,W.minLength(6)]],newPassword:["",[W.required,W.minLength(8),W.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]]});togglePasswordVisibility(){this.showPassword=!this.showPassword}requestCode(){this.emailForm.valid&&!this.isLoading()&&(this.isLoading.set(!0),this.authService.initiatePasswordReset(this.emailForm.value.email).subscribe({next:()=>{this.toastService.showSuccess("Code envoy\xE9 avec succ\xE8s. Veuillez v\xE9rifier votre email."),this.codeRequested.set(!0),this.isLoading.set(!1)},error:t=>{this.toastService.showError(t.message||"Erreur lors de l'envoi du code"),this.isLoading.set(!1)}}))}onSubmit(){this.resetForm.valid&&!this.isLoading()&&(this.isLoading.set(!0),this.authService.resetPassword(this.emailForm.value.email,this.resetForm.value.code,this.resetForm.value.newPassword).subscribe({next:()=>{this.toastService.showSuccess("Mot de passe r\xE9initialis\xE9 avec succ\xE8s"),this.resetForm.disable(),this.closeModal.emit(),this.router.navigate(["/login"])},error:t=>{this.toastService.showError(t.message||"Erreur lors de la r\xE9initialisation"),this.isLoading.set(!1)}}))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-password-reset"]],outputs:{closeModal:"closeModal"},standalone:!0,features:[H],decls:7,vars:1,consts:[[1,"bg-white/95","backdrop-blur-sm","rounded-xl","shadow-2xl","w-full","max-w-md","mx-auto","border","border-secondary/20"],[1,"p-8"],[1,"text-center","text-3xl","font-bold","mb-8","text-tertiary","font-serif"],[1,"space-y-6",3,"formGroup"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","email",1,"block","text-sm","font-medium","text-tertiary/80"],[1,"relative"],["id","email","type","email","formControlName","email","placeholder","vous@exemple.com",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["type","submit",1,"w-full","bg-tertiary","text-white","py-3.5","px-4","rounded-lg","font-medium","hover:bg-quaternary","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-quaternary","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","shadow-lg","hover:shadow-xl",3,"disabled"],["for","code",1,"block","text-sm","font-medium","text-tertiary/80"],["id","code","type","text","formControlName","code","placeholder","Entrez le code re\xE7u par email",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200"],["for","newPassword",1,"block","text-sm","font-medium","text-tertiary/80"],["id","newPassword","formControlName","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-3","rounded-lg","bg-white","border-2","border-secondary/30","text-quinary","placeholder-gray-400","focus:border-tertiary","focus:ring-1","focus:ring-tertiary/30","transition-all","duration-200",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-tertiary/60","hover:text-tertiary","transition-colors",3,"click"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1),y(2,"app-toast"),l(3,"h2",2),u(4," R\xE9initialisation du mot de passe "),c(),k(5,km,8,3,"form",3)(6,Am,15,6,"form",3),c()()),e&2&&(h(5),P(n.codeRequested()?6:5))},dependencies:[Je,Ke,Ne,Be,Ze,ut,pt,Z,Ht],encapsulation:2})};var Zn=class i{constructor(t){this.authService=t}isAuthenticated(){return this.authService.isAuthenticated()}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||i)(E(be))};static \u0275cmp=L({type:i,selectors:[["app-banner"]],standalone:!0,features:[H],decls:3,vars:1,consts:[[1,"w-full","pt-14","relative"],["src","images/banner.webp","alt","Banni\xE8re Zoo Arcadia.",1,"w-full","md:h-[30rem]"],[3,"customClass"]],template:function(e,n){e&1&&(l(0,"div",0),y(1,"img",1)(2,"app-toast",2),c()),e&2&&(h(2),x("customClass","fixed top-[4.5rem] right-0 z-50 transition-all duration-300 ease-in-out w-80"))},dependencies:[Z,Ht],encapsulation:2})};var ks=()=>["/"],el=()=>["/services"],tl=()=>["/habitats"],il=()=>["/contact"],nl=()=>["/veterinaire"],Oi=()=>["/update-password"],al=()=>["/employe"],sl=()=>["/admin"];function Lm(i,t){i&1&&y(0,"img",4)}function Em(i,t){i&1&&y(0,"img",5)}function Dm(i,t){if(i&1){let e=N();l(0,"li",7)(1,"a",17),w("click",function(){C(e);let a=f();return S(a.openLoginModal())}),u(2," Connexion "),c()()}}function Fm(i,t){if(i&1){let e=N();l(0,"li",9)(1,"button",18),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("vet"))}),u(2," V\xE9t\xE9rinaire "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="vet"),h(2),ne("scale-0",e.activeDropdown!=="vet")("scale-100",e.activeDropdown==="vet"),h(),x("routerLink",se(8,nl)),h(2),x("routerLink",se(9,Oi))}}function Mm(i,t){if(i&1){let e=N();l(0,"li",9)(1,"button",18),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("employe"))}),u(2," Employ\xE9 "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="employe"),h(2),ne("scale-0",e.activeDropdown!=="employe")("scale-100",e.activeDropdown==="employe"),h(),x("routerLink",se(8,al)),h(2),x("routerLink",se(9,Oi))}}function Vm(i,t){if(i&1){let e=N();l(0,"li",9)(1,"button",18),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("admin"))}),u(2," Admin "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",21)(6,"a",22),u(7," Dashboard "),c(),l(8,"button",23),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="admin"),h(2),ne("scale-0",e.activeDropdown!=="admin")("scale-100",e.activeDropdown==="admin"),h(),x("routerLink",se(8,sl)),h(2),x("routerLink",se(9,Oi))}}function Om(i,t){if(i&1){let e=N();l(0,"li",7)(1,"a",24),w("click",function(){C(e);let a=f();return S(a.logout())}),u(2," D\xE9connexion "),c()()}}function Im(i,t){if(i&1){let e=N();l(0,"li",11)(1,"a",17),w("click",function(){C(e);let a=f();return S(a.openLoginModal())}),u(2," Connexion "),c()()}}function Pm(i,t){if(i&1){let e=N();l(0,"li",12)(1,"button",25),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("vet-mobile"))}),u(2," V\xE9t\xE9rinaire "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="vet-mobile"),h(2),ne("hidden",e.activeDropdown!=="vet-mobile"),h(),x("routerLink",se(6,nl)),h(2),x("routerLink",se(7,Oi))}}function Hm(i,t){if(i&1){let e=N();l(0,"li",12)(1,"button",25),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("employe-mobile"))}),u(2," Employ\xE9 "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="employe-mobile"),h(2),ne("hidden",e.activeDropdown!=="employe-mobile"),h(),x("routerLink",se(6,al)),h(2),x("routerLink",se(7,Oi))}}function Rm(i,t){if(i&1){let e=N();l(0,"li",12)(1,"button",25),w("click",function(){C(e);let a=f();return S(a.toggleDropdown("admin-mobile"))}),u(2," Admin "),M(),l(3,"svg",19),y(4,"path",20),c()(),ze(),l(5,"div",26)(6,"a",27),u(7," Dashboard "),c(),l(8,"a",27),u(9," Modifier mot de passe "),c()()()}if(i&2){let e=f();h(3),ne("rotate-180",e.activeDropdown==="admin-mobile"),h(2),ne("hidden",e.activeDropdown!=="admin-mobile"),h(),x("routerLink",se(6,sl)),h(2),x("routerLink",se(7,Oi))}}function Nm(i,t){if(i&1){let e=N();l(0,"li",11)(1,"a",24),w("click",function(){C(e);let a=f();return S(a.logout())}),u(2," D\xE9connexion "),c()()}}var Kn=class i{isMenuOpen=!1;activeDropdown=null;isLoginModalOpen=A(!1);isPasswordResetModalOpen=A(!1);authService=G(be);router=G(ht);userAuthenticated=fe(()=>!!this.authService.user());userRoles=fe(()=>{let t=this.authService.user();return{admin:t?.role?.name==="Admin",veterinaire:t?.role?.name==="Veterinaire",employe:t?.role?.name==="Employe"}});toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDropdown(t){this.activeDropdown=this.activeDropdown===t?null:t}openLoginModal(){this.isLoginModalOpen.set(!0)}closeLoginModal(){this.isLoginModalOpen.set(!1)}openPasswordResetModal(){this.isLoginModalOpen.set(!1),this.isPasswordResetModalOpen.set(!0)}closePasswordResetModal(){this.isPasswordResetModalOpen.set(!1)}logout(){this.authService.logout(),this.router.navigate(["/"])}onDocumentClick(t){let e=t.target,n=e.closest("#menu-toggler"),a=e.closest('button[class*="hover:text-quaternary"]');if(n||a)return;if(!(e.closest("#main-navlist-mobile")||e.closest("#main-nav"))){this.isMenuOpen=!1,this.activeDropdown=null;return}e.closest("a")&&(this.isMenuOpen=!1,this.activeDropdown=null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-nav"]],hostBindings:function(e,n){e&1&&w("click",function(s){return n.onDocumentClick(s)},!1,ro)},standalone:!0,features:[H],decls:48,vars:35,consts:[[1,"bg-secondary","z-50","fixed","top-0","w-full","shadow"],["id","main-nav",1,"bg-secondary","w-full","mx-auto","p-4","flex","items-center","justify-between","flex-wrap","md:p-5"],["aria-label","Accueil du portfolio",1,"text-lg","lg:text-xl","text-primary","font-bold",3,"routerLink"],["aria-controls","main-navlist","id","menu-toggler",1,"cursor-pointer","w-7","md:hidden",3,"click"],["width","28","height","28","src","images/menu.svg","alt","Ouvrir le menu"],["width","28","height","28","src","images/cross.svg","alt","Fermer le menu"],["id","main-navlist",1,"hidden","md:flex","items-center","w-full","md:w-auto","pt-4","md:pt-0","text-primary"],[1,"block","py-3","md:inline","md:py-0","md:mr-6"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"routerLink"],[1,"block","py-3","md:inline","md:py-0","md:mr-6","relative","group"],["id","main-navlist-mobile",1,"bg-secondary","text-center","w-full","pt-4","text-primary","md:hidden"],[1,"block","py-3","md:mr-6"],[1,"block","py-3","md:mr-6","relative"],["title","Connexion",3,"closeModal","isOpen"],[3,"loginSuccess","forgotPasswordClick"],[3,"close","isOpen"],[3,"closeModal"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","cursor-pointer",3,"click"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","flex","items-center","gap-2","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","py-2","w-48","bg-white","rounded-lg","shadow-xl","transition-all","duration-200","ease-in-out","transform","origin-top-right"],[1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary",3,"click"],[1,"text-sm","uppercase","font-semibold","hover:text-quaternary","w-full","flex","items-center","justify-center","gap-2",3,"click"],[1,"py-2","bg-white","w-full","transition-all","duration-200","ease-in-out"],[1,"block","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-quaternary","transition-colors","duration-200",3,"routerLink"]],template:function(e,n){e&1&&(l(0,"nav",0)(1,"div",1)(2,"a",2),u(3," Zoo Arcadia "),c(),l(4,"button",3),w("click",function(){return n.toggleMenu()}),k(5,Lm,1,0,"img",4)(6,Em,1,0,"img",5),c(),l(7,"ul",6)(8,"li",7)(9,"a",8),u(10," Accueil "),c()(),l(11,"li",7)(12,"a",8),u(13," Services "),c()(),l(14,"li",7)(15,"a",8),u(16," Habitats "),c()(),l(17,"li",7)(18,"a",8),u(19," Contact "),c()(),k(20,Dm,3,0,"li",7)(21,Fm,10,10,"li",9)(22,Mm,10,10,"li",9)(23,Vm,10,10,"li",9)(24,Om,3,0,"li",7),c()(),l(25,"ul",10)(26,"li",11)(27,"a",8),u(28," Accueil "),c()(),l(29,"li",11)(30,"a",8),u(31," Services "),c()(),l(32,"li",11)(33,"a",8),u(34," Habitats "),c()(),l(35,"li",11)(36,"a",8),u(37," Contact "),c()(),k(38,Im,3,0,"li",11)(39,Pm,10,8,"li",12)(40,Hm,10,8,"li",12)(41,Rm,10,8,"li",12)(42,Nm,3,0,"li",11),c()(),y(43,"app-banner"),l(44,"app-modal",13),w("closeModal",function(){return n.closeLoginModal()}),l(45,"app-login-form",14),w("loginSuccess",function(){return n.closeLoginModal()})("forgotPasswordClick",function(){return n.openPasswordResetModal()}),c()(),l(46,"app-modal",15),w("close",function(){return n.closePasswordResetModal()}),l(47,"app-password-reset",16),w("closeModal",function(){return n.closePasswordResetModal()}),c()()),e&2&&(h(2),x("routerLink",se(26,ks)),h(2),J("aria-expanded",n.isMenuOpen),h(),P(n.isMenuOpen?-1:5),h(),P(n.isMenuOpen?6:-1),h(3),x("routerLink",se(27,ks)),h(3),x("routerLink",se(28,el)),h(3),x("routerLink",se(29,tl)),h(3),x("routerLink",se(30,il)),h(2),P(n.userAuthenticated()?-1:20),h(),P(n.userRoles().veterinaire?21:-1),h(),P(n.userRoles().employe?22:-1),h(),P(n.userRoles().admin?23:-1),h(),P(n.userAuthenticated()?24:-1),h(),ne("hidden",!n.isMenuOpen),h(2),x("routerLink",se(31,ks)),h(3),x("routerLink",se(32,el)),h(3),x("routerLink",se(33,tl)),h(3),x("routerLink",se(34,il)),h(2),P(n.userAuthenticated()?-1:38),h(),P(n.userRoles().veterinaire?39:-1),h(),P(n.userRoles().employe?40:-1),h(),P(n.userRoles().admin?41:-1),h(),P(n.userAuthenticated()?42:-1),h(2),x("isOpen",n.isLoginModalOpen()),h(2),x("isOpen",n.isPasswordResetModalOpen()))},dependencies:[Pt,Ei,Un,Zn,Qn],encapsulation:2})};var Ii=class i{constructor(t,e,n,a){this.authService=t;this.router=e;this.ngZone=n;this.toastService=a}activitySubject=new jr(1);timeoutDuration=3e5;inactivitySubscription;startMonitoring(){["mousemove","keydown","click","touchstart","scroll"].forEach(e=>{Vn(window,e).pipe(On(1e3)).subscribe(()=>this.activitySubject.next())}),this.activitySubject.pipe(xi(()=>Kr(this.timeoutDuration))).subscribe(()=>this.handleInactivity())}handleInactivity(){this.ngZone.run(()=>{this.authService.logout(),this.router.navigate(["/login"])})}stopMonitoring(){this.inactivitySubscription&&(this.inactivitySubscription.unsubscribe(),console.log("Surveillance d'inactivit\xE9 arr\xEAt\xE9e."))}static \u0275fac=function(e){return new(e||i)(oe(be),oe(ht),oe(Zt),oe(Me))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var Jn=class i{constructor(t,e,n,a){this.tokenService=t;this.authService=e;this.inactivityService=n;this.toastService=a}ngOnInit(){let t=this.tokenService.getToken();t&&(this.tokenService.isTokenExpired(t)?(this.authService.logout(),this.toastService.showError("Votre session a expir\xE9, vous avez \xE9t\xE9 d\xE9connect\xE9.")):this.inactivityService.startMonitoring())}ngOnDestroy(){this.inactivityService.stopMonitoring()}static \u0275fac=function(e){return new(e||i)(E(kt),E(be),E(Ii),E(Me))};static \u0275cmp=L({type:i,selectors:[["app-root"]],standalone:!0,features:[H],decls:4,vars:0,template:function(e,n){e&1&&y(0,"app-nav")(1,"router-outlet")(2,"app-footer")(3,"app-notification")},dependencies:[Kn,jn,Pn,Wn],encapsulation:2})};var $=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}($||{}),ft="*";function ol(i,t){return{type:$.Trigger,name:i,definitions:t,options:{}}}function ll(i,t=null){return{type:$.Animate,styles:t,timings:i}}function cl(i,t=null){return{type:$.Sequence,steps:i,options:t}}function Pi(i){return{type:$.Style,styles:i,offset:null}}function dl(i,t,e=null){return{type:$.Transition,expr:i,animation:t,options:e}}var Nt=class{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},nn=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,a=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++e==s&&this._onFinish()}),r.onDestroy(()=>{++n==s&&this._onDestroy()}),r.onStart(()=>{++a==s&&this._onStart()})}),this.totalTime=this.players.reduce((r,o)=>Math.max(r,o.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(n=>{let a=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(a)})}getPosition(){let t=this.players.reduce((e,n)=>e===null||n.totalTime>e.totalTime?n:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},ea="!";function ml(i){return new Q(3e3,!1)}function $m(){return new Q(3100,!1)}function zm(){return new Q(3101,!1)}function Xm(i){return new Q(3001,!1)}function Wm(i){return new Q(3003,!1)}function Ym(i){return new Q(3004,!1)}function qm(i,t){return new Q(3005,!1)}function jm(){return new Q(3006,!1)}function Um(){return new Q(3007,!1)}function Qm(i,t){return new Q(3008,!1)}function Zm(i){return new Q(3002,!1)}function Km(i,t,e,n,a){return new Q(3010,!1)}function Jm(){return new Q(3011,!1)}function eh(){return new Q(3012,!1)}function th(){return new Q(3200,!1)}function ih(){return new Q(3202,!1)}function nh(){return new Q(3013,!1)}function ah(i){return new Q(3014,!1)}function sh(i){return new Q(3015,!1)}function rh(i){return new Q(3016,!1)}function oh(i,t){return new Q(3404,!1)}function lh(i){return new Q(3502,!1)}function ch(i){return new Q(3503,!1)}function dh(){return new Q(3300,!1)}function mh(i){return new Q(3504,!1)}function hh(i){return new Q(3301,!1)}function uh(i,t){return new Q(3302,!1)}function ph(i){return new Q(3303,!1)}function gh(i,t){return new Q(3400,!1)}function fh(i){return new Q(3401,!1)}function xh(i){return new Q(3402,!1)}function _h(i,t){return new Q(3505,!1)}function Bt(i){switch(i.length){case 0:return new Nt;case 1:return i[0];default:return new nn(i)}}function Sl(i,t,e=new Map,n=new Map){let a=[],s=[],r=-1,o=null;if(t.forEach(m=>{let d=m.get("offset"),p=d==r,g=p&&o||new Map;m.forEach((_,v)=>{let b=v,T=_;if(v!=="offset")switch(b=i.normalizePropertyName(b,a),T){case ea:T=e.get(v);break;case ft:T=n.get(v);break;default:T=i.normalizeStyleValue(v,b,T,a);break}g.set(b,T)}),p||s.push(g),o=g,r=d}),a.length)throw lh(a);return s}function Us(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&As(e,"start",i)));break;case"done":i.onDone(()=>n(e&&As(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&As(e,"destroy",i)));break}}function As(i,t,e){let n=e.totalTime,a=!!e.disabled,s=Qs(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,n??i.totalTime,a),r=i._data;return r!=null&&(s._data=r),s}function Qs(i,t,e,n,a="",s=0,r){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:a,totalTime:s,disabled:!!r}}function Ye(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function hl(i){let t=i.indexOf(":"),e=i.substring(1,t),n=i.slice(t+1);return[e,n]}var vh=typeof document>"u"?null:document.documentElement;function Zs(i){let t=i.parentNode||i.host||null;return t===vh?null:t}function yh(i){return i.substring(1,6)=="ebkit"}var ii=null,ul=!1;function bh(i){ii||(ii=wh()||{},ul=ii.style?"WebkitAppearance"in ii.style:!1);let t=!0;return ii.style&&!yh(i)&&(t=i in ii.style,!t&&ul&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ii.style)),t}function wh(){return typeof document<"u"?document.body:null}function kl(i,t){for(;t;){if(t===i)return!0;t=Zs(t)}return!1}function Al(i,t,e){if(e)return Array.from(i.querySelectorAll(t));let n=i.querySelector(t);return n?[n]:[]}var Ks=(()=>{class i{validateStyleProperty(e){return bh(e)}containsElement(e,n){return kl(e,n)}getParentElement(e){return Zs(e)}query(e,n,a){return Al(e,n,a)}computeStyle(e,n,a){return a||""}animate(e,n,a,s,r,o=[],m){return new Nt(a,s)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=ge({token:i,factory:i.\u0275fac})}}return i})(),si=class{static{this.NOOP=new Ks}},ri=class{};var Th=1e3,Ll="{{",Ch="}}",El="ng-enter",Vs="ng-leave",ta="ng-trigger",ra=".ng-trigger",pl="ng-animating",Os=".ng-animating";function At(i){if(typeof i=="number")return i;let t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Is(parseFloat(t[1]),t[2])}function Is(i,t){switch(t){case"s":return i*Th;default:return i}}function oa(i,t,e){return i.hasOwnProperty("duration")?i:Sh(i,t,e)}function Sh(i,t,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,a,s=0,r="";if(typeof i=="string"){let o=i.match(n);if(o===null)return t.push(ml(i)),{duration:0,delay:0,easing:""};a=Is(parseFloat(o[1]),o[2]);let m=o[3];m!=null&&(s=Is(parseFloat(m),o[4]));let d=o[5];d&&(r=d)}else a=i;if(!e){let o=!1,m=t.length;a<0&&(t.push($m()),o=!0),s<0&&(t.push(zm()),o=!0),o&&t.splice(m,0,ml(i))}return{duration:a,delay:s,easing:r}}function kh(i){return i.length?i[0]instanceof Map?i:i.map(t=>new Map(Object.entries(t))):[]}function xt(i,t,e){t.forEach((n,a)=>{let s=Js(a);e&&!e.has(a)&&e.set(a,i.style[s]),i.style[s]=n})}function ai(i,t){t.forEach((e,n)=>{let a=Js(n);i.style[a]=""})}function an(i){return Array.isArray(i)?i.length==1?i[0]:cl(i):i}function Ah(i,t,e){let n=t.params||{},a=Dl(i);a.length&&a.forEach(s=>{n.hasOwnProperty(s)||e.push(Xm(s))})}var Ps=new RegExp(`${Ll}\\s*(.+?)\\s*${Ch}`,"g");function Dl(i){let t=[];if(typeof i=="string"){let e;for(;e=Ps.exec(i);)t.push(e[1]);Ps.lastIndex=0}return t}function rn(i,t,e){let n=`${i}`,a=n.replace(Ps,(s,r)=>{let o=t[r];return o==null&&(e.push(Wm(r)),o=""),o.toString()});return a==n?i:a}var Lh=/-+([a-z0-9])/g;function Js(i){return i.replace(Lh,(...t)=>t[1].toUpperCase())}function Eh(i,t){return i===0||t===0}function Dh(i,t,e){if(e.size&&t.length){let n=t[0],a=[];if(e.forEach((s,r)=>{n.has(r)||a.push(r),n.set(r,s)}),a.length)for(let s=1;s<t.length;s++){let r=t[s];a.forEach(o=>r.set(o,er(i,o)))}}return t}function We(i,t,e){switch(t.type){case $.Trigger:return i.visitTrigger(t,e);case $.State:return i.visitState(t,e);case $.Transition:return i.visitTransition(t,e);case $.Sequence:return i.visitSequence(t,e);case $.Group:return i.visitGroup(t,e);case $.Animate:return i.visitAnimate(t,e);case $.Keyframes:return i.visitKeyframes(t,e);case $.Style:return i.visitStyle(t,e);case $.Reference:return i.visitReference(t,e);case $.AnimateChild:return i.visitAnimateChild(t,e);case $.AnimateRef:return i.visitAnimateRef(t,e);case $.Query:return i.visitQuery(t,e);case $.Stagger:return i.visitStagger(t,e);default:throw Ym(t.type)}}function er(i,t){return window.getComputedStyle(i)[t]}var Fh=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),la=class extends ri{normalizePropertyName(t,e){return Js(t)}normalizeStyleValue(t,e,n,a){let s="",r=n.toString().trim();if(Fh.has(e)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&o[1].length==0&&a.push(qm(t,n))}return r+s}};var ca="*";function Mh(i,t){let e=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>Vh(n,e,t)):e.push(i),e}function Vh(i,t,e){if(i[0]==":"){let m=Oh(i,e);if(typeof m=="function"){t.push(m);return}i=m}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(sh(i)),t;let a=n[1],s=n[2],r=n[3];t.push(gl(a,r));let o=a==ca&&r==ca;s[0]=="<"&&!o&&t.push(gl(r,a))}function Oh(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(rh(i)),"* => *"}}var ia=new Set(["true","1"]),na=new Set(["false","0"]);function gl(i,t){let e=ia.has(i)||na.has(i),n=ia.has(t)||na.has(t);return(a,s)=>{let r=i==ca||i==a,o=t==ca||t==s;return!r&&e&&typeof a=="boolean"&&(r=a?ia.has(i):na.has(i)),!o&&n&&typeof s=="boolean"&&(o=s?ia.has(t):na.has(t)),r&&o}}var Fl=":self",Ih=new RegExp(`s*${Fl}s*,?`,"g");function Ml(i,t,e,n){return new Hs(i).build(t,e,n)}var fl="",Hs=class{constructor(t){this._driver=t}build(t,e,n){let a=new Rs(e);return this._resetContextStyleTimingState(a),We(this,an(t),a)}_resetContextStyleTimingState(t){t.currentQuerySelector=fl,t.collectedStyles=new Map,t.collectedStyles.set(fl,new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,a=e.depCount=0,s=[],r=[];return t.name.charAt(0)=="@"&&e.errors.push(jm()),t.definitions.forEach(o=>{if(this._resetContextStyleTimingState(e),o.type==$.State){let m=o,d=m.name;d.toString().split(/\s*,\s*/).forEach(p=>{m.name=p,s.push(this.visitState(m,e))}),m.name=d}else if(o.type==$.Transition){let m=this.visitTransition(o,e);n+=m.queryCount,a+=m.depCount,r.push(m)}else e.errors.push(Um())}),{type:$.Trigger,name:t.name,states:s,transitions:r,queryCount:n,depCount:a,options:null}}visitState(t,e){let n=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(n.containsDynamicStyles){let s=new Set,r=a||{};n.styles.forEach(o=>{o instanceof Map&&o.forEach(m=>{Dl(m).forEach(d=>{r.hasOwnProperty(d)||s.add(d)})})}),s.size&&e.errors.push(Qm(t.name,[...s.values()]))}return{type:$.State,name:t.name,style:n,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let n=We(this,an(t.animation),e),a=Mh(t.expr,e.errors);return{type:$.Transition,matchers:a,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ni(t.options)}}visitSequence(t,e){return{type:$.Sequence,steps:t.steps.map(n=>We(this,n,e)),options:ni(t.options)}}visitGroup(t,e){let n=e.currentTime,a=0,s=t.steps.map(r=>{e.currentTime=n;let o=We(this,r,e);return a=Math.max(a,e.currentTime),o});return e.currentTime=a,{type:$.Group,steps:s,options:ni(t.options)}}visitAnimate(t,e){let n=Nh(t.timings,e.errors);e.currentAnimateTimings=n;let a,s=t.styles?t.styles:Pi({});if(s.type==$.Keyframes)a=this.visitKeyframes(s,e);else{let r=t.styles,o=!1;if(!r){o=!0;let d={};n.easing&&(d.easing=n.easing),r=Pi(d)}e.currentTime+=n.duration+n.delay;let m=this.visitStyle(r,e);m.isEmptyStep=o,a=m}return e.currentAnimateTimings=null,{type:$.Animate,timings:n,style:a,options:null}}visitStyle(t,e){let n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){let n=[],a=Array.isArray(t.styles)?t.styles:[t.styles];for(let o of a)typeof o=="string"?o===ft?n.push(o):e.errors.push(Zm(o)):n.push(new Map(Object.entries(o)));let s=!1,r=null;return n.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(r=o.get("easing"),o.delete("easing")),!s)){for(let m of o.values())if(m.toString().indexOf(Ll)>=0){s=!0;break}}}),{type:$.Style,styles:n,easing:r,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let n=e.currentAnimateTimings,a=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(r=>{typeof r!="string"&&r.forEach((o,m)=>{let d=e.collectedStyles.get(e.currentQuerySelector),p=d.get(m),g=!0;p&&(s!=a&&s>=p.startTime&&a<=p.endTime&&(e.errors.push(Km(m,p.startTime,p.endTime,s,a)),g=!1),s=p.startTime),g&&d.set(m,{startTime:s,endTime:a}),e.options&&Ah(o,e.options,e.errors)})})}visitKeyframes(t,e){let n={type:$.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(Jm()),n;let a=1,s=0,r=[],o=!1,m=!1,d=0,p=t.steps.map(K=>{let ee=this._makeStyleAst(K,e),te=ee.offset!=null?ee.offset:Rh(ee.styles),le=0;return te!=null&&(s++,le=ee.offset=te),m=m||le<0||le>1,o=o||le<d,d=le,r.push(le),ee});m&&e.errors.push(eh()),o&&e.errors.push(th());let g=t.steps.length,_=0;s>0&&s<g?e.errors.push(ih()):s==0&&(_=a/(g-1));let v=g-1,b=e.currentTime,T=e.currentAnimateTimings,O=T.duration;return p.forEach((K,ee)=>{let te=_>0?ee==v?1:_*ee:r[ee],le=te*O;e.currentTime=b+T.delay+le,T.duration=le,this._validateStyleAst(K,e),K.offset=te,n.styles.push(K)}),n}visitReference(t,e){return{type:$.Reference,animation:We(this,an(t.animation),e),options:ni(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:$.AnimateChild,options:ni(t.options)}}visitAnimateRef(t,e){return{type:$.AnimateRef,animation:this.visitReference(t.animation,e),options:ni(t.options)}}visitQuery(t,e){let n=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;let[s,r]=Ph(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Ye(e.collectedStyles,e.currentQuerySelector,new Map);let o=We(this,an(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:$.Query,selector:s,limit:a.limit||0,optional:!!a.optional,includeSelf:r,animation:o,originalSelector:t.selector,options:ni(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(nh());let n=t.timings==="full"?{duration:0,delay:0,easing:"full"}:oa(t.timings,e.errors,!0);return{type:$.Stagger,animation:We(this,an(t.animation),e),timings:n,options:null}}};function Ph(i){let t=!!i.split(/\s*,\s*/).find(e=>e==Fl);return t&&(i=i.replace(Ih,"")),i=i.replace(/@\*/g,ra).replace(/@\w+/g,e=>ra+"-"+e.slice(1)).replace(/:animating/g,Os),[i,t]}function Hh(i){return i?U({},i):null}var Rs=class{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Rh(i){if(typeof i=="string")return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Nh(i,t){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=oa(i,t).duration;return Ls(s,0,"")}let e=i;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Ls(0,0,"");return s.dynamic=!0,s.strValue=e,s}let a=oa(e,t);return Ls(a.duration,a.delay,a.easing)}function ni(i){return i?(i=U({},i),i.params&&(i.params=Hh(i.params))):i={},i}function Ls(i,t,e){return{duration:i,delay:t,easing:e}}function tr(i,t,e,n,a,s,r=null,o=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:a,delay:s,totalTime:a+s,easing:r,subTimeline:o}}var on=class{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Bh=1,Gh=":enter",$h=new RegExp(Gh,"g"),zh=":leave",Xh=new RegExp(zh,"g");function Vl(i,t,e,n,a,s=new Map,r=new Map,o,m,d=[]){return new Ns().buildKeyframes(i,t,e,n,a,s,r,o,m,d)}var Ns=class{buildKeyframes(t,e,n,a,s,r,o,m,d,p=[]){d=d||new on;let g=new Bs(t,e,d,a,s,p,[]);g.options=m;let _=m.delay?At(m.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([r],null,g.errors,m),We(this,n,g);let v=g.timelines.filter(b=>b.containsAnimation());if(v.length&&o.size){let b;for(let T=v.length-1;T>=0;T--){let O=v[T];if(O.element===e){b=O;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([o],null,g.errors,m)}return v.length?v.map(b=>b.buildKeyframes()):[tr(e,[],[],[],0,_,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let n=e.subInstructions.get(e.element);if(n){let a=e.createSubContext(t.options),s=e.currentTimeline.currentTime,r=this._visitSubInstructions(n,a,a.options);s!=r&&e.transformIntoNewTimeline(r)}e.previousNode=t}visitAnimateRef(t,e){let n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(let a of t){let s=a?.delay;if(s){let r=typeof s=="number"?s:At(rn(s,a?.params??{},e.errors));n.delayNextStep(r)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime,r=n.duration!=null?At(n.duration):null,o=n.delay!=null?At(n.delay):null;return r!==0&&t.forEach(m=>{let d=e.appendInstructionToTimeline(m,r,o);s=Math.max(s,d.duration+d.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),We(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let n=e.subContextCount,a=e,s=t.options;if(s&&(s.params||s.delay)&&(a=e.createSubContext(s),a.transformIntoNewTimeline(),s.delay!=null)){a.previousNode.type==$.Style&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=da);let r=At(s.delay);a.delayNextStep(r)}t.steps.length&&(t.steps.forEach(r=>We(this,r,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>n&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let n=[],a=e.currentTimeline.currentTime,s=t.options&&t.options.delay?At(t.options.delay):0;t.steps.forEach(r=>{let o=e.createSubContext(t.options);s&&o.delayNextStep(s),We(this,r,o),a=Math.max(a,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(r=>e.currentTimeline.mergeTimelineCollectedStyles(r)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let n=t.strValue,a=e.params?rn(n,e.params,e.errors):n;return oa(a,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let n=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),a.snapshotCurrentStyles());let s=t.style;s.type==$.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let n=e.currentTimeline,a=e.currentAnimateTimings;!a&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=a&&a.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let n=e.currentAnimateTimings,a=e.currentTimeline.duration,s=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(m=>{let d=m.offset||0;o.forwardTime(d*s),o.setStyles(m.styles,m.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(a+s),e.previousNode=t}visitQuery(t,e){let n=e.currentTimeline.currentTime,a=t.options||{},s=a.delay?At(a.delay):0;s&&(e.previousNode.type===$.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=da);let r=n,o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=o.length;let m=null;o.forEach((d,p)=>{e.currentQueryIndex=p;let g=e.createSubContext(t.options,d);s&&g.delayNextStep(s),d===e.element&&(m=g.currentTimeline),We(this,t.animation,g),g.currentTimeline.applyStylesToKeyframe();let _=g.currentTimeline.currentTime;r=Math.max(r,_)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(r),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let n=e.parentContext,a=e.currentTimeline,s=t.timings,r=Math.abs(s.duration),o=r*(e.currentQueryTotal-1),m=r*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=o-m;break;case"full":m=n.currentStaggerTime;break}let p=e.currentTimeline;m&&p.delayNextStep(m);let g=p.currentTime;We(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=a.currentTime-g+(a.startTime-n.currentTimeline.startTime)}},da={},Bs=class i{constructor(t,e,n,a,s,r,o,m){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=a,this._leaveClassName=s,this.errors=r,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=da,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new ma(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let n=t,a=this.options;n.duration!=null&&(a.duration=At(n.duration)),n.delay!=null&&(a.delay=At(n.delay));let s=n.params;if(s){let r=a.params;r||(r=this.options.params={}),Object.keys(s).forEach(o=>{(!e||!r.hasOwnProperty(o))&&(r[o]=rn(s[o],r,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let n=t.params={};Object.keys(e).forEach(a=>{n[a]=e[a]})}}return t}createSubContext(t=null,e,n){let a=e||this.element,s=new i(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=da,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){let a={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new Gs(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(s),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,a,s,r){let o=[];if(a&&o.push(this.element),t.length>0){t=t.replace($h,"."+this._enterClassName),t=t.replace(Xh,"."+this._leaveClassName);let m=n!=1,d=this._driver.query(this.element,t,m);n!==0&&(d=n<0?d.slice(d.length+n,d.length):d.slice(0,n)),o.push(...d)}return!s&&o.length==0&&r.push(ah(e)),o}},ma=class i{constructor(t,e,n,a){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=a,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new i(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Bh,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||ft),this._currentKeyframe.set(e,ft);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,a){e&&this._previousKeyframe.set("easing",e);let s=a&&a.params||{},r=Wh(t,this._globalTimelineStyles);for(let[o,m]of r){let d=rn(m,s,n);this._pendingStyles.set(o,d),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??ft),this._updateStyle(o,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{let a=this._styleSummary.get(n);(!a||e.time>a.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,a=[];this._keyframes.forEach((o,m)=>{let d=new Map([...this._backFill,...o]);d.forEach((p,g)=>{p===ea?t.add(g):p===ft&&e.add(g)}),n||d.set("offset",m/this.duration),a.push(d)});let s=[...t.values()],r=[...e.values()];if(n){let o=a[0],m=new Map(o);o.set("offset",0),m.set("offset",1),a=[o,m]}return tr(this.element,a,s,r,this.duration,this.startTime,this.easing,!1)}},Gs=class extends ma{constructor(t,e,n,a,s,r,o=!1){super(t,e,r.delay),this.keyframes=n,this.preStyleProps=a,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],r=n+e,o=e/r,m=new Map(t[0]);m.set("offset",0),s.push(m);let d=new Map(t[0]);d.set("offset",xl(o)),s.push(d);let p=t.length-1;for(let g=1;g<=p;g++){let _=new Map(t[g]),v=_.get("offset"),b=e+v*n;_.set("offset",xl(b/r)),s.push(_)}n=r,e=0,a="",t=s}return tr(this.element,t,this.preStyleProps,this.postStyleProps,n,e,a,!0)}};function xl(i,t=3){let e=Math.pow(10,t-1);return Math.round(i*e)/e}function Wh(i,t){let e=new Map,n;return i.forEach(a=>{if(a==="*"){n??=t.keys();for(let s of n)e.set(s,ft)}else for(let[s,r]of a)e.set(s,r)}),e}function _l(i,t,e,n,a,s,r,o,m,d,p,g,_){return{type:0,element:i,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:s,toState:n,toStyles:r,timelines:o,queriedElements:m,preStyleProps:d,postStyleProps:p,totalTime:g,errors:_}}var Es={},ha=class{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,a){return Yh(this.ast.matchers,t,e,n,a)}buildStyles(t,e,n){let a=this._stateStyles.get("*");return t!==void 0&&(a=this._stateStyles.get(t?.toString())||a),a?a.buildStyles(e,n):new Map}build(t,e,n,a,s,r,o,m,d,p){let g=[],_=this.ast.options&&this.ast.options.params||Es,v=o&&o.params||Es,b=this.buildStyles(n,v,g),T=m&&m.params||Es,O=this.buildStyles(a,T,g),K=new Set,ee=new Map,te=new Map,le=a==="void",de={params:Ol(T,_),delay:this.ast.options?.delay},je=p?[]:Vl(t,e,this.ast.animation,s,r,b,O,de,d,g),we=0;return je.forEach(Te=>{we=Math.max(Te.duration+Te.delay,we)}),g.length?_l(e,this._triggerName,n,a,le,b,O,[],[],ee,te,we,g):(je.forEach(Te=>{let bt=Te.element,wt=Ye(ee,bt,new Set);Te.preStyleProps.forEach(Oe=>wt.add(Oe));let q=Ye(te,bt,new Set);Te.postStyleProps.forEach(Oe=>q.add(Oe)),bt!==e&&K.add(bt)}),_l(e,this._triggerName,n,a,le,b,O,je,[...K.values()],ee,te,we))}};function Yh(i,t,e,n,a){return i.some(s=>s(t,e,n,a))}function Ol(i,t){let e=U({},t);return Object.entries(i).forEach(([n,a])=>{a!=null&&(e[n]=a)}),e}var $s=class{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){let n=new Map,a=Ol(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((r,o)=>{r&&(r=rn(r,a,e));let m=this.normalizer.normalizePropertyName(o,e);r=this.normalizer.normalizeStyleValue(o,m,r,e),n.set(o,r)})}),n}};function qh(i,t,e){return new zs(i,t,e)}var zs=class{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(a=>{let s=a.options&&a.options.params||{};this.states.set(a.name,new $s(a.style,s,n))}),vl(this.states,"true","1"),vl(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new ha(t,a,this.states))}),this.fallbackTransition=jh(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,a){return this.transitionFactories.find(r=>r.match(t,e,n,a))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}};function jh(i,t,e){let n=[(r,o)=>!0],a={type:$.Sequence,steps:[],options:null},s={type:$.Transition,animation:a,matchers:n,options:null,queryCount:0,depCount:0};return new ha(i,s,t)}function vl(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}var Uh=new on,Xs=class{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){let n=[],a=[],s=Ml(this._driver,e,n,a);if(n.length)throw ch(n);a.length&&void 0,this._animations.set(t,s)}_buildPlayer(t,e,n){let a=t.element,s=Sl(this._normalizer,t.keyframes,e,n);return this._driver.animate(a,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){let a=[],s=this._animations.get(t),r,o=new Map;if(s?(r=Vl(this._driver,e,s,El,Vs,new Map,new Map,n,Uh,a),r.forEach(p=>{let g=Ye(o,p.element,new Map);p.postStyleProps.forEach(_=>g.set(_,null))})):(a.push(dh()),r=[]),a.length)throw mh(a);o.forEach((p,g)=>{p.forEach((_,v)=>{p.set(v,this._driver.computeStyle(g,v,ft))})});let m=r.map(p=>{let g=o.get(p.element);return this._buildPlayer(p,new Map,g)}),d=Bt(m);return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw hh(t);return e}listen(t,e,n,a){let s=Qs(e,"","","");return Us(this._getPlayer(t),n,s,a),()=>{}}command(t,e,n,a){if(n=="register"){this.register(t,a[0]);return}if(n=="create"){let r=a[0]||{};this.create(t,e,r);return}let s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t);break}}},yl="ng-animate-queued",Qh=".ng-animate-queued",Ds="ng-animate-disabled",Zh=".ng-animate-disabled",Kh="ng-star-inserted",Jh=".ng-star-inserted",eu=[],Il={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},tu={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},it="__ng_removed",ln=class{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let n=t&&t.hasOwnProperty("value"),a=n?t.value:t;if(this.value=nu(a),n){let s=t,{value:r}=s,o=qr(s,["value"]);this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let n=this.options.params;Object.keys(e).forEach(a=>{n[a]==null&&(n[a]=e[a])})}}},sn="void",Fs=new ln(sn),Ws=class{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,et(e,this._hostClassName)}listen(t,e,n,a){if(!this._triggers.has(e))throw uh(n,e);if(n==null||n.length==0)throw ph(e);if(!au(n))throw gh(n,e);let s=Ye(this._elementListeners,t,[]),r={name:e,phase:n,callback:a};s.push(r);let o=Ye(this._engine.statesByElement,t,new Map);return o.has(e)||(et(t,ta),et(t,ta+"-"+e),o.set(e,Fs)),()=>{this._engine.afterFlush(()=>{let m=s.indexOf(r);m>=0&&s.splice(m,1),this._triggers.has(e)||o.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw fh(t);return e}trigger(t,e,n,a=!0){let s=this._getTrigger(e),r=new cn(this.id,e,t),o=this._engine.statesByElement.get(t);o||(et(t,ta),et(t,ta+"-"+e),this._engine.statesByElement.set(t,o=new Map));let m=o.get(e),d=new ln(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&m&&d.absorbOptions(m.options),o.set(e,d),m||(m=Fs),!(d.value===sn)&&m.value===d.value){if(!ou(m.params,d.params)){let T=[],O=s.matchStyles(m.value,m.params,T),K=s.matchStyles(d.value,d.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{ai(t,O),xt(t,K)})}return}let _=Ye(this._engine.playersByElement,t,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==e&&T.queued&&T.destroy()});let v=s.matchTransition(m.value,d.value,t,d.params),b=!1;if(!v){if(!a)return;v=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:v,fromState:m,toState:d,player:r,isFallbackTransition:b}),b||(et(t,yl),r.onStart(()=>{Hi(t,yl)})),r.onDone(()=>{let T=this.players.indexOf(r);T>=0&&this.players.splice(T,1);let O=this._engine.playersByElement.get(t);if(O){let K=O.indexOf(r);K>=0&&O.splice(K,1)}}),this.players.push(r),_.push(r),r}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let n=this._engine.driver.query(t,ra,!0);n.forEach(a=>{if(a[it])return;let s=this._engine.fetchNamespacesByElement(a);s.size?s.forEach(r=>r.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,n,a){let s=this._engine.statesByElement.get(t),r=new Map;if(s){let o=[];if(s.forEach((m,d)=>{if(r.set(d,m.value),this._triggers.has(d)){let p=this.trigger(t,d,sn,a);p&&o.push(p)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,r),n&&Bt(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){let a=new Set;e.forEach(s=>{let r=s.name;if(a.has(r))return;a.add(r);let m=this._triggers.get(r).fallbackTransition,d=n.get(r)||Fs,p=new ln(sn),g=new cn(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:m,fromState:d,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(t,e){let n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)a=!0;else{let r=t;for(;r=r.parentNode;)if(n.statesByElement.get(r)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)n.markElementAsRemoved(this.id,t,!1,e);else{let s=t[it];(!s||s===Il)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){et(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(n=>{let a=n.player;if(a.destroyed)return;let s=n.element,r=this._elementListeners.get(s);r&&r.forEach(o=>{if(o.name==n.triggerName){let m=Qs(s,n.triggerName,n.fromState.value,n.toState.value);m._data=t,Us(n.player,o.phase,m,o.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(n)}),this._queue=[],e.sort((n,a)=>{let s=n.transition.ast.depCount,r=a.transition.ast.depCount;return s==0||r==0?s-r:this._engine.driver.containsElement(n.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Ys=class{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,s)=>{}}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){let n=new Ws(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){let n=this._namespaceList,a=this.namespacesByHostElement;if(n.length-1>=0){let r=!1,o=this.driver.getParentElement(e);for(;o;){let m=a.get(o);if(m){let d=n.indexOf(m);n.splice(d+1,0,t),r=!0;break}o=this.driver.getParentElement(o)}r||n.unshift(t)}else n.push(t);return a.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let a=this._namespaceLookup[t];a&&a.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);let a=this._namespaceList.indexOf(n);a>=0&&this._namespaceList.splice(a,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,n=this.statesByElement.get(t);if(n){for(let a of n.values())if(a.namespaceId){let s=this._fetchNamespace(a.namespaceId);s&&e.add(s)}}return e}trigger(t,e,n,a){if(aa(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,n,a),!0}return!1}insertNode(t,e,n,a){if(!aa(e))return;let s=e[it];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let r=this.collectedLeaveElements.indexOf(e);r>=0&&this.collectedLeaveElements.splice(r,1)}if(t){let r=this._fetchNamespace(t);r&&r.insertNode(e,n)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),et(t,Ds)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Hi(t,Ds))}removeNode(t,e,n){if(aa(e)){let a=t?this._fetchNamespace(t):null;a?a.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,a,s){this.collectedLeaveElements.push(e),e[it]={namespaceId:t,setForRemoval:a,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,a,s){return aa(e)?this._fetchNamespace(t).listen(e,n,a,s):()=>{}}_buildInstruction(t,e,n,a,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,a,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,ra,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Os,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Bt(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[it];if(e&&e.setForRemoval){if(t[it]=Il,e.namespaceId){this.destroyInnerAnimations(t);let n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Ds)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Zh,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,a)=>this._balanceNamespaceList(n,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let a=this.collectedEnterElements[n];et(a,Kh)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,t)}finally{for(let a=0;a<n.length;a++)n[a]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let a=this.collectedLeaveElements[n];this.processLeaveNode(a)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?Bt(e).onDone(()=>{n.forEach(a=>a())}):n.forEach(a=>a())}}reportError(t){throw xh(t)}_flushAnimations(t,e){let n=new on,a=[],s=new Map,r=[],o=new Map,m=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(D=>{p.add(D);let V=this.driver.query(D,Qh,!0);for(let I=0;I<V.length;I++)p.add(V[I])});let g=this.bodyNode,_=Array.from(this.statesByElement.keys()),v=Tl(_,this.collectedEnterElements),b=new Map,T=0;v.forEach((D,V)=>{let I=El+T++;b.set(V,I),D.forEach(B=>et(B,I))});let O=[],K=new Set,ee=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){let V=this.collectedLeaveElements[D],I=V[it];I&&I.setForRemoval&&(O.push(V),K.add(V),I.hasAnimation?this.driver.query(V,Jh,!0).forEach(B=>K.add(B)):ee.add(V))}let te=new Map,le=Tl(_,Array.from(K));le.forEach((D,V)=>{let I=Vs+T++;te.set(V,I),D.forEach(B=>et(B,I))}),t.push(()=>{v.forEach((D,V)=>{let I=b.get(V);D.forEach(B=>Hi(B,I))}),le.forEach((D,V)=>{let I=te.get(V);D.forEach(B=>Hi(B,I))}),O.forEach(D=>{this.processLeaveNode(D)})});let de=[],je=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(I=>{let B=I.player,_e=I.element;if(de.push(B),this.collectedEnterElements.length){let Ee=_e[it];if(Ee&&Ee.setForMove){if(Ee.previousTriggersValues&&Ee.previousTriggersValues.has(I.triggerName)){let Qt=Ee.previousTriggersValues.get(I.triggerName),Ue=this.statesByElement.get(I.element);if(Ue&&Ue.has(I.triggerName)){let Mn=Ue.get(I.triggerName);Mn.value=Qt,Ue.set(I.triggerName,Mn)}}B.destroy();return}}let st=!g||!this.driver.containsElement(g,_e),$e=te.get(_e),Mt=b.get(_e),ce=this._buildInstruction(I,n,Mt,$e,st);if(ce.errors&&ce.errors.length){je.push(ce);return}if(st){B.onStart(()=>ai(_e,ce.fromStyles)),B.onDestroy(()=>xt(_e,ce.toStyles)),a.push(B);return}if(I.isFallbackTransition){B.onStart(()=>ai(_e,ce.fromStyles)),B.onDestroy(()=>xt(_e,ce.toStyles)),a.push(B);return}let Yr=[];ce.timelines.forEach(Ee=>{Ee.stretchStartingKeyframe=!0,this.disabledNodes.has(Ee.element)||Yr.push(Ee)}),ce.timelines=Yr,n.append(_e,ce.timelines);let xm={instruction:ce,player:B,element:_e};r.push(xm),ce.queriedElements.forEach(Ee=>Ye(o,Ee,[]).push(B)),ce.preStyleProps.forEach((Ee,Qt)=>{if(Ee.size){let Ue=m.get(Qt);Ue||m.set(Qt,Ue=new Set),Ee.forEach((Mn,_s)=>Ue.add(_s))}}),ce.postStyleProps.forEach((Ee,Qt)=>{let Ue=d.get(Qt);Ue||d.set(Qt,Ue=new Set),Ee.forEach((Mn,_s)=>Ue.add(_s))})});if(je.length){let D=[];je.forEach(V=>{D.push(_h(V.triggerName,V.errors))}),de.forEach(V=>V.destroy()),this.reportError(D)}let we=new Map,Te=new Map;r.forEach(D=>{let V=D.element;n.has(V)&&(Te.set(V,V),this._beforeAnimationBuild(D.player.namespaceId,D.instruction,we))}),a.forEach(D=>{let V=D.element;this._getPreviousPlayers(V,!1,D.namespaceId,D.triggerName,null).forEach(B=>{Ye(we,V,[]).push(B),B.destroy()})});let bt=O.filter(D=>Cl(D,m,d)),wt=new Map;wl(wt,this.driver,ee,d,ft).forEach(D=>{Cl(D,m,d)&&bt.push(D)});let Oe=new Map;v.forEach((D,V)=>{wl(Oe,this.driver,new Set(D),m,ea)}),bt.forEach(D=>{let V=wt.get(D),I=Oe.get(D);wt.set(D,new Map([...V?.entries()??[],...I?.entries()??[]]))});let Le=[],Tt=[],Qi={};r.forEach(D=>{let{element:V,player:I,instruction:B}=D;if(n.has(V)){if(p.has(V)){I.onDestroy(()=>xt(V,B.toStyles)),I.disabled=!0,I.overrideTotalTime(B.totalTime),a.push(I);return}let _e=Qi;if(Te.size>1){let $e=V,Mt=[];for(;$e=$e.parentNode;){let ce=Te.get($e);if(ce){_e=ce;break}Mt.push($e)}Mt.forEach(ce=>Te.set(ce,_e))}let st=this._buildAnimation(I.namespaceId,B,we,s,Oe,wt);if(I.setRealPlayer(st),_e===Qi)Le.push(I);else{let $e=this.playersByElement.get(_e);$e&&$e.length&&(I.parentPlayer=Bt($e)),a.push(I)}}else ai(V,B.fromStyles),I.onDestroy(()=>xt(V,B.toStyles)),Tt.push(I),p.has(V)&&a.push(I)}),Tt.forEach(D=>{let V=s.get(D.element);if(V&&V.length){let I=Bt(V);D.setRealPlayer(I)}}),a.forEach(D=>{D.parentPlayer?D.syncPlayerEvents(D.parentPlayer):D.destroy()});for(let D=0;D<O.length;D++){let V=O[D],I=V[it];if(Hi(V,Vs),I&&I.hasAnimation)continue;let B=[];if(o.size){let st=o.get(V);st&&st.length&&B.push(...st);let $e=this.driver.query(V,Os,!0);for(let Mt=0;Mt<$e.length;Mt++){let ce=o.get($e[Mt]);ce&&ce.length&&B.push(...ce)}}let _e=B.filter(st=>!st.destroyed);_e.length?su(this,V,_e):this.processLeaveNode(V)}return O.length=0,Le.forEach(D=>{this.players.push(D),D.onDone(()=>{D.destroy();let V=this.players.indexOf(D);this.players.splice(V,1)}),D.play()}),Le}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,a,s){let r=[];if(e){let o=this.playersByQueriedElement.get(t);o&&(r=o)}else{let o=this.playersByElement.get(t);if(o){let m=!s||s==sn;o.forEach(d=>{d.queued||!m&&d.triggerName!=a||r.push(d)})}}return(n||a)&&(r=r.filter(o=>!(n&&n!=o.namespaceId||a&&a!=o.triggerName))),r}_beforeAnimationBuild(t,e,n){let a=e.triggerName,s=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:a;for(let m of e.timelines){let d=m.element,p=d!==s,g=Ye(n,d,[]);this._getPreviousPlayers(d,p,r,o,e.toState).forEach(v=>{let b=v.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),v.destroy(),g.push(v)})}ai(s,e.fromStyles)}_buildAnimation(t,e,n,a,s,r){let o=e.triggerName,m=e.element,d=[],p=new Set,g=new Set,_=e.timelines.map(b=>{let T=b.element;p.add(T);let O=T[it];if(O&&O.removedBeforeQueried)return new Nt(b.duration,b.delay);let K=T!==m,ee=ru((n.get(T)||eu).map(we=>we.getRealPlayer())).filter(we=>{let Te=we;return Te.element?Te.element===T:!1}),te=s.get(T),le=r.get(T),de=Sl(this._normalizer,b.keyframes,te,le),je=this._buildPlayer(b,de,ee);if(b.subTimeline&&a&&g.add(T),K){let we=new cn(t,o,T);we.setRealPlayer(je),d.push(we)}return je});d.forEach(b=>{Ye(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>iu(this.playersByQueriedElement,b.element,b))}),p.forEach(b=>et(b,pl));let v=Bt(_);return v.onDestroy(()=>{p.forEach(b=>Hi(b,pl)),xt(m,e.toStyles)}),g.forEach(b=>{Ye(a,b,[]).push(v)}),v}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Nt(t.duration,t.delay)}},cn=class{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Nt,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(a=>Us(t,n,void 0,a))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ye(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function iu(i,t,e){let n=i.get(t);if(n){if(n.length){let a=n.indexOf(e);n.splice(a,1)}n.length==0&&i.delete(t)}return n}function nu(i){return i??null}function aa(i){return i&&i.nodeType===1}function au(i){return i=="start"||i=="done"}function bl(i,t){let e=i.style.display;return i.style.display=t??"none",e}function wl(i,t,e,n,a){let s=[];e.forEach(m=>s.push(bl(m)));let r=[];n.forEach((m,d)=>{let p=new Map;m.forEach(g=>{let _=t.computeStyle(d,g,a);p.set(g,_),(!_||_.length==0)&&(d[it]=tu,r.push(d))}),i.set(d,p)});let o=0;return e.forEach(m=>bl(m,s[o++])),r}function Tl(i,t){let e=new Map;if(i.forEach(o=>e.set(o,[])),t.length==0)return e;let n=1,a=new Set(t),s=new Map;function r(o){if(!o)return n;let m=s.get(o);if(m)return m;let d=o.parentNode;return e.has(d)?m=d:a.has(d)?m=n:m=r(d),s.set(o,m),m}return t.forEach(o=>{let m=r(o);m!==n&&e.get(m).push(o)}),e}function et(i,t){i.classList?.add(t)}function Hi(i,t){i.classList?.remove(t)}function su(i,t,e){Bt(e).onDone(()=>i.processLeaveNode(t))}function ru(i){let t=[];return Pl(i,t),t}function Pl(i,t){for(let e=0;e<i.length;e++){let n=i[e];n instanceof nn?Pl(n.players,t):t.push(n)}}function ou(i,t){let e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++){let s=e[a];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}function Cl(i,t,e){let n=e.get(i);if(!n)return!1;let a=t.get(i);return a?n.forEach(s=>a.add(s)):t.set(i,n),e.delete(i),!0}var Ri=class{constructor(t,e,n){this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(a,s)=>{},this._transitionEngine=new Ys(t.body,e,n),this._timelineEngine=new Xs(t.body,e,n),this._transitionEngine.onRemovalComplete=(a,s)=>this.onRemovalComplete(a,s)}registerTrigger(t,e,n,a,s){let r=t+"-"+a,o=this._triggerCache[r];if(!o){let m=[],d=[],p=Ml(this._driver,s,m,d);if(m.length)throw oh(a,m);d.length&&void 0,o=qh(a,p,this._normalizer),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(e,a,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,a){this._transitionEngine.insertNode(t,e,n,a)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,a){if(n.charAt(0)=="@"){let[s,r]=hl(n),o=a;this._timelineEngine.command(s,e,r,o)}else this._transitionEngine.trigger(t,e,n,a)}listen(t,e,n,a,s){if(n.charAt(0)=="@"){let[r,o]=hl(n);return this._timelineEngine.listen(r,e,o,s)}return this._transitionEngine.listen(t,e,n,a,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function lu(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=Ms(t[0]),t.length>1&&(n=Ms(t[t.length-1]))):t instanceof Map&&(e=Ms(t)),e||n?new qs(i,e,n):null}var qs=class i{static{this.initialStylesByElement=new WeakMap}constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let a=i.initialStylesByElement.get(t);a||i.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&xt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xt(this._element,this._initialStyles),this._endStyles&&(xt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ai(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ai(this._element,this._endStyles),this._endStyles=null),xt(this._element,this._initialStyles),this._state=3)}};function Ms(i){let t=null;return i.forEach((e,n)=>{cu(n)&&(t=t||new Map,t.set(n,e))}),t}function cu(i){return i==="display"||i==="position"}var ua=class{constructor(t,e,n,a){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,a)=>{a!=="offset"&&t.set(a,this._finished?n:er(this.element,a))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},pa=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return kl(t,e)}getParentElement(t){return Zs(t)}query(t,e,n){return Al(t,e,n)}computeStyle(t,e,n){return er(t,e)}animate(t,e,n,a,s,r=[]){let o=a==0?"both":"forwards",m={duration:n,delay:a,fill:o};s&&(m.easing=s);let d=new Map,p=r.filter(v=>v instanceof ua);Eh(n,a)&&p.forEach(v=>{v.currentSnapshot.forEach((b,T)=>d.set(T,b))});let g=kh(e).map(v=>new Map(v));g=Dh(t,g,d);let _=lu(t,g);return new ua(t,g,m,_)}};var sa="@",Hl="@.disabled",ga=class{constructor(t,e,n,a){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=a,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,a=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,a){this.delegate.setAttribute(t,e,n,a)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,a){this.delegate.setStyle(t,e,n,a)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==sa&&e==Hl?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},js=class extends ga{constructor(t,e,n,a,s){super(e,n,a,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==sa?e.charAt(1)=="."&&e==Hl?(n=n===void 0?!0:!!n,this.disableAnimations(t,n)):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==sa){let a=du(t),s=e.slice(1),r="";return s.charAt(0)!=sa&&([s,r]=mu(s)),this.engine.listen(this.namespaceId,a,s,r,o=>{let m=o._data||-1;this.factory.scheduleListenerCallback(m,n,o)})}return this.delegate.listen(t,e,n)}};function du(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function mu(i){let t=i.indexOf("."),e=i.substring(0,t),n=i.slice(t+1);return[e,n]}var fa=class{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(a,s)=>{s?.removeChild(null,a)}}createRenderer(t,e){let n="",a=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let d=this._rendererCache,p=d.get(a);if(!p){let g=()=>d.delete(a);p=new ga(n,a,this.engine,g),d.set(a,p)}return p}let s=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);let o=d=>{Array.isArray(d)?d.forEach(o):this.engine.registerTrigger(s,r,t,d.name,d)};return e.data.animation.forEach(o),new js(this,r,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(n));return}let a=this._animationCallbacksBuffer;a.length==0&&queueMicrotask(()=>{this._zone.run(()=>{a.forEach(s=>{let[r,o]=s;r(o)}),this._animationCallbacksBuffer=[]})}),a.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var uu=(()=>{class i extends Ri{constructor(e,n,a){super(e,n,a)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(n){return new(n||i)(oe(Co),oe(si),oe(ri))}}static{this.\u0275prov=ge({token:i,factory:i.\u0275fac})}}return i})();function pu(){return new la}function gu(i,t,e){return new fa(i,t,e)}var Rl=[{provide:ri,useFactory:pu},{provide:Ri,useClass:uu},{provide:lo,useFactory:gu,deps:[Oo,Ri,Zt]}],fu=[{provide:si,useFactory:()=>new pa},{provide:vs,useValue:"BrowserAnimations"},...Rl],Cv=[{provide:si,useClass:Ks},{provide:vs,useValue:"NoopAnimations"},...Rl];function Nl(){return mo("NgEagerAnimations"),[...fu]}var xa=(i,t)=>{let e=G(be),n=G(kt),a=G(ht),s=G(Ii),r=n.getToken(),o=i.data.roles;return r?n.isTokenExpired(r)?fi(xu(n,e)).pipe(xi(m=>m?Bl(o,e,a):(ir("Session expir\xE9e",a,e,t.url),rt(!1))),pe(()=>(ir("Erreur de validation",a,e,t.url),rt(!1)))):(s.startMonitoring(),Bl(o,e,a)):(ir("Aucun token trouv\xE9",a,e,t.url),rt(!1))};function xu(i,t){return Re(this,null,function*(){try{return i.getRefreshToken()?(yield Ct(t.refreshToken()),!0):!1}catch{return!1}})}function Bl(i,t,e){if(!i?.length)return rt(!0);let n=t.userRole();return n?i.includes(n)?rt(!0):(console.warn(`Acc\xE8s refus\xE9 - R\xF4le requis: ${i.join(", ")}`),e.navigate(["/unauthorized"]),rt(!1)):(e.navigate(["/unauthorized"]),rt(!1))}function ir(i,t,e,n){console.warn(`Erreur d'authentification: ${i}`),e.logout(),t.navigate(["/login"],{queryParams:{returnUrl:n,error:i}})}var _a="http://www.w3.org/1999/xhtml",nr={svg:"http://www.w3.org/2000/svg",xhtml:_a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(i){var t=i+="",e=t.indexOf(":");return e>=0&&(t=i.slice(0,e))!=="xmlns"&&(i=i.slice(e+1)),nr.hasOwnProperty(t)?{space:nr[t],local:i}:i}function _u(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===_a&&t.documentElement.namespaceURI===_a?t.createElement(i):t.createElementNS(e,i)}}function vu(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function va(i){var t=Lt(i);return(t.local?vu:_u)(t)}function yu(){}function oi(i){return i==null?yu:function(){return this.querySelector(i)}}function Gl(i){typeof i!="function"&&(i=oi(i));for(var t=this._groups,e=t.length,n=new Array(e),a=0;a<e;++a)for(var s=t[a],r=s.length,o=n[a]=new Array(r),m,d,p=0;p<r;++p)(m=s[p])&&(d=i.call(m,m.__data__,p,s))&&("__data__"in m&&(d.__data__=m.__data__),o[p]=d);return new me(n,this._parents)}function ar(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function bu(){return[]}function dn(i){return i==null?bu:function(){return this.querySelectorAll(i)}}function wu(i){return function(){return ar(i.apply(this,arguments))}}function $l(i){typeof i=="function"?i=wu(i):i=dn(i);for(var t=this._groups,e=t.length,n=[],a=[],s=0;s<e;++s)for(var r=t[s],o=r.length,m,d=0;d<o;++d)(m=r[d])&&(n.push(i.call(m,m.__data__,d,r)),a.push(m));return new me(n,a)}function mn(i){return function(){return this.matches(i)}}function ya(i){return function(t){return t.matches(i)}}var Tu=Array.prototype.find;function Cu(i){return function(){return Tu.call(this.children,i)}}function Su(){return this.firstElementChild}function zl(i){return this.select(i==null?Su:Cu(typeof i=="function"?i:ya(i)))}var ku=Array.prototype.filter;function Au(){return Array.from(this.children)}function Lu(i){return function(){return ku.call(this.children,i)}}function Xl(i){return this.selectAll(i==null?Au:Lu(typeof i=="function"?i:ya(i)))}function Wl(i){typeof i!="function"&&(i=mn(i));for(var t=this._groups,e=t.length,n=new Array(e),a=0;a<e;++a)for(var s=t[a],r=s.length,o=n[a]=[],m,d=0;d<r;++d)(m=s[d])&&i.call(m,m.__data__,d,s)&&o.push(m);return new me(n,this._parents)}function ba(i){return new Array(i.length)}function Yl(){return new me(this._enter||this._groups.map(ba),this._parents)}function hn(i,t){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=t}hn.prototype={constructor:hn,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,t){return this._parent.insertBefore(i,t)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function ql(i){return function(){return i}}function Eu(i,t,e,n,a,s){for(var r=0,o,m=t.length,d=s.length;r<d;++r)(o=t[r])?(o.__data__=s[r],n[r]=o):e[r]=new hn(i,s[r]);for(;r<m;++r)(o=t[r])&&(a[r]=o)}function Du(i,t,e,n,a,s,r){var o,m,d=new Map,p=t.length,g=s.length,_=new Array(p),v;for(o=0;o<p;++o)(m=t[o])&&(_[o]=v=r.call(m,m.__data__,o,t)+"",d.has(v)?a[o]=m:d.set(v,m));for(o=0;o<g;++o)v=r.call(i,s[o],o,s)+"",(m=d.get(v))?(n[o]=m,m.__data__=s[o],d.delete(v)):e[o]=new hn(i,s[o]);for(o=0;o<p;++o)(m=t[o])&&d.get(_[o])===m&&(a[o]=m)}function Fu(i){return i.__data__}function jl(i,t){if(!arguments.length)return Array.from(this,Fu);var e=t?Du:Eu,n=this._parents,a=this._groups;typeof i!="function"&&(i=ql(i));for(var s=a.length,r=new Array(s),o=new Array(s),m=new Array(s),d=0;d<s;++d){var p=n[d],g=a[d],_=g.length,v=Mu(i.call(p,p&&p.__data__,d,n)),b=v.length,T=o[d]=new Array(b),O=r[d]=new Array(b),K=m[d]=new Array(_);e(p,g,T,O,K,v,t);for(var ee=0,te=0,le,de;ee<b;++ee)if(le=T[ee]){for(ee>=te&&(te=ee+1);!(de=O[te])&&++te<b;);le._next=de||null}}return r=new me(r,n),r._enter=o,r._exit=m,r}function Mu(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Ul(){return new me(this._exit||this._groups.map(ba),this._parents)}function Ql(i,t,e){var n=this.enter(),a=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?s.remove():e(s),n&&a?n.merge(a).order():a}function Zl(i){for(var t=i.selection?i.selection():i,e=this._groups,n=t._groups,a=e.length,s=n.length,r=Math.min(a,s),o=new Array(a),m=0;m<r;++m)for(var d=e[m],p=n[m],g=d.length,_=o[m]=new Array(g),v,b=0;b<g;++b)(v=d[b]||p[b])&&(_[b]=v);for(;m<a;++m)o[m]=e[m];return new me(o,this._parents)}function Kl(){for(var i=this._groups,t=-1,e=i.length;++t<e;)for(var n=i[t],a=n.length-1,s=n[a],r;--a>=0;)(r=n[a])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function Jl(i){i||(i=Vu);function t(g,_){return g&&_?i(g.__data__,_.__data__):!g-!_}for(var e=this._groups,n=e.length,a=new Array(n),s=0;s<n;++s){for(var r=e[s],o=r.length,m=a[s]=new Array(o),d,p=0;p<o;++p)(d=r[p])&&(m[p]=d);m.sort(t)}return new me(a,this._parents).order()}function Vu(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function ec(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function tc(){return Array.from(this)}function ic(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var n=i[t],a=0,s=n.length;a<s;++a){var r=n[a];if(r)return r}return null}function nc(){let i=0;for(let t of this)++i;return i}function ac(){return!this.node()}function sc(i){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],s=0,r=a.length,o;s<r;++s)(o=a[s])&&i.call(o,o.__data__,s,a);return this}function Ou(i){return function(){this.removeAttribute(i)}}function Iu(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Pu(i,t){return function(){this.setAttribute(i,t)}}function Hu(i,t){return function(){this.setAttributeNS(i.space,i.local,t)}}function Ru(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(i):this.setAttribute(i,e)}}function Nu(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function rc(i,t){var e=Lt(i);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((t==null?e.local?Iu:Ou:typeof t=="function"?e.local?Nu:Ru:e.local?Hu:Pu)(e,t))}function wa(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function Bu(i){return function(){this.style.removeProperty(i)}}function Gu(i,t,e){return function(){this.style.setProperty(i,t,e)}}function $u(i,t,e){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,e)}}function oc(i,t,e){return arguments.length>1?this.each((t==null?Bu:typeof t=="function"?$u:Gu)(i,t,e??"")):Gt(this.node(),i)}function Gt(i,t){return i.style.getPropertyValue(t)||wa(i).getComputedStyle(i,null).getPropertyValue(t)}function zu(i){return function(){delete this[i]}}function Xu(i,t){return function(){this[i]=t}}function Wu(i,t){return function(){var e=t.apply(this,arguments);e==null?delete this[i]:this[i]=e}}function lc(i,t){return arguments.length>1?this.each((t==null?zu:typeof t=="function"?Wu:Xu)(i,t)):this.node()[i]}function cc(i){return i.trim().split(/^|\s+/)}function sr(i){return i.classList||new dc(i)}function dc(i){this._node=i,this._names=cc(i.getAttribute("class")||"")}dc.prototype={add:function(i){var t=this._names.indexOf(i);t<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var t=this._names.indexOf(i);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function mc(i,t){for(var e=sr(i),n=-1,a=t.length;++n<a;)e.add(t[n])}function hc(i,t){for(var e=sr(i),n=-1,a=t.length;++n<a;)e.remove(t[n])}function Yu(i){return function(){mc(this,i)}}function qu(i){return function(){hc(this,i)}}function ju(i,t){return function(){(t.apply(this,arguments)?mc:hc)(this,i)}}function uc(i,t){var e=cc(i+"");if(arguments.length<2){for(var n=sr(this.node()),a=-1,s=e.length;++a<s;)if(!n.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?ju:t?Yu:qu)(e,t))}function Uu(){this.textContent=""}function Qu(i){return function(){this.textContent=i}}function Zu(i){return function(){var t=i.apply(this,arguments);this.textContent=t??""}}function pc(i){return arguments.length?this.each(i==null?Uu:(typeof i=="function"?Zu:Qu)(i)):this.node().textContent}function Ku(){this.innerHTML=""}function Ju(i){return function(){this.innerHTML=i}}function ep(i){return function(){var t=i.apply(this,arguments);this.innerHTML=t??""}}function gc(i){return arguments.length?this.each(i==null?Ku:(typeof i=="function"?ep:Ju)(i)):this.node().innerHTML}function tp(){this.nextSibling&&this.parentNode.appendChild(this)}function fc(){return this.each(tp)}function ip(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xc(){return this.each(ip)}function _c(i){var t=typeof i=="function"?i:va(i);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function np(){return null}function vc(i,t){var e=typeof i=="function"?i:va(i),n=t==null?np:typeof t=="function"?t:oi(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})}function ap(){var i=this.parentNode;i&&i.removeChild(this)}function yc(){return this.each(ap)}function sp(){var i=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function rp(){var i=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function bc(i){return this.select(i?rp:sp)}function wc(i){return arguments.length?this.property("__data__",i):this.node().__data__}function op(i){return function(t){i.call(this,t,this.__data__)}}function lp(i){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function cp(i){return function(){var t=this.__on;if(t){for(var e=0,n=-1,a=t.length,s;e<a;++e)s=t[e],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function dp(i,t,e){return function(){var n=this.__on,a,s=op(t);if(n){for(var r=0,o=n.length;r<o;++r)if((a=n[r]).type===i.type&&a.name===i.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=e),a.value=t;return}}this.addEventListener(i.type,s,e),a={type:i.type,name:i.name,value:t,listener:s,options:e},n?n.push(a):this.__on=[a]}}function Tc(i,t,e){var n=lp(i+""),a,s=n.length,r;if(arguments.length<2){var o=this.node().__on;if(o){for(var m=0,d=o.length,p;m<d;++m)for(a=0,p=o[m];a<s;++a)if((r=n[a]).type===p.type&&r.name===p.name)return p.value}return}for(o=t?dp:cp,a=0;a<s;++a)this.each(o(n[a],t,e));return this}function Cc(i,t,e){var n=wa(i),a=n.CustomEvent;typeof a=="function"?a=new a(t,e):(a=n.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),i.dispatchEvent(a)}function mp(i,t){return function(){return Cc(this,i,t)}}function hp(i,t){return function(){return Cc(this,i,t.apply(this,arguments))}}function Sc(i,t){return this.each((typeof t=="function"?hp:mp)(i,t))}function*kc(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var n=i[t],a=0,s=n.length,r;a<s;++a)(r=n[a])&&(yield r)}var rr=[null];function me(i,t){this._groups=i,this._parents=t}function Ac(){return new me([[document.documentElement]],rr)}function up(){return this}me.prototype=Ac.prototype={constructor:me,select:Gl,selectAll:$l,selectChild:zl,selectChildren:Xl,filter:Wl,data:jl,enter:Yl,exit:Ul,join:Ql,merge:Zl,selection:up,order:Kl,sort:Jl,call:ec,nodes:tc,node:ic,size:nc,empty:ac,each:sc,attr:rc,style:oc,property:lc,classed:uc,text:pc,html:gc,raise:fc,lower:xc,append:_c,insert:vc,remove:yc,clone:bc,datum:wc,on:Tc,dispatch:Sc,[Symbol.iterator]:kc};var Et=Ac;function or(i){return typeof i=="string"?new me([[document.querySelector(i)]],[document.documentElement]):new me([[i]],rr)}var pp={value:()=>{}};function Ec(){for(var i=0,t=arguments.length,e={},n;i<t;++i){if(!(n=arguments[i]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Ta(e)}function Ta(i){this._=i}function gp(i,t){return i.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");if(a>=0&&(n=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Ta.prototype=Ec.prototype={constructor:Ta,on:function(i,t){var e=this._,n=gp(i+"",e),a,s=-1,r=n.length;if(arguments.length<2){for(;++s<r;)if((a=(i=n[s]).type)&&(a=fp(e[a],i.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<r;)if(a=(i=n[s]).type)e[a]=Lc(e[a],i.name,t);else if(t==null)for(a in e)e[a]=Lc(e[a],i.name,null);return this},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new Ta(i)},call:function(i,t){if((a=arguments.length-2)>0)for(var e=new Array(a),n=0,a,s;n<a;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(s=this._[i],n=0,a=s.length;n<a;++n)s[n].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],a=0,s=n.length;a<s;++a)n[a].value.apply(t,e)}};function fp(i,t){for(var e=0,n=i.length,a;e<n;++e)if((a=i[e]).name===t)return a.value}function Lc(i,t,e){for(var n=0,a=i.length;n<a;++n)if(i[n].name===t){i[n]=pp,i=i.slice(0,n).concat(i.slice(n+1));break}return e!=null&&i.push({name:t,value:e}),i}var lr=Ec;function Ca(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function cr(i,t){var e=Object.create(i.prototype);for(var n in t)e[n]=t[n];return e}function gn(){}var un=.7,Aa=1/un,Ni="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xp=/^#([0-9a-f]{3,8})$/,_p=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),vp=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),yp=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${pn}\\)$`),bp=new RegExp(`^rgba\\(${_t},${_t},${_t},${pn}\\)$`),wp=new RegExp(`^hsl\\(${pn},${_t},${_t}\\)$`),Tp=new RegExp(`^hsla\\(${pn},${_t},${_t},${pn}\\)$`),Dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ca(gn,at,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:Fc,formatHex:Fc,formatHex8:Cp,formatHsl:Sp,formatRgb:Mc,toString:Mc});function Fc(){return this.rgb().formatHex()}function Cp(){return this.rgb().formatHex8()}function Sp(){return Rc(this).formatHsl()}function Mc(){return this.rgb().formatRgb()}function at(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=xp.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?Vc(t):e===3?new Ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Sa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Sa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_p.exec(i))?new Ge(t[1],t[2],t[3],1):(t=vp.exec(i))?new Ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yp.exec(i))?Sa(t[1],t[2],t[3],t[4]):(t=bp.exec(i))?Sa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wp.exec(i))?Pc(t[1],t[2]/100,t[3]/100,1):(t=Tp.exec(i))?Pc(t[1],t[2]/100,t[3]/100,t[4]):Dc.hasOwnProperty(i)?Vc(Dc[i]):i==="transparent"?new Ge(NaN,NaN,NaN,0):null}function Vc(i){return new Ge(i>>16&255,i>>8&255,i&255,1)}function Sa(i,t,e,n){return n<=0&&(i=t=e=NaN),new Ge(i,t,e,n)}function kp(i){return i instanceof gn||(i=at(i)),i?(i=i.rgb(),new Ge(i.r,i.g,i.b,i.opacity)):new Ge}function Bi(i,t,e,n){return arguments.length===1?kp(i):new Ge(i,t,e,n??1)}function Ge(i,t,e,n){this.r=+i,this.g=+t,this.b=+e,this.opacity=+n}Ca(Ge,Bi,cr(gn,{brighter(i){return i=i==null?Aa:Math.pow(Aa,i),new Ge(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?un:Math.pow(un,i),new Ge(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Ge(ci(this.r),ci(this.g),ci(this.b),La(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oc,formatHex:Oc,formatHex8:Ap,formatRgb:Ic,toString:Ic}));function Oc(){return`#${li(this.r)}${li(this.g)}${li(this.b)}`}function Ap(){return`#${li(this.r)}${li(this.g)}${li(this.b)}${li((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ic(){let i=La(this.opacity);return`${i===1?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${i===1?")":`, ${i})`}`}function La(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function ci(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function li(i){return i=ci(i),(i<16?"0":"")+i.toString(16)}function Pc(i,t,e,n){return n<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new nt(i,t,e,n)}function Rc(i){if(i instanceof nt)return new nt(i.h,i.s,i.l,i.opacity);if(i instanceof gn||(i=at(i)),!i)return new nt;if(i instanceof nt)return i;i=i.rgb();var t=i.r/255,e=i.g/255,n=i.b/255,a=Math.min(t,e,n),s=Math.max(t,e,n),r=NaN,o=s-a,m=(s+a)/2;return o?(t===s?r=(e-n)/o+(e<n)*6:e===s?r=(n-t)/o+2:r=(t-e)/o+4,o/=m<.5?s+a:2-s-a,r*=60):o=m>0&&m<1?0:r,new nt(r,o,m,i.opacity)}function Nc(i,t,e,n){return arguments.length===1?Rc(i):new nt(i,t,e,n??1)}function nt(i,t,e,n){this.h=+i,this.s=+t,this.l=+e,this.opacity=+n}Ca(nt,Nc,cr(gn,{brighter(i){return i=i==null?Aa:Math.pow(Aa,i),new nt(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?un:Math.pow(un,i),new nt(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,a=2*e-n;return new Ge(dr(i>=240?i-240:i+120,a,n),dr(i,a,n),dr(i<120?i+240:i-120,a,n),this.opacity)},clamp(){return new nt(Hc(this.h),ka(this.s),ka(this.l),La(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let i=La(this.opacity);return`${i===1?"hsl(":"hsla("}${Hc(this.h)}, ${ka(this.s)*100}%, ${ka(this.l)*100}%${i===1?")":`, ${i})`}`}}));function Hc(i){return i=(i||0)%360,i<0?i+360:i}function ka(i){return Math.max(0,Math.min(1,i||0))}function dr(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}function mr(i,t,e,n,a){var s=i*i,r=s*i;return((1-3*i+3*s-r)*t+(4-6*s+3*r)*e+(1+3*i+3*s-3*r)*n+r*a)/6}function Bc(i){var t=i.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),a=i[n],s=i[n+1],r=n>0?i[n-1]:2*a-s,o=n<t-1?i[n+2]:2*s-a;return mr((e-n/t)*t,r,a,s,o)}}function Gc(i){var t=i.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*t),a=i[(n+t-1)%t],s=i[n%t],r=i[(n+1)%t],o=i[(n+2)%t];return mr((e-n/t)*t,a,s,r,o)}}var fn=i=>()=>i;function Lp(i,t){return function(e){return i+e*t}}function Ep(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(n){return Math.pow(i+n*t,e)}}function $c(i){return(i=+i)==1?Ea:function(t,e){return e-t?Ep(t,e,i):fn(isNaN(t)?e:t)}}function Ea(i,t){var e=t-i;return e?Lp(i,e):fn(isNaN(i)?t:i)}var di=function i(t){var e=$c(t);function n(a,s){var r=e((a=Bi(a)).r,(s=Bi(s)).r),o=e(a.g,s.g),m=e(a.b,s.b),d=Ea(a.opacity,s.opacity);return function(p){return a.r=r(p),a.g=o(p),a.b=m(p),a.opacity=d(p),a+""}}return n.gamma=i,n}(1);function zc(i){return function(t){var e=t.length,n=new Array(e),a=new Array(e),s=new Array(e),r,o;for(r=0;r<e;++r)o=Bi(t[r]),n[r]=o.r||0,a[r]=o.g||0,s[r]=o.b||0;return n=i(n),a=i(a),s=i(s),o.opacity=1,function(m){return o.r=n(m),o.g=a(m),o.b=s(m),o+""}}}var Dp=zc(Bc),Fp=zc(Gc);function Xc(i,t){t||(t=[]);var e=i?Math.min(t.length,i.length):0,n=t.slice(),a;return function(s){for(a=0;a<e;++a)n[a]=i[a]*(1-s)+t[a]*s;return n}}function Wc(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Yc(i,t){var e=t?t.length:0,n=i?Math.min(e,i.length):0,a=new Array(n),s=new Array(e),r;for(r=0;r<n;++r)a[r]=mi(i[r],t[r]);for(;r<e;++r)s[r]=t[r];return function(o){for(r=0;r<n;++r)s[r]=a[r](o);return s}}function qc(i,t){var e=new Date;return i=+i,t=+t,function(n){return e.setTime(i*(1-n)+t*n),e}}function Se(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function jc(i,t){var e={},n={},a;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in i?e[a]=mi(i[a],t[a]):n[a]=t[a];return function(s){for(a in e)n[a]=e[a](s);return n}}var ur=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hr=new RegExp(ur.source,"g");function Mp(i){return function(){return i}}function Vp(i){return function(t){return i(t)+""}}function xn(i,t){var e=ur.lastIndex=hr.lastIndex=0,n,a,s,r=-1,o=[],m=[];for(i=i+"",t=t+"";(n=ur.exec(i))&&(a=hr.exec(t));)(s=a.index)>e&&(s=t.slice(e,s),o[r]?o[r]+=s:o[++r]=s),(n=n[0])===(a=a[0])?o[r]?o[r]+=a:o[++r]=a:(o[++r]=null,m.push({i:r,x:Se(n,a)})),e=hr.lastIndex;return e<t.length&&(s=t.slice(e),o[r]?o[r]+=s:o[++r]=s),o.length<2?m[0]?Vp(m[0].x):Mp(t):(t=m.length,function(d){for(var p=0,g;p<t;++p)o[(g=m[p]).i]=g.x(d);return o.join("")})}function mi(i,t){var e=typeof t,n;return t==null||e==="boolean"?fn(t):(e==="number"?Se:e==="string"?(n=at(t))?(t=n,di):xn:t instanceof at?di:t instanceof Date?qc:Wc(t)?Xc:Array.isArray(t)?Yc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?jc:Se)(i,t)}function pr(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}var Uc=180/Math.PI,Da={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gr(i,t,e,n,a,s){var r,o,m;return(r=Math.sqrt(i*i+t*t))&&(i/=r,t/=r),(m=i*e+t*n)&&(e-=i*m,n-=t*m),(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o,m/=o),i*n<t*e&&(i=-i,t=-t,m=-m,r=-r),{translateX:a,translateY:s,rotate:Math.atan2(t,i)*Uc,skewX:Math.atan(m)*Uc,scaleX:r,scaleY:o}}var Fa;function Qc(i){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return t.isIdentity?Da:gr(t.a,t.b,t.c,t.d,t.e,t.f)}function Zc(i){return i==null?Da:(Fa||(Fa=document.createElementNS("http://www.w3.org/2000/svg","g")),Fa.setAttribute("transform",i),(i=Fa.transform.baseVal.consolidate())?(i=i.matrix,gr(i.a,i.b,i.c,i.d,i.e,i.f)):Da)}function Kc(i,t,e,n){function a(d){return d.length?d.pop()+" ":""}function s(d,p,g,_,v,b){if(d!==g||p!==_){var T=v.push("translate(",null,t,null,e);b.push({i:T-4,x:Se(d,g)},{i:T-2,x:Se(p,_)})}else(g||_)&&v.push("translate("+g+t+_+e)}function r(d,p,g,_){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),_.push({i:g.push(a(g)+"rotate(",null,n)-2,x:Se(d,p)})):p&&g.push(a(g)+"rotate("+p+n)}function o(d,p,g,_){d!==p?_.push({i:g.push(a(g)+"skewX(",null,n)-2,x:Se(d,p)}):p&&g.push(a(g)+"skewX("+p+n)}function m(d,p,g,_,v,b){if(d!==g||p!==_){var T=v.push(a(v)+"scale(",null,",",null,")");b.push({i:T-4,x:Se(d,g)},{i:T-2,x:Se(p,_)})}else(g!==1||_!==1)&&v.push(a(v)+"scale("+g+","+_+")")}return function(d,p){var g=[],_=[];return d=i(d),p=i(p),s(d.translateX,d.translateY,p.translateX,p.translateY,g,_),r(d.rotate,p.rotate,g,_),o(d.skewX,p.skewX,g,_),m(d.scaleX,d.scaleY,p.scaleX,p.scaleY,g,_),d=p=null,function(v){for(var b=-1,T=_.length,O;++b<T;)g[(O=_[b]).i]=O.x(v);return g.join("")}}}var fr=Kc(Qc,"px, ","px)","deg)"),xr=Kc(Zc,", ",")",")");var Gi=0,vn=0,_n=0,ed=1e3,Ma,yn,Va=0,hi=0,Oa=0,bn=typeof performance=="object"&&performance.now?performance:Date,td=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Tn(){return hi||(td(Op),hi=bn.now()+Oa)}function Op(){hi=0}function wn(){this._call=this._time=this._next=null}wn.prototype=Ia.prototype={constructor:wn,restart:function(i,t,e){if(typeof i!="function")throw new TypeError("callback is not a function");e=(e==null?Tn():+e)+(t==null?0:+t),!this._next&&yn!==this&&(yn?yn._next=this:Ma=this,yn=this),this._call=i,this._time=e,_r()},stop:function(){this._call&&(this._call=null,this._time=1/0,_r())}};function Ia(i,t,e){var n=new wn;return n.restart(i,t,e),n}function id(){Tn(),++Gi;for(var i=Ma,t;i;)(t=hi-i._time)>=0&&i._call.call(void 0,t),i=i._next;--Gi}function Jc(){hi=(Va=bn.now())+Oa,Gi=vn=0;try{id()}finally{Gi=0,Pp(),hi=0}}function Ip(){var i=bn.now(),t=i-Va;t>ed&&(Oa-=t,Va=i)}function Pp(){for(var i,t=Ma,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:Ma=e);yn=i,_r(n)}function _r(i){if(!Gi){vn&&(vn=clearTimeout(vn));var t=i-hi;t>24?(i<1/0&&(vn=setTimeout(Jc,i-bn.now()-Oa)),_n&&(_n=clearInterval(_n))):(_n||(Va=bn.now(),_n=setInterval(Ip,ed)),Gi=1,td(Jc))}}function Pa(i,t,e){var n=new wn;return t=t==null?0:+t,n.restart(a=>{n.stop(),i(a+t)},t,e),n}var Hp=lr("start","end","cancel","interrupt"),Rp=[],sd=0,nd=1,Ra=2,Ha=3,ad=4,Na=5,Cn=6;function $t(i,t,e,n,a,s){var r=i.__transition;if(!r)i.__transition={};else if(e in r)return;Np(i,e,{name:t,index:n,group:a,on:Hp,tween:Rp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:sd})}function Sn(i,t){var e=xe(i,t);if(e.state>sd)throw new Error("too late; already scheduled");return e}function ke(i,t){var e=xe(i,t);if(e.state>Ha)throw new Error("too late; already running");return e}function xe(i,t){var e=i.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Np(i,t,e){var n=i.__transition,a;n[t]=e,e.timer=Ia(s,0,e.time);function s(d){e.state=nd,e.timer.restart(r,e.delay,e.time),e.delay<=d&&r(d-e.delay)}function r(d){var p,g,_,v;if(e.state!==nd)return m();for(p in n)if(v=n[p],v.name===e.name){if(v.state===Ha)return Pa(r);v.state===ad?(v.state=Cn,v.timer.stop(),v.on.call("interrupt",i,i.__data__,v.index,v.group),delete n[p]):+p<t&&(v.state=Cn,v.timer.stop(),v.on.call("cancel",i,i.__data__,v.index,v.group),delete n[p])}if(Pa(function(){e.state===Ha&&(e.state=ad,e.timer.restart(o,e.delay,e.time),o(d))}),e.state=Ra,e.on.call("start",i,i.__data__,e.index,e.group),e.state===Ra){for(e.state=Ha,a=new Array(_=e.tween.length),p=0,g=-1;p<_;++p)(v=e.tween[p].value.call(i,i.__data__,e.index,e.group))&&(a[++g]=v);a.length=g+1}}function o(d){for(var p=d<e.duration?e.ease.call(null,d/e.duration):(e.timer.restart(m),e.state=Na,1),g=-1,_=a.length;++g<_;)a[g].call(i,p);e.state===Na&&(e.on.call("end",i,i.__data__,e.index,e.group),m())}function m(){e.state=Cn,e.timer.stop(),delete n[t];for(var d in n)return;delete i.__transition}}function vr(i,t){var e=i.__transition,n,a,s=!0,r;if(e){t=t==null?null:t+"";for(r in e){if((n=e[r]).name!==t){s=!1;continue}a=n.state>Ra&&n.state<Na,n.state=Cn,n.timer.stop(),n.on.call(a?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete e[r]}s&&delete i.__transition}}function rd(i){return this.each(function(){vr(this,i)})}function Bp(i,t){var e,n;return function(){var a=ke(this,i),s=a.tween;if(s!==e){n=e=s;for(var r=0,o=n.length;r<o;++r)if(n[r].name===t){n=n.slice(),n.splice(r,1);break}}a.tween=n}}function Gp(i,t,e){var n,a;if(typeof e!="function")throw new Error;return function(){var s=ke(this,i),r=s.tween;if(r!==n){a=(n=r).slice();for(var o={name:t,value:e},m=0,d=a.length;m<d;++m)if(a[m].name===t){a[m]=o;break}m===d&&a.push(o)}s.tween=a}}function od(i,t){var e=this._id;if(i+="",arguments.length<2){for(var n=xe(this.node(),e).tween,a=0,s=n.length,r;a<s;++a)if((r=n[a]).name===i)return r.value;return null}return this.each((t==null?Bp:Gp)(e,i,t))}function $i(i,t,e){var n=i._id;return i.each(function(){var a=ke(this,n);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return xe(a,n).value[t]}}function Ba(i,t){var e;return(typeof t=="number"?Se:t instanceof at?di:(e=at(t))?(t=e,di):xn)(i,t)}function $p(i){return function(){this.removeAttribute(i)}}function zp(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Xp(i,t,e){var n,a=e+"",s;return function(){var r=this.getAttribute(i);return r===a?null:r===n?s:s=t(n=r,e)}}function Wp(i,t,e){var n,a=e+"",s;return function(){var r=this.getAttributeNS(i.space,i.local);return r===a?null:r===n?s:s=t(n=r,e)}}function Yp(i,t,e){var n,a,s;return function(){var r,o=e(this),m;return o==null?void this.removeAttribute(i):(r=this.getAttribute(i),m=o+"",r===m?null:r===n&&m===a?s:(a=m,s=t(n=r,o)))}}function qp(i,t,e){var n,a,s;return function(){var r,o=e(this),m;return o==null?void this.removeAttributeNS(i.space,i.local):(r=this.getAttributeNS(i.space,i.local),m=o+"",r===m?null:r===n&&m===a?s:(a=m,s=t(n=r,o)))}}function ld(i,t){var e=Lt(i),n=e==="transform"?xr:Ba;return this.attrTween(i,typeof t=="function"?(e.local?qp:Yp)(e,n,$i(this,"attr."+i,t)):t==null?(e.local?zp:$p)(e):(e.local?Wp:Xp)(e,n,t))}function jp(i,t){return function(e){this.setAttribute(i,t.call(this,e))}}function Up(i,t){return function(e){this.setAttributeNS(i.space,i.local,t.call(this,e))}}function Qp(i,t){var e,n;function a(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&Up(i,s)),e}return a._value=t,a}function Zp(i,t){var e,n;function a(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&jp(i,s)),e}return a._value=t,a}function cd(i,t){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var n=Lt(i);return this.tween(e,(n.local?Qp:Zp)(n,t))}function Kp(i,t){return function(){Sn(this,i).delay=+t.apply(this,arguments)}}function Jp(i,t){return t=+t,function(){Sn(this,i).delay=t}}function dd(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?Kp:Jp)(t,i)):xe(this.node(),t).delay}function eg(i,t){return function(){ke(this,i).duration=+t.apply(this,arguments)}}function tg(i,t){return t=+t,function(){ke(this,i).duration=t}}function md(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?eg:tg)(t,i)):xe(this.node(),t).duration}function ig(i,t){if(typeof t!="function")throw new Error;return function(){ke(this,i).ease=t}}function hd(i){var t=this._id;return arguments.length?this.each(ig(t,i)):xe(this.node(),t).ease}function ng(i,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;ke(this,i).ease=e}}function ud(i){if(typeof i!="function")throw new Error;return this.each(ng(this._id,i))}function pd(i){typeof i!="function"&&(i=mn(i));for(var t=this._groups,e=t.length,n=new Array(e),a=0;a<e;++a)for(var s=t[a],r=s.length,o=n[a]=[],m,d=0;d<r;++d)(m=s[d])&&i.call(m,m.__data__,d,s)&&o.push(m);return new Pe(n,this._parents,this._name,this._id)}function gd(i){if(i._id!==this._id)throw new Error;for(var t=this._groups,e=i._groups,n=t.length,a=e.length,s=Math.min(n,a),r=new Array(n),o=0;o<s;++o)for(var m=t[o],d=e[o],p=m.length,g=r[o]=new Array(p),_,v=0;v<p;++v)(_=m[v]||d[v])&&(g[v]=_);for(;o<n;++o)r[o]=t[o];return new Pe(r,this._parents,this._name,this._id)}function ag(i){return(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function sg(i,t,e){var n,a,s=ag(t)?Sn:ke;return function(){var r=s(this,i),o=r.on;o!==n&&(a=(n=o).copy()).on(t,e),r.on=a}}function fd(i,t){var e=this._id;return arguments.length<2?xe(this.node(),e).on.on(i):this.each(sg(e,i,t))}function rg(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}function xd(){return this.on("end.remove",rg(this._id))}function _d(i){var t=this._name,e=this._id;typeof i!="function"&&(i=oi(i));for(var n=this._groups,a=n.length,s=new Array(a),r=0;r<a;++r)for(var o=n[r],m=o.length,d=s[r]=new Array(m),p,g,_=0;_<m;++_)(p=o[_])&&(g=i.call(p,p.__data__,_,o))&&("__data__"in p&&(g.__data__=p.__data__),d[_]=g,$t(d[_],t,e,_,d,xe(p,e)));return new Pe(s,this._parents,t,e)}function vd(i){var t=this._name,e=this._id;typeof i!="function"&&(i=dn(i));for(var n=this._groups,a=n.length,s=[],r=[],o=0;o<a;++o)for(var m=n[o],d=m.length,p,g=0;g<d;++g)if(p=m[g]){for(var _=i.call(p,p.__data__,g,m),v,b=xe(p,e),T=0,O=_.length;T<O;++T)(v=_[T])&&$t(v,t,e,T,_,b);s.push(_),r.push(p)}return new Pe(s,r,t,e)}var og=Et.prototype.constructor;function yd(){return new og(this._groups,this._parents)}function lg(i,t){var e,n,a;return function(){var s=Gt(this,i),r=(this.style.removeProperty(i),Gt(this,i));return s===r?null:s===e&&r===n?a:a=t(e=s,n=r)}}function bd(i){return function(){this.style.removeProperty(i)}}function cg(i,t,e){var n,a=e+"",s;return function(){var r=Gt(this,i);return r===a?null:r===n?s:s=t(n=r,e)}}function dg(i,t,e){var n,a,s;return function(){var r=Gt(this,i),o=e(this),m=o+"";return o==null&&(m=o=(this.style.removeProperty(i),Gt(this,i))),r===m?null:r===n&&m===a?s:(a=m,s=t(n=r,o))}}function mg(i,t){var e,n,a,s="style."+t,r="end."+s,o;return function(){var m=ke(this,i),d=m.on,p=m.value[s]==null?o||(o=bd(t)):void 0;(d!==e||a!==p)&&(n=(e=d).copy()).on(r,a=p),m.on=n}}function wd(i,t,e){var n=(i+="")=="transform"?fr:Ba;return t==null?this.styleTween(i,lg(i,n)).on("end.style."+i,bd(i)):typeof t=="function"?this.styleTween(i,dg(i,n,$i(this,"style."+i,t))).each(mg(this._id,i)):this.styleTween(i,cg(i,n,t),e).on("end.style."+i,null)}function hg(i,t,e){return function(n){this.style.setProperty(i,t.call(this,n),e)}}function ug(i,t,e){var n,a;function s(){var r=t.apply(this,arguments);return r!==a&&(n=(a=r)&&hg(i,r,e)),n}return s._value=t,s}function Td(i,t,e){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,ug(i,t,e??""))}function pg(i){return function(){this.textContent=i}}function gg(i){return function(){var t=i(this);this.textContent=t??""}}function Cd(i){return this.tween("text",typeof i=="function"?gg($i(this,"text",i)):pg(i==null?"":i+""))}function fg(i){return function(t){this.textContent=i.call(this,t)}}function xg(i){var t,e;function n(){var a=i.apply(this,arguments);return a!==e&&(t=(e=a)&&fg(a)),t}return n._value=i,n}function Sd(i){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(i==null)return this.tween(t,null);if(typeof i!="function")throw new Error;return this.tween(t,xg(i))}function kd(){for(var i=this._name,t=this._id,e=Ga(),n=this._groups,a=n.length,s=0;s<a;++s)for(var r=n[s],o=r.length,m,d=0;d<o;++d)if(m=r[d]){var p=xe(m,t);$t(m,i,e,d,r,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Pe(n,this._parents,i,e)}function Ad(){var i,t,e=this,n=e._id,a=e.size();return new Promise(function(s,r){var o={value:r},m={value:function(){--a===0&&s()}};e.each(function(){var d=ke(this,n),p=d.on;p!==i&&(t=(i=p).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(m)),d.on=t}),a===0&&s()})}var _g=0;function Pe(i,t,e,n){this._groups=i,this._parents=t,this._name=e,this._id=n}function Ld(i){return Et().transition(i)}function Ga(){return++_g}var Dt=Et.prototype;Pe.prototype=Ld.prototype={constructor:Pe,select:_d,selectAll:vd,selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:pd,merge:gd,selection:yd,transition:kd,call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:fd,attr:ld,attrTween:cd,style:wd,styleTween:Td,text:Cd,textTween:Sd,remove:xd,tween:od,delay:dd,duration:md,ease:hd,easeVarying:ud,end:Ad,[Symbol.iterator]:Dt[Symbol.iterator]};function $a(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var vg={time:null,delay:0,duration:250,ease:$a};function yg(i,t){for(var e;!(e=i.__transition)||!(e=e[t]);)if(!(i=i.parentNode))throw new Error(`transition ${t} not found`);return e}function Ed(i){var t,e;i instanceof Pe?(t=i._id,i=i._name):(t=Ga(),(e=vg).time=Tn(),i=i==null?null:i+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var r=n[s],o=r.length,m,d=0;d<o;++d)(m=r[d])&&$t(m,i,t,d,r,e||yg(m,t));return new Pe(n,this._parents,i,t)}Et.prototype.interrupt=rd;Et.prototype.transition=Ed;var{abs:jT,max:UT,min:QT}=Math;function Dd(i){return[+i[0],+i[1]]}function bg(i){return[Dd(i[0]),Dd(i[1])]}var ZT={name:"x",handles:["w","e"].map(yr),input:function(i,t){return i==null?null:[[+i[0],t[0][1]],[+i[1],t[1][1]]]},output:function(i){return i&&[i[0][0],i[1][0]]}},KT={name:"y",handles:["n","s"].map(yr),input:function(i,t){return i==null?null:[[t[0][0],+i[0]],[t[1][0],+i[1]]]},output:function(i){return i&&[i[0][1],i[1][1]]}},JT={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(yr),input:function(i){return i==null?null:bg(i)},output:function(i){return i}};function yr(i){return{type:i}}function vt(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function br(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function za(i){let t,e,n;i.length!==2?(t=vt,e=(o,m)=>vt(i(o),m),n=(o,m)=>i(o)-m):(t=i===vt||i===br?i:Tg,e=i,n=i);function a(o,m,d=0,p=o.length){if(d<p){if(t(m,m)!==0)return p;do{let g=d+p>>>1;e(o[g],m)<0?d=g+1:p=g}while(d<p)}return d}function s(o,m,d=0,p=o.length){if(d<p){if(t(m,m)!==0)return p;do{let g=d+p>>>1;e(o[g],m)<=0?d=g+1:p=g}while(d<p)}return d}function r(o,m,d=0,p=o.length){let g=a(o,m,d,p-1);return g>d&&n(o[g-1],m)>-n(o[g],m)?g-1:g}return{left:a,center:r,right:s}}function Tg(){return 0}function kn(i){return i===null?NaN:+i}var Fd=za(vt),Md=Fd.right,Cg=Fd.left,Sg=za(kn).center,An=Md;var zi=class extends Map{constructor(t,e=Lg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(let[n,a]of t)this.set(n,a)}get(t){return super.get(Vd(this,t))}has(t){return super.has(Vd(this,t))}set(t,e){return super.set(kg(this,t),e)}delete(t){return super.delete(Ag(this,t))}};function Vd({_intern:i,_key:t},e){let n=t(e);return i.has(n)?i.get(n):e}function kg({_intern:i,_key:t},e){let n=t(e);return i.has(n)?i.get(n):(i.set(n,e),e)}function Ag({_intern:i,_key:t},e){let n=t(e);return i.has(n)&&(e=i.get(n),i.delete(n)),e}function Lg(i){return i!==null&&typeof i=="object"?i.valueOf():i}var Eg=Math.sqrt(50),Dg=Math.sqrt(10),Fg=Math.sqrt(2);function Xa(i,t,e){let n=(t-i)/Math.max(0,e),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),r=s>=Eg?10:s>=Dg?5:s>=Fg?2:1,o,m,d;return a<0?(d=Math.pow(10,-a)/r,o=Math.round(i*d),m=Math.round(t*d),o/d<i&&++o,m/d>t&&--m,d=-d):(d=Math.pow(10,a)*r,o=Math.round(i/d),m=Math.round(t/d),o*d<i&&++o,m*d>t&&--m),m<o&&.5<=e&&e<2?Xa(i,t,e*2):[o,m,d]}function Wa(i,t,e){if(t=+t,i=+i,e=+e,!(e>0))return[];if(i===t)return[i];let n=t<i,[a,s,r]=n?Xa(t,i,e):Xa(i,t,e);if(!(s>=a))return[];let o=s-a+1,m=new Array(o);if(n)if(r<0)for(let d=0;d<o;++d)m[d]=(s-d)/-r;else for(let d=0;d<o;++d)m[d]=(s-d)*r;else if(r<0)for(let d=0;d<o;++d)m[d]=(a+d)/-r;else for(let d=0;d<o;++d)m[d]=(a+d)*r;return m}function Ln(i,t,e){return t=+t,i=+i,e=+e,Xa(i,t,e)[2]}function wr(i,t,e){t=+t,i=+i,e=+e;let n=t<i,a=n?Ln(t,i,e):Ln(i,t,e);return(n?-1:1)*(a<0?1/-a:a)}function Tr(i,t,e=kn){if(!(!(n=i.length)||isNaN(t=+t))){if(t<=0||n<2)return+e(i[0],0,i);if(t>=1)return+e(i[n-1],n-1,i);var n,a=(n-1)*t,s=Math.floor(a),r=+e(i[s],s,i),o=+e(i[s+1],s+1,i);return r+(o-r)*(a-s)}}function Xi(i,t,e){i=+i,t=+t,e=(a=arguments.length)<2?(t=i,i=0,1):a<3?1:+e;for(var n=-1,a=Math.max(0,Math.ceil((t-i)/e))|0,s=new Array(a);++n<a;)s[n]=i+n*e;return s}function zt(i,t){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(t).domain(i);break}return this}var Cr=Symbol("implicit");function ui(){var i=new zi,t=[],e=[],n=Cr;function a(s){let r=i.get(s);if(r===void 0){if(n!==Cr)return n;i.set(s,r=t.push(s)-1)}return e[r%e.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],i=new zi;for(let r of s)i.has(r)||i.set(r,t.push(r)-1);return a},a.range=function(s){return arguments.length?(e=Array.from(s),a):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return ui(t,e).unknown(n)},zt.apply(a,arguments),a}function Wi(){var i=ui().unknown(void 0),t=i.domain,e=i.range,n=0,a=1,s,r,o=!1,m=0,d=0,p=.5;delete i.unknown;function g(){var _=t().length,v=a<n,b=v?a:n,T=v?n:a;s=(T-b)/Math.max(1,_-m+d*2),o&&(s=Math.floor(s)),b+=(T-b-s*(_-m))*p,r=s*(1-m),o&&(b=Math.round(b),r=Math.round(r));var O=Xi(_).map(function(K){return b+s*K});return e(v?O.reverse():O)}return i.domain=function(_){return arguments.length?(t(_),g()):t()},i.range=function(_){return arguments.length?([n,a]=_,n=+n,a=+a,g()):[n,a]},i.rangeRound=function(_){return[n,a]=_,n=+n,a=+a,o=!0,g()},i.bandwidth=function(){return r},i.step=function(){return s},i.round=function(_){return arguments.length?(o=!!_,g()):o},i.padding=function(_){return arguments.length?(m=Math.min(1,d=+_),g()):m},i.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),g()):m},i.paddingOuter=function(_){return arguments.length?(d=+_,g()):d},i.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),g()):p},i.copy=function(){return Wi(t(),[n,a]).round(o).paddingInner(m).paddingOuter(d).align(p)},zt.apply(g(),arguments)}function Sr(i){return function(){return i}}function kr(i){return+i}var Od=[0,1];function Yi(i){return i}function Ar(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:Sr(isNaN(t)?NaN:.5)}function Vg(i,t){var e;return i>t&&(e=i,i=t,t=e),function(n){return Math.max(i,Math.min(t,n))}}function Og(i,t,e){var n=i[0],a=i[1],s=t[0],r=t[1];return a<n?(n=Ar(a,n),s=e(r,s)):(n=Ar(n,a),s=e(s,r)),function(o){return s(n(o))}}function Ig(i,t,e){var n=Math.min(i.length,t.length)-1,a=new Array(n),s=new Array(n),r=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++r<n;)a[r]=Ar(i[r],i[r+1]),s[r]=e(t[r],t[r+1]);return function(o){var m=An(i,o,1,n)-1;return s[m](a[m](o))}}function Id(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Pg(){var i=Od,t=Od,e=mi,n,a,s,r=Yi,o,m,d;function p(){var _=Math.min(i.length,t.length);return r!==Yi&&(r=Vg(i[0],i[_-1])),o=_>2?Ig:Og,m=d=null,g}function g(_){return _==null||isNaN(_=+_)?s:(m||(m=o(i.map(n),t,e)))(n(r(_)))}return g.invert=function(_){return r(a((d||(d=o(t,i.map(n),Se)))(_)))},g.domain=function(_){return arguments.length?(i=Array.from(_,kr),p()):i.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),e=pr,p()},g.clamp=function(_){return arguments.length?(r=_?!0:Yi,p()):r!==Yi},g.interpolate=function(_){return arguments.length?(e=_,p()):e},g.unknown=function(_){return arguments.length?(s=_,g):s},function(_,v){return n=_,a=v,p()}}function Lr(){return Pg()(Yi,Yi)}function Pd(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function pi(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,n=i.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+i.slice(e+1)]}function yt(i){return i=pi(Math.abs(i)),i?i[1]:NaN}function Hd(i,t){return function(e,n){for(var a=e.length,s=[],r=0,o=i[0],m=0;a>0&&o>0&&(m+o+1>n&&(o=Math.max(1,n-m)),s.push(e.substring(a-=o,a+o)),!((m+=o+1)>n));)o=i[r=(r+1)%i.length];return s.reverse().join(t)}}function Rd(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}var Hg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xt(i){if(!(t=Hg.exec(i)))throw new Error("invalid format: "+i);var t;return new Ya({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xt.prototype=Ya.prototype;function Ya(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Ya.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nd(i){e:for(var t=i.length,e=1,n=-1,a;e<t;++e)switch(i[e]){case".":n=a=e;break;case"0":n===0&&(n=e),a=e;break;default:if(!+i[e])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(a+1):i}var Er;function Bd(i,t){var e=pi(i,t);if(!e)return i+"";var n=e[0],a=e[1],s=a-(Er=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,r=n.length;return s===r?n:s>r?n+new Array(s-r+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+pi(i,Math.max(0,t+s-1))[0]}function Dr(i,t){var e=pi(i,t);if(!e)return i+"";var n=e[0],a=e[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Fr={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Pd,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>Dr(i*100,t),r:Dr,s:Bd,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Mr(i){return i}var Gd=Array.prototype.map,$d=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function zd(i){var t=i.grouping===void 0||i.thousands===void 0?Mr:Hd(Gd.call(i.grouping,Number),i.thousands+""),e=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",a=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?Mr:Rd(Gd.call(i.numerals,String)),r=i.percent===void 0?"%":i.percent+"",o=i.minus===void 0?"\u2212":i.minus+"",m=i.nan===void 0?"NaN":i.nan+"";function d(g){g=Xt(g);var _=g.fill,v=g.align,b=g.sign,T=g.symbol,O=g.zero,K=g.width,ee=g.comma,te=g.precision,le=g.trim,de=g.type;de==="n"?(ee=!0,de="g"):Fr[de]||(te===void 0&&(te=12),le=!0,de="g"),(O||_==="0"&&v==="=")&&(O=!0,_="0",v="=");var je=T==="$"?e:T==="#"&&/[boxX]/.test(de)?"0"+de.toLowerCase():"",we=T==="$"?n:/[%p]/.test(de)?r:"",Te=Fr[de],bt=/[defgprs%]/.test(de);te=te===void 0?6:/[gprs]/.test(de)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function wt(q){var Oe=je,Le=we,Tt,Qi,D;if(de==="c")Le=Te(q)+Le,q="";else{q=+q;var V=q<0||1/q<0;if(q=isNaN(q)?m:Te(Math.abs(q),te),le&&(q=Nd(q)),V&&+q==0&&b!=="+"&&(V=!1),Oe=(V?b==="("?b:o:b==="-"||b==="("?"":b)+Oe,Le=(de==="s"?$d[8+Er/3]:"")+Le+(V&&b==="("?")":""),bt){for(Tt=-1,Qi=q.length;++Tt<Qi;)if(D=q.charCodeAt(Tt),48>D||D>57){Le=(D===46?a+q.slice(Tt+1):q.slice(Tt))+Le,q=q.slice(0,Tt);break}}}ee&&!O&&(q=t(q,1/0));var I=Oe.length+q.length+Le.length,B=I<K?new Array(K-I+1).join(_):"";switch(ee&&O&&(q=t(B+q,B.length?K-Le.length:1/0),B=""),v){case"<":q=Oe+q+Le+B;break;case"=":q=Oe+B+q+Le;break;case"^":q=B.slice(0,I=B.length>>1)+Oe+q+Le+B.slice(I);break;default:q=B+Oe+q+Le;break}return s(q)}return wt.toString=function(){return g+""},wt}function p(g,_){var v=d((g=Xt(g),g.type="f",g)),b=Math.max(-8,Math.min(8,Math.floor(yt(_)/3)))*3,T=Math.pow(10,-b),O=$d[8+b/3];return function(K){return v(T*K)+O}}return{format:d,formatPrefix:p}}var qa,ja,Ua;Vr({thousands:",",grouping:[3],currency:["$",""]});function Vr(i){return qa=zd(i),ja=qa.format,Ua=qa.formatPrefix,qa}function Or(i){return Math.max(0,-yt(Math.abs(i)))}function Ir(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yt(t)/3)))*3-yt(Math.abs(i)))}function Pr(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,yt(t)-yt(i))+1}function Hr(i,t,e,n){var a=wr(i,t,e),s;switch(n=Xt(n??",f"),n.type){case"s":{var r=Math.max(Math.abs(i),Math.abs(t));return n.precision==null&&!isNaN(s=Ir(a,r))&&(n.precision=s),Ua(n,r)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Pr(a,Math.max(Math.abs(i),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Or(a))&&(n.precision=s-(n.type==="%")*2);break}}return ja(n)}function Rg(i){var t=i.domain;return i.ticks=function(e){var n=t();return Wa(n[0],n[n.length-1],e??10)},i.tickFormat=function(e,n){var a=t();return Hr(a[0],a[a.length-1],e??10,n)},i.nice=function(e){e==null&&(e=10);var n=t(),a=0,s=n.length-1,r=n[a],o=n[s],m,d,p=10;for(o<r&&(d=r,r=o,o=d,d=a,a=s,s=d);p-- >0;){if(d=Ln(r,o,e),d===m)return n[a]=r,n[s]=o,t(n);if(d>0)r=Math.floor(r/d)*d,o=Math.ceil(o/d)*d;else if(d<0)r=Math.ceil(r*d)/d,o=Math.floor(o*d)/d;else break;m=d}return i},i}function Wt(){var i=Lr();return i.copy=function(){return Id(i,Wt())},zt.apply(i,arguments),Rg(i)}function En(){var i=[],t=[],e=[],n;function a(){var r=0,o=Math.max(1,t.length);for(e=new Array(o-1);++r<o;)e[r-1]=Tr(i,r/o);return s}function s(r){return r==null||isNaN(r=+r)?n:t[An(e,r)]}return s.invertExtent=function(r){var o=t.indexOf(r);return o<0?[NaN,NaN]:[o>0?e[o-1]:i[0],o<e.length?e[o]:i[i.length-1]]},s.domain=function(r){if(!arguments.length)return i.slice();i=[];for(let o of r)o!=null&&!isNaN(o=+o)&&i.push(o);return i.sort(vt),a()},s.range=function(r){return arguments.length?(t=Array.from(r),a()):t.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.quantiles=function(){return e.slice()},s.copy=function(){return En().domain(i).range(t).unknown(n)},zt.apply(s,arguments)}var Xg=["caretElm"],Wg=i=>({model:i});function Yg(i,t){}function qg(i,t){if(i&1&&(l(0,"span"),k(1,Yg,0,0,"ng-template",5),c()),i&2){let e=f();h(),x("ngTemplateOutlet",e.template)("ngTemplateOutletContext",Vt(2,Wg,e.context))}}function jg(i,t){if(i&1&&y(0,"span",6),i&2){let e=f();x("innerHTML",e.title,no)}}function Ug(i,t){if(i&1&&(l(0,"header",4)(1,"span",5),u(2),c()()),i&2){let e=f();h(2),ie(e.title)}}function Qg(i,t){if(i&1){let e=N();l(0,"li",6)(1,"ngx-charts-legend-entry",7),w("select",function(a){C(e);let s=f();return S(s.labelClick.emit(a))})("activate",function(a){C(e);let s=f();return S(s.activate(a))})("deactivate",function(a){C(e);let s=f();return S(s.deactivate(a))}),c()()}if(i&2){let e=t.$implicit,n=f();h(),x("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",n.isActive(e))}}var Zg=["*"];function Kg(i,t){if(i&1&&y(0,"ngx-charts-scale-legend",4),i&2){let e=f();x("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function Jg(i,t){if(i&1){let e=N();l(0,"ngx-charts-legend",5),w("labelClick",function(a){C(e);let s=f();return S(s.legendLabelClick.emit(a))})("labelActivate",function(a){C(e);let s=f();return S(s.legendLabelActivate.emit(a))})("labelDeactivate",function(a){C(e);let s=f();return S(s.legendLabelDeactivate.emit(a))}),c()}if(i&2){let e=f();x("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}var ef=["ngx-charts-axis-label",""],Jd=["ticksel"],tf=["ngx-charts-x-axis-ticks",""];function nf(i,t){i&1&&(M(),bs(0))}function af(i,t){if(i&1&&(M(),l(0,"tspan",10),u(1),c()),i&2){let e=t.$implicit,n=t.index;J("y",n*12),h(),F(" ",e," ")}}function sf(i,t){if(i&1&&(M(),yi(0),k(1,af,2,2,"tspan",9),bi()),i&2){let e=t.ngIf;h(),x("ngForOf",e)}}function rf(i,t){if(i&1&&k(0,sf,2,1,"ng-container",6),i&2){let e=f(2).$implicit,n=f();x("ngIf",n.tickChunks(e))}}function of(i,t){if(i&1&&u(0),i&2){let e=f().ngIf,n=f(2);F(" ",n.tickTrim(e)," ")}}function lf(i,t){if(i&1&&(M(),yi(0),l(1,"title"),u(2),c(),l(3,"text",7),k(4,nf,1,0,"ng-container",8),c(),k(5,rf,1,1,"ng-template",null,1,en)(7,of,1,1,"ng-template",null,2,en),bi()),i&2){let e=t.ngIf,n=Ti(6),a=Ti(8),s=f(2);h(2),ie(e),h(),J("text-anchor",s.textAnchor)("transform",s.textTransform),h(),x("ngIf",s.isWrapTicksSupported)("ngIfThen",n)("ngIfElse",a)}}function cf(i,t){if(i&1&&(M(),l(0,"g",5),k(1,lf,9,6,"ng-container",6),c()),i&2){let e=t.$implicit,n=f();J("transform",n.tickTransform(e)),h(),x("ngIf",n.tickFormat(e))}}function df(i,t){if(i&1&&(M(),l(0,"g"),y(1,"line",11),c()),i&2){let e=f(2);J("transform",e.gridLineTransform()),h(),J("y1",-e.gridLineHeight)}}function mf(i,t){if(i&1&&(M(),l(0,"g"),k(1,df,2,2,"g",6),c()),i&2){let e=t.$implicit,n=f();J("transform",n.tickTransform(e)),h(),x("ngIf",n.showGridLines)}}var hf=["ngx-charts-x-axis",""];function uf(i,t){if(i&1){let e=N();M(),l(0,"g",2),w("dimensionsChanged",function(a){C(e);let s=f();return S(s.emitTicksHeight(a))}),c()}if(i&2){let e=f();x("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)("wrapTicks",e.wrapTicks)}}function pf(i,t){if(i&1&&(M(),y(0,"g",3)),i&2){let e=f();x("label",e.labelText)("offset",e.labelOffset)("orient",e.orientation.Bottom)("height",e.dims.height)("width",e.dims.width)}}var gf=["ngx-charts-y-axis-ticks",""];function ff(i,t){i&1&&(M(),bs(0))}function xf(i,t){if(i&1&&(M(),l(0,"tspan",12),u(1),c()),i&2){let e=t.$implicit,n=t.index,a=f(6);J("y",n*(8+a.tickSpacing)),h(),F(" ",e," ")}}function _f(i,t){if(i&1&&(M(),yi(0),k(1,xf,2,2,"tspan",11),bi()),i&2){let e=f().ngIf;h(),x("ngForOf",e)}}function vf(i,t){if(i&1&&(M(),yi(0),k(1,_f,2,1,"ng-container",10),bi()),i&2){let e=t.ngIf;f(2);let n=Ti(8);h(),x("ngIf",e.length>1)("ngIfElse",n)}}function yf(i,t){if(i&1&&k(0,vf,2,2,"ng-container",7),i&2){let e=f(2).$implicit,n=f();x("ngIf",n.tickChunks(e))}}function bf(i,t){if(i&1&&u(0),i&2){let e=f().ngIf,n=f(2);F(" ",n.tickTrim(e)," ")}}function wf(i,t){if(i&1&&(M(),yi(0),l(1,"title"),u(2),c(),l(3,"text",8),k(4,ff,1,0,"ng-container",9),c(),k(5,yf,1,1,"ng-template",null,1,en)(7,bf,1,1,"ng-template",null,2,en),bi()),i&2){let e=t.ngIf,n=Ti(6),a=Ti(8),s=f(2);h(2),ie(e),h(),St("font-size","12px"),J("dy",s.dy)("x",s.x1)("y",s.y1)("text-anchor",s.textAnchor),h(),x("ngIf",s.wrapTicks)("ngIfThen",n)("ngIfElse",a)}}function Tf(i,t){if(i&1&&(M(),l(0,"g",6),k(1,wf,9,10,"ng-container",7),c()),i&2){let e=t.$implicit,n=f();J("transform",n.transform(e)),h(),x("ngIf",n.tickFormat(e))}}function Cf(i,t){if(i&1&&(M(),y(0,"path",13)),i&2){let e=f();J("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function Sf(i,t){if(i&1&&(M(),y(0,"line",15)),i&2){let e=f(3);J("x2",e.gridLineWidth)}}function kf(i,t){if(i&1&&(M(),y(0,"line",15)),i&2){let e=f(3);J("x2",-e.gridLineWidth)}}function Af(i,t){if(i&1&&(M(),l(0,"g"),k(1,Sf,1,1,"line",14)(2,kf,1,1,"line",14),c()),i&2){let e=f(2);J("transform",e.gridLineTransform()),h(),x("ngIf",e.orient===e.Orientation.Left),h(),x("ngIf",e.orient===e.Orientation.Right)}}function Lf(i,t){if(i&1&&(M(),l(0,"g"),k(1,Af,3,3,"g",7),c()),i&2){let e=t.$implicit,n=f();J("transform",n.transform(e)),h(),x("ngIf",n.showGridLines)}}function Ef(i,t){if(i&1&&(M(),l(0,"g")(1,"title"),u(2),c(),l(3,"text",17),u(4),c()()),i&2){let e=f(2).$implicit,n=f();h(2),ie(n.tickTrim(n.tickFormat(e.value))),h(),J("dy",n.dy)("y",-6)("x",n.gridLineWidth)("text-anchor",n.textAnchor),h(),F(" ",e.name," ")}}function Df(i,t){if(i&1&&(M(),l(0,"g"),y(1,"line",16),k(2,Ef,5,6,"g",7),c()),i&2){let e=f().$implicit,n=f();J("transform",n.transform(e.value)),h(),J("x2",n.gridLineWidth)("transform",n.gridLineTransform()),h(),x("ngIf",n.showRefLabels)}}function Ff(i,t){if(i&1&&(M(),l(0,"g"),k(1,Df,3,4,"g",7),c()),i&2){let e=f();h(),x("ngIf",e.showRefLines)}}var Mf=["ngx-charts-y-axis",""];function Vf(i,t){if(i&1){let e=N();M(),l(0,"g",2),w("dimensionsChanged",function(a){C(e);let s=f();return S(s.emitTicksWidth(a))}),c()}if(i&2){let e=f();x("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)("wrapTicks",e.wrapTicks)}}function Of(i,t){if(i&1&&(M(),y(0,"g",3)),i&2){let e=f();x("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}var If=["ngx-charts-svg-linear-gradient",""];function Pf(i,t){if(i&1&&(M(),y(0,"stop")),i&2){let e=t.$implicit;St("stop-color",e.color)("stop-opacity",e.opacity),J("offset",e.offset+"%")}}var Hf=["tooltipTemplate"];var Rf=(i,t)=>[i,t];var Nf=`.ngx-charts-outer{animation:chartFadeIn linear .6s}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .node,.ngx-charts .link,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .node.active,.ngx-charts .node:hover,.ngx-charts .link.active,.ngx-charts .link:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .node:focus,.ngx-charts .link:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .node.hidden,.ngx-charts .link.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}
`;var Bf=["ngx-charts-bar",""];function Gf(i,t){if(i&1&&(M(),l(0,"defs"),y(1,"g",2),c()),i&2){let e=f();h(),x("orientation",e.orientation)("name",e.gradientId)("stops",e.gradientStops)}}var $f=["ngx-charts-bar-label",""];var zf=["ngx-charts-series-vertical",""];function Xf(i,t){if(i&1){let e=N();M(),l(0,"g",2),w("select",function(a){C(e);let s=f(2);return S(s.onClick(a))})("activate",function(a){C(e);let s=f(2);return S(s.activate.emit(a))})("deactivate",function(a){C(e);let s=f(2);return S(s.deactivate.emit(a))}),c()}if(i&2){let e=t.$implicit,n=f(2);x("@animationState","active")("@.disabled",!n.animations)("width",e.width)("height",e.height)("x",e.x)("y",e.y)("fill",e.color)("stops",e.gradientStops)("data",e.data)("orientation",n.barOrientation.Vertical)("roundEdges",e.roundEdges)("gradient",n.gradient)("ariaLabel",e.ariaLabel)("isActive",n.isActive(e.data))("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.tooltipPlacement)("tooltipType",n.tooltipType)("tooltipTitle",n.tooltipTemplate?void 0:e.tooltipText)("tooltipTemplate",n.tooltipTemplate)("tooltipContext",e.data)("noBarWhenZero",n.noBarWhenZero)("animations",n.animations)}}function Wf(i,t){if(i&1&&(M(),l(0,"g"),k(1,Xf,1,22,"g",1),c()),i&2){let e=f();h(),x("ngForOf",e.bars)("ngForTrackBy",e.trackBy)}}function Yf(i,t){if(i&1){let e=N();M(),l(0,"g",2),w("select",function(a){C(e);let s=f(2);return S(s.onClick(a))})("activate",function(a){C(e);let s=f(2);return S(s.activate.emit(a))})("deactivate",function(a){C(e);let s=f(2);return S(s.deactivate.emit(a))}),c()}if(i&2){let e=t.$implicit,n=f(2);x("width",e.width)("height",e.height)("x",e.x)("y",e.y)("fill",e.color)("stops",e.gradientStops)("data",e.data)("orientation",n.barOrientation.Vertical)("roundEdges",e.roundEdges)("gradient",n.gradient)("ariaLabel",e.ariaLabel)("isActive",n.isActive(e.data))("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.tooltipPlacement)("tooltipType",n.tooltipType)("tooltipTitle",n.tooltipTemplate?void 0:e.tooltipText)("tooltipTemplate",n.tooltipTemplate)("tooltipContext",e.data)("noBarWhenZero",n.noBarWhenZero)("animations",n.animations)}}function qf(i,t){if(i&1&&(M(),l(0,"g"),k(1,Yf,1,20,"g",1),c()),i&2){let e=f();h(),x("ngForOf",e.bars)("ngForTrackBy",e.trackBy)}}function jf(i,t){if(i&1){let e=N();M(),l(0,"g",4),w("dimensionsChanged",function(a){let s=C(e).index,r=f(2);return S(r.dataLabelHeightChanged.emit({size:a,index:s}))}),c()}if(i&2){let e=t.$implicit,n=f(2);x("barX",e.x)("barY",e.y)("barWidth",e.width)("barHeight",e.height)("value",e.total)("valueFormatting",n.dataLabelFormatting)("orientation",n.barOrientation.Vertical)}}function Uf(i,t){if(i&1&&(M(),l(0,"g"),k(1,jf,1,7,"g",3),c()),i&2){let e=f();h(),x("ngForOf",e.barsForDataLabels)("ngForTrackBy",e.trackDataLabelBy)}}function Qf(i,t){if(i&1){let e=N();M(),l(0,"g",5),w("dimensionsChanged",function(a){C(e);let s=f();return S(s.updateXAxisHeight(a))}),c()}if(i&2){let e=f();x("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("xAxisOffset",e.dataLabelMaxHeight.negative)("wrapTicks",e.wrapTicks)}}function Zf(i,t){if(i&1){let e=N();M(),l(0,"g",6),w("dimensionsChanged",function(a){C(e);let s=f();return S(s.updateYAxisWidth(a))}),c()}if(i&2){let e=f();x("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("wrapTicks",e.wrapTicks)}}function Kf(i,t,e){e=e||{};let n,a,s,r=null,o=0;function m(){o=e.leading===!1?0:+new Date,r=null,s=i.apply(n,a)}return function(){let d=+new Date;!o&&e.leading===!1&&(o=d);let p=t-(d-o);return n=this,a=arguments,p<=0?(clearTimeout(r),r=null,o=d,s=i.apply(n,a)):!r&&e.trailing!==!1&&(r=setTimeout(m,p)),s}}function Jf(i,t){return function(n,a,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:s.enumerable,value:Kf(s.value,i,t)}),this[a]}}}}var Y=function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i.Center="center",i}(Y||{}),jt=7;function Xd(i,t,e){if(e===Y.Top)return i.top-jt;if(e===Y.Bottom)return i.top+i.height-t.height+jt;if(e===Y.Center)return i.top+i.height/2-t.height/2}function Wd(i,t,e){if(e===Y.Left)return i.left-jt;if(e===Y.Right)return i.left+i.width-t.width+jt;if(e===Y.Center)return i.left+i.width/2-t.width/2}var Fn=class i{static calculateVerticalAlignment(t,e,n){let a=Xd(t,e,n);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(t,e,n,a){let s;a===Y.Top&&(s=t.height/2-n.height/2+jt),a===Y.Bottom&&(s=e.height-t.height/2-n.height/2-jt),a===Y.Center&&(s=e.height/2-n.height/2);let r=Xd(t,e,a);return r+e.height>window.innerHeight&&(s+=r+e.height-window.innerHeight),s}static calculateHorizontalAlignment(t,e,n){let a=Wd(t,e,n);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(t,e,n,a){let s;a===Y.Left&&(s=t.width/2-n.width/2+jt),a===Y.Right&&(s=e.width-t.width/2-n.width/2-jt),a===Y.Center&&(s=e.width/2-n.width/2);let r=Wd(t,e,a);return r+e.width>window.innerWidth&&(s+=r+e.width-window.innerWidth),s}static shouldFlip(t,e,n,a){let s=!1;return n===Y.Right&&t.left+t.width+e.width+a>window.innerWidth&&(s=!0),n===Y.Left&&t.left-e.width-a<0&&(s=!0),n===Y.Top&&t.top-e.height-a<0&&(s=!0),n===Y.Bottom&&t.top+t.height+e.height+a>window.innerHeight&&(s=!0),s}static positionCaret(t,e,n,a,s){let r=0,o=0;return t===Y.Right?(o=-7,r=i.calculateVerticalCaret(n,e,a,s)):t===Y.Left?(o=e.width,r=i.calculateVerticalCaret(n,e,a,s)):t===Y.Top?(r=e.height,o=i.calculateHorizontalCaret(n,e,a,s)):t===Y.Bottom&&(r=-7,o=i.calculateHorizontalCaret(n,e,a,s)),{top:r,left:o}}static positionContent(t,e,n,a,s){let r=0,o=0;return t===Y.Right?(o=n.left+n.width+a,r=i.calculateVerticalAlignment(n,e,s)):t===Y.Left?(o=n.left-e.width-a,r=i.calculateVerticalAlignment(n,e,s)):t===Y.Top?(r=n.top-e.height-a,o=i.calculateHorizontalAlignment(n,e,s)):t===Y.Bottom&&(r=n.top+n.height+a,o=i.calculateHorizontalAlignment(n,e,s)),{top:r,left:o}}static determinePlacement(t,e,n,a){if(i.shouldFlip(n,e,t,a)){if(t===Y.Right)return Y.Left;if(t===Y.Left)return Y.Right;if(t===Y.Top)return Y.Bottom;if(t===Y.Bottom)return Y.Top}return t}},e0=(()=>{class i{get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}constructor(e,n,a){this.element=e,this.renderer=n,this.platformId=a}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!ti(this.platformId))return;let e=this.element.nativeElement,n=this.host.nativeElement.getBoundingClientRect();if(!n.height&&!n.width)return;let a=e.getBoundingClientRect();this.checkFlip(n,a),this.positionContent(e,n,a),this.showCaret&&this.positionCaret(n,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,n,a){let{top:s,left:r}=Fn.positionContent(this.placement,a,n,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${s}px`),this.renderer.setStyle(e,"left",`${r}px`)}positionCaret(e,n){let a=this.caretElm.nativeElement,s=a.getBoundingClientRect(),{top:r,left:o}=Fn.positionCaret(this.placement,n,e,s,this.alignment);this.renderer.setStyle(a,"top",`${r}px`),this.renderer.setStyle(a,"left",`${o}px`)}checkFlip(e,n){this.placement=Fn.determinePlacement(this.placement,n,e,this.spacing)}onWindowResize(){this.position()}static{this.\u0275fac=function(n){return new(n||i)(E(Kt),E(ys),E(vi))}}static{this.\u0275cmp=L({type:i,selectors:[["ngx-tooltip-content"]],viewQuery:function(n,a){if(n&1&&wi(Xg,5),n&2){let s;Jt(s=ei())&&(a.caretElm=s.first)}},hostVars:2,hostBindings:function(n,a){n&1&&w("resize",function(){return a.onWindowResize()},!1,so),n&2&&Ie(a.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[["caretElm",""],[3,"hidden"],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(n,a){n&1&&(l(0,"div"),y(1,"span",1,0),l(3,"div",2),k(4,qg,2,4,"span",3)(5,jg,1,1,"span",4),c()()),n&2&&(h(),uo("tooltip-caret position-",a.placement,""),x("hidden",!a.showCaret),h(3),x("ngIf",!a.title),h(),x("ngIf",a.title))},dependencies:[tt,Ao],styles:[`.ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:#000000bf;font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translateZ(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}
`],encapsulation:2})}}return Qr([Jf(100)],i.prototype,"onWindowResize",null),i})(),Rr=class{constructor(t){this.injectionService=t,this.defaults={},this.components=new Map}getByType(t=this.type){return this.components.get(t)}create(t){return this.createByType(this.type,t)}createByType(t,e){e=this.assignDefaults(e);let n=this.injectComponent(t,e);return this.register(t,n),n}destroy(t){let e=this.components.get(t.componentType);if(e&&e.length){let n=e.indexOf(t);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(t){let e=this.components.get(t);if(e&&e.length){let n=e.length-1;for(;n>=0;)this.destroy(e[n--])}}injectComponent(t,e){return this.injectionService.appendComponent(t,e)}assignDefaults(t){let e=U({},this.defaults.inputs),n=U({},this.defaults.outputs);return!t.inputs&&!t.outputs&&(t={inputs:t}),e&&(t.inputs=U(U({},e),t.inputs)),n&&(t.outputs=U(U({},n),t.outputs)),t}register(t,e){this.components.has(t)||this.components.set(t,[]),this.components.get(t).push(e)}};function t0(i){return i.element}var em=(()=>{class i{static{this.globalRootViewContainer=null}static setGlobalRootViewContainer(e){i.globalRootViewContainer=e}constructor(e,n,a){this.applicationRef=e,this.componentFactoryResolver=n,this.injector=a}getRootViewContainer(){if(this._container)return this._container;if(i.globalRootViewContainer)return i.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return t0(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,n){if(n){if(n.inputs!==void 0){let a=Object.getOwnPropertyNames(n.inputs);for(let s of a)e.instance[s]=n.inputs[s]}if(n.outputs!==void 0){let a=Object.getOwnPropertyNames(n.outputs);for(let s of a)e.instance[s]=n.outputs[s]}}return e}appendComponent(e,n={},a){a||(a=this.getRootViewContainer());let s=this.getComponentRootNode(a),r=new Yo(s,this.componentFactoryResolver,this.applicationRef,this.injector),o=new Wo(e),m=r.attach(o);return this.projectComponentBindings(m,n),m}static{this.\u0275fac=function(n){return new(n||i)(oe(bo),oe(oo),oe(io))}}static{this.\u0275prov=ge({token:i,factory:i.\u0275fac})}}return i})(),Gr=(()=>{class i extends Rr{constructor(e){super(e),this.type=e0}static{this.\u0275fac=function(n){return new(n||i)(oe(em))}}static{this.\u0275prov=ge({token:i,factory:i.\u0275fac})}}return i})(),gi=function(i){return i.Right="right",i.Below="below",i}(gi||{}),Dn=function(i){return i.ScaleLegend="scaleLegend",i.Legend="legend",i}(Dn||{}),ae=function(i){return i.Time="time",i.Linear="linear",i.Ordinal="ordinal",i.Quantile="quantile",i}(ae||{});function $r(i){return i instanceof Date?i=i.toLocaleDateString():i=i.toLocaleString(),i}function i0(i){return i.toLocaleString().replace(/[&'`"<>]/g,t=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"})[t])}var n0=(()=>{class i{constructor(){this.isActive=!1,this.select=new R,this.activate=new R,this.deactivate=new R,this.toggle=new R}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(n,a){n&1&&w("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"click","title"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(n,a){n&1&&(l(0,"span",0),w("click",function(){return a.select.emit(a.formattedLabel)}),l(1,"span",1),w("click",function(){return a.toggle.emit(a.formattedLabel)}),c(),l(2,"span",2),u(3),c()()),n&2&&(ne("active",a.isActive),x("title",a.formattedLabel),h(),St("background-color",a.color),h(2),F(" ",a.trimmedLabel," "))},encapsulation:2,changeDetection:0})}}return i})(),a0=(()=>{class i{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new R,this.labelActivate=new R,this.labelDeactivate=new R,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){let e=[];for(let n of this.data){let a=$r(n);e.findIndex(r=>r.label===a)===-1&&e.push({label:n,formattedLabel:a,color:this.colors.getColor(n)})}return e}isActive(e){return this.activeEntries?this.activeEntries.find(a=>e.label===a.name)!==void 0:!1}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,n){return n.label}static{this.\u0275fac=function(n){return new(n||i)(E(Ts))}}static{this.\u0275cmp=L({type:i,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[Fe],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"select","activate","deactivate","label","formattedLabel","color","isActive"]],template:function(n,a){n&1&&(l(0,"div"),k(1,Ug,3,1,"header",0),l(2,"div",1)(3,"ul",2),k(4,Qg,2,4,"li",3),c()()()),n&2&&(St("width",a.width,"px"),h(),x("ngIf",(a.title==null?null:a.title.length)>0),h(2),St("max-height",a.height-45,"px"),ne("horizontal-legend",a.horizontal),h(),x("ngForOf",a.legendEntries)("ngForTrackBy",a.trackBy))},dependencies:[Ci,tt,n0],styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:#0000000d}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;-webkit-transition:.2s;-moz-transition:.2s;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
`],encapsulation:2,changeDetection:0})}}return i})(),s0=(()=>{class i{constructor(){this.horizontal=!1}ngOnChanges(e){let n=this.gradientString(this.colors.range(),this.colors.domain()),a=this.horizontal?"right":"bottom";this.gradient=`linear-gradient(to ${a}, ${n})`}gradientString(e,n){n.push(1);let a=[];return e.reverse().forEach((s,r)=>{a.push(`${s} ${Math.round(n[r]*100)}%`)}),a.join(", ")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},features:[Fe],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(n,a){n&1&&(l(0,"div",0)(1,"div",1)(2,"span"),u(3),c()(),y(4,"div",2),l(5,"div",1)(6,"span"),u(7),c()()()),n&2&&(St("height",a.horizontal?void 0:a.height,"px")("width",a.width,"px"),ne("horizontal-legend",a.horizontal),h(3),ie(a.valueRange[1].toLocaleString()),h(),St("background",a.gradient),h(3),ie(a.valueRange[0].toLocaleString()))},styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}
`],encapsulation:2,changeDetection:0})}}return i})(),r0=(()=>{class i{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new R,this.legendLabelActivate=new R,this.legendLabelDeactivate=new R,this.LegendPosition=gi,this.LegendType=Dn}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===gi.Right)&&(this.legendType===Dn.ScaleLegend?e=1:e=2));let n=12-e;this.chartWidth=Math.floor(this.view[0]*n/12),this.legendWidth=!this.legendOptions||this.legendOptions.position===gi.Right?Math.floor(this.view[0]*e/12):this.chartWidth}getLegendType(){return this.legendOptions.scaleType===ae.Linear?Dn.ScaleLegend:Dn.Legend}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[_o([Gr]),Fe],ngContentSelectors:Zg,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"labelClick","labelActivate","labelDeactivate","horizontal","data","title","colors","height","width","activeEntries"]],template:function(n,a){n&1&&(go(),l(0,"div",0),M(),l(1,"svg",1),fo(2),c(),k(3,Kg,1,5,"ngx-charts-scale-legend",2)(4,Jg,1,7,"ngx-charts-legend",3),c()),n&2&&(St("width",a.view[0],"px")("height",a.view[1],"px"),h(),J("width",a.chartWidth)("height",a.view[1]),h(2),x("ngIf",a.showLegend&&a.legendType===a.LegendType.ScaleLegend),h(),x("ngIf",a.showLegend&&a.legendType===a.LegendType.Legend))},dependencies:[tt,a0,s0],encapsulation:2,changeDetection:0})}}return i})(),o0=(()=>{class i{constructor(e,n){this.element=e,this.zone=n,this.visible=new R,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let e=()=>{if(!this.element)return;let{offsetHeight:n,offsetWidth:a}=this.element.nativeElement;n&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}static{this.\u0275fac=function(n){return new(n||i)(E(Kt),E(Zt))}}static{this.\u0275dir=Zi({type:i,selectors:[["visibility-observer"]],outputs:{visible:"visible"}})}}return i})();function Yd(i){return toString.call(i)==="[object Date]"}var l0=(()=>{class i{constructor(e,n,a,s){this.chartElement=e,this.zone=n,this.cd=a,this.platformId=s,this.scheme="cool",this.schemeType=ae.Ordinal,this.animations=!0,this.select=new R}ngOnInit(){Cs(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new o0(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results?this.results=this.cloneData(this.results):this.results=[],this.view)this.width=this.view[0],this.height=this.view[1];else{let e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,n,a=this.chartElement.nativeElement;if(ti(this.platformId)&&a.parentNode!==null){let s=a.parentNode.getBoundingClientRect();e=s.width,n=s.height}return e&&n?{width:e,height:n}:null}formatDates(){for(let e=0;e<this.results.length;e++){let n=this.results[e];if(n.label=n.name,Yd(n.label)&&(n.label=n.label.toLocaleDateString()),n.series)for(let a=0;a<n.series.length;a++){let s=n.series[a];s.label=s.name,Yd(s.label)&&(s.label=s.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!ti(this.platformId))return;let n=Vn(window,"resize").pipe(On(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=n}cloneData(e){let n=[];for(let a of e){let s={};if(a.name!==void 0&&(s.name=a.name),a.value!==void 0&&(s.value=a.value),a.series!==void 0){s.series=[];for(let r of a.series){let o=Object.assign({},r);s.series.push(o)}}a.extra!==void 0&&(s.extra=JSON.parse(JSON.stringify(a.extra))),a.source!==void 0&&(s.source=a.source),a.target!==void 0&&(s.target=a.target),n.push(s)}return n}static{this.\u0275fac=function(n){return new(n||i)(E(Kt),E(Zt),E(Ts),E(vi))}}static{this.\u0275cmp=L({type:i,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},features:[Fe],decls:1,vars:0,template:function(n,a){n&1&&y(0,"div")},encapsulation:2})}}return i})(),Ae=function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i}(Ae||{}),tm=(()=>{class i{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case Ae.Top:this.y=this.offset,this.x=this.width/2;break;case Ae.Bottom:this.y=this.offset,this.x=this.width/2;break;case Ae.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case Ae.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)";break;default:}}static{this.\u0275fac=function(n){return new(n||i)(E(Kt))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[Fe],attrs:ef,decls:2,vars:6,template:function(n,a){n&1&&(M(),l(0,"text"),u(1),c()),n&2&&(J("stroke-width",a.strokeWidth)("x",a.x)("y",a.y)("text-anchor",a.textAnchor)("transform",a.transform),h(),F(" ",a.label," "))},encapsulation:2,changeDetection:0})}}return i})();function im(i,t=16){return typeof i!="string"?typeof i=="number"?i+"":"":(i=i.trim(),i.length<=t?i:`${i.slice(0,t)}...`)}function nm(i,t){if(i.length>t){let e=[],n=Math.floor(i.length/t);for(let a=0;a<i.length;a++)a%n===0&&e.push(i[a]);i=e}return i}function am(i,t,e){let n=(i||"").toString(),a=[];if(/\s/.test(n))a=n.split(/\s+/).reduce((s,r)=>{let o=(s.pop()||"")+" ";return o.length+r.length>t?[...s,o.trim(),r.trim()]:[...s,o+r]},[]);else{let s=0;for(;s<n.length;)a.push(n.substring(s,s+t)),s+=t}return a.length>e&&(a=a.splice(0,e),a[a.length-1]+="..."),a}var Ft=function(i){return i.Start="start",i.Middle="middle",i.End="end",i}(Ft||{}),qd=(()=>{class i{get isWrapTicksSupported(){return this.wrapTicks&&this.scale.step}constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.wrapTicks=!1,this.dimensionsChanged=new R,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Ft.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10,this.maxPossibleLengthForTickIfWrapped=16}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!ti(this.platformId)){this.dimensionsChanged.emit({height:this.approxHeight});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale;this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(a){return a.constructor.name==="Date"?a.toLocaleDateString():a.toLocaleString()};let n=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(a){return this.scale(a)+this.scale.bandwidth()*.5}:this.scale,this.textTransform="",n&&n!==0?(this.textTransform=`rotate(${n})`,this.textAnchor=Ft.End,this.verticalSpacing=10):this.textAnchor=Ft.Middle,setTimeout(()=>this.updateDims())}getRotationAngle(e){let n=0;this.maxTicksLength=0;for(let g=0;g<e.length;g++){let _=this.tickFormat(e[g]).toString(),v=_.length;this.trimTicks&&(v=this.tickTrim(_).length),v>this.maxTicksLength&&(this.maxTicksLength=v)}let a=Math.min(this.maxTicksLength,this.maxAllowedLength),s=7,r=a*s,o=r,m=Math.floor(this.width/e.length);for(;o>m&&n>-90;)n-=30,o=Math.cos(n*(Math.PI/180))*r;let d=14;if(this.isWrapTicksSupported){let g=this.ticks.reduce((v,b)=>b.length>v.length?b:v,"");d=14*(this.tickChunks(g).length||1),this.maxPossibleLengthForTickIfWrapped=this.getMaxPossibleLengthForTick(g)}let p=n!==0?Math.max(Math.abs(Math.sin(n*Math.PI/180))*this.maxTickLength*s,10):d;return this.approxHeight=Math.min(p,200),n}getTicks(){let e,n=this.getMaxTicks(20),a=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[a]):(e=this.scale.domain(),e=nm(e,n)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?im(e,this.maxTickLength):e}getMaxPossibleLengthForTick(e){if(this.scale.bandwidth){let a=Math.floor(this.scale.bandwidth()/7),s=e.slice(0,a);return Math.max(s.length,this.maxTickLength)}return this.maxTickLength}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let a=this.rotateTicks?Math.floor(this.scale.step()/14):5;if(a<=1)return[this.tickTrim(e)];let s=Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength);return ti(this.platformId)||(s=Math.floor(Math.min(this.approxHeight/5,Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength)))),a=Math.min(a,5),am(e,s,a<1?1:a)}return[this.tickTrim(e)]}static{this.\u0275fac=function(n){return new(n||i)(E(vi))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(n,a){if(n&1&&wi(Jd,5),n&2){let s;Jt(s=ei())&&(a.ticksElement=s.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Fe],attrs:tf,decls:4,vars:2,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01","font-size","12px"],[4,"ngIf","ngIfThen","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(n,a){n&1&&(M(),l(0,"g",null,0),k(2,cf,2,2,"g",3),c(),k(3,mf,2,2,"g",4)),n&2&&(h(2),x("ngForOf",a.ticks),h(),x("ngForOf",a.ticks))},dependencies:[Ci,tt],encapsulation:2,changeDetection:0})}}return i})(),c0=(()=>{class i{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=Ae.Bottom,this.xAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new R,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=Ae}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,typeof this.xAxisTickCount<"u"&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){let n=e+25+5;n!==this.labelOffset&&(this.labelOffset=n,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(n,a){if(n&1&&wi(qd,5),n&2){let s;Jt(s=ei())&&(a.ticksComponent=s.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",xAxisOffset:"xAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Fe],attrs:hf,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"dimensionsChanged","trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(n,a){n&1&&(M(),l(0,"g"),k(1,uf,1,13,"g",0)(2,pf,1,5,"g",1),c()),n&2&&(J("class",a.xAxisClassName)("transform",a.transform),h(),x("ngIf",a.xScale),h(),x("ngIf",a.showLabel))},dependencies:[tt,tm,qd],encapsulation:2,changeDetection:0})}}return i})();function Yt(i,t,e,n,a,[s,r,o,m]){let d="";return e=Math.floor(e),n=Math.floor(n),e=e===0?1:e,n=n===0?1:n,d=`M${[i+a,t]}`,d+=`h${e-2*a}`,r?d+=`a${[a,a]} 0 0 1 ${[a,a]}`:d+=`h${a}v${a}`,d+=`v${n-2*a}`,m?d+=`a${[a,a]} 0 0 1 ${[-a,a]}`:d+=`v${a}h${-a}`,d+=`h${2*a-e}`,o?d+=`a${[a,a]} 0 0 1 ${[-a,-a]}`:d+=`h${-a}v${-a}`,d+=`v${2*a-n}`,s?d+=`a${[a,a]} 0 0 1 ${[a,-a]}`:d+=`v${-a}h${a}`,d+="z",d}var jd=(()=>{class i{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.wrapTicks=!1,this.dimensionsChanged=new R,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Ft.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=Ae}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!ti(this.platformId)){this.width=this.getApproximateAxisWidth(),this.dimensionsChanged.emit({width:this.width});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale,n=this.orient===Ae.Top||this.orient===Ae.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(a){return a.constructor.name==="Date"?a.toLocaleDateString():a.toLocaleString()},this.adjustedScale=e.bandwidth?a=>{let s=e(a)+e.bandwidth()*.5;if(this.wrapTicks&&a.toString().length>this.maxTickLength){let r=this.tickChunks(a).length;if(r===1)return s;let o=e.bandwidth(),m=r*8,d=o*.5-m*.5;return e(a)+d}return s}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case Ae.Top:this.transform=function(a){return"translate("+this.adjustedScale(a)+",0)"},this.textAnchor=Ft.Middle,this.y2=this.innerTickSize*n,this.y1=this.tickSpacing*n,this.dy=n<0?"0em":".71em";break;case Ae.Bottom:this.transform=function(a){return"translate("+this.adjustedScale(a)+",0)"},this.textAnchor=Ft.Middle,this.y2=this.innerTickSize*n,this.y1=this.tickSpacing*n,this.dy=n<0?"0em":".71em";break;case Ae.Left:this.transform=function(a){return"translate(0,"+this.adjustedScale(a)+")"},this.textAnchor=Ft.End,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em";break;case Ae.Right:this.transform=function(a){return"translate(0,"+this.adjustedScale(a)+")"},this.textAnchor=Ft.Start,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em";break;default:}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=Yt(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e,n=this.getMaxTicks(20),a=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[a]):(e=this.scale.domain(),e=nm(e,n)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?im(e,this.maxTickLength):e}getApproximateAxisWidth(){return Math.max(...this.ticks.map(a=>this.tickTrim(this.tickFormat(a)).length))*7}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let n=this.maxTickLength,a=Math.floor(this.scale.bandwidth()/15);return a<=1?[this.tickTrim(e)]:am(e,n,Math.min(a,5))}return[this.tickFormat(e)]}static{this.\u0275fac=function(n){return new(n||i)(E(vi))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(n,a){if(n&1&&wi(Jd,5),n&2){let s;Jt(s=ei())&&(a.ticksElement=s.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Fe],attrs:gf,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],[1,"reference-area"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(n,a){n&1&&(M(),l(0,"g",null,0),k(2,Tf,2,2,"g",3),c(),k(3,Cf,1,2,"path",4)(4,Lf,2,2,"g",5)(5,Ff,2,1,"g",5)),n&2&&(h(2),x("ngForOf",a.ticks),h(),x("ngIf",a.referenceLineLength>1&&a.refMax&&a.refMin&&a.showRefLines),h(),x("ngForOf",a.ticks),h(),x("ngForOf",a.referenceLines))},dependencies:[Ci,tt],encapsulation:2,changeDetection:0})}}return i})(),d0=(()=>{class i{constructor(){this.showGridLines=!1,this.yOrient=Ae.Left,this.yAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new R,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===Ae.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):this.transform=`translate(${this.offset} , 0)`,this.yAxisTickCount!==void 0&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&this.yOrient===Ae.Right?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(n,a){if(n&1&&wi(jd,5),n&2){let s;Jt(s=ei())&&(a.ticksComponent=s.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Fe],attrs:Mf,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"dimensionsChanged","trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(n,a){n&1&&(M(),l(0,"g"),k(1,Vf,1,15,"g",0)(2,Of,1,5,"g",1),c()),n&2&&(J("class",a.yAxisClassName)("transform",a.transform),h(),x("ngIf",a.yScale),h(),x("ngIf",a.showLabel))},dependencies:[tt,tm,jd],encapsulation:2,changeDetection:0})}}return i})(),Ud=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[Z]})}}return i})(),zr=function(i){return i.popover="popover",i.tooltip="tooltip",i}(zr||{}),qi=function(i){return i[i.all="all"]="all",i[i.focus="focus"]="focus",i[i.mouseover="mouseover"]="mouseover",i}(qi||{}),m0=(()=>{class i{get listensForFocus(){return this.tooltipShowEvent===qi.all||this.tooltipShowEvent===qi.focus}get listensForHover(){return this.tooltipShowEvent===qi.all||this.tooltipShowEvent===qi.mouseover}constructor(e,n,a){this.tooltipService=e,this.viewContainerRef=n,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=Y.Top,this.tooltipAlignment=Y.Center,this.tooltipType=zr.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=qi.all,this.tooltipImmediateExit=!1,this.show=new R,this.hide=new R}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;let n=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?400:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();let a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},n)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",n=>{e.contains(n.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;let n=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?n():this.timeout=setTimeout(n,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}static{this.\u0275fac=function(n){return new(n||i)(E(Gr),E(co),E(ys))}}static{this.\u0275dir=Zi({type:i,selectors:[["","ngx-tooltip",""]],hostBindings:function(n,a){n&1&&w("focusin",function(){return a.onFocus()})("blur",function(){return a.onBlur()})("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(r){return a.onMouseLeave(r.target)})("click",function(){return a.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}})}}return i})(),Qd=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({providers:[em,Gr],imports:[Z]})}}return i})(),Zd={};function sm(){let i=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return i=`a${i}`,Zd[i]?sm():(Zd[i]=!0,i)}var He=function(i){return i.Vertical="vertical",i.Horizontal="horizontal",i}(He||{});var h0=(()=>{class i{constructor(){this.orientation=He.Vertical}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===He.Horizontal?this.x2="100%":this.orientation===He.Vertical&&(this.y1="100%")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[Fe],attrs:If,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(n,a){n&1&&(M(),l(0,"linearGradient",0),k(1,Pf,1,5,"stop",1),c()),n&2&&(x("id",a.name),J("x1",a.x1)("y1",a.y1)("x2",a.x2)("y2",a.y2),h(),x("ngForOf",a.stops))},dependencies:[Ci],encapsulation:2,changeDetection:0})}}return i})();var Nr;typeof window<"u"?Nr=window:typeof global<"u"&&(Nr=global);var Ok=Nr.MouseEvent;var qe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[Z,Ud,Qd,Z,Ud,Qd]})}}return i})();function u0({width:i,height:t,margins:e,showXAxis:n=!1,showYAxis:a=!1,xAxisHeight:s=0,yAxisWidth:r=0,showXLabel:o=!1,showYLabel:m=!1,showLegend:d=!1,legendType:p=ae.Ordinal,legendPosition:g=gi.Right,columns:_=12}){let v=e[3],b=i,T=t-e[0]-e[2];return d&&g===gi.Right&&(p===ae.Ordinal?_-=2:_-=1),b=b*_/12,b=b-e[1]-e[3],n&&(T-=5,T-=s,o&&(T-=30)),a&&(b-=5,b-=r,v+=r,v+=10,m&&(b-=30,v+=30)),b=Math.max(0,b),T=Math.max(0,T),{width:Math.floor(b),height:Math.floor(T),xOffset:Math.floor(v)}}var Kd=[{name:"vivid",selectable:!0,group:ae.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:ae.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:ae.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:ae.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:ae.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:ae.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:ae.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:ae.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:ae.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:ae.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:ae.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:ae.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:ae.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:ae.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:ae.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}],Br=class{constructor(t,e,n,a){typeof t=="string"&&(t=Kd.find(s=>s.name===t)),this.colorDomain=t.domain,this.scaleType=e,this.domain=n,this.customColors=a,this.scale=this.generateColorScheme(t,e,this.domain)}generateColorScheme(t,e,n){typeof t=="string"&&(t=Kd.find(s=>s.name===t));let a;switch(e){case ae.Quantile:a=En().range(t.domain).domain(n);break;case ae.Ordinal:a=ui().range(t.domain).domain(n);break;case ae.Linear:{let s=[...t.domain];s.length===1&&(s.push(s[0]),this.colorDomain=s);let r=Xi(0,1,1/s.length);a=Wt().range(s).domain(r)}break;default:break}return a}getColor(t){if(t==null)throw new Error("Value can not be null");if(this.scaleType===ae.Linear){let e=Wt().domain(this.domain).range([0,1]);return this.scale(e(t))}else{if(typeof this.customColors=="function")return this.customColors(t);let e=t.toString(),n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(t)}}getLinearGradientStops(t,e){e===void 0&&(e=this.domain[0]);let n=Wt().domain(this.domain).range([0,1]),a=Wi().domain(this.colorDomain).range([0,1]),s=this.getColor(t),r=n(e),o=this.getColor(e),m=n(t),d=1,p=r,g=[];for(g.push({color:o,offset:r,originalOffset:r,opacity:1});p<m&&d<this.colorDomain.length;){let _=this.colorDomain[d],v=a(_);if(v<=r){d++;continue}if(v.toFixed(4)>=(m-a.bandwidth()).toFixed(4))break;g.push({color:_,offset:v,opacity:1}),p=v,d++}if(g[g.length-1].offset<100&&g.push({color:s,offset:m,opacity:1}),m===r)g[0].offset=0,g[1].offset=100;else if(g[g.length-1].offset!==100)for(let _ of g)_.offset=(_.offset-r)/(m-r)*100;return g}};var p0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})(),g0=(()=>{class i{constructor(e){this.roundEdges=!0,this.gradient=!1,this.offset=0,this.isActive=!1,this.animations=!0,this.noBarWhenZero=!0,this.select=new R,this.activate=new R,this.deactivate=new R,this.hasGradient=!1,this.hideBar=!1,this.element=e.nativeElement}ngOnChanges(e){e.roundEdges&&this.loadAnimation(),this.update()}update(){this.gradientId="grad"+sm().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl(),this.checkToHideBar()}loadAnimation(){this.path=this.getStartingPath(),setTimeout(this.update.bind(this),100)}updatePathEl(){let e=or(this.element).select(".bar"),n=this.getPath();this.animations?e.transition().duration(500).attr("d",n):e.attr("d",n)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.getStartOpacity()},{offset:100,color:this.fill,opacity:1}]}getStartingPath(){if(!this.animations)return this.getPath();let e=this.getRadius(),n;return this.roundEdges?this.orientation===He.Vertical?(e=Math.min(this.height,e),n=Yt(this.x,this.y+this.height,this.width,1,0,this.edges)):this.orientation===He.Horizontal&&(e=Math.min(this.width,e),n=Yt(this.x,this.y,1,this.height,0,this.edges)):this.orientation===He.Vertical?n=Yt(this.x,this.y+this.height,this.width,1,0,this.edges):this.orientation===He.Horizontal&&(n=Yt(this.x,this.y,1,this.height,0,this.edges)),n}getPath(){let e=this.getRadius(),n;return this.roundEdges?this.orientation===He.Vertical?(e=Math.min(this.height,e),n=Yt(this.x,this.y,this.width,this.height,e,this.edges)):this.orientation===He.Horizontal&&(e=Math.min(this.width,e),n=Yt(this.x,this.y,this.width,this.height,e,this.edges)):n=Yt(this.x,this.y,this.width,this.height,e,this.edges),n}getRadius(){let e=0;return this.roundEdges&&this.height>5&&this.width>5&&(e=Math.floor(Math.min(5,this.height/2,this.width/2))),e}getStartOpacity(){return this.roundEdges?.2:.5}get edges(){let e=[!1,!1,!1,!1];return this.roundEdges&&(this.orientation===He.Vertical?this.data.value>0?e=[!0,!0,!1,!1]:e=[!1,!1,!0,!0]:this.orientation===He.Horizontal&&(this.data.value>0?e=[!1,!0,!1,!0]:e=[!0,!1,!0,!1])),e}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}checkToHideBar(){this.hideBar=this.noBarWhenZero&&(this.orientation===He.Vertical&&this.height===0||this.orientation===He.Horizontal&&this.width===0)}static{this.\u0275fac=function(n){return new(n||i)(E(Kt))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-bar",""]],hostBindings:function(n,a){n&1&&w("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()})},inputs:{fill:"fill",data:"data",width:"width",height:"height",x:"x",y:"y",orientation:"orientation",roundEdges:"roundEdges",gradient:"gradient",offset:"offset",isActive:"isActive",stops:"stops",animations:"animations",ariaLabel:"ariaLabel",noBarWhenZero:"noBarWhenZero"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[Fe],attrs:Bf,decls:2,vars:8,consts:[[4,"ngIf"],["stroke","none","role","img","tabIndex","-1",1,"bar",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(n,a){n&1&&(k(0,Gf,2,3,"defs",0),M(),l(1,"path",1),w("click",function(){return a.select.emit(a.data)}),c()),n&2&&(x("ngIf",a.hasGradient),h(),ne("active",a.isActive)("hidden",a.hideBar),J("d",a.path)("aria-label",a.ariaLabel)("fill",a.hasGradient?a.gradientFill:a.fill))},dependencies:[tt,h0],encapsulation:2,changeDetection:0})}}return i})(),qt=function(i){return i.Standard="standard",i.Normalized="normalized",i.Stacked="stacked",i}(qt||{}),ji=function(i){return i.positive="positive",i.negative="negative",i}(ji||{}),f0=(()=>{class i{constructor(e){this.dimensionsChanged=new R,this.horizontalPadding=2,this.verticalPadding=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}getSize(){let e=this.element.getBoundingClientRect().height,n=this.element.getBoundingClientRect().width;return{height:e,width:n,negative:this.value<0}}ngAfterViewInit(){this.dimensionsChanged.emit(this.getSize())}update(){this.valueFormatting?this.formatedValue=this.valueFormatting(this.value):this.formatedValue=$r(this.value),this.orientation==="horizontal"?(this.x=this.barX+this.barWidth,this.value<0?(this.x=this.x-this.horizontalPadding,this.textAnchor="end"):(this.x=this.x+this.horizontalPadding,this.textAnchor="start"),this.y=this.barY+this.barHeight/2):(this.x=this.barX+this.barWidth/2,this.y=this.barY+this.barHeight,this.value<0?(this.y=this.y+this.verticalPadding,this.textAnchor="end"):(this.y=this.y-this.verticalPadding,this.textAnchor="start"),this.transform=`rotate(-45, ${this.x} , ${this.y})`)}static{this.\u0275fac=function(n){return new(n||i)(E(Kt))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-bar-label",""]],inputs:{value:"value",valueFormatting:"valueFormatting",barX:"barX",barY:"barY",barWidth:"barWidth",barHeight:"barHeight",orientation:"orientation"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Fe],attrs:$f,decls:2,vars:5,consts:[["alignment-baseline","middle",1,"textDataLabel"]],template:function(n,a){n&1&&(M(),l(0,"text",0),u(1),c()),n&2&&(J("text-anchor",a.textAnchor)("transform",a.transform)("x",a.x)("y",a.y),h(),F(" ",a.formatedValue," "))},styles:[".textDataLabel[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0})}}return i})();var x0=(()=>{class i{constructor(e){this.platformId=e,this.type=qt.Standard,this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new R,this.activate=new R,this.deactivate=new R,this.dataLabelHeightChanged=new R,this.barsForDataLabels=[],this.barOrientation=He,this.isSSR=!1}ngOnInit(){Cs(this.platformId)&&(this.isSSR=!0)}ngOnChanges(e){this.update()}update(){this.updateTooltipSettings();let e;this.series.length&&(e=this.xScale.bandwidth()),e=Math.round(e);let n=Math.max(this.yScale.domain()[0],0),a={[ji.positive]:0,[ji.negative]:0},s=ji.positive,r;this.type===qt.Normalized&&(r=this.series.map(o=>o.value).reduce((o,m)=>o+m,0)),this.bars=this.series.map((o,m)=>{let d=o.value,p=this.getLabel(o),g=$r(p),_=this.roundEdges;s=d>0?ji.positive:ji.negative;let v={value:d,label:p,roundEdges:_,data:o,width:e,formattedLabel:g,height:0,x:0,y:0};if(this.type===qt.Standard)v.height=Math.abs(this.yScale(d)-this.yScale(n)),v.x=this.xScale(p),d<0?v.y=this.yScale(0):v.y=this.yScale(d);else if(this.type===qt.Stacked){let T=a[s],O=T+d;a[s]+=d,v.height=this.yScale(T)-this.yScale(O),v.x=0,v.y=this.yScale(O),v.offset0=T,v.offset1=O}else if(this.type===qt.Normalized){let T=a[s],O=T+d;a[s]+=d,r>0?(T=T*100/r,O=O*100/r):(T=0,O=0),v.height=this.yScale(T)-this.yScale(O),v.x=0,v.y=this.yScale(O),v.offset0=T,v.offset1=O,d=(O-T).toFixed(2)+"%"}this.colors.scaleType===ae.Ordinal?v.color=this.colors.getColor(p):this.type===qt.Standard?(v.color=this.colors.getColor(d),v.gradientStops=this.colors.getLinearGradientStops(d)):(v.color=this.colors.getColor(v.offset1),v.gradientStops=this.colors.getLinearGradientStops(v.offset1,v.offset0));let b=g;return v.ariaLabel=g+" "+d.toLocaleString(),this.seriesName!==null&&this.seriesName!==void 0&&(b=`${this.seriesName} \u2022 ${g}`,v.data.series=this.seriesName,v.ariaLabel=this.seriesName+" "+v.ariaLabel),v.tooltipText=this.tooltipDisabled?void 0:`
        <span class="tooltip-label">${i0(b)}</span>
        <span class="tooltip-val">${this.dataLabelFormatting?this.dataLabelFormatting(d):d.toLocaleString()}</span>
      `,v}),this.updateDataLabels()}updateDataLabels(){if(this.type===qt.Stacked){this.barsForDataLabels=[];let e={};e.series=this.seriesName;let n=this.series.map(s=>s.value).reduce((s,r)=>r>0?s+r:s,0),a=this.series.map(s=>s.value).reduce((s,r)=>r<0?s+r:s,0);e.total=n+a,e.x=0,e.y=0,e.total>0?e.height=this.yScale(n):e.height=this.yScale(a),e.width=this.xScale.bandwidth(),this.barsForDataLabels.push(e)}else this.barsForDataLabels=this.series.map(e=>{let n={};return n.series=this.seriesName??e.label,n.total=e.value,n.x=this.xScale(e.label),n.y=this.yScale(0),n.height=this.yScale(n.total)-this.yScale(0),n.width=this.xScale.bandwidth(),n})}updateTooltipSettings(){this.tooltipPlacement=this.tooltipDisabled?void 0:Y.Top,this.tooltipType=this.tooltipDisabled?void 0:zr.tooltip}isActive(e){return this.activeEntries?this.activeEntries.find(a=>e.name===a.name&&e.value===a.value)!==void 0:!1}onClick(e){this.select.emit(e)}getLabel(e){return e.label?e.label:e.name}trackBy(e,n){return n.label}trackDataLabelBy(e,n){return e+"#"+n.series+"#"+n.total}static{this.\u0275fac=function(n){return new(n||i)(E(vi))}}static{this.\u0275cmp=L({type:i,selectors:[["g","ngx-charts-series-vertical",""]],inputs:{dims:"dims",type:"type",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",animations:"animations",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",noBarWhenZero:"noBarWhenZero"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelHeightChanged:"dataLabelHeightChanged"},features:[Fe],attrs:zf,decls:3,vars:3,consts:[[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar","","ngx-tooltip","",3,"select","activate","deactivate","width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"dimensionsChanged","barX","barY","barWidth","barHeight","value","valueFormatting","orientation"]],template:function(n,a){n&1&&k(0,Wf,2,2,"g",0)(1,qf,2,2,"g",0)(2,Uf,2,2,"g",0),n&2&&(x("ngIf",!a.isSSR),h(),x("ngIf",a.isSSR),h(),x("ngIf",a.showDataLabel))},dependencies:[Ci,tt,m0,g0,f0],encapsulation:2,data:{animation:[ol("animationState",[dl(":leave",[Pi({opacity:1}),ll(500,Pi({opacity:0}))])])]},changeDetection:0})}}return i})(),rm=(()=>{class i extends l0{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition=gi.Right,this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.wrapTicks=!1,this.activate=new R,this.deactivate=new R,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=u0({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}getXScale(){this.xDomain=this.getXDomain();let e=this.xDomain.length/(this.dims.width/this.barPadding+1);return Wi().range([0,this.dims.width]).paddingInner(e).domain(this.xDomain)}getYScale(){this.yDomain=this.getYDomain();let e=Wt().range([this.dims.height,0]).domain(this.yDomain);return this.roundDomains?e.nice():e}getXDomain(){return this.results.map(e=>e.label)}getYDomain(){let e=this.results.map(s=>s.value),n=this.yScaleMin?Math.min(this.yScaleMin,...e):Math.min(0,...e);this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(n=Math.min(n,...this.yAxisTicks));let a=this.yScaleMax?Math.max(this.yScaleMax,...e):Math.max(0,...e);return this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(a=Math.max(a,...this.yAxisTicks)),[n,a]}onClick(e){this.select.emit(e)}setColors(){let e;this.schemeType===ae.Ordinal?e=this.xDomain:e=this.yDomain,this.colors=new Br(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){let e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return e.scaleType===ae.Ordinal?(e.domain=this.xDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onDataLabelMaxHeightChanged(e){e.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,e.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,e.size.height),e.index===this.results.length-1&&setTimeout(()=>this.update())}onActivate(e,n=!1){e=this.results.find(s=>n?s.label===e.name:s.name===e.name),!(this.activeEntries.findIndex(s=>s.name===e.name&&s.value===e.value&&s.series===e.series)>-1)&&(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,n=!1){e=this.results.find(s=>n?s.label===e.name:s.name===e.name);let a=this.activeEntries.findIndex(s=>s.name===e.name&&s.value===e.value&&s.series===e.series);this.activeEntries.splice(a,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=to(i)))(a||i)}})()}static{this.\u0275cmp=L({type:i,selectors:[["ngx-charts-bar-vertical"]],contentQueries:function(n,a,s){if(n&1&&xo(s,Hf,5),n&2){let r;Jt(r=ei())&&(a.tooltipTemplate=r.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",tooltipDisabled:"tooltipDisabled",gradient:"gradient",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",yScaleMax:"yScaleMax",yScaleMin:"yScaleMin",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",noBarWhenZero:"noBarWhenZero",wrapTicks:"wrapTicks"},outputs:{activate:"activate",deactivate:"deactivate"},features:[ho],decls:5,vars:25,consts:[[3,"legendLabelClick","legendLabelActivate","legendLabelDeactivate","view","showLegend","legendOptions","activeEntries","animations"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"activate","deactivate","select","dataLabelHeightChanged","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","activeEntries","roundEdges","animations","noBarWhenZero"],["ngx-charts-x-axis","",3,"dimensionsChanged","xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","wrapTicks"],["ngx-charts-y-axis","",3,"dimensionsChanged","yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","wrapTicks"]],template:function(n,a){n&1&&(l(0,"ngx-charts-chart",0),w("legendLabelClick",function(r){return a.onClick(r)})("legendLabelActivate",function(r){return a.onActivate(r,!0)})("legendLabelDeactivate",function(r){return a.onDeactivate(r,!0)}),M(),l(1,"g",1),k(2,Qf,1,12,"g",2)(3,Zf,1,10,"g",3),l(4,"g",4),w("activate",function(r){return a.onActivate(r)})("deactivate",function(r){return a.onDeactivate(r)})("select",function(r){return a.onClick(r)})("dataLabelHeightChanged",function(r){return a.onDataLabelMaxHeightChanged(r)}),c()()()),n&2&&(x("view",vo(22,Rf,a.width,a.height))("showLegend",a.legend)("legendOptions",a.legendOptions)("activeEntries",a.activeEntries)("animations",a.animations),h(),J("transform",a.transform),h(),x("ngIf",a.xAxis),h(),x("ngIf",a.yAxis),h(),x("xScale",a.xScale)("yScale",a.yScale)("colors",a.colors)("series",a.results)("dims",a.dims)("gradient",a.gradient)("tooltipDisabled",a.tooltipDisabled)("tooltipTemplate",a.tooltipTemplate)("showDataLabel",a.showDataLabel)("dataLabelFormatting",a.dataLabelFormatting)("activeEntries",a.activeEntries)("roundEdges",a.roundEdges)("animations",a.animations)("noBarWhenZero",a.noBarWhenZero))},dependencies:[tt,c0,d0,r0,x0],styles:[Nf],encapsulation:2,changeDetection:0})}}return i})();var om=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var _0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var v0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var y0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var lm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var Ik=2*Math.PI;var Xr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})(),b0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe,Xr,lm]})}}return i})();var w0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var T0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})();var C0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe,Xr,om]})}}return i})();function S0(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}var k0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe]})}}return i})(),cm=(()=>{class i{constructor(){S0()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ye({type:i})}static{this.\u0275inj=ve({imports:[qe,p0,om,_0,v0,y0,k0,lm,b0,w0,Xr,T0,C0]})}}return i})();var L0=(i,t)=>t.name,E0=()=>["all","animal","habitat","service"],D0=()=>[1100,400];function F0(i,t){if(i&1){let e=N();l(0,"button",12),w("click",function(){let a=C(e).$implicit,s=f();return S(s.setFilter(a))}),u(1),c()}if(i&2){let e=t.$implicit,n=f();ne("bg-tertiary",n.currentFilter()===e)("text-white",n.currentFilter()===e),h(),F(" ",e==="all"?"Tous":e," ")}}function M0(i,t){if(i&1&&(l(0,"div",9)(1,"div",13),y(2,"img",14),c(),l(3,"span",15),u(4),c(),l(5,"span",16),u(6),c()()),i&2){let e=t.$implicit;h(2),x("src",e.extra.image,Ce)("alt",e.name),h(2),ie(e.name),h(2),F("",e.value," visites")}}var Qa=class i{trackingService=G(Bn);animalService=G(Di);habitatService=G(Rt);serviceService=G(Nn);customColors=[{name:"Animaux",value:"#557A46"},{name:"Habitats",value:"#7A9D54"},{name:"Services",value:"#A4D0A4"}];colorScheme="forest";animals=A([]);habitats=A([]);services=A([]);stats=A([]);currentFilter=A("all");visitData=A([]);categoryTypes=fe(()=>["all",...new Set(this.stats().map(t=>t.category_type))]);filteredData=fe(()=>{let t=this.visitData();return this.currentFilter()==="all"?t:t.filter(e=>e.extra.type===this.currentFilter())});chartData=fe(()=>this.filteredData());constructor(){this.initializeSubscriptions()}ngOnInit(){this.loadEntities(),setTimeout(()=>this.loadVisitStats(),1e3)}initializeSubscriptions(){this.trackingService.visitStats$.subscribe(t=>this.stats.set(t)),this.trackingService.refreshStats()}loadEntities(){this.loadAnimals(),this.loadHabitats(),this.loadServices()}loadAnimals(){this.animalService.getAnimals().subscribe(t=>{this.animals.set(t)})}loadHabitats(){this.habitatService.getHabitats().subscribe(t=>{this.habitats.set(t)})}loadServices(){this.serviceService.getServices().subscribe(t=>{this.services.set(t)})}loadVisitStats(){this.trackingService.visitStats$.subscribe({next:t=>{let e=t.map(n=>({name:n.category_name,value:n.visit_count||0,extra:{image:this.getImageUrl(n.category_type,n.category_name),type:n.category_type}}));this.visitData.set(e)},error:t=>console.error("Erreur lors du chargement des statistiques:",t)}),this.trackingService.refreshStats()}getImageUrl(t,e){let n=`${he.apiUrl}/api/uploads`;switch(t){case"animal":return this.getAnimalImage(e,n);case"habitat":return this.getHabitatImage(e,n);case"service":return this.getServiceImage(e,n);default:return`${n}/default.webp`}}getAnimalImage(t,e){let n=this.animals().find(a=>a.name===t);return n?.images?`${e}/animals/${n.images.split("/").pop()}`:`${e}/animals/default.webp`}getHabitatImage(t,e){let n=this.habitats().find(a=>a.name===t);return n?.images?`${e}/habitats/${n.images.split("/").pop()}`:`${e}/habitats/default.webp`}getServiceImage(t,e){let n=this.services().find(a=>a.name===t);return n?.images?`${e}/services/${n.images.split("/").pop()}`:`${e}/services/default.webp`}setFilter(t){this.currentFilter.set(t)}exportData(){let t=this.stats(),e=this.convertToCSV(t);this.downloadCSV(e)}convertToCSV(t){let e=["Cat\xE9gorie","Type","Nombre de visites","Pourcentage"],n=t.map(a=>[a.category_name,a.category_type,a.visit_count,a.visit_percentage]);return[e,...n].map(a=>a.join(",")).join(`
`)}downloadCSV(t){let e=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download="statistiques-visites.csv",a.click()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-visit-stats"]],standalone:!0,features:[H],decls:15,vars:18,consts:[[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-tertiary"],[1,"flex","gap-2"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200","hover:bg-tertiary/10",3,"bg-tertiary","text-white"],[1,"flex","justify-center","items-center","bg-white","rounded-lg","mb-6","w-full","overflow-x-auto"],[1,"min-w-[1100px]"],[3,"view","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","customColors","noBarWhenZero","barPadding","roundEdges","animations","showDataLabel"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-6","gap-4","mt-8"],[1,"flex","flex-col","items-center","space-y-2","p-2","rounded-lg","hover:bg-gray-50","transition-colors","duration-200"],[1,"mt-6","flex","justify-end"],[1,"px-2","shadow-sm","hover:shadow-md","transition-all","duration-200",3,"click","keydown","text","type","color","rounded"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200","hover:bg-tertiary/10",3,"click"],[1,"relative","w-20","h-20"],[1,"w-full","h-full","object-cover","rounded-lg","shadow-sm",3,"src","alt"],[1,"text-sm","font-medium","text-gray-700","text-center"],[1,"text-xs","text-gray-500"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Statistiques des visites "),c(),l(4,"div",3),z(5,F0,2,5,"button",4,ot),c()(),l(7,"div",5)(8,"div",6),y(9,"ngx-charts-bar-vertical",7),c()(),l(10,"div",8),z(11,M0,7,4,"div",9,L0),c(),l(13,"div",10)(14,"app-button",11),w("click",function(){return n.exportData()})("keydown",function(){return n.exportData()}),c()()()),e&2&&(h(5),X(se(16,E0)),h(4),x("view",se(17,D0))("results",n.chartData())("xAxis",!0)("yAxis",!0)("showXAxisLabel",!1)("showYAxisLabel",!0)("customColors",n.customColors)("noBarWhenZero",!0)("barPadding",35)("roundEdges",!0)("animations",!0)("showDataLabel",!0),h(2),X(n.filteredData()),h(3),x("text","Exporter les donn\xE9es")("type","button")("color","tertiary")("rounded",!0))},dependencies:[Z,cm,rm,Ve],styles:["[_nghost-%COMP%]{display:block;width:100%}[_ngcontent-%COMP%]:is()   .ngx-charts[_ngcontent-%COMP%]   .grid-line-path[_ngcontent-%COMP%]{stroke:#e5e7eb;stroke-width:.5}[_ngcontent-%COMP%]:is()   .ngx-charts[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-size:12px;fill:#6b7280}"]})};var Za=class i{constructor(t){this.countResourceService=t}ngOnInit(){this.loadCountResource()}loadCountResource(){this.countResourceService.getStats().subscribe({next:()=>{},error:t=>{console.error("Erreur lors de la r\xE9cup\xE9ration des statistiques:",t)}})}static \u0275fac=function(e){return new(e||i)(E(Gn))};static \u0275cmp=L({type:i,selectors:[["app-count-resource"]],standalone:!0,features:[H],decls:57,vars:0,consts:[[1,"w-full","py-12"],[1,"container","mx-auto","px-4"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","max-w-7xl","mx-auto"],[1,"text-center","space-y-4","mb-8"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"flex","justify-center","items-center","gap-12","max-w-4xl","mx-auto","mb-8"],[1,"relative","group"],[1,"w-16","h-16","rounded-full","bg-white/90","shadow-lg","flex","items-center","justify-center","cursor-pointer","transition-transform","duration-300","hover:scale-110"],[1,"fas","fa-paw","text-2xl","text-tertiary"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-4","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none"],[1,"bg-tertiary/90","backdrop-blur-sm","text-white","px-4","py-3","rounded-xl","shadow-xl"],[1,"font-serif","text-lg","whitespace-nowrap"],[1,"text-3xl","font-light","text-center"],[1,"w-3","h-3","bg-tertiary/90","transform","rotate-45","translate-x-1/2","translate-y-1/2","absolute","left-1/2","bottom-0"],[1,"fas","fa-tree","text-2xl","text-tertiary"],[1,"fas","fa-concierge-bell","text-2xl","text-tertiary"],[1,"fas","fa-users","text-2xl","text-tertiary"],[1,"space-y-2"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u(5," Statistiques G\xE9n\xE9rales "),c(),l(6,"p",5),u(7," Vue d'ensemble des ressources du zoo "),c()(),l(8,"div",6)(9,"div",7)(10,"div",8),y(11,"i",9),c(),l(12,"div",10)(13,"div",11)(14,"p",12),u(15,"Total Animaux"),c(),l(16,"p",13),u(17,"12"),c()(),y(18,"div",14),c()(),l(19,"div",7)(20,"div",8),y(21,"i",15),c(),l(22,"div",10)(23,"div",11)(24,"p",12),u(25,"Total Habitats"),c(),l(26,"p",13),u(27,"3"),c()(),y(28,"div",14),c()(),l(29,"div",7)(30,"div",8),y(31,"i",16),c(),l(32,"div",10)(33,"div",11)(34,"p",12),u(35,"Total Services"),c(),l(36,"p",13),u(37,"3"),c()(),y(38,"div",14),c()(),l(39,"div",7)(40,"div",8),y(41,"i",17),c(),l(42,"div",10)(43,"div",11)(44,"div",18)(45,"div")(46,"p",12),u(47,"Employ\xE9s"),c(),l(48,"p",13),u(49,"1"),c()(),l(50,"div")(51,"p",12),u(52," V\xE9t\xE9rinaires "),c(),l(53,"p",13),u(54,"1"),c()()()(),y(55,"div",14),c()()(),y(56,"app-visit-stats"),c()()())},dependencies:[Qa],encapsulation:2})};var Ka=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-stats"]],standalone:!0,features:[H],decls:2,vars:0,consts:[[1,"container","mx-auto","px-4","bg-gradient-to-b","from-secondary","to-primary"]],template:function(e,n){e&1&&(l(0,"div",0),y(1,"app-count-resource"),c())},dependencies:[Za],encapsulation:2})};var O0=(i,t)=>t.route;function I0(i,t){if(i&1&&(l(0,"div",14)(1,"div",15),u(2),c(),y(3,"div",16),c()),i&2){let e=f().$implicit;h(2),F(" ",e.description," ")}}function P0(i,t){if(i&1){let e=N();l(0,"button",11),w("click",function(){let a=C(e).$implicit,s=f();return S(s.navigateTo(a.route))}),l(1,"div",12),y(2,"i"),c(),l(3,"span",13),u(4),c(),k(5,I0,4,1,"div",14),c()}if(i&2){let e=t.$implicit,n=f();Ie(n.isActiveRoute(e.route)?"bg-tertiary text-white shadow-md transform hover:-translate-y-1":"bg-white/50 text-tertiary hover:bg-tertiary/10"),h(2),Ie("fas "+n.getIcon(e.text)+" text-xl"),h(2),ie(e.text),h(),P(e.description?5:-1)}}function H0(i,t){i&1&&y(0,"app-stats")}function R0(i,t){i&1&&y(0,"router-outlet")}var Ja=class i{constructor(t){this.router=t;let e=this.router.url.split("/").pop();this.activeRoute.set(e==="admin"?"":e??"")}navigationItems=[{text:"Statistiques",route:"",description:"Voir les statistiques du zoo"},{text:"Animaux",route:"animal-management",description:"G\xE9rer les animaux du zoo"},{text:"Habitats",route:"habitat-management",description:"G\xE9rer les habitats des animaux"},{text:"Services",route:"service-management",description:"G\xE9rer les services du zoo"},{text:"Comptes",route:"account-management",description:"G\xE9rer les comptes utilisateurs"},{text:"Horaires d'ouverture",route:"opening-hours-management",description:"G\xE9rer les horaires du zoo"},{text:"Rapports v\xE9t\xE9rinaires",route:"veterinary-reports",description:"Consulter les rapports v\xE9t\xE9rinaires"},{text:"Historique des actions",route:"history-management",description:"Consulter l'historique des actions"}];activeRoute=A("");navigateTo(t){t===""?(this.activeRoute.set(""),this.router.navigate(["/admin"])):(this.activeRoute.set(t),this.router.navigate(["/admin",t]))}goBack(){this.router.navigate(["/"])}isActiveRoute(t){return this.activeRoute()===t}getIcon(t){return{Statistiques:"fa-chart-bar",Animaux:"fa-paw",Habitats:"fa-tree",Services:"fa-concierge-bell",Comptes:"fa-users","Horaires d'ouverture":"fa-clock","Rapports v\xE9t\xE9rinaires":"fa-stethoscope","Historique des actions":"fa-history"}[t]||"fa-circle"}static \u0275fac=function(e){return new(e||i)(E(ht))};static \u0275cmp=L({type:i,selectors:[["app-admin-dashboard"]],standalone:!0,features:[H],decls:19,vars:1,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","min-h-screen"],[1,"container","mx-auto","px-4","py-8"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","p-6","mb-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"group","relative","flex","flex-col","items-center","p-6","rounded-xl","transition-all","duration-300","hover:shadow-lg",3,"class"],[1,"flex","justify-center","mt-8"],[1,"group","flex","items-center","gap-3","px-8","py-3","bg-tertiary","text-white","rounded-full","hover:shadow-lg","hover:-translate-y-1","transition-all","duration-300",3,"click"],[1,"fas","fa-arrow-left","group-hover:-translate-x-1","transition-transform","duration-300"],[1,"group","relative","flex","flex-col","items-center","p-6","rounded-xl","transition-all","duration-300","hover:shadow-lg",3,"click"],[1,"w-12","h-12","rounded-full","bg-white/20","flex","items-center","justify-center","mb-3","group-hover:scale-110","transition-transform","duration-300"],[1,"font-medium","text-center"],[1,"absolute","-top-2","left-1/2","transform","-translate-x-1/2","-translate-y-full","opacity-0","group-hover:opacity-100","transition-all","duration-200","pointer-events-none"],[1,"bg-black/75","text-white","text-sm","px-4","py-2","rounded-lg","whitespace-nowrap"],[1,"w-3","h-3","bg-black/75","transform","rotate-45","translate-x-1/2","translate-y-1/2","mx-auto","-mt-1.5"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Tableau de Bord Administrateur "),c(),l(5,"p",4),u(6," G\xE9rez l'ensemble des fonctionnalit\xE9s du zoo "),c()(),l(7,"nav",5)(8,"div",6),z(9,P0,6,6,"button",7,O0),c()(),l(11,"div",5),k(12,H0,1,0,"app-stats")(13,R0,1,0,"router-outlet"),c(),l(14,"div",8)(15,"button",9),w("click",function(){return n.goBack()}),y(16,"i",10),l(17,"span"),u(18,"Retour accueil"),c()()()()()),e&2&&(h(9),X(n.navigationItems),h(3),P(n.activeRoute()?13:12))},dependencies:[Pn,Z,Ka],encapsulation:2})};var es=class i{constructor(t,e){this.http=t;this.animalService=e}apiUrl=`${he.apiUrl}/api/admin/animals`;getAllAnimals(){return this.http.get(this.apiUrl).pipe(pe(t=>this.handleError("chargement des animaux",t)))}createAnimal(t){return this.http.post(this.apiUrl,t).pipe(Qe(()=>this.animalService.clearCache()),pe(e=>this.handleError("cr\xE9ation de l'animal",e)))}updateAnimal(t,e){if(!t)return De(()=>new Error("ID invalide"));let n=new FormData;return e.forEach((a,s)=>{s==="images"&&a instanceof File?n.append("images",a):s!=="showTime"&&a!==null&&a!==void 0&&n.append(s,typeof a=="object"?JSON.stringify(a):String(a))}),console.log("Donn\xE9es \xE0 envoyer:",{id:t,name:n.get("name"),species:n.get("species")}),this.http.put(`${this.apiUrl}/${t}`,n).pipe(Qe(a=>{console.log("R\xE9ponse du serveur (mise \xE0 jour):",a),this.animalService.clearCache()}),pe(a=>(console.error("Erreur d\xE9taill\xE9e (mise \xE0 jour):",a),a.status===413?De(()=>new Error("Fichier trop volumineux")):this.handleError("mise \xE0 jour de l'animal",a))))}deleteAnimal(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(Qe(()=>this.animalService.clearCache()),pe(e=>this.handleError("suppression de l'animal",e)))}handleError(t,e){let n=`Erreur lors de ${t}: `;return e.error instanceof ErrorEvent?n+=`Une erreur est survenue: ${e.error.message}`:(n+=`Le serveur a retourn\xE9: ${e.status} - ${e.statusText}`,e.error?.message&&(n+=`
D\xE9tail: ${e.error.message}`)),console.error(n),De(()=>new Error(n))}static \u0275fac=function(e){return new(e||i)(oe(mt),oe(Di))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var dm=(i,t)=>t.id_habitat,G0=(i,t)=>t.id_animal;function $0(i,t){if(i&1){let e=N();l(0,"div",36),y(1,"img",37),l(2,"div",38)(3,"h4",39),u(4),c(),l(5,"p",40),u(6),c()(),l(7,"div",41)(8,"app-button",42),w("click",function(){let a=C(e).$implicit,s=f(3);return S(s.editAnimal(a.id_animal))})("keydown",function(){let a=C(e).$implicit,s=f(3);return S(s.editAnimal(a.id_animal))}),c(),l(9,"app-button",42),w("click",function(){let a=C(e).$implicit,s=f(3);return S(s.confirmDeleteAnimal(a.id_animal))})("keydown",function(){let a=C(e).$implicit,s=f(3);return S(s.confirmDeleteAnimal(a.id_animal))}),c()()()}if(i&2){let e=t.$implicit;h(),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(2),ie(e.species),h(2),x("text","Modifier")("color","tertiary")("rounded",!0)("customClass","px-3 py-1 text-sm"),h(),x("text","Supprimer")("color","danger")("rounded",!0)("customClass","px-3 py-1 text-sm")}}function z0(i,t){if(i&1&&(l(0,"div",34),z(1,$0,10,12,"div",36,G0),c()),i&2){let e=f().$implicit,n=f();h(),X(n.groupedAnimals()[e.id_habitat])}}function X0(i,t){i&1&&(l(0,"p",35),u(1," Aucun animal dans cet habitat "),c())}function W0(i,t){if(i&1&&(l(0,"div",6)(1,"div",32)(2,"h3",33),u(3),c(),k(4,z0,3,0,"div",34)(5,X0,2,0,"p",35),c()()),i&2){let e=t.$implicit,n=f();h(3),F(" ",e.name," "),h(),P(n.groupedAnimals()[e.id_habitat].length?4:5)}}function Y0(i,t){if(i&1&&(l(0,"option",17),u(1),c()),i&2){let e=t.$implicit;x("value",e.id_habitat),h(),ie(e.name)}}function q0(i,t){if(i&1){let e=N();l(0,"app-button",43),w("click",function(){C(e);let a=f();return S(a.cancel())})("keydown",function(){C(e);let a=f();return S(a.cancel())}),c()}i&2&&x("text","Annuler")("color","secondary")("rounded",!0)("customClass","px-6 min-w-[120px] text-lg font-medium")}var ts=class i{constructor(t,e,n,a,s){this.animalManagement=t;this.habitatService=e;this.countResourceService=n;this.toastService=a;this.fileSecurityService=s}animals=A([]);habitats=A([]);selectedHabitat=A(null);selectedFile=A(null);groupedAnimals=A({});visibleAnimals=A({});newAnimalData=A({});animalToDelete=null;imageBaseUrl=`${he.apiUrl}/api/uploads/animals`;filteredAnimals=fe(()=>this.animals().filter(t=>t.habitat_id===this.selectedHabitat()));ngOnInit(){this.loadHabitats(),this.loadAnimals()}loadHabitats(){this.habitatService.getHabitats().subscribe({next:t=>this.habitats.set(t),error:t=>{console.error("Erreur de chargement des habitats :",t),this.toastService.showError("Erreur lors du chargement des habitats")}})}loadAnimals(){this.animalManagement.getAllAnimals().subscribe({next:t=>{this.animals.set(t.map(e=>ue(U({},e),{showTime:!1,images:e.images}))),this.groupAnimals()},error:t=>{console.error("Erreur de chargement des animaux :",t),this.toastService.showError("Erreur lors du chargement des animaux")}})}onFileChange(t){let e=t.target;e.files&&e.files.length>0&&(this.selectedFile.set(e.files[0]),this.toastService.showSuccess("Image s\xE9lectionn\xE9e avec succ\xE8s"))}createAnimal(){if(this.validateAnimalData()){let t=this.buildFormData();this.animalManagement.createAnimal(t).subscribe({next:()=>{this.resetForm(),this.loadAnimals(),this.countResourceService.incrementTotalAnimals(),this.toastService.showSuccess("Animal cr\xE9\xE9 avec succ\xE8s")},error:e=>{console.error("Erreur de cr\xE9ation de l'animal :",e),this.toastService.showError("Erreur lors de la cr\xE9ation de l'animal")}})}else this.toastService.showError("Veuillez remplir tous les champs requis")}updateAnimal(){if(this.validateAnimalData(!0)){let t=this.buildFormData(),e=this.newAnimalData().id_animal.toString();this.animalManagement.updateAnimal(e,t).subscribe({next:n=>{n.name!==t.get("name")&&this.toastService.showWarning("Les donn\xE9es re\xE7ues diff\xE8rent des donn\xE9es envoy\xE9es");let a=ue(U({},n),{images:n.images??""});this.animals.update(s=>s.map(r=>r.id_animal===a.id_animal?a:r)),this.groupAnimals(),this.resetForm(),this.toastService.showSuccess("Animal mis \xE0 jour avec succ\xE8s")},error:n=>{console.error("Erreur lors de la mise \xE0 jour de l'animal:",n),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'animal")}})}else this.toastService.showError("Veuillez remplir tous les champs requis")}editAnimal(t){let e=this.animals().find(n=>n.id_animal===t);e&&(this.newAnimalData.set(U({},e)),this.toastService.showSuccess("Animal s\xE9lectionn\xE9 pour modification"))}deleteAnimal(t){let e=this.animals().find(a=>a.id_animal===t);if(!e)return;let n=`\xCAtes-vous s\xFBr de vouloir supprimer l'animal "${e.name}" ?`;confirm(n)?this.animalManagement.deleteAnimal(t.toString()).subscribe({next:()=>{this.animals.update(a=>a.filter(s=>s.id_animal!==t)),this.groupAnimals(),this.countResourceService.decrementTotalAnimals(),this.loadAnimals(),this.resetForm(),this.toastService.showSuccess("Animal supprim\xE9 avec succ\xE8s")},error:a=>{console.error("Erreur de suppression de l'animal :",a),this.toastService.showError("Erreur lors de la suppression de l'animal")}}):this.toastService.showSuccess("Suppression annul\xE9e")}resetForm(){this.newAnimalData.set({}),this.selectedFile.set(null)}cancel(){this.resetForm(),this.toastService.showSuccess("Formulaire r\xE9initialis\xE9")}toggleAnimal(t){if(!this.animals().find(a=>a.id_animal===t)){console.error("Animal non trouv\xE9:",t);return}let n=this.animals().map(a=>a.id_animal===t?ue(U({},a),{showTime:!a.showTime}):a);this.animals.set(n),this.groupAnimals()}toggleVisibility(t){this.visibleAnimals.update(e=>ue(U({},e),{[t]:!e[t]}))}isAnimalVisible(t){return this.visibleAnimals()[t.habitat_id]??!1}shouldShowFullDescription(t){let e=!!t.showTime;return console.log(`V\xE9rification description pour ${t.name}:`,e),e}validateAnimalData(t=!1){let e=[this.newAnimalData().name,this.newAnimalData().species,this.newAnimalData().habitat_id,this.newAnimalData().characteristics,this.newAnimalData().weightRange,this.newAnimalData().diet];return t&&e.push(this.newAnimalData().id_animal),e.every(n=>n!=null)}buildFormData(){let t=new FormData,e=this.newAnimalData();Object.entries(e).forEach(([a,s])=>{s!=null&&t.append(a,typeof s=="object"?JSON.stringify(s):String(s))});let n=this.selectedFile();return n&&t.append("images",n),t}groupAnimals(){let t=this.animals().reduce((e,n)=>(e[n.habitat_id]||(e[n.habitat_id]=[]),e[n.habitat_id].push(U({},n)),e),{});this.groupedAnimals.set(t)}onFileSelected(t){return Re(this,null,function*(){let e=t.target.files?.[0];if(e)try{let n=yield this.fileSecurityService.scan(e);if(!n.isSafe){this.toastService.showError(n.threats.join(`
`));return}this.selectedFile.set(e);let a=new FileReader;a.onload=()=>{this.newAnimalData.update(s=>ue(U({},s),{images:a.result}))},a.readAsDataURL(e),this.toastService.showSuccess("Image s\xE9lectionn\xE9e avec succ\xE8s")}catch(n){console.error("Erreur lors du traitement du fichier:",n),this.toastService.showError("Erreur lors du traitement du fichier")}})}confirmDeleteAnimal(t){this.animalToDelete=t}cancelDelete(){this.animalToDelete=null}deleteAnimalConfirmed(){this.animalToDelete!==null&&(this.deleteAnimal(this.animalToDelete),this.animalToDelete=null)}static \u0275fac=function(e){return new(e||i)(E(es),E(Rt),E(Gn),E(Me),E(jo))};static \u0275cmp=L({type:i,selectors:[["app-animal-management"]],standalone:!0,features:[H],decls:57,vars:12,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mb-12"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","overflow-hidden"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-semibold","text-tertiary","mb-6"],["enctype","multipart/form-data",1,"space-y-6",3,"ngSubmit"],["for","name",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","name","name","name","required","","placeholder","Nom de l'animal",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","species",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","species","name","species","required","","placeholder","Esp\xE8ce de l'animal",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","animal-habitat",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","animal-habitat","name","habitat_id","required","",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","characteristics",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","characteristics","name","characteristics","required","","rows","3","placeholder","Ex: sociable, actif, joueur",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","weight-range",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","text","id","weight-range","name","weightRange","required","","placeholder","Ex: 150 \xE0 300 kg",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["for","diet",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["id","diet","name","diet","required","",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"ngModelChange","ngModel"],["value","Herbivore"],["value","Carnivore"],["value","Omnivore"],["for","image",1,"block","text-lg","font-medium","text-tertiary","mb-2"],["type","file","id","image","accept","image/*",1,"w-full","p-3","border","border-secondary/30","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-transparent",3,"change"],[1,"flex","justify-end","space-x-4"],["type","button",3,"text","color","rounded","customClass"],["type","submit",3,"text","color","rounded","customClass"],[1,"p-4"],[1,"text-xl","font-serif","font-semibold","text-tertiary","mb-4"],[1,"space-y-4"],[1,"text-center","text-gray-500","italic"],[1,"flex","items-center","gap-4","p-2","rounded-lg","hover:bg-white/50","transition-colors"],[1,"w-16","h-16","object-cover","rounded-lg","shadow",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-base","font-semibold","text-tertiary","truncate"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],[3,"click","keydown","text","color","rounded","customClass"],["type","button",3,"click","keydown","text","color","rounded","customClass"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Gestion des Animaux "),c(),l(5,"p",4),u(6," G\xE9rez les animaux du zoo "),c()(),l(7,"div",5),z(8,W0,6,2,"div",6,dm),c(),l(10,"div",7)(11,"h3",8),u(12),c(),l(13,"form",9),w("ngSubmit",function(){return n.newAnimalData().id_animal?n.updateAnimal():n.createAnimal()}),l(14,"div")(15,"label",10),u(16," Nom de l'animal "),c(),l(17,"input",11),dt("ngModelChange",function(s){return ct(n.newAnimalData().name,s)||(n.newAnimalData().name=s),s}),c()(),l(18,"div")(19,"label",12),u(20," Esp\xE8ce "),c(),l(21,"input",13),dt("ngModelChange",function(s){return ct(n.newAnimalData().species,s)||(n.newAnimalData().species=s),s}),c()(),l(22,"div")(23,"label",14),u(24," Habitat "),c(),l(25,"select",15),dt("ngModelChange",function(s){return ct(n.newAnimalData().habitat_id,s)||(n.newAnimalData().habitat_id=s),s}),l(26,"option",16),u(27,"S\xE9lectionner un habitat"),c(),z(28,Y0,2,2,"option",17,dm),c()(),l(30,"div")(31,"label",18),u(32," Caract\xE9ristiques "),c(),l(33,"textarea",19),dt("ngModelChange",function(s){return ct(n.newAnimalData().characteristics,s)||(n.newAnimalData().characteristics=s),s}),c()(),l(34,"div")(35,"label",20),u(36," Fourchette de poids "),c(),l(37,"input",21),dt("ngModelChange",function(s){return ct(n.newAnimalData().weightRange,s)||(n.newAnimalData().weightRange=s),s}),c()(),l(38,"div")(39,"label",22),u(40," R\xE9gime alimentaire "),c(),l(41,"select",23),dt("ngModelChange",function(s){return ct(n.newAnimalData().diet,s)||(n.newAnimalData().diet=s),s}),l(42,"option",16),u(43,"S\xE9lectionner un r\xE9gime"),c(),l(44,"option",24),u(45,"Herbivore"),c(),l(46,"option",25),u(47,"Carnivore"),c(),l(48,"option",26),u(49,"Omnivore"),c()()(),l(50,"div")(51,"label",27),u(52," Image "),c(),l(53,"input",28),w("change",function(s){return n.onFileSelected(s)}),c()(),l(54,"div",29),k(55,q0,1,4,"app-button",30),y(56,"app-button",31),c()()()()()),e&2&&(h(8),X(n.habitats()),h(4),F(" ",n.newAnimalData().id_animal?"Modifier l'animal":"Ajouter un animal"," "),h(5),lt("ngModel",n.newAnimalData().name),h(4),lt("ngModel",n.newAnimalData().species),h(4),lt("ngModel",n.newAnimalData().habitat_id),h(3),X(n.habitats()),h(5),lt("ngModel",n.newAnimalData().characteristics),h(4),lt("ngModel",n.newAnimalData().weightRange),h(4),lt("ngModel",n.newAnimalData().diet),h(14),P(n.newAnimalData().id_animal?55:-1),h(),x("text",n.newAnimalData().id_animal?"Mettre \xE0 jour":"Cr\xE9er")("color","tertiary")("rounded",!0)("customClass","px-6 min-w-[120px] text-lg font-medium"))},dependencies:[Z,Li,Ke,ki,Ai,Ne,Si,Be,Ze,Xo,Rn,Go,Je,Ro,Ve],encapsulation:2})};var is=class i{constructor(t,e,n){this.fb=t;this.openingHoursService=e;this.toastService=n;this.hoursForm=this.createForm()}openingHours=A([]);parkStatus=A({isOpen:!0,message:""});hoursForm;openingHoursId=A(null);ngOnInit(){this.loadInitialData()}createForm(){return this.fb.group({weekdayHours:["",W.required],weekendHours:["",W.required],isWeekdayOpen:[!0],isWeekendOpen:[!0],parkStatus:[!0],statusMessage:[""]})}loadInitialData(){this.openingHoursService.getCurrentOpeningHours().subscribe({next:t=>{t&&(this.openingHours.set([t]),this.parkStatus.set({isOpen:t.parkStatus,message:t.statusMessage||""}),t._id?this.openingHoursId.set(t._id):console.warn("L'ID des horaires n'a pas \xE9t\xE9 retourn\xE9 par l'API."),this.patchForm(t))},error:t=>{console.error("Erreur lors du chargement des horaires:",t),this.toastService.showError("Erreur lors du chargement des horaires")}})}patchForm(t){let e=t.openingHours.find(a=>a.days.includes("Lundi")),n=t.openingHours.find(a=>a.days.includes("Samedi"));this.hoursForm.patchValue({weekdayHours:e?.hours??"",weekendHours:n?.hours??"",isWeekdayOpen:e?.isOpen??!0,isWeekendOpen:n?.isOpen??!0,parkStatus:t.parkStatus,statusMessage:t.statusMessage||""})}updateHours(){return Re(this,null,function*(){try{let t=yield this.openingHoursService.getOpeningHoursId();if(!t){console.error("L'ID des horaires est manquant."),this.toastService.showError("ID des horaires non d\xE9fini");return}if(this.hoursForm.invalid){console.error("Formulaire invalide:",this.hoursForm.errors),this.toastService.showError("Veuillez corriger les erreurs du formulaire");return}let e=this.prepareFormData(),n=yield Ct(this.openingHoursService.updateOpeningHours(t,e));n&&(this.openingHours.set([n]),this.patchForm(n),this.toastService.showSuccess("Horaires mis \xE0 jour avec succ\xE8s"))}catch(t){console.error("Erreur compl\xE8te lors de la mise \xE0 jour:",t),this.toastService.showError("Erreur lors de la mise \xE0 jour des horaires")}})}prepareFormData(){return{weekdayHours:this.hoursForm.get("weekdayHours")?.value||"",weekendHours:this.hoursForm.get("weekendHours")?.value||"",isWeekdayOpen:this.hoursForm.get("isWeekdayOpen")?.value??!0,isWeekendOpen:this.hoursForm.get("isWeekendOpen")?.value??!0,parkStatus:this.hoursForm.get("parkStatus")?.value??!0,statusMessage:this.hoursForm.get("statusMessage")?.value||""}}createNewHours(){return Re(this,null,function*(){let t=this.prepareFormData();console.log("Donn\xE9es pr\xE9par\xE9es pour cr\xE9ation:",t);try{let e=yield Ct(fi(this.openingHoursService.createOpeningHours(t)));if(e?._id)console.log("R\xE9ponse de cr\xE9ation:",e),this.openingHoursId.set(e._id),this.openingHours.set([e]),this.patchForm(e),this.toastService.showSuccess("Horaires cr\xE9\xE9s avec succ\xE8s");else throw new Error("La cr\xE9ation n'a pas retourn\xE9 d'ID valide.")}catch(e){console.error("Erreur lors de la cr\xE9ation des horaires:",e),this.toastService.showError("Erreur lors de la cr\xE9ation des horaires")}})}saveChanges(){return Re(this,null,function*(){try{if(!this.hoursForm.valid){this.toastService.showError("Veuillez remplir correctement tous les champs requis");return}this.openingHoursId()?yield this.updateHours():(console.log("Aucun ID trouv\xE9, cr\xE9ation de nouveaux horaires."),yield this.createNewHours())}catch(t){console.error("Erreur lors de la sauvegarde:",t),this.toastService.showError("Erreur lors de la sauvegarde des horaires")}})}ensureOpeningHoursExist(){return Re(this,null,function*(){try{return yield this.openingHoursService.getOpeningHoursId()}catch{let t={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""},e=yield Ct(fi(this.openingHoursService.createOpeningHours(t)));if(!e._id)throw new Error("L'ID des nouveaux horaires est manquant.");return e._id}})}getOpeningHoursId(){return Re(this,null,function*(){try{let t=this.openingHours();if(t&&t.length>0&&t[0]._id)return t[0]._id;{let e={weekdayHours:"9h00 - 18h00",weekendHours:"10h00 - 19h00",isWeekdayOpen:!0,isWeekendOpen:!0,parkStatus:!0,statusMessage:""};return(yield Ct(fi(this.openingHoursService.createOpeningHours(e))))._id}}catch(t){throw console.error("Erreur lors de la r\xE9cup\xE9ration ou de la cr\xE9ation des horaires:",t),new Error("Aucun ID trouv\xE9 pour les horaires")}})}static \u0275fac=function(e){return new(e||i)(E(gt),E(Mi),E(Me))};static \u0275cmp=L({type:i,selectors:[["app-opening-hours-management"]],standalone:!0,features:[H],decls:43,vars:1,consts:[[1,"bg-white","rounded-xl","shadow-lg","p-6"],[1,"text-2xl","font-serif","font-bold","text-tertiary","mb-6","flex","items-center"],[1,"far","fa-clock","mr-3"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-secondary/10","rounded-lg","p-4","space-y-4"],[1,"text-lg","font-serif","font-semibold","text-tertiary"],[1,"space-y-4"],[1,"flex","flex-col","space-y-2"],["type","text","formControlName","weekdayHours","placeholder","ex: 9h00 - 18h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","items-center"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isWeekdayOpen",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-tertiary/30","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-tertiary"],[1,"ms-3","text-sm","font-medium","text-quinary"],["type","text","formControlName","weekendHours","placeholder","ex: 10h00 - 19h00",1,"p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],["type","checkbox","formControlName","isWeekendOpen",1,"sr-only","peer"],["type","checkbox","formControlName","parkStatus",1,"sr-only","peer"],["type","text","formControlName","statusMessage","placeholder","Message de statut (optionnel)",1,"w-full","p-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-tertiary"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-2","bg-tertiary","text-white","rounded-lg","hover:bg-tertiary/90","transition"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h2",1),y(2,"i",2),u(3," Gestion des horaires d'ouverture "),c(),l(4,"form",3),w("ngSubmit",function(){return n.saveChanges()}),l(5,"div",4)(6,"h3",5),u(7," Horaires en semaine "),c(),l(8,"div",6)(9,"div",7),y(10,"input",8),l(11,"div",9)(12,"label",10),y(13,"input",11)(14,"div",12),l(15,"span",13),u(16,"Ouvert"),c()()()()()(),l(17,"div",4)(18,"h3",5),u(19," Horaires weekend "),c(),l(20,"div",6)(21,"div",7),y(22,"input",14),l(23,"div",9)(24,"label",10),y(25,"input",15)(26,"div",12),l(27,"span",13),u(28,"Ouvert"),c()()()()()(),l(29,"div",4)(30,"h3",5),u(31," Statut du parc "),c(),l(32,"div",6)(33,"div",9)(34,"label",10),y(35,"input",16)(36,"div",12),l(37,"span",13),u(38,"Parc ouvert"),c()()(),y(39,"input",17),c()(),l(40,"div",18)(41,"button",19),u(42," Enregistrer les modifications "),c()()()()),e&2&&(h(4),x("formGroup",n.hoursForm))},dependencies:[Je,Ke,Ne,Hn,Be,Ze,ut,pt],encapsulation:2})};var j0=(i,t)=>t.id_feeding;function U0(i,t){i&1&&(l(0,"div",1)(1,"p",3),u(2," Aucun historique disponible pour cet animal. "),c(),l(3,"p",4),u(4," Les repas enregistr\xE9s appara\xEEtront ici. "),c()())}function Q0(i,t){if(i&1&&(l(0,"div",17)(1,"p",18)(2,"span",19),M(),l(3,"svg",14),y(4,"path",20),c()(),u(5),c()()),i&2){let e=f().$implicit;h(5),F(' "',e.notes,'" ')}}function Z0(i,t){if(i&1&&(l(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),u(5),Xe(6,"titlecase"),c(),l(7,"span",10),u(8),c()(),l(9,"div",11)(10,"p",12)(11,"span",13),M(),l(12,"svg",14),y(13,"path",15),c()(),u(14),Xe(15,"date"),c(),ze(),l(16,"p",12)(17,"span",13),M(),l(18,"svg",14),y(19,"path",16),c()(),u(20),c()()()(),k(21,Q0,6,1,"div",17),c()),i&2){let e=t.$implicit;h(5),F(" ",In(6,6,e.food_type)," "),h(3),Ki(" ",e.quantity," ",e.unit," "),h(6),F(" ",Ot(15,8,e.feeding_date,"dd/MM/yyyy HH:mm")," "),h(6),F(" ",e.user_name," "),h(),P(e.notes?21:-1)}}function K0(i,t){if(i&1&&(l(0,"div",2),z(1,Z0,22,11,"div",5,j0),c()),i&2){let e=f();h(),X(e.feedingHistory())}}var ns=class i{animalId;feedingService=G($n);destroyRef=G(_i);feedingHistory=A([]);ngOnInit(){this.loadHistory()}ngOnChanges(t){t.animalId&&!t.animalId.firstChange&&this.loadHistory()}loadHistory(){return Re(this,null,function*(){try{this.feedingHistory.set([]);let t=yield Ct(this.feedingService.getFeedingHistory(this.animalId).pipe(Fi(this.destroyRef)));this.feedingHistory.set(t)}catch(t){console.error("Erreur lors du chargement de l'historique:",t),this.feedingHistory.set([])}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-feeding-history-vet"]],inputs:{animalId:"animalId"},standalone:!0,features:[Fe,H],decls:3,vars:1,consts:[[1,"pr-3","custom-scrollbar","max-h-[70vh]","overflow-y-auto"],[1,"flex","flex-col","items-center","justify-center","py-8","bg-white/80","rounded-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"text-gray-600","text-lg","font-medium"],[1,"text-gray-500","text-sm","mt-2"],[1,"bg-white/90","rounded-xl","p-4","shadow-md","border-l-4","border-l-tertiary","border","border-secondary/10","transition-all","duration-200","hover:shadow-lg"],[1,"flex","flex-col","gap-3"],[1,"flex-1","space-y-2"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"font-medium","text-quinary","text-lg"],[1,"bg-tertiary/10","text-tertiary","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"space-y-1"],[1,"text-sm","text-gray-600","flex","items-center","gap-2"],[1,"w-4","h-4","inline-block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"text-sm","text-gray-600","italic","flex","items-start","gap-2"],[1,"w-4","h-4","inline-block","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"]],template:function(e,n){e&1&&(l(0,"div",0),k(1,U0,5,0,"div",1)(2,K0,3,0,"div",2),c()),e&2&&(h(),P(n.feedingHistory().length===0?1:2))},dependencies:[Z,Eo,It],styles:["[_nghost-%COMP%]{display:block}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#557a46 #e2e8f0}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e2e8f0;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#557a46;border-radius:10px}"]})};var Ut=class i{constructor(t,e){this.http=t;this.tokenService=e}apiUrl=`${he.apiUrl}/api/veterinary/habitat-comments`;getHeaders(){let t=this.tokenService.getToken();return new Do({"Content-Type":"application/json",Authorization:`Bearer ${t}`})}getCommentsByHabitatId(t){return console.log("R\xE9cup\xE9ration des commentaires pour habitat:",t),this.http.get(`${this.apiUrl}/${t}`,{headers:this.getHeaders()}).pipe(Qe(e=>{console.log("Commentaires re\xE7us:",e)}),pe(e=>(console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",e),De(()=>e))))}createHabitatComment(t){let e=this.tokenService.getToken(),n=e?JSON.parse(atob(e.split(".")[1])):null;if(console.log("Token d\xE9cod\xE9:",n),!n)return De(()=>new Error("Token non valide"));let a=ue(U({},t),{id_user:n.sub,user_name:n.username||n.name});return console.log("Donn\xE9es du commentaire \xE0 envoyer:",a),this.http.post(this.apiUrl,a,{headers:this.getHeaders()}).pipe(Qe(s=>{console.log("R\xE9ponse du serveur:",s)}),pe(s=>(console.error("Erreur lors de la cr\xE9ation du commentaire:",s),De(()=>new Error("Erreur lors de la cr\xE9ation du commentaire")))))}getAllComments(){return console.log("R\xE9cup\xE9ration de tous les commentaires"),this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(Qe(t=>{console.log("Tous les commentaires charg\xE9s:",t)}),pe(t=>(console.error("Erreur lors du chargement des commentaires:",t),De(()=>t))))}static \u0275fac=function(e){return new(e||i)(oe(mt),oe(kt))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var J0=(i,t)=>t.id_habitat,hm=(i,t,e)=>({"bg-green-500":i,"bg-yellow-500":t,"bg-red-500":e}),ex=(i,t,e)=>({"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e});function tx(i,t){i&1&&(l(0,"p",6),u(1," Aucun commentaire pour cet habitat. "),c())}function ix(i,t){i&1&&(l(0,"div",17),M(),l(1,"svg",24),y(2,"path",25),c(),ze(),l(3,"span"),u(4,"R\xE9gl\xE9"),c()())}function nx(i,t){i&1&&(l(0,"div",18),M(),l(1,"svg",24),y(2,"path",26),c(),ze(),l(3,"span"),u(4,"En attente"),c()())}function ax(i,t){if(i&1&&(l(0,"div",23),u(1),Xe(2,"date"),c()),i&2){let e=f().$implicit;h(),Ki(" R\xE9solu par ",e.resolved_by," le ",Ot(2,2,e.resolved_at,"dd/MM/yyyy")," ")}}function sx(i,t){if(i&1&&(l(0,"div",9),y(1,"div",10),l(2,"div",11)(3,"div",12)(4,"div",13),u(5),Xe(6,"date"),c()(),l(7,"div",14)(8,"div",15),y(9,"span",16),u(10),c(),k(11,ix,5,0,"div",17)(12,nx,5,0,"div",18),c()(),l(13,"p",19),u(14),c(),l(15,"div",20)(16,"div",21),u(17," Par: "),l(18,"span",22),u(19),c()(),k(20,ax,3,5,"div",23),c()()),i&2){let e=t.$implicit;h(),x("ngClass",Ji(12,hm,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),h(4),F(" ",Ot(6,9,e.createdAt,"dd/MM/yyyy \xE0 HH:mm")," "),h(3),x("ngClass",Ji(16,ex,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),h(),x("ngClass",Ji(20,hm,e.habitat_status==="Optimal",e.habitat_status==="Acceptable",e.habitat_status==="N\xE9cessite des am\xE9liorations")),h(),F(" ",e.habitat_status," "),h(),P(e.is_resolved?11:12),h(3),F(" ",e.comment," "),h(5),ie(e.user_name),h(),P(e.is_resolved?20:-1)}}function rx(i,t){if(i&1&&z(0,sx,21,24,"div",9,J0),i&2){let e=f();X(e.comments())}}var as=class i{constructor(t){this.habitatCommentService=t}habitatId;habitatImage;habitatName;close=new R;comments=A([]);ngOnInit(){this.loadComments()}onClose(){this.close.emit()}loadComments(){this.habitatCommentService.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{this.comments.set(t)},error:t=>{console.error("Erreur lors du chargement des commentaires:",t)}})}static \u0275fac=function(e){return new(e||i)(E(Ut))};static \u0275cmp=L({type:i,selectors:[["app-habitat-comment-history"]],inputs:{habitatId:"habitatId",habitatImage:"habitatImage",habitatName:"habitatName"},outputs:{close:"close"},standalone:!0,features:[H],decls:13,vars:8,consts:[[1,"w-full","max-w-6xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"flex","items-center","gap-4","mb-8"],[1,"w-24","h-24","rounded-xl","object-cover","shadow-md",3,"src","alt"],[1,"text-2xl","sm:text-3xl","font-serif","font-bold","text-tertiary"],[1,"text-lg","text-quinary/70","font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"col-span-full","text-center","text-tertiary/70","py-8"],[1,"flex","justify-center","mt-8"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","text","type","color","rounded"],[1,"bg-white","rounded-xl","shadow-md","hover:shadow-lg","transition-all","duration-300","p-4","relative","overflow-hidden"],[1,"absolute","top-0","left-0","right-0","h-1",3,"ngClass"],[1,"flex","justify-between","items-start","mt-2"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-tertiary/80","font-medium"],[1,"flex","flex-col","items-end","gap-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","flex","items-center","gap-1",3,"ngClass"],[1,"w-1.5","h-1.5","rounded-full",3,"ngClass"],[1,"flex","items-center","gap-1.5","bg-green-50","text-green-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-1.5","bg-red-50","text-red-700","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-quinary/80","my-4","line-clamp-3"],[1,"flex","justify-between","items-end"],[1,"text-sm","text-tertiary/70"],[1,"font-medium"],[1,"text-xs","text-gray-500","italic"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3.5","w-3.5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zm-1 8a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1),y(2,"img",2),l(3,"div")(4,"h2",3),u(5," Historique des commentaires sur les habitats "),c(),l(6,"p",4),u(7),c()()(),l(8,"div",5),k(9,tx,2,0,"p",6)(10,rx,2,0),c(),l(11,"div",7)(12,"app-button",8),w("click",function(){return n.onClose()}),c()()()),e&2&&(h(2),x("src",n.habitatImage,Ce)("alt",n.habitatName),h(5),F(" ",n.habitatName," "),h(2),P(n.comments().length===0?9:10),h(3),x("text","Fermer")("type","button")("color","secondary")("rounded",!0))},dependencies:[Z,ko,It,Ve],encapsulation:2})};function ox(i,t){if(i&1&&(l(0,"option",6),u(1),c()),i&2){let e=t.$implicit;x("value",e),h(),ie(e)}}function lx(i,t){if(i&1&&y(0,"app-toast",10),i&2){let e=f();x("message",e.toastMessage())("type",e.toastType())}}var ss=class i{constructor(t){this.habitatComments=t}habitatId;commentAdded=new R;habitatsComments=A([]);isToastVisible=A(!1);toastMessage=A("");toastType=A("success");newHabitatCommentData={habitat_status:"Optimal",comment:"",id_habitat:0};statusOptions=["Optimal","Acceptable","N\xE9cessite des am\xE9liorations"];commentStatusService=G(Uo);statusSubscription;ngOnInit(){this.habitatId&&(this.newHabitatCommentData.id_habitat=this.habitatId,this.loadHabitatsComments()),this.statusSubscription=this.commentStatusService.commentStatusChanged$.subscribe(t=>{console.log("Mise \xE0 jour du commentaire re\xE7ue dans le composant v\xE9t\xE9rinaire:",t),this.loadHabitatsComments(),this.showToast(`Commentaire ${t.is_resolved?"marqu\xE9 comme r\xE9gl\xE9":"r\xE9ouvert"}`,"success")})}ngOnDestroy(){this.statusSubscription&&this.statusSubscription.unsubscribe()}loadHabitatsComments(){this.habitatComments.getCommentsByHabitatId(this.habitatId).subscribe({next:t=>{console.log("Commentaires re\xE7us pour l'habitat:",t);let e=[...t].sort((n,a)=>new Date(a.createdAt).getTime()-new Date(n.createdAt).getTime());this.habitatsComments.set(e)},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration des commentaires:",t)})}submitComment(){if(console.log("Donn\xE9es \xE0 envoyer:",this.newHabitatCommentData),!this.newHabitatCommentData.comment||!this.newHabitatCommentData.id_habitat){this.showToast("Veuillez remplir tous les champs","error");return}this.habitatComments.createHabitatComment(this.newHabitatCommentData).subscribe({next:t=>{console.log("Commentaire cr\xE9\xE9:",t),this.loadHabitatsComments(),this.newHabitatCommentData={id_habitat:this.habitatId,habitat_status:"Optimal",comment:""},this.showToast("Commentaire ajout\xE9 avec succ\xE8s","success")},error:t=>{console.error("Erreur lors de l'ajout du commentaire:",t),this.showToast("Erreur lors de l'ajout du commentaire","error")}})}showToast(t,e){this.toastMessage.set(t),this.toastType.set(e),this.isToastVisible.set(!0),setTimeout(e==="success"?()=>{this.isToastVisible.set(!1),this.commentAdded.emit()}:()=>{this.isToastVisible.set(!1)},3e3)}static \u0275fac=function(e){return new(e||i)(E(Ut))};static \u0275cmp=L({type:i,selectors:[["app-habitat-comment"]],inputs:{habitatId:"habitatId"},outputs:{commentAdded:"commentAdded"},standalone:!0,features:[H],decls:17,vars:6,consts:[[1,"bg-white","rounded-lg","shadow-lg","p-6"],[1,"mb-8"],[1,"text-xl","font-semibold","mb-4","text-tertiary"],[1,"space-y-4"],["for","habitat-status",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","habitat-status",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"value"],["for","habitat-comment",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","habitat-comment","rows","3",1,"w-full","p-2","border","rounded-lg","focus:ring-2","focus:ring-tertiary","focus:border-tertiary",3,"ngModelChange","ngModel"],[3,"click","keydown.enter","color","text","rounded"],[3,"message","type"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Ajouter un commentaire "),c(),l(4,"div",3)(5,"div")(6,"label",4),u(7,"\xC9tat de l'habitat"),c(),l(8,"select",5),dt("ngModelChange",function(s){return ct(n.newHabitatCommentData.habitat_status,s)||(n.newHabitatCommentData.habitat_status=s),s}),z(9,ox,2,2,"option",6,ot),c()(),l(11,"div")(12,"label",7),u(13,"Commentaire"),c(),l(14,"textarea",8),dt("ngModelChange",function(s){return ct(n.newHabitatCommentData.comment,s)||(n.newHabitatCommentData.comment=s),s}),c()(),l(15,"app-button",9),w("click",function(){return n.submitComment()})("keydown.enter",function(){return n.submitComment()}),c()()(),k(16,lx,1,2,"app-toast",10),c()),e&2&&(h(8),lt("ngModel",n.newHabitatCommentData.habitat_status),h(),X(n.statusOptions),h(5),lt("ngModel",n.newHabitatCommentData.comment),h(),x("color","tertiary")("text","Ajouter le commentaire")("rounded",!0),h(),P(n.isToastVisible()?16:-1))},dependencies:[Z,Li,ki,Ai,Ne,Si,Be,Rn,Ve,Ht],encapsulation:2})};var rs=(n=>(n.GOOD_HEALTH="Bonne sant\xE9",n.INJURED="Bless\xE9",n.SICK="Malade",n))(rs||{});var os=class i{apiUrl=`${he.apiUrl}/api/veterinary/animal-health`;http=G(mt);updateAnimalHealth(t,e){return this.http.patch(`${this.apiUrl}/${t}`,{state:e})}getAnimalHealth(t){return this.http.get(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};function cx(i,t){if(i&1){let e=N();l(0,"app-button",5),w("click",function(){let a=C(e).$implicit,s=f();return S(s.setActiveTab(a.id))})("keyup",function(){let a=C(e).$implicit,s=f();return S(s.setActiveTab(a.id))}),c()}if(i&2){let e=t.$implicit,n=f();x("text",e.label)("color",n.activeTab===e.id?"tertiary":"secondary")("customClass","flex-1 py-2 px-4 rounded-lg text-sm font-medium hover:opacity-90 transition-all")}}function dx(i,t){if(i&1&&(l(0,"p",10),u(1),c()),i&2){let e=f().$implicit;h(),F(" ",e.notes," ")}}function mx(i,t){if(i&1&&(l(0,"div",7)(1,"p",8),u(2),Xe(3,"date"),c(),l(4,"p",9),u(5),c(),k(6,dx,2,1,"p",10),c()),i&2){let e=t.$implicit;h(2),F(" ",Ot(3,5,e.date,"dd/MM/yyyy HH:mm")," "),h(3),ws(" ",e.food_type," - ",e.quantity,"",e.unit," "),h(),P(e.notes?6:-1)}}function hx(i,t){if(i&1&&(l(0,"section",4)(1,"h2",6),u(2," Historique des repas "),c(),z(3,mx,7,8,"div",7,ot),c()),i&2){let e=f();h(3),X(e.feedingHistory())}}function ux(i,t){if(i&1&&(l(0,"p",12),u(1),c()),i&2){let e=f().$implicit;h(),F(' "',e.additional_details,'" ')}}function px(i,t){if(i&1&&(l(0,"div",7)(1,"p",8),u(2),Xe(3,"date"),c(),l(4,"p",9),u(5),c(),l(6,"span"),u(7),c(),l(8,"p",11),u(9),c(),k(10,ux,2,1,"p",12),c()),i&2){let e=t.$implicit,n=f(2);h(2),F(" ",Ot(3,9,e.visit_date,"dd/MM/yyyy HH:mm")," "),h(3),F("Dr. ",e.user_name,""),h(),Ie(n.getStateClass(e.animal_state)),h(),ie(e.animal_state),h(2),ws(" Alimentation recommand\xE9e: ",e.recommended_food_type," - ",e.recommended_food_quantity,"",e.food_unit," "),h(),P(e.additional_details?10:-1)}}function gx(i,t){if(i&1&&(l(0,"section",4)(1,"h2",6),u(2," Rapports v\xE9t\xE9rinaires "),c(),z(3,px,11,12,"div",7,ot),c()),i&2){let e=f();h(3),X(e.veterinaryReports())}}function fx(i,t){if(i&1&&(l(0,"option",21),u(1),c()),i&2){let e=t.$implicit;x("value",e),h(),ie(e)}}function xx(i,t){if(i&1&&(l(0,"option",21),u(1),c()),i&2){let e=t.$implicit;x("value",e),h(),ie(e)}}function _x(i,t){if(i&1){let e=N();l(0,"section")(1,"h2",6),u(2," Nouveau rapport v\xE9t\xE9rinaire "),c(),l(3,"form",13),w("ngSubmit",function(){C(e);let a=f();return S(a.onSubmit())}),l(4,"div")(5,"label",14),u(6," Animal "),c(),l(7,"div",15),u(8),c()(),l(9,"div")(10,"label",16),u(11," Date de visite "),c(),y(12,"input",17),c(),l(13,"div")(14,"label",18),u(15," \xC9tat de sant\xE9 de l'animal "),c(),l(16,"select",19)(17,"option",20),u(18,"S\xE9lectionner un \xE9tat"),c(),z(19,fx,2,2,"option",21,ot),c()(),l(21,"fieldset",22)(22,"legend",23),u(23," Recommandations alimentaires "),c(),l(24,"div")(25,"label",24),u(26," Type d'alimentation "),c(),y(27,"input",25),c(),l(28,"div",26)(29,"div",27)(30,"label",28),u(31," Quantit\xE9 "),c(),y(32,"input",29),c(),l(33,"div",30)(34,"label",31),u(35," Unit\xE9 "),c(),l(36,"select",32)(37,"option",20),u(38,"Unit\xE9"),c(),z(39,xx,2,2,"option",21,ot),c()()()(),l(41,"div")(42,"label",33),u(43," Observations "),c(),y(44,"textarea",34),c(),l(45,"div",35)(46,"button",36),w("click",function(){C(e);let a=f();return S(a.closeModal())}),u(47," Annuler "),c(),l(48,"button",37),u(49),c()()()()}if(i&2){let e,n=f();h(3),x("formGroup",n.reportForm),h(5),F(" ",(e=n.reportForm.get("animal_name"))==null?null:e.value," "),h(11),X(n.animalStates),h(20),X(n.foodUnits),h(9),x("disabled",!n.reportForm.valid||n.isSubmitting()),h(),F(" ",n.isSubmitting()?"Enregistrement...":"Enregistrer"," ")}}var ls=class i{animalId;close=new R;reportForm;isModalOpen=!0;activeTab="veterinary";veterinaryReports=A([]);feedingHistory=A([]);animalStates=Object.values(rs);foodUnits=["kg","g"];tabs=[{id:"feeding",label:"Historique des repas"},{id:"veterinary",label:"Rapports v\xE9t\xE9rinaires"},{id:"new",label:"Nouveau rapport"}];AnimalState=rs;selectedState=A("Bonne sant\xE9");selectedAnimalId=A(null);isSubmitting=A(!1);fb=G(gt);veterinaryReportsService=G(Qo);authService=G(be);toastService=G(Me);animalHealthService=G(os);ngOnInit(){this.initForm(),this.animalId&&(this.selectedAnimalId.set(this.animalId),this.loadAnimalDetails(),this.loadVeterinaryReports(),this.loadFeedingHistory())}initForm(){this.reportForm=this.fb.group({id_animal:[null,W.required],animal_name:["",W.required],visit_date:[new Date,W.required],animal_state:["",W.required],recommended_food_type:["",W.required],recommended_food_quantity:[null,[W.required,W.min(0)]],food_unit:["",W.required],additional_details:[""]})}loadAnimalDetails(){this.veterinaryReportsService.fetchAnimalDetails(this.animalId).subscribe({next:t=>{t&&this.reportForm.patchValue({id_animal:t.id_animal,animal_name:t.name,animal_photo:t.images})},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration de l'animal:",t)})}loadVeterinaryReports(){this.animalId&&this.veterinaryReportsService.getReportsByAnimalId(this.animalId).subscribe({next:t=>{t&&t.length>0?this.veterinaryReports.set(t):this.veterinaryReports.set([])},error:t=>{console.error("Erreur lors du chargement des rapports:",t),this.toastService.showError("Erreur lors du chargement des rapports v\xE9t\xE9rinaires"),this.veterinaryReports.set([])}})}loadFeedingHistory(){this.animalId&&this.feedingHistory.set([])}getStateClass(t){let e="px-3 py-1 rounded-full text-sm font-semibold";switch(t.toLowerCase()){case"Bonne sant\xE9".toLowerCase():return`${e} bg-green-100 text-green-800`;case"Bless\xE9".toLowerCase():return`${e} bg-yellow-100 text-yellow-800`;case"Malade".toLowerCase():return`${e} bg-red-100 text-red-800`;default:return`${e} bg-gray-100 text-gray-800`}}closeModal(){this.close.emit()}onSubmit(){if(this.reportForm.valid){this.isSubmitting.set(!0);let t=this.authService.user();if(!t?.id){console.error("Utilisateur non connect\xE9");return}let e=ue(U({},this.reportForm.value),{id_user:t.id,user_name:t.name,animal_state:this.reportForm.value.animal_state});this.veterinaryReportsService.createReport(e).subscribe({next:n=>{console.log("Rapport cr\xE9\xE9 avec succ\xE8s",n),this.isSubmitting.set(!1),new Promise(s=>{this.toastService.showSuccess("Rapport v\xE9t\xE9rinaire enregistr\xE9 avec succ\xE8s"),setTimeout(s,3e3)}).then(()=>{this.closeModal()})},error:()=>{this.isSubmitting.set(!1),this.toastService.showError("Erreur lors de l'enregistrement du rapport")}})}}updateHealthState(){if(!this.selectedAnimalId()){this.toastService.showError("Veuillez s\xE9lectionner un animal");return}this.animalHealthService.updateAnimalHealth(this.selectedAnimalId(),this.selectedState()).subscribe({next:()=>{this.toastService.showSuccess("\xC9tat de sant\xE9 mis \xE0 jour avec succ\xE8s")},error:t=>{console.error("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9:",t),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9")}})}updateAnimalState(t){this.animalId&&this.animalHealthService.updateAnimalHealth(this.animalId,t).subscribe({next:()=>{this.toastService.showSuccess("\xC9tat de sant\xE9 mis \xE0 jour avec succ\xE8s"),this.loadVeterinaryReports()},error:e=>{console.error("Erreur lors de la mise \xE0 jour:",e),this.toastService.showError("Erreur lors de la mise \xE0 jour de l'\xE9tat de sant\xE9")}})}setActiveTab(t){this.activeTab=t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-veterinary-reports"]],inputs:{animalId:"animalId"},outputs:{close:"close"},standalone:!0,features:[H],decls:8,vars:1,consts:[[1,"max-w-xl","mx-auto"],[1,"flex","gap-2","mb-6"],[3,"text","color","customClass"],[1,"bg-white","p-4","rounded-lg","shadow-sm"],[1,"space-y-3"],[3,"click","keyup","text","color","customClass"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"p-3","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600"],[1,"font-medium"],[1,"mt-1","text-sm","text-gray-600"],[1,"mt-2","text-sm","font-medium"],[1,"mt-1","text-sm","text-gray-600","italic"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","animal-name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"p-2","bg-gray-100","rounded-md","text-sm"],["for","visit-date",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","visit-date","type","date","formControlName","visit_date",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["for","animal-state",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","animal-state","formControlName","animal_state",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["value",""],[3,"value"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700"],["for","food-type",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-type","type","text","formControlName","recommended_food_type","placeholder","Type d'alimentation recommand\xE9",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"flex","gap-2"],[1,"w-2/3"],["for","food-quantity",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-quantity","type","number","formControlName","recommended_food_quantity","placeholder","Quantit\xE9",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"w-1/3"],["for","food-unit",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","food-unit","formControlName","food_unit",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],["for","observations",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","observations","formControlName","additional_details","rows","3","placeholder","Ajoutez des observations...",1,"w-full","p-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"flex","justify-end","gap-2"],["type","button",1,"px-4","py-2","text-sm","rounded-md","bg-secondary","text-white","hover:bg-opacity-90","transition-all",3,"click"],["type","submit",1,"px-4","py-2","text-sm","rounded-md","bg-tertiary","text-white","hover:bg-opacity-90","transition-all","disabled:opacity-50",3,"disabled"]],template:function(e,n){if(e&1&&(l(0,"div",0)(1,"nav",1),z(2,cx,1,3,"app-button",2,ot),c(),l(4,"div",3),k(5,hx,5,0,"section",4)(6,gx,5,0,"section",4)(7,_x,50,4,"section"),c()()),e&2){let a;h(2),X(n.tabs),h(3),P((a=n.activeTab)==="feeding"?5:a==="veterinary"?6:a==="new"?7:-1)}},dependencies:[Z,It,Li,Ke,ki,Ai,Ne,zo,Si,Be,Ze,Je,ut,pt,Ve],encapsulation:2})};var vx=(i,t)=>t.id_animal,yx=(i,t)=>t.id_habitat;function bx(i,t){if(i&1){let e=N();l(0,"div",13)(1,"div",25),y(2,"img",26)(3,"div",27),l(4,"h3",28),u(5),c()(),l(6,"div",29)(7,"table",30)(8,"thead")(9,"tr")(10,"th",31),u(11," Caract\xE9ristique "),c(),l(12,"th",32),u(13,"D\xE9tail"),c()()(),l(14,"tbody")(15,"tr")(16,"td",33),u(17,"Esp\xE8ce:"),c(),l(18,"td",34),u(19),c()(),l(20,"tr")(21,"td",33),u(22,"R\xE9gime:"),c(),l(23,"td",34),u(24),c()(),l(25,"tr")(26,"td",33),u(27,"Habitat:"),c(),l(28,"td",35),u(29),c()()()(),l(30,"div",36)(31,"app-button",37),w("click",function(){let a=C(e).$implicit,s=f(2);return S(s.openVetReportsHistory(a.id_animal))})("keydown",function(){let a=C(e).$implicit,s=f(2);return S(s.openVetReportsHistory(a.id_animal))}),c(),l(32,"app-button",37),w("click",function(){let a=C(e).$implicit,s=f(2);return S(s.openFeedingHistory(a.id_animal))})("keydown",function(){let a=C(e).$implicit,s=f(2);return S(s.openFeedingHistory(a.id_animal))}),c()()()()}if(i&2){let e=t.$implicit,n=f(2);h(2),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(14),ie(e.species),h(5),ie(e.diet),h(5),F(" ",n.getHabitatName(e.habitat_id)," "),h(2),x("text","Rapports")("color","tertiary")("rounded",!0),h(),x("text","Historique")("color","secondary")("rounded",!0)}}function wx(i,t){if(i&1){let e=N();l(0,"div",16)(1,"div",38),y(2,"img",26)(3,"div",27),l(4,"h3",28),u(5),c()(),l(6,"div",39)(7,"app-button",37),w("click",function(){let a=C(e).$implicit,s=f(2);return S(s.selectHabitat(a.id_habitat))})("keydown",function(){let a=C(e).$implicit,s=f(2);return S(s.selectHabitat(a.id_habitat))}),c(),l(8,"app-button",37),w("click",function(){let a=C(e).$implicit,s=f(2);return S(s.viewHabitatComments(a.id_habitat))})("keydown",function(){let a=C(e).$implicit,s=f(2);return S(s.viewHabitatComments(a.id_habitat))}),c()()()}if(i&2){let e=t.$implicit;h(2),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(2),x("text","Commentaire")("color","tertiary")("rounded",!0),h(),x("text","Historique")("color","secondary")("rounded",!0)}}function Tx(i,t){if(i&1&&(l(0,"div",46),y(1,"app-feeding-history-vet",24),c()),i&2){let e=f(3);h(),x("animalId",e.selectedAnimalId())}}function Cx(i,t){if(i&1&&(l(0,"div",47),y(1,"app-veterinary-reports",24),c()),i&2){let e=f(3);h(),x("animalId",e.selectedAnimalId())}}function Sx(i,t){if(i&1){let e=N();l(0,"div",40)(1,"div",41)(2,"app-button",42),w("click",function(){C(e);let a=f(2);return S(a.toggleHistoryView(!1))})("keydown",function(){C(e);let a=f(2);return S(a.toggleHistoryView(!1))}),c(),l(3,"app-button",42),w("click",function(){C(e);let a=f(2);return S(a.toggleHistoryView(!0))})("keydown",function(){C(e);let a=f(2);return S(a.toggleHistoryView(!0))}),c()(),l(4,"button",43),w("click",function(){C(e);let a=f(2);return S(a.closeHistoryModal())}),M(),l(5,"svg",44),y(6,"path",45),c()()(),k(7,Tx,2,1,"div",46)(8,Cx,2,1,"div",47)}if(i&2){let e=f(2);h(2),x("text","Historique des repas")("color",e.showVetReports()?"secondary":"tertiary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),h(),x("text","Rapports v\xE9t\xE9rinaires")("color",e.showVetReports()?"tertiary":"secondary")("rounded",!0)("customClass","transform hover:-translate-y-0.5 transition-all duration-300"),h(4),P(e.showVetReports()?8:7)}}function kx(i,t){if(i&1){let e=N();l(0,"app-habitat-comment",48),w("commentAdded",function(){C(e);let a=f(2);return S(a.closeHabitatModal())}),c()}if(i&2){let e=f(2);x("habitatId",e.selectedHabitatId())}}function Ax(i,t){if(i&1){let e=N();l(0,"app-habitat-comment-history",49),w("close",function(){C(e);let a=f(2);return S(a.closeHabitatHistoryModal())}),c()}if(i&2){let e,n=f(2);x("habitatId",n.selectedHabitatId())("habitatImage",(e=(e=n.getSelectedHabitat())==null?null:e.images)!==null&&e!==void 0?e:"")("habitatName",n.getHabitatName(n.selectedHabitatId()))}}function Lx(i,t){if(i&1&&y(0,"app-veterinary-reports",24),i&2){let e=f(2);x("animalId",e.selectedAnimalId())}}function Ex(i,t){if(i&1){let e=N();l(0,"div",7)(1,"div",8)(2,"h2",9),y(3,"i",10),u(4,"Animaux "),c(),y(5,"div",11),c(),l(6,"div",12),z(7,bx,33,12,"div",13,vx),c()(),l(9,"div",7)(10,"div",8)(11,"h2",9),y(12,"i",14),u(13,"Habitats "),c()(),l(14,"div",15),z(15,wx,9,9,"div",16,yx),c()(),l(17,"app-modal",17),w("close",function(){C(e);let a=f();return S(a.closeHistoryModal())}),l(18,"div",18),k(19,Sx,9,9),c()(),l(20,"app-modal",17),w("close",function(){C(e);let a=f();return S(a.closeHabitatModal())}),l(21,"div",19),k(22,kx,1,1,"app-habitat-comment",20),l(23,"div",21)(24,"app-button",22),w("click",function(){C(e);let a=f();return S(a.closeHabitatModal())})("keydown",function(){C(e);let a=f();return S(a.closeHabitatModal())}),c()()()(),l(25,"app-modal",17),w("close",function(){C(e);let a=f();return S(a.closeHabitatHistoryModal())}),k(26,Ax,1,3,"app-habitat-comment-history",23),c(),l(27,"app-modal",17),w("close",function(){C(e);let a=f();return S(a.closeReportModal())}),l(28,"div",19),k(29,Lx,1,1,"app-veterinary-reports",24),l(30,"div",21)(31,"app-button",22),w("click",function(){C(e);let a=f();return S(a.closeReportModal())})("keydown",function(){C(e);let a=f();return S(a.closeReportModal())}),c()()()()}if(i&2){let e=f();h(7),X(e.animals()),h(8),X(e.habitats()),h(2),x("isOpen",e.isHistoryModalOpen()),h(2),P(e.selectedAnimalId()?19:-1),h(),x("isOpen",e.isHabitatModalOpen()),h(2),P(e.selectedHabitatId()?22:-1),h(2),x("text","Fermer")("type","button")("color","secondary")("rounded",!0),h(),x("isOpen",e.isHabitatHistoryModalOpen()),h(),P(e.selectedHabitatId()?26:-1),h(),x("isOpen",e.isReportModalOpen()),h(2),P(e.selectedAnimalId()?29:-1),h(2),x("text","Fermer")("type","button")("color","secondary")("rounded",!0)}}var Ui=class i{constructor(t,e,n,a){this.habitatService=t;this.animalService=e;this.habitatCommentService=n;this.animalFeedingService=a}habitats=A([]);animals=A([]);activeTab=A("overview");selectedAnimalId=A(null);selectedHabitatId=A(null);_isHistoryModalOpen=A(!1);_isHabitatModalOpen=A(!1);_isHabitatHistoryModalOpen=A(!1);habitatComments=A([]);activeHistoryTab="meals";habitatCommentsMap=A(new Map);_isReportModalOpen=A(!1);_showVetReports=A(!1);showVetReports=fe(()=>this._showVetReports());hasHistory=A(!1);ngOnInit(){this.loadHabitats(),this.loadAnimals()}setActiveTab(t){this.activeTab.set(t)}loadHabitats(){this.habitatService.getHabitats().subscribe({next:t=>this.habitats.set(t),error:t=>console.error("Erreur lors du chargement des habitats:",t)})}loadAnimals(){this.animalService.getAnimals().subscribe({next:t=>this.animals.set(t),error:t=>console.error("Erreur lors du chargement des animaux:",t)})}selectAnimal(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}selectHabitat(t){this.selectedHabitatId.set(t),this._isHabitatModalOpen.set(!0)}closeHistoryModal(){this._isHistoryModalOpen.set(!1),this.selectedAnimalId.set(null),this._showVetReports.set(!1)}closeHabitatModal(){this._isHabitatModalOpen.set(!1),this.selectedHabitatId.set(null)}viewHabitatComments(t){this.selectedHabitatId.set(t),this.loadHabitatComments(t),this._isHabitatHistoryModalOpen.set(!0)}loadHabitatComments(t){this.habitatCommentService.getCommentsByHabitatId(t).subscribe({next:e=>{let n=new Map(this.habitatCommentsMap());n.set(t,e),this.habitatCommentsMap.set(n)},error:e=>{console.error("Erreur lors du chargement des commentaires:",e)}})}closeHabitatHistoryModal(){this._isHabitatHistoryModalOpen.set(!1),this.selectedHabitatId.set(null),this.habitatComments.set([])}openReportForm(t){this.selectedAnimalId.set(t),this._isReportModalOpen.set(!0)}closeReportModal(){this._isReportModalOpen.set(!1),this.selectedAnimalId.set(null)}getHabitatName(t){let e=this.habitats().find(n=>n.id_habitat===t);return e?e.name:"Non assign\xE9"}openFeedingHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0)}isHistoryModalOpen=fe(()=>this._isHistoryModalOpen());isHabitatModalOpen=fe(()=>this._isHabitatModalOpen());isHabitatHistoryModalOpen=fe(()=>this._isHabitatHistoryModalOpen());isReportModalOpen=fe(()=>this._isReportModalOpen());getSelectedHabitat(){return this.habitats().find(t=>t.id_habitat===this.selectedHabitatId())}setActiveHistoryTab(t){this.activeHistoryTab=t,t==="habitats"&&this.habitats().forEach(e=>{this.loadHabitatComments(e.id_habitat)})}viewConsultations(t){console.log("Voir les consultations pour l'animal:",t)}getHabitatComments(t){return this.habitatCommentsMap().get(t)||[]}toggleHistoryView(t){this._showVetReports.set(t)}openVetReportsHistory(t){this.selectedAnimalId.set(t),this._isHistoryModalOpen.set(!0),this._showVetReports.set(!0)}loadFeedingHistory(t){this.animalFeedingService.getFeedingHistory(t).subscribe({next:e=>{this.hasHistory.set(e.length>0)},error:e=>{console.error("Erreur lors du chargement de l'historique:",e)}})}getAnimals(){return this.animalService.getAnimals()}static \u0275fac=function(e){return new(e||i)(E(Rt),E(Di),E(Ut),E($n))};static \u0275cmp=L({type:i,selectors:[["app-veterinary-dashboard"]],standalone:!0,features:[H],decls:9,vars:1,consts:[[1,"relative","bg-gradient-to-r","from-secondary","to-tertiary/90","shadow-lg"],[1,"absolute","inset-0","bg-[url('/assets/patterns/subtle-dots.png')]","opacity-10"],[1,"container","mx-auto","px-4","py-12"],[1,"relative","z-10"],[1,"flex","flex-col","items-center","justify-center","space-y-4"],[1,"text-4xl","md:text-6xl","font-serif","text-white","font-bold","tracking-tight"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-16"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-serif","text-tertiary","font-bold"],[1,"fas","fa-paw","mr-2"],[1,"flex","space-x-2"],[1,"grid","grid-cols-1","sm:grid-cols-4","lg:grid-cols-4","gap-6","md:gap-8"],[1,"group","relative","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"fas","fa-home","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6","md:gap-8"],[1,"group","bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[3,"close","isOpen"],[1,"w-full","max-w-3xl","mx-auto","bg-white/95","backdrop-blur-sm","p-6","rounded-xl","shadow-xl"],[1,"w-full","max-w-4xl","mx-auto","bg-white/95","backdrop-blur-sm","p-4","sm:p-6","rounded-xl","shadow-xl"],[3,"habitatId"],[1,"flex","justify-center","mt-6"],[1,"w-32","shadow-sm","hover:shadow-md","transition-all","duration-300",3,"click","keydown","text","type","color","rounded"],[3,"habitatId","habitatImage","habitatName"],[3,"animalId"],[1,"relative","h-56","overflow-hidden"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-300",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/60","to-transparent"],[1,"absolute","bottom-4","left-4","text-2xl","font-serif","text-white","font-bold"],[1,"p-6"],[1,"w-full","text-sm"],[1,"text-left","text-tertiary","font-medium","pr-2"],[1,"text-left","text-tertiary","font-medium"],[1,"text-tertiary","font-medium","pr-2"],[1,"text-quinary/80"],[1,"text-quinary/80","line-clamp-2"],[1,"grid","grid-cols-2","gap-2","mt-4"],[1,"transform","hover:-translate-y-0.5","transition-all","duration-300",3,"click","keydown","text","color","rounded"],[1,"relative","h-48","overflow-hidden"],[1,"grid","grid-cols-2","gap-2","p-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","gap-4"],[3,"click","keydown","text","color","rounded","customClass"],[1,"rounded-full","p-2","hover:bg-tertiary/10","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-tertiary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 18L18 6M6 6l12 12"],[1,"min-h-[400px]","flex","flex-col"],[1,"min-h-[400px]"],[3,"commentAdded","habitatId"],[3,"close","habitatId","habitatImage","habitatName"]],template:function(e,n){e&1&&(l(0,"section",0),y(1,"div",1),l(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),u(6," Tableau de Bord V\xE9t\xE9rinaire "),c()()()()(),l(7,"div",6),k(8,Ex,32,16),c()),e&2&&(h(8),P(n.activeTab()==="overview"?8:-1))},dependencies:[Z,Ei,ns,ss,Ve,as,ls],encapsulation:2})};var cs=class i{animals=[];count=4;updateAnimals=new R;intervalSubscription;ngOnInit(){this.updateDisplayedAnimals(),this.intervalSubscription=Jr(5e3).subscribe(()=>{this.updateDisplayedAnimals()})}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}updateDisplayedAnimals(){let e=[...this.animals].sort(()=>.5-Math.random()).slice(0,this.count);this.updateAnimals.emit(e)}static \u0275fac=function(e){return new(e||i)};static \u0275dir=Zi({type:i,selectors:[["","appRandomAnimals",""]],inputs:{animals:"animals",count:"count"},outputs:{updateAnimals:"updateAnimals"},standalone:!0})};var ds=class i{constructor(t){this.http=t}apiUrl=`${he.apiUrl}/api/animals`;uploadsUrl=`${he.apiUrl}/api/uploads/animals`;getAnimals(){return this.http.get(this.apiUrl).pipe(Zr(t=>t.map(e=>ue(U({},e),{images:this.formatImageUrl(e.images)}))))}formatImageUrl(t){return t?t.startsWith("http")?t:`${this.uploadsUrl}/${t.replace(/^uploads\/animals\//,"")}`:null}static \u0275fac=function(e){return new(e||i)(oe(mt))};static \u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"})};var Fx=(i,t)=>t.id_animal,Mx=i=>["/animal",i];function Vx(i,t){if(i&1&&(l(0,"div",7)(1,"a",8)(2,"div",9)(3,"div",10),y(4,"img",11),c()(),l(5,"div",12)(6,"h3",13),u(7),c(),l(8,"span",14),u(9," Cliquez pour d\xE9couvrir "),c()(),l(10,"div",15)(11,"h3",16),u(12),c()()()()),i&2){let e=t.$implicit;h(),x("routerLink",Vt(5,Mx,e.id_animal)),h(3),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(5),F(" ",e.name," ")}}var ms=class i{constructor(t,e){this.animalOverviewService=t;this.route=e}animal=A(void 0);animals=A([]);displayedAnimals=A([]);imageBaseUrl=`${he.apiUrl}/api/uploads/animals`;ngOnInit(){this.loadAnimals()}loadAnimals(){this.animalOverviewService.getAnimals().subscribe({next:t=>{this.animals.set(t),this.displayedAnimals.set(this.getRandomAnimals(t,3))},error:t=>console.error("Erreur lors du chargement des animaux:",t)})}getRandomAnimals(t,e){return[...t].sort(()=>.5-Math.random()).slice(0,e)}onUpdateDisplayedAnimals(t){this.displayedAnimals.set(t)}static \u0275fac=function(e){return new(e||i)(E(ds),E(Po))};static \u0275cmp=L({type:i,selectors:[["app-animals-overview"]],standalone:!0,features:[H],decls:11,vars:2,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],["appRandomAnimals","",1,"max-w-7xl","mx-auto",3,"updateAnimals","animals","count"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group",3,"routerLink"],[1,"relative","group","rounded-xl","overflow-hidden"],[1,"aspect-square","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Animaux "),c(),l(5,"p",4),u(6," D\xE9couvrez nos animaux fascinants qui peuplent nos trois habitats uniques : la jungle luxuriante, les marais myst\xE9rieux et la savane aride. Chaque animal r\xE9v\xE8le un aper\xE7u captivant de son habitat naturel. "),c()(),l(7,"div",5),w("updateAnimals",function(s){return n.onUpdateDisplayedAnimals(s)}),l(8,"div",6),z(9,Vx,13,7,"div",7,Fx),c()()()()),e&2&&(h(7),x("animals",n.animals())("count",3),h(2),X(n.displayedAnimals()))},dependencies:[Pt,cs],encapsulation:2})};var Ox=(i,t)=>t.id_habitat,Ix=i=>["/habitat",i];function Px(i,t){if(i&1&&(l(0,"div",6)(1,"a",7),y(2,"img",8),l(3,"div",9)(4,"h3",10),u(5),c(),l(6,"p",11),u(7),c()(),l(8,"div",12)(9,"h3",13),u(10),c()()()()),i&2){let e=t.$implicit;h(),x("routerLink",Vt(6,Ix,e.id_habitat)),h(),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(2),F(" ",e.description," "),h(3),F(" ",e.name," ")}}var hs=class i{constructor(t){this.habitatService=t}destroyRef=G(_i);habitats=A([]);ngOnInit(){this.loadHabitats()}loadHabitats(){this.habitatService.getHabitats().pipe(Fi(this.destroyRef)).subscribe({next:t=>{this.habitats.set(t.map(this.formatHabitatImage))},error:t=>console.error("Erreur lors du chargement des habitats:",t)})}formatHabitatImage(t){let e="";return t.images&&(e=t.images.startsWith("http")?t.images:`${he.apiUrl}/uploads/${t.images}`),ue(U({},t),{images:e})}static \u0275fac=function(e){return new(e||i)(E(Rt))};static \u0275cmp=L({type:i,selectors:[["app-habitats-overview"]],standalone:!0,features:[H],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Habitats "),c(),l(5,"p",4),u(6," Explorez la beaut\xE9 sauvage et la diversit\xE9 fascinante de trois \xE9cosyst\xE8mes uniques : la savane, la jungle et les marais. Chaque habitat vous d\xE9voile la richesse de la vie sous ses formes les plus \xE9tonnantes. "),c()(),l(7,"div",5),z(8,Px,11,8,"div",6,Ox),c()()()),e&2&&(h(8),X(n.habitats()))},dependencies:[Pt],encapsulation:2})};var Hx=(i,t)=>t.id_service,Rx=i=>["/service",i];function Nx(i,t){if(i&1&&(l(0,"div",6)(1,"a",7),y(2,"img",8),l(3,"div",9)(4,"h3",10),u(5),c(),l(6,"p",11),u(7),c()(),l(8,"div",12)(9,"h3",13),u(10),c()()()()),i&2){let e=t.$implicit;h(),x("routerLink",Vt(6,Rx,e.id_service)),h(),x("src",e.images,Ce)("alt",e.name),h(3),F(" ",e.name," "),h(2),F(" ",e.description," "),h(3),F(" ",e.name," ")}}var us=class i{constructor(t){this.serviceService=t}destroyRef=G(_i);services=A([]);ngOnInit(){this.loadServices()}loadServices(){this.serviceService.getServices().pipe(Fi(this.destroyRef)).subscribe({next:t=>{this.services.set(t.map(this.formatServiceImage))},error:t=>console.error("Erreur lors du chargement des services:",t)})}formatServiceImage(t){return ue(U({},t),{images:t.images?.startsWith("http")?t.images:`${he.apiUrl}/api/${t.images}`})}static \u0275fac=function(e){return new(e||i)(E(Nn))};static \u0275cmp=L({type:i,selectors:[["app-services-overview"]],standalone:!0,features:[H],decls:10,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-secondary","to-primary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden"],[1,"block","relative","group","aspect-square",3,"routerLink"],[1,"w-full","h-full","object-cover","transform","group-hover:scale-105","transition-transform","duration-500",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6"],[1,"text-primary","text-xl","md:text-2xl","font-serif","font-semibold","mb-4"],[1,"text-primary/90","text-sm","md:text-base","text-center","line-clamp-3"],[1,"absolute","bottom-0","left-0","right-0","bg-tertiary/80","backdrop-blur-sm","p-4","transform","translate-y-0","group-hover:translate-y-full","transition-transform","duration-300"],[1,"text-primary","text-lg","font-serif","font-semibold","text-center"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Nos Services "),c(),l(5,"p",4),u(6," D\xE9couvrez nos services pour une exp\xE9rience enrichissante au zoo ! Profitez de nos diff\xE9rentes options pour rendre votre visite inoubliable. "),c()(),l(7,"div",5),z(8,Nx,11,8,"div",6,Hx),c()()()),e&2&&(h(8),X(n.services()))},dependencies:[Pt],encapsulation:2})};function Gx(i,t){i&1&&(l(0,"span"),u(1,"Le nom est requis"),c())}function $x(i,t){i&1&&(l(0,"span"),u(1,"Le nom doit contenir au moins 2 caract\xE8res"),c())}function zx(i,t){i&1&&(l(0,"span"),u(1,"Le nom contient des caract\xE8res non autoris\xE9s"),c())}function Xx(i,t){if(i&1&&(l(0,"div",11),k(1,Gx,2,0,"span")(2,$x,2,0,"span")(3,zx,2,0,"span"),c()),i&2){let e,n=f();h(),P(!((e=n.opinionForm.get("name"))==null||e.errors==null)&&e.errors.required?1:!((e=n.opinionForm.get("name"))==null||e.errors==null)&&e.errors.minlength?2:!((e=n.opinionForm.get("name"))==null||e.errors==null)&&e.errors.pattern?3:-1)}}function Wx(i,t){i&1&&(l(0,"span"),u(1,"L'avis est requis"),c())}function Yx(i,t){i&1&&(l(0,"span"),u(1,"L'avis doit contenir au moins 10 caract\xE8res"),c())}function qx(i,t){i&1&&(l(0,"span"),u(1,"L'avis ne doit pas d\xE9passer 500 caract\xE8res"),c())}function jx(i,t){if(i&1&&(l(0,"div",11),k(1,Wx,2,0,"span")(2,Yx,2,0,"span")(3,qx,2,0,"span"),c()),i&2){let e,n=f();h(),P(!((e=n.opinionForm.get("message"))==null||e.errors==null)&&e.errors.required?1:!((e=n.opinionForm.get("message"))==null||e.errors==null)&&e.errors.minlength?2:!((e=n.opinionForm.get("message"))==null||e.errors==null)&&e.errors.maxlength?3:-1)}}function Ux(i,t){i&1&&(l(0,"div",11),u(1,"Veuillez attribuer une note"),c())}function Qx(i,t){i&1&&(l(0,"span"),u(1,"La date est requise"),c())}function Zx(i,t){i&1&&(l(0,"span"),u(1,"La date ne peut pas \xEAtre dans le futur"),c())}function Kx(i,t){if(i&1&&(l(0,"div",11),k(1,Qx,2,0,"span")(2,Zx,2,0,"span"),c()),i&2){let e,n=f();h(),P(!((e=n.opinionForm.get("date"))==null||e.errors==null)&&e.errors.required?1:!((e=n.opinionForm.get("date"))==null||e.errors==null)&&e.errors.futureDate?2:-1)}}var ps=class i{constructor(t,e,n){this.fb=t;this.userOpinionsService=e;this.toastService=n;this.currentDate=new Date().toISOString().split("T")[0],this.opinionForm=this.fb.group({})}opinionForm;currentDate;isOpen=!1;opinionAdded=new R;closeModal=new R;ngOnInit(){this.initForm()}initForm(){this.opinionForm=this.fb.group({name:["",[W.required,W.minLength(2),W.maxLength(50),W.pattern(/^[a-zA-ZÀ-ÿ\s'-]*$/)]],message:["",[W.required,W.minLength(10),W.maxLength(500),W.pattern(/^[a-zA-ZÀ-ÿ0-9\s.,!?'"()-]*$/)]],rating:[0,[W.required,W.min(1),W.max(5)]],date:["",[W.required,this.futureDateValidator]]})}futureDateValidator(t){if(!t.value)return null;let e=new Date(t.value),n=new Date,a=new Date(e.toDateString()),s=new Date(n.toDateString());return a>s?{futureDate:!0}:null}onSubmit(){if(this.opinionForm.valid){let t=U({},this.opinionForm.value);this.userOpinionsService.addUserOpinions(t).subscribe({next:()=>{this.toastService.showSuccess("Votre avis a \xE9t\xE9 envoy\xE9 avec succ\xE8s ! Merci de votre contribution.",2500),this.opinionForm.reset(),this.opinionAdded.emit(),setTimeout(()=>this.closeModal.emit(),2500)},error:e=>{console.error("Erreur lors de l'envoi de l'avis",e),this.toastService.showError("Une erreur est survenue lors de l'envoi de votre avis. Veuillez r\xE9essayer.")}})}}onClose(){this.closeModal.emit()}static \u0275fac=function(e){return new(e||i)(E(gt),E(Xn),E(Me))};static \u0275cmp=L({type:i,selectors:[["app-add-user-opinions"]],inputs:{isOpen:"isOpen"},outputs:{opinionAdded:"opinionAdded",closeModal:"closeModal"},standalone:!0,features:[H],decls:33,vars:17,consts:[[1,"max-w-2xl","mx-auto","bg-white/95","rounded-2xl","shadow-xl","relative","overflow-hidden"],[1,"bg-tertiary/10","px-8","py-6","border-b","border-tertiary/20","flex","justify-between","items-center"],[1,"text-2xl","font-serif","text-tertiary","font-bold"],[1,"p-2","hover:bg-tertiary/10","rounded-full","transition-all","duration-300",3,"click"],[1,"fas","fa-times","text-tertiary"],[1,"relative"],[1,"px-8","py-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["for","name",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","text","id","name","formControlName","name","placeholder","Votre nom",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],[1,"mt-1","text-sm","text-red-500"],["for","message",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["id","message","formControlName","message","rows","4","placeholder","Partagez votre exp\xE9rience...",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","resize-none","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50"],["for","rating",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],[1,"p-3.5","border-2","border-tertiary/20","rounded-xl","bg-white","hover:border-tertiary/50","transition-all","duration-300"],["formControlName","rating",1,"w-full"],["for","date",1,"mb-2","font-sans","text-quinary","font-medium","text-sm"],["type","date","id","date","formControlName","date",1,"w-full","p-3.5","border-2","border-tertiary/20","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-tertiary/30","focus:border-tertiary","font-sans","transition-all","duration-300","ease-in-out","bg-white","hover:border-tertiary/50",3,"max"],[1,"bg-tertiary/10","px-8","py-6","border-t","border-tertiary/20","flex","justify-center"],[1,"w-full","sm:w-1/2","md:w-1/3","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"keyup","keyup.enter","click","text","type","disabled","rounded","color"]],template:function(e,n){if(e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),u(3," Partagez votre exp\xE9rience "),c(),l(4,"button",3),w("click",function(){return n.onClose()}),y(5,"i",4),c()(),l(6,"div",5),y(7,"app-toast"),c(),l(8,"div",6)(9,"form",7),w("ngSubmit",function(){return n.onSubmit()}),l(10,"div",8)(11,"label",9),u(12," Nom "),c(),y(13,"input",10),k(14,Xx,4,1,"div",11),c(),l(15,"div",8)(16,"label",12),u(17," Votre avis "),c(),y(18,"textarea",13),k(19,jx,4,1,"div",11),c(),l(20,"div",8)(21,"label",14),u(22," Note "),c(),l(23,"div",15),y(24,"app-rate",16),c(),k(25,Ux,2,0,"div",11),c(),l(26,"div",8)(27,"label",17),u(28," Date de votre visite "),c(),y(29,"input",18),k(30,Kx,3,1,"div",11),c()()(),l(31,"div",19)(32,"app-button",20),w("keyup",function(){return n.onSubmit()})("keyup.enter",function(){return n.onSubmit()})("click",function(){return n.onSubmit()}),c()()()),e&2){let a,s,r,o,m,d,p;h(9),x("formGroup",n.opinionForm),h(4),ne("border-red-500",((a=n.opinionForm.get("name"))==null||a.errors==null?null:a.errors.required)&&((a=n.opinionForm.get("name"))==null?null:a.touched)),h(),P((s=n.opinionForm.get("name"))!=null&&s.errors&&((s=n.opinionForm.get("name"))!=null&&s.touched)?14:-1),h(4),ne("border-red-500",((r=n.opinionForm.get("message"))==null||r.errors==null?null:r.errors.required)&&((r=n.opinionForm.get("message"))==null?null:r.touched)),h(),P((o=n.opinionForm.get("message"))!=null&&o.errors&&((o=n.opinionForm.get("message"))!=null&&o.touched)?19:-1),h(6),P(!((m=n.opinionForm.get("rating"))==null||m.errors==null)&&m.errors.required&&((m=n.opinionForm.get("rating"))!=null&&m.touched)?25:-1),h(4),ne("border-red-500",((d=n.opinionForm.get("date"))==null||d.errors==null?null:d.errors.required)&&((d=n.opinionForm.get("date"))==null?null:d.touched)),x("max",n.currentDate),h(),P((p=n.opinionForm.get("date"))!=null&&p.errors&&((p=n.opinionForm.get("date"))!=null&&p.touched)?30:-1),h(2),x("text","Envoyer mon avis")("type","submit")("disabled",!n.opinionForm.valid)("rounded",!0)("color","tertiary")}},dependencies:[Z,Je,Ke,Ne,Be,Ze,ut,pt,Ve,zn,Ht],encapsulation:2})};function Jx(i,t){i&1&&(l(0,"div",6),y(1,"i",14),l(2,"p",15),u(3,"Chargement des avis..."),c()())}function e_(i,t){if(i&1){let e=N();l(0,"div",7)(1,"p",16),u(2," Une erreur est survenue lors du chargement des avis. "),c(),l(3,"app-button",17),w("click",function(){C(e);let a=f();return S(a.loadUserOpinions())})("keydown",function(){C(e);let a=f();return S(a.loadUserOpinions())}),c()()}i&2&&(h(3),x("text","R\xE9essayer")("type","button")("color","tertiary")("rounded",!0))}function t_(i,t){if(i&1){let e=N();l(0,"button",32),w("click",function(){let a=C(e).$index,s=f(2);return S(s.currentUserOpinionsIndex.set(a))}),c()}if(i&2){let e=t.$index,n=f(2);ne("bg-tertiary",e===n.currentUserOpinionsIndex())("bg-tertiary",e!==n.currentUserOpinionsIndex())}}function i_(i,t){if(i&1){let e=N();l(0,"div",8)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",21),u(5),c()(),l(6,"div")(7,"h3",22),u(8),c(),l(9,"p",23),u(10),Xe(11,"date"),c()()(),y(12,"app-rate",24),c(),l(13,"p",25),u(14),c(),l(15,"div",26)(16,"app-button",27),w("click",function(){C(e);let a=f();return S(a.changeUserOpinions("previous"))})("keydown",function(){C(e);let a=f();return S(a.changeUserOpinions("previous"))}),y(17,"i",28),c(),l(18,"div",29),z(19,t_,1,4,"button",30,po),c(),l(21,"app-button",27),w("click",function(){C(e);let a=f();return S(a.changeUserOpinions("next"))})("keydown",function(){C(e);let a=f();return S(a.changeUserOpinions("next"))}),y(22,"i",31),c()()()}if(i&2){let e=f();h(5),F(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name.charAt(0)," "),h(3),F(" ",e.userOpinions()[e.currentUserOpinionsIndex()].name," "),h(2),F(" ",yo(11,18,e.userOpinions()[e.currentUserOpinionsIndex()].date,"dd MMMM yyyy","fr-FR")," "),h(2),x("rating",e.currentRating)("isReadOnly",e.isReadOnly),h(2),F(' "',e.userOpinions()[e.currentUserOpinionsIndex()].message,'" '),h(2),x("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===0)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0
                           transition-all duration-300 transform hover:-translate-x-1`),h(3),X(e.userOpinions()),h(2),x("text","")("type","button")("color","tertiary")("rounded",!0)("disabled",e.currentUserOpinionsIndex()===e.userOpinions().length-1)("customClass",`!w-10 !h-10 flex items-center justify-center !p-0
                           transition-all duration-300 transform hover:translate-x-1`)}}function n_(i,t){i&1&&(l(0,"p",9),u(1," Aucun avis disponible pour le moment. "),c())}var gs=class i{constructor(t,e){this.userOpinionsService=t;this.toastService=e}isReadOnly=A(!0);userOpinions=A([]);currentUserOpinionsIndex=A(0);currentRating=A(0);isLoading=A(!0);hasError=A(!1);isModalOpen=A(!1);opinionsSubscription;ngOnInit(){this.loadUserOpinions()}loadUserOpinions(){this.isLoading.set(!0),this.hasError.set(!1),this.opinionsSubscription=this.userOpinionsService.getUserOpinions().subscribe({next:t=>{this.userOpinions.set(t),this.updateCurrentRating(),this.isLoading.set(!1)},error:t=>{console.error("Erreur lors du chargement des avis:",t),this.hasError.set(!0),this.isLoading.set(!1),this.toastService.showError("Impossible de charger les avis utilisateurs")}})}ngOnDestroy(){this.opinionsSubscription?.unsubscribe()}updateCurrentRating(){let t=this.userOpinions(),e=this.currentUserOpinionsIndex();t[e]&&this.currentRating.set(t[e].rating)}changeUserOpinions(t){let e=this.currentUserOpinionsIndex(),n=this.userOpinions().length-1;t==="previous"&&e>0?this.currentUserOpinionsIndex.set(e-1):t==="next"&&e<n&&this.currentUserOpinionsIndex.set(e+1),this.updateCurrentRating()}openModal(){this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}static \u0275fac=function(e){return new(e||i)(E(Xn),E(Me))};static \u0275cmp=L({type:i,selectors:[["app-user-opinions"]],standalone:!0,features:[H],decls:16,vars:7,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"text-lg","md:text-xl","text-tertiary","font-serif","italic","max-w-4xl","mx-auto"],[1,"max-w-3xl","mx-auto"],[1,"text-center","py-8","text-tertiary"],[1,"text-center","py-8"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","shadow-xl","p-8","mb-8","transition-all","duration-300","border","border-secondary/20"],[1,"text-center","text-tertiary/70"],[1,"text-center","mt-8"],[3,"click","keydown","text","type","color","rounded","customClass"],[3,"closed","isOpen"],[3,"closeModal"],[1,"fas","fa-circle-notch","fa-spin","text-3xl"],[1,"mt-4"],[1,"text-red-500","mb-4"],[1,"w-auto","mx-auto","font-bold","shadow-md","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1",3,"click","keydown","text","type","color","rounded"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-tertiary","rounded-full","flex","items-center","justify-center","shadow-md"],[1,"text-primary","text-xl","font-semibold"],[1,"font-serif","font-semibold","text-lg","text-tertiary"],[1,"text-sm","text-tertiary/70"],[3,"rating","isReadOnly"],[1,"text-quinary/80","mb-6","italic","text-lg","leading-relaxed"],[1,"flex","justify-between","items-center"],[3,"click","keydown","text","type","color","rounded","disabled","customClass"],[1,"fas","fa-chevron-left"],[1,"flex","gap-2"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"bg-tertiary"],[1,"fas","fa-chevron-right"],[1,"w-2","h-2","rounded-full","transition-all","duration-300",3,"click"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Avis de nos visiteurs "),c(),l(5,"p",4),u(6," D\xE9couvrez ce que nos visiteurs pensent de leur exp\xE9rience "),c()(),l(7,"div",5),k(8,Jx,4,0,"div",6)(9,e_,4,4,"div",7)(10,i_,23,22,"div",8)(11,n_,2,0,"p",9),l(12,"div",10)(13,"app-button",11),w("click",function(){return n.openModal()})("keydown",function(){return n.openModal()}),c()()()()(),l(14,"app-modal",12),w("closed",function(){return n.closeModal()}),l(15,"app-add-user-opinions",13),w("closeModal",function(){return n.closeModal()}),c()()),e&2&&(h(8),P(n.isLoading()?8:n.hasError()?9:n.userOpinions().length>0?10:11),h(5),x("text","Partagez votre exp\xE9rience")("type","button")("color","tertiary")("rounded",!0)("customClass",`!w-auto !px-8 !py-4 font-bold shadow-md hover:shadow-lg
                         transition-all duration-300 transform hover:-translate-y-1`),h(),x("isOpen",n.isModalOpen()))},dependencies:[zn,Ve,It,Ei,ps],encapsulation:2})};var fs=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-zoo-intro"]],standalone:!0,features:[H],decls:17,vars:0,consts:[[1,"w-full","bg-gradient-to-b","from-primary","to-secondary","shadow-lg","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","space-y-4","mb-12"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-serif","font-bold","text-quinary"],[1,"max-w-7xl","mx-auto"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","p-8","shadow-xl","border","border-secondary/20","mb-12","relative"],[1,"absolute","-top-4","left-4","md:-top-6","md:left-6"],[1,"fas","fa-quote-left","text-tertiary/50","text-4xl","md:text-5xl"],[1,"text-base","md:text-xl","text-quinary/90","font-sans","leading-relaxed","text-center","max-w-5xl","mx-auto","pt-6"],[1,"relative","group","rounded-2xl","overflow-hidden","shadow-xl","hover:shadow-2xl","transition-all","duration-300"],["src","images/img_home/img-back.webp","alt","Vue du Zoo Arcadia",1,"w-full","h-[300px]","md:h-[500px]","object-cover","transform","group-hover:scale-105","transition-transform","duration-500"],[1,"absolute","inset-0","bg-gradient-to-t","from-tertiary/90","to-tertiary/60","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","flex-col","justify-center","items-center","p-6","md:p-12"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-6","max-w-4xl"],[1,"text-primary","text-center","text-sm","md:text-xl","font-sans"]],template:function(e,n){e&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),u(4," Bienvenue au Zoo Arcadia "),c()(),l(5,"div",4)(6,"div",5)(7,"div",6),y(8,"i",7),c(),l(9,"p",8),u(10," Le Zoo Arcadia, fond\xE9 en 1960, est un parc zoologique situ\xE9 pr\xE8s de la l\xE9gendaire for\xEAt de Broc\xE9liande, en Bretagne, France. Ce zoo, reconnu pour son engagement en faveur du bien-\xEAtre animal et de l'\xE9cologie, est un lieu de conservation o\xF9 les animaux sont soigneusement r\xE9partis selon leurs habitats naturels : savane, jungle, et marais. "),c()(),l(11,"div",9),y(12,"img",10),l(13,"div",11)(14,"div",12)(15,"p",13),u(16," Chaque jour, une \xE9quipe de v\xE9t\xE9rinaires effectue des contr\xF4les rigoureux sur chaque animal avant l'ouverture du zoo pour garantir leur bonne sant\xE9. L'alimentation des animaux est minutieusement calcul\xE9e pour r\xE9pondre aux besoins nutritionnels sp\xE9cifiques de chaque esp\xE8ce. "),c()()()()()()())},encapsulation:2})};var xs=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=L({type:i,selectors:[["app-home"]],standalone:!0,features:[H],decls:5,vars:0,template:function(e,n){e&1&&y(0,"app-zoo-intro")(1,"app-habitats-overview")(2,"app-animals-overview")(3,"app-services-overview")(4,"app-user-opinions")},dependencies:[gs,fs,hs,ms,us],encapsulation:2})};var a_=[{path:"",component:xs,title:"Accueil - Zoo Arcadia"},{path:"animal/:id",loadComponent:()=>import("./chunk-W7NL4JJY.js").then(i=>i.AnimalComponent),title:"Animal"},{path:"habitat/:id",loadComponent:()=>import("./chunk-PGEQLBUC.js").then(i=>i.HabitatComponent),title:"Habitat"},{path:"habitats",loadComponent:()=>import("./chunk-2C3KWMUL.js").then(i=>i.HabitatsComponent),title:"Habitats"},{path:"services",loadComponent:()=>import("./chunk-OWDZFT2H.js").then(i=>i.ServicesComponent),title:"Services"},{path:"service/:id",loadComponent:()=>import("./chunk-ACTFOHSQ.js").then(i=>i.ServiceComponent),title:"Service"},{path:"contact",loadComponent:()=>import("./chunk-SWRJWRLH.js").then(i=>i.ContactComponent),title:"Contact"}],s_=[{path:"admin",component:Ja,children:[{path:"animal-management",component:ts},{path:"account-management",loadComponent:()=>import("./chunk-RHT5JDUC.js").then(i=>i.AccountManagementComponent),title:"Gestion des comptes"},{path:"service-management",loadComponent:()=>import("./chunk-EA3TMODA.js").then(i=>i.ServiceManagementComponent),title:"Modification des services"},{path:"habitat-management",loadComponent:()=>import("./chunk-3AF3H3JF.js").then(i=>i.HabitatManagementComponent),title:"Gestion des habitats"},{path:"veterinary-reports",loadComponent:()=>import("./chunk-A34X23JK.js").then(i=>i.ReportsVeterinaryManagement),title:"Comptes rendus des v\xE9t\xE9rinaires"},{path:"history-management",loadComponent:()=>import("./chunk-3OHXHEW5.js").then(i=>i.HistoryManagementComponent),title:"Consultation des historiques"},{path:"opening-hours-management",component:is,title:"Gestion des horaires d'ouverture"}]}],r_=[{path:"veterinaire",component:Ui,title:"Dashboard V\xE9t\xE9rinaire",canActivate:[xa],data:{roles:["Veterinaire"]},children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Ui},{path:"history",component:Ui}]}],o_=[{path:"employe",loadComponent:()=>import("./chunk-ABBK3XEY.js").then(i=>i.EmployeDashboardComponent),title:"Employ\xE9",canActivate:[xa],data:{roles:["Employe"]},children:[{path:"",redirectTo:"pending",pathMatch:"full"},{path:"pending",loadComponent:()=>import("./chunk-KUYUBLLY.js").then(i=>i.UserOpinionManagementComponent)},{path:"validated",loadComponent:()=>import("./chunk-KUYUBLLY.js").then(i=>i.UserOpinionManagementComponent)},{path:"rejected",loadComponent:()=>import("./chunk-KUYUBLLY.js").then(i=>i.UserOpinionManagementComponent)}]}],l_=[{path:"update-password",loadComponent:()=>import("./chunk-MHZNEUHU.js").then(i=>i.UpdatePasswordComponent),title:"Modification du mot de passe",canActivate:[xa],data:{roles:["Admin","Veterinaire","Employe"]}}],um=[...a_,...s_,...r_,...o_,...l_,{path:"**",redirectTo:""}];var c_=["/api/auth/login","/api/auth/refresh","/api/public"],pm=(i,t)=>{let e=G(kt),n=G(be);return c_.some(a=>i.url.includes(a))?t(i):t(gm(i,e)).pipe(pe(a=>a.status===Fo.Unauthorized?d_(a,n,i,t):De(()=>ue(U({},a),{message:`Erreur lors de la requ\xEAte: ${a.message}`,timestamp:new Date().toISOString()}))))};function d_(i,t,e,n){let a=G(kt);return t.refreshToken().pipe(xi(()=>n(gm(e,a))),pe(s=>(t.logout(),De(()=>ue(U({},s),{message:"Session expir\xE9e. Veuillez vous reconnecter.",timestamp:new Date().toISOString()})))))}function gm(i,t){let e=t.getToken();return e?i.clone({setHeaders:{Authorization:`Bearer ${e}`,"X-Request-ID":crypto.randomUUID()},withCredentials:!0}):i.clone({withCredentials:!0})}var fm={providers:[wo({eventCoalescing:!0}),Ho(um),Mo(Vo([pm])),Nl(),{provide:To,useValue:"fr-FR"},eo(qo),Bn]};So(Zo);Io(Jn,fm).catch(i=>console.error(i));
