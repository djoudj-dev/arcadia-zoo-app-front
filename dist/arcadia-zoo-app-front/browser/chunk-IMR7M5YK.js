import{Nc as f,Qc as o,X as n,_ as l,_a as b,a as s,b as m,da as h,p,u as e}from"./chunk-RMHEMJYH.js";var g=class r{constructor(a){this.http=a}imageBaseUrl=`${o.apiUrl}/api`;apiUrl=`${o.apiUrl}/api/habitats`;habitatsCache=b([]);getHabitats(){let a=this.habitatsCache();return a.length>0?p(a):this.http.get(this.apiUrl).pipe(e(t=>t.map(i=>m(s({},i),{images:i.images?this.formatImageUrl("habitats",i.images):""}))),n(t=>this.habitatsCache.set(t)))}getHabitatById(a){return this.getHabitats().pipe(e(t=>t.find(i=>i.id_habitat===a)),n(t=>t?.images&&(t.images=this.formatImageUrl("habitats",t.images))))}getAnimalsByHabitatId(a){return this.http.get(`${this.apiUrl}/${a}/animals`).pipe(e(t=>t.map(i=>m(s({},i),{images:i.images?this.formatImageUrl("animals",i.images):""}))))}formatImageUrl(a,t){return t.startsWith("http")||t.startsWith("https")?t:`${this.imageBaseUrl}/${t}`}clearCache(){this.habitatsCache.set([])}static \u0275fac=function(t){return new(t||r)(h(f))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{g as a};
