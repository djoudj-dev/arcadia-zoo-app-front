import{Tc as c,V as p,Wc as o,Y as l,a as s,aa as b,b as n,p as m,qa as h,u as e}from"./chunk-JLM7LPRF.js";var f=class r{constructor(i){this.http=i}imageBaseUrl=`${o.apiUrl}/api`;apiUrl=`${o.apiUrl}/api/habitats`;habitatsCache=h([]);getHabitats(){let i=this.habitatsCache();return i.length>0?m(i):this.http.get(this.apiUrl).pipe(e(t=>t.map(a=>n(s({},a),{images:a.images?this.formatImageUrl("habitats",a.images):""}))),p(t=>this.habitatsCache.set(t)))}getHabitatById(i){return this.getHabitats().pipe(e(t=>t.find(a=>a.id_habitat===i)),p(t=>t?.images&&(t.images=this.formatImageUrl("habitats",t.images))))}getAnimalsByHabitatId(i){return this.http.get(`${this.apiUrl}/${i}/animals`).pipe(e(t=>t.map(a=>n(s({},a),{images:a.images?this.formatImageUrl("animals",a.images):""}))))}formatImageUrl(i,t){if(t.startsWith("http")||t.startsWith("https"))return t;if(t.includes("uploads")){let a=t.split("/");t=a[a.length-1]}return`${this.imageBaseUrl}/uploads/${i}/${t}`}clearCache(){this.habitatsCache.set([])}static \u0275fac=function(t){return new(t||r)(b(c))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{f as a};
